{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_color-scheme-model.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColorSchemeModel = exports.ItemColorScheme = void 0;\n\nvar analytics_utils_1 = require(\"@devexpress/analytics-core/analytics-utils\");\n\nvar $ = require(\"jquery\");\n\nvar ko = require(\"knockout\");\n\nvar _utils_1 = require(\"../../../data/_utils\");\n\nvar color_1 = require(\"../../../model/color\");\n\nvar color_scheme_entry_1 = require(\"../../../model/colorization/color-scheme-entry\");\n\nvar disposable_object_1 = require(\"../../../model/disposable-object\");\n\nvar _array_utils_1 = require(\"../../../model/internal/_array-utils\");\n\nvar _knockout_utils_1 = require(\"../../../model/internal/_knockout-utils\");\n\nvar data_dashboard_item_1 = require(\"../../../model/items/data-dashboard-item\");\n\nvar _base_metadata_1 = require(\"../../../model/metadata/_base-metadata\");\n\nvar _color_scheme_entry_creator_1 = require(\"./_color-scheme-entry-creator\");\n\nvar measureDefinitionEqual = function (key1, key2) {\n  return key1._id === key2._id;\n};\n\nfunction combineEntries(auto, custom) {\n  var customEntries = custom.slice();\n  var result = [];\n\n  var dimensionValuesEqual = function (value1, value2) {\n    return value1.value() === value2.value();\n  };\n\n  return auto.map(function (autoEntry) {\n    var foundCustom = customEntries.filter(function (customEntry) {\n      return customEntry.definition.equals(autoEntry.definition) && _array_utils_1.compareArrays(customEntry.dimensionKeys().map(function (key) {\n        return key.value;\n      }), autoEntry.dimensionKeys().map(function (key) {\n        return key.value;\n      }), dimensionValuesEqual) && _array_utils_1.compareArrays(customEntry.measureKeys(), autoEntry.measureKeys(), measureDefinitionEqual);\n    })[0];\n    !!foundCustom && customEntries.splice(customEntries.indexOf(foundCustom), 1);\n    return foundCustom || autoEntry;\n  }).concat(customEntries);\n}\n\nvar ItemColorScheme = function (_super) {\n  __extends(ItemColorScheme, _super);\n\n  function ItemColorScheme(item, _requestColorSchemeDelegate, _updateHub) {\n    var _this = _super.call(this) || this;\n\n    _this.generatedEntries = ko.observableArray();\n    _this.componentName = '';\n    _this.name = '';\n\n    if (item instanceof data_dashboard_item_1.DataDashboardItem) {\n      _this.componentName = item.componentName();\n      _this.name = item.name();\n    }\n\n    _this.customEntries = item.colorScheme;\n    _this.allEntries = ko.computed(function () {\n      return combineEntries(_this.generatedEntries(), _this.customEntries());\n    });\n\n    _this.toDispose(_this.allEntries);\n\n    var update = _utils_1.debounce(function () {\n      if (!_this.disposed) {\n        _requestColorSchemeDelegate(_this.componentName).done(function (scheme) {\n          var coloringSchemeEntries = analytics_utils_1.deserializeArray(scheme, function (item) {\n            return new color_scheme_entry_1.AutoColorSchemeEntry(item, null, _this.componentName, _this.name);\n          })();\n\n          _this.generatedEntries(coloringSchemeEntries);\n        });\n      }\n    }, 10);\n\n    _this.toDispose(_this.customEntries.subscribe(update));\n\n    var dashboardItemUpdated = function (args) {\n      if (args.category !== _base_metadata_1.PropertyCategory.ViewModel && args.category !== _base_metadata_1.PropertyCategory.NoUpdate && item._colorableItems().indexOf(args.item) !== -1) {\n        update();\n      }\n    };\n\n    item._colorableItems.subscribe(update);\n\n    _updateHub.dashboardItemPropertyChanged.add(dashboardItemUpdated);\n\n    _this.toDispose({\n      dispose: function () {\n        _updateHub.dashboardItemPropertyChanged.remove(dashboardItemUpdated);\n      }\n    });\n\n    update();\n    return _this;\n  }\n\n  return ItemColorScheme;\n}(disposable_object_1.DisposableObject);\n\nexports.ItemColorScheme = ItemColorScheme;\n\nfunction contains(array, item) {\n  return array.some(function (element) {\n    return element === item;\n  });\n}\n\nvar ColorSchemeModel = function () {\n  function ColorSchemeModel(dashboard, _requestColorSchemeDelegate, _updateHub) {\n    var _this = this;\n\n    this.dashboard = dashboard;\n    this._requestColorSchemeDelegate = _requestColorSchemeDelegate;\n    this._updateHub = _updateHub;\n\n    this.isSignatureAutogenerated = function (definition) {\n      return _this.itemColorSchemes[definition.componentName].generatedEntries().some(function (entry) {\n        return entry.definition.equals(definition);\n      });\n    };\n\n    this.removeEntry = function (entry) {\n      _this.getScheme(entry.definition.componentName).remove(entry);\n\n      _this.newEntry(null);\n    };\n\n    this.removeTable = function (definition) {\n      var scheme = _this.getScheme(definition.componentName);\n\n      scheme.removeAll(scheme().filter(function (entry) {\n        return entry.definition.equals(definition);\n      }));\n    };\n\n    this.initNewEntry = function () {\n      var entryCreator = new _color_scheme_entry_creator_1.ColorSchemeEntryCreator();\n\n      var entryToClone = _this.selectedSignatureEntries()[0];\n\n      var defaultNames = _this.generateDefaultNames(entryToClone);\n\n      entryCreator.addItemComponentName(entryToClone.definition.componentName);\n      entryCreator.addDataSourceName(entryToClone.definition.dataSource);\n      entryCreator.addDataMemberName(entryToClone.definition.dataMember);\n      entryToClone.dimensionKeys().map(function (key, index) {\n        entryCreator.addDimensionKey(key.definition.dataMember(), key.definition.dateTimeGroupInterval(), key.value.type(), defaultNames[index]);\n      });\n      entryCreator.addColor(color_1.Color.fromArgb(1, 0, 0, 0));\n\n      _this.newEntry(entryCreator.getEntry());\n    };\n\n    this.updateEntry = function (entry, editedEntry) {\n      var entries = _this.getScheme(editedEntry.definition.componentName);\n\n      var oldEntryIndex = entry instanceof color_scheme_entry_1.AutoColorSchemeEntry ? -1 : entries().indexOf(entry);\n\n      if (oldEntryIndex >= 0) {\n        entries.splice(oldEntryIndex, 1);\n      }\n\n      if (entries().indexOf(editedEntry) === -1) {\n        entries.push(editedEntry);\n      }\n\n      _this.newEntry(null);\n    };\n\n    this.getAvailableMeasureKeys = function () {\n      var result = [];\n      var definition = _this.selectedSignatureEntries().length > 0 ? _this.selectedSignatureEntries()[0].definition : null;\n      var itemId = definition.componentName;\n\n      var addMeasureDefinition = function (measureDefinition) {\n        if (!result.some(function (definition) {\n          return measureDefinitionEqual(definition, measureDefinition);\n        })) result.push(measureDefinition);\n      };\n\n      var items = _this.dashboard._dataDashboardItems().filter(function (item) {\n        return (!!itemId ? item.componentName() === itemId : item._isGloballyColored) && definition.equals(item._getColoringSignature());\n      });\n\n      if (items.length > 0) {\n        items.forEach(function (item) {\n          item._measures.forEach(function (measure) {\n            if (item._isColoringEnabled(measure)) {\n              addMeasureDefinition(_color_scheme_entry_creator_1.ColorSchemeEntryCreator.createMeasureDefinitionFromMeasure(measure, item.dataItems()));\n            }\n          });\n        });\n      } else {\n        _this.selectedSignatureEntries().forEach(function (entry) {\n          entry.measureKeys().forEach(function (measure) {\n            return addMeasureDefinition(_color_scheme_entry_creator_1.ColorSchemeEntryCreator.createMeasureDefinitionCopy(measure));\n          });\n        });\n      }\n\n      return result;\n    };\n\n    this.selectedSignatures = ko.observable([]);\n    this.itemColorSchemes = {};\n    this.newEntry = ko.observable();\n    this.itemColorSchemes[''] = new ItemColorScheme(dashboard, _requestColorSchemeDelegate, _updateHub);\n    var localyColoredItems = ko.computed(function () {\n      return dashboard._dataDashboardItems().filter(function (item) {\n        return item._isLocallyColored;\n      });\n    });\n    localyColoredItems().forEach(function (item) {\n      return _this.createItemColorScheme(item);\n    });\n\n    _knockout_utils_1.subscribeWithPrev(localyColoredItems, function (oldValues, newValues) {\n      var deleted = oldValues.filter(function (oldValue) {\n        return !newValues.some(function (element) {\n          return element === oldValue;\n        });\n      }).forEach(function (item) {\n        _this.itemColorSchemes[item.componentName()].dispose();\n\n        delete _this.itemColorSchemes[item.componentName()];\n      });\n      var added = newValues.filter(function (newValue) {\n        return !oldValues.some(function (element) {\n          return element === newValue;\n        });\n      }).forEach(function (item) {\n        return _this.createItemColorScheme(item);\n      });\n    });\n\n    this.allEntries = ko.computed(function () {\n      var result = [];\n      $.each(_this.itemColorSchemes, function (componentName, scheme) {\n        result = result.concat(scheme.allEntries());\n      });\n      return result;\n    });\n    this.availableSignatures = ko.computed(function () {\n      var result = [];\n\n      _this.allEntries().forEach(function (entry) {\n        var definition = entry.definition;\n\n        if (!result.some(function (resultDefinition) {\n          return resultDefinition.equals(definition);\n        })) {\n          result.push(definition);\n        }\n      });\n\n      return result;\n    });\n    this.editableSignatures = ko.computed(function () {\n      return _this.availableSignatures().filter(function (s) {\n        return s.dataItems().length > 0;\n      });\n    });\n    this.selectedSignatureEntries = ko.pureComputed(function () {\n      return _this.allEntries().filter(function (entry) {\n        return !!_this.selectedSignatures().length && entry.definition.equals(_this.selectedSignatures()[0]);\n      }).concat(_this.newEntry() ? [_this.newEntry()] : []);\n    });\n  }\n\n  ColorSchemeModel.prototype.createItemColorScheme = function (item) {\n    this.itemColorSchemes[item.componentName()] = new ItemColorScheme(item, this._requestColorSchemeDelegate, this._updateHub);\n  };\n\n  ColorSchemeModel.prototype.getScheme = function (componentName) {\n    if (componentName === void 0) {\n      componentName = '';\n    }\n\n    return this.itemColorSchemes[componentName].customEntries;\n  };\n\n  ColorSchemeModel.prototype.retainColorIndex = function (entry) {\n    var newEntry = entry.clone();\n    newEntry.color(null);\n    newEntry.paletteIndex(entry.paletteIndex());\n    this.getScheme(entry.definition.componentName).push(newEntry);\n  };\n\n  ColorSchemeModel.prototype.generateDefaultNames = function (newEntry) {\n    var result = [];\n    var entries = this.itemColorSchemes[newEntry.definition.componentName].allEntries().filter(function (entry) {\n      return entry.definition.equals(newEntry.definition);\n    });\n    var dimensionKeys = newEntry.dimensionKeys();\n    var lastDimensionIndex = null;\n\n    var isString = function (dimensionKey) {\n      return dimensionKey.value.type() === 'System.String';\n    };\n\n    for (var i = dimensionKeys.length - 1; i >= 0; i--) {\n      if (isString(dimensionKeys[i])) {\n        lastDimensionIndex = i;\n        break;\n      }\n    }\n\n    if (lastDimensionIndex != null) {\n      for (var i = 0; i < lastDimensionIndex; i++) {\n        result.push(isString(dimensionKeys[i]) ? dimensionKeys[i].definition.dataMember() + '1' : null);\n      }\n\n      var lastDimensionPattern = dimensionKeys[lastDimensionIndex].definition.dataMember();\n      var lastDimensionPostfix = 1;\n\n      while (entries.some(function (entry) {\n        return entry.dimensionKeys()[lastDimensionIndex].value.value() === lastDimensionPattern + lastDimensionPostfix.toString();\n      })) {\n        lastDimensionPostfix++;\n      }\n\n      result[lastDimensionIndex] = lastDimensionPattern + lastDimensionPostfix.toString();\n    }\n\n    return result;\n  };\n\n  ColorSchemeModel.prototype.isEntryAutogenerated = function (entry) {\n    return this.itemColorSchemes[entry.definition.componentName].generatedEntries().some(function (generatedEntry) {\n      return generatedEntry.equals(entry);\n    });\n  };\n\n  return ColorSchemeModel;\n}();\n\nexports.ColorSchemeModel = ColorSchemeModel;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/color-scheme-editor-extension/internal/_color-scheme-model.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","ColorSchemeModel","ItemColorScheme","analytics_utils_1","require","$","ko","_utils_1","color_1","color_scheme_entry_1","disposable_object_1","_array_utils_1","_knockout_utils_1","data_dashboard_item_1","_base_metadata_1","_color_scheme_entry_creator_1","measureDefinitionEqual","key1","key2","_id","combineEntries","auto","custom","customEntries","slice","result","dimensionValuesEqual","value1","value2","map","autoEntry","foundCustom","filter","customEntry","definition","equals","compareArrays","dimensionKeys","key","measureKeys","splice","indexOf","concat","_super","item","_requestColorSchemeDelegate","_updateHub","_this","generatedEntries","observableArray","componentName","name","DataDashboardItem","colorScheme","allEntries","computed","toDispose","update","debounce","disposed","done","scheme","coloringSchemeEntries","deserializeArray","AutoColorSchemeEntry","subscribe","dashboardItemUpdated","args","category","PropertyCategory","ViewModel","NoUpdate","_colorableItems","dashboardItemPropertyChanged","add","dispose","remove","DisposableObject","contains","array","some","element","dashboard","isSignatureAutogenerated","itemColorSchemes","entry","removeEntry","getScheme","newEntry","removeTable","removeAll","initNewEntry","entryCreator","ColorSchemeEntryCreator","entryToClone","selectedSignatureEntries","defaultNames","generateDefaultNames","addItemComponentName","addDataSourceName","dataSource","addDataMemberName","dataMember","index","addDimensionKey","dateTimeGroupInterval","type","addColor","Color","fromArgb","getEntry","updateEntry","editedEntry","entries","oldEntryIndex","push","getAvailableMeasureKeys","length","itemId","addMeasureDefinition","measureDefinition","items","_dataDashboardItems","_isGloballyColored","_getColoringSignature","forEach","_measures","measure","_isColoringEnabled","createMeasureDefinitionFromMeasure","dataItems","createMeasureDefinitionCopy","selectedSignatures","observable","localyColoredItems","_isLocallyColored","createItemColorScheme","subscribeWithPrev","oldValues","newValues","deleted","oldValue","added","newValue","each","availableSignatures","resultDefinition","editableSignatures","s","pureComputed","retainColorIndex","clone","color","paletteIndex","lastDimensionIndex","isString","dimensionKey","i","lastDimensionPattern","lastDimensionPostfix","toString","isEntryAutogenerated","generatedEntry"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_color-scheme-model.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorSchemeModel = exports.ItemColorScheme = void 0;\nvar analytics_utils_1 = require(\"@devexpress/analytics-core/analytics-utils\");\nvar $ = require(\"jquery\");\nvar ko = require(\"knockout\");\nvar _utils_1 = require(\"../../../data/_utils\");\nvar color_1 = require(\"../../../model/color\");\nvar color_scheme_entry_1 = require(\"../../../model/colorization/color-scheme-entry\");\nvar disposable_object_1 = require(\"../../../model/disposable-object\");\nvar _array_utils_1 = require(\"../../../model/internal/_array-utils\");\nvar _knockout_utils_1 = require(\"../../../model/internal/_knockout-utils\");\nvar data_dashboard_item_1 = require(\"../../../model/items/data-dashboard-item\");\nvar _base_metadata_1 = require(\"../../../model/metadata/_base-metadata\");\nvar _color_scheme_entry_creator_1 = require(\"./_color-scheme-entry-creator\");\nvar measureDefinitionEqual = function (key1, key2) { return key1._id === key2._id; };\nfunction combineEntries(auto, custom) {\n    var customEntries = custom.slice();\n    var result = [];\n    var dimensionValuesEqual = function (value1, value2) { return value1.value() === value2.value(); };\n    return auto.map(function (autoEntry) {\n        var foundCustom = customEntries.filter(function (customEntry) {\n            return customEntry.definition.equals(autoEntry.definition) &&\n                _array_utils_1.compareArrays(customEntry.dimensionKeys().map(function (key) { return key.value; }), autoEntry.dimensionKeys().map(function (key) { return key.value; }), dimensionValuesEqual) &&\n                _array_utils_1.compareArrays(customEntry.measureKeys(), autoEntry.measureKeys(), measureDefinitionEqual);\n        })[0];\n        !!foundCustom && customEntries.splice(customEntries.indexOf(foundCustom), 1);\n        return foundCustom || autoEntry;\n    }).concat(customEntries);\n}\nvar ItemColorScheme = (function (_super) {\n    __extends(ItemColorScheme, _super);\n    function ItemColorScheme(item, _requestColorSchemeDelegate, _updateHub) {\n        var _this = _super.call(this) || this;\n        _this.generatedEntries = ko.observableArray();\n        _this.componentName = '';\n        _this.name = '';\n        if (item instanceof data_dashboard_item_1.DataDashboardItem) {\n            _this.componentName = item.componentName();\n            _this.name = item.name();\n        }\n        _this.customEntries = item.colorScheme;\n        _this.allEntries = ko.computed(function () {\n            return combineEntries(_this.generatedEntries(), _this.customEntries());\n        });\n        _this.toDispose(_this.allEntries);\n        var update = _utils_1.debounce(function () {\n            if (!_this.disposed) {\n                _requestColorSchemeDelegate(_this.componentName).done(function (scheme) {\n                    var coloringSchemeEntries = analytics_utils_1.deserializeArray(scheme, function (item) { return new color_scheme_entry_1.AutoColorSchemeEntry(item, null, _this.componentName, _this.name); })();\n                    _this.generatedEntries(coloringSchemeEntries);\n                });\n            }\n        }, 10);\n        _this.toDispose(_this.customEntries.subscribe(update));\n        var dashboardItemUpdated = function (args) {\n            if ((args.category !== _base_metadata_1.PropertyCategory.ViewModel && args.category !== _base_metadata_1.PropertyCategory.NoUpdate)\n                && item._colorableItems().indexOf(args.item) !== -1) {\n                update();\n            }\n        };\n        item._colorableItems.subscribe(update);\n        _updateHub.dashboardItemPropertyChanged.add(dashboardItemUpdated);\n        _this.toDispose({ dispose: function () { _updateHub.dashboardItemPropertyChanged.remove(dashboardItemUpdated); } });\n        update();\n        return _this;\n    }\n    return ItemColorScheme;\n}(disposable_object_1.DisposableObject));\nexports.ItemColorScheme = ItemColorScheme;\nfunction contains(array, item) {\n    return array.some(function (element) { return element === item; });\n}\nvar ColorSchemeModel = (function () {\n    function ColorSchemeModel(dashboard, _requestColorSchemeDelegate, _updateHub) {\n        var _this = this;\n        this.dashboard = dashboard;\n        this._requestColorSchemeDelegate = _requestColorSchemeDelegate;\n        this._updateHub = _updateHub;\n        this.isSignatureAutogenerated = function (definition) { return _this.itemColorSchemes[definition.componentName].generatedEntries().some(function (entry) { return entry.definition.equals(definition); }); };\n        this.removeEntry = function (entry) {\n            _this.getScheme(entry.definition.componentName).remove(entry);\n            _this.newEntry(null);\n        };\n        this.removeTable = function (definition) {\n            var scheme = _this.getScheme(definition.componentName);\n            scheme.removeAll(scheme().filter(function (entry) { return entry.definition.equals(definition); }));\n        };\n        this.initNewEntry = function () {\n            var entryCreator = new _color_scheme_entry_creator_1.ColorSchemeEntryCreator();\n            var entryToClone = _this.selectedSignatureEntries()[0];\n            var defaultNames = _this.generateDefaultNames(entryToClone);\n            entryCreator.addItemComponentName(entryToClone.definition.componentName);\n            entryCreator.addDataSourceName(entryToClone.definition.dataSource);\n            entryCreator.addDataMemberName(entryToClone.definition.dataMember);\n            entryToClone.dimensionKeys().map(function (key, index) {\n                entryCreator.addDimensionKey(key.definition.dataMember(), key.definition.dateTimeGroupInterval(), key.value.type(), defaultNames[index]);\n            });\n            entryCreator.addColor(color_1.Color.fromArgb(1, 0, 0, 0));\n            _this.newEntry(entryCreator.getEntry());\n        };\n        this.updateEntry = function (entry, editedEntry) {\n            var entries = _this.getScheme(editedEntry.definition.componentName);\n            var oldEntryIndex = entry instanceof color_scheme_entry_1.AutoColorSchemeEntry ? -1 : entries().indexOf(entry);\n            if (oldEntryIndex >= 0) {\n                entries.splice(oldEntryIndex, 1);\n            }\n            if (entries().indexOf(editedEntry) === -1) {\n                entries.push(editedEntry);\n            }\n            _this.newEntry(null);\n        };\n        this.getAvailableMeasureKeys = function () {\n            var result = [];\n            var definition = _this.selectedSignatureEntries().length > 0 ? _this.selectedSignatureEntries()[0].definition : null;\n            var itemId = definition.componentName;\n            var addMeasureDefinition = function (measureDefinition) {\n                if (!result.some(function (definition) { return measureDefinitionEqual(definition, measureDefinition); }))\n                    result.push(measureDefinition);\n            };\n            var items = _this.dashboard._dataDashboardItems().\n                filter(function (item) { return (!!itemId ? item.componentName() === itemId : item._isGloballyColored) &&\n                definition.equals(item._getColoringSignature()); });\n            if (items.length > 0) {\n                items.forEach(function (item) {\n                    item._measures.forEach(function (measure) {\n                        if (item._isColoringEnabled(measure)) {\n                            addMeasureDefinition(_color_scheme_entry_creator_1.ColorSchemeEntryCreator.createMeasureDefinitionFromMeasure(measure, item.dataItems()));\n                        }\n                    });\n                });\n            }\n            else {\n                _this.selectedSignatureEntries().forEach(function (entry) {\n                    entry.measureKeys().forEach(function (measure) { return addMeasureDefinition(_color_scheme_entry_creator_1.ColorSchemeEntryCreator.createMeasureDefinitionCopy(measure)); });\n                });\n            }\n            return result;\n        };\n        this.selectedSignatures = ko.observable([]);\n        this.itemColorSchemes = {};\n        this.newEntry = ko.observable();\n        this.itemColorSchemes[''] = new ItemColorScheme(dashboard, _requestColorSchemeDelegate, _updateHub);\n        var localyColoredItems = ko.computed(function () { return dashboard._dataDashboardItems().filter(function (item) { return item._isLocallyColored; }); });\n        localyColoredItems().forEach(function (item) { return _this.createItemColorScheme(item); });\n        _knockout_utils_1.subscribeWithPrev(localyColoredItems, function (oldValues, newValues) {\n            var deleted = oldValues\n                .filter(function (oldValue) { return !newValues.some(function (element) { return element === oldValue; }); })\n                .forEach(function (item) {\n                _this.itemColorSchemes[item.componentName()].dispose();\n                delete _this.itemColorSchemes[item.componentName()];\n            });\n            var added = newValues\n                .filter(function (newValue) { return !oldValues.some(function (element) { return element === newValue; }); })\n                .forEach(function (item) { return _this.createItemColorScheme(item); });\n        });\n        this.allEntries = ko.computed(function () {\n            var result = [];\n            $.each(_this.itemColorSchemes, function (componentName, scheme) {\n                result = result.concat(scheme.allEntries());\n            });\n            return result;\n        });\n        this.availableSignatures = ko.computed(function () {\n            var result = [];\n            _this.allEntries().forEach(function (entry) {\n                var definition = entry.definition;\n                if (!result.some(function (resultDefinition) { return resultDefinition.equals(definition); })) {\n                    result.push(definition);\n                }\n            });\n            return result;\n        });\n        this.editableSignatures = ko.computed(function () {\n            return _this.availableSignatures().filter(function (s) { return s.dataItems().length > 0; });\n        });\n        this.selectedSignatureEntries = ko.pureComputed(function () {\n            return _this.allEntries().filter(function (entry) { return !!_this.selectedSignatures().length && entry.definition.equals(_this.selectedSignatures()[0]); }).concat(_this.newEntry() ? [_this.newEntry()] : []);\n        });\n    }\n    ColorSchemeModel.prototype.createItemColorScheme = function (item) {\n        this.itemColorSchemes[item.componentName()] = new ItemColorScheme(item, this._requestColorSchemeDelegate, this._updateHub);\n    };\n    ColorSchemeModel.prototype.getScheme = function (componentName) {\n        if (componentName === void 0) { componentName = ''; }\n        return this.itemColorSchemes[componentName].customEntries;\n    };\n    ColorSchemeModel.prototype.retainColorIndex = function (entry) {\n        var newEntry = entry.clone();\n        newEntry.color(null);\n        newEntry.paletteIndex(entry.paletteIndex());\n        this.getScheme(entry.definition.componentName).push(newEntry);\n    };\n    ColorSchemeModel.prototype.generateDefaultNames = function (newEntry) {\n        var result = [];\n        var entries = this.itemColorSchemes[newEntry.definition.componentName].allEntries().filter(function (entry) { return entry.definition.equals(newEntry.definition); });\n        var dimensionKeys = newEntry.dimensionKeys();\n        var lastDimensionIndex = null;\n        var isString = function (dimensionKey) {\n            return dimensionKey.value.type() === 'System.String';\n        };\n        for (var i = dimensionKeys.length - 1; i >= 0; i--) {\n            if (isString(dimensionKeys[i])) {\n                lastDimensionIndex = i;\n                break;\n            }\n        }\n        if (lastDimensionIndex != null) {\n            for (var i = 0; i < lastDimensionIndex; i++) {\n                result.push(isString(dimensionKeys[i]) ? dimensionKeys[i].definition.dataMember() + '1' : null);\n            }\n            var lastDimensionPattern = dimensionKeys[lastDimensionIndex].definition.dataMember();\n            var lastDimensionPostfix = 1;\n            while (entries.some(function (entry) { return entry.dimensionKeys()[lastDimensionIndex].value.value() === lastDimensionPattern + (lastDimensionPostfix).toString(); })) {\n                lastDimensionPostfix++;\n            }\n            result[lastDimensionIndex] = lastDimensionPattern + lastDimensionPostfix.toString();\n        }\n        return result;\n    };\n    ColorSchemeModel.prototype.isEntryAutogenerated = function (entry) {\n        return this.itemColorSchemes[entry.definition.componentName].generatedEntries().some(function (generatedEntry) { return generatedEntry.equals(entry); });\n    };\n    return ColorSchemeModel;\n}());\nexports.ColorSchemeModel = ColorSchemeModel;\n"]},"metadata":{},"sourceType":"script"}