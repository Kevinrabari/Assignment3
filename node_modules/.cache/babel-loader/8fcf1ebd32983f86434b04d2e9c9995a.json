{"ast":null,"code":"/**\n* DevExpress Analytics (query-builder\\wizard\\wizard.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseWizard = void 0;\n\nvar ko = require(\"knockout\");\n\nvar utils_1 = require(\"../../serializer/utils\");\n\nvar stateManager_1 = require(\"./stateManager\");\n\nvar pageIterator_1 = require(\"./pageIterator\");\n\nvar eventManager_1 = require(\"../../serializer/eventManager\");\n\nvar _utils_1 = require(\"./internal/_utils\");\n\nvar _constants_1 = require(\"./internal/_constants\");\n\nvar BaseWizard = function (_super) {\n  __extends(BaseWizard, _super);\n\n  function BaseWizard(pageFactory, finishCallback) {\n    var _this = _super.call(this) || this;\n\n    _this.pageFactory = pageFactory;\n    _this.events = new eventManager_1.EventManager();\n    _this._loadingTimeout = null;\n    _this.isLoading = ko.observable(false);\n    _this._currentPage = ko.observable();\n    _this.isVisible = ko.observable(false);\n    _this._finishCallback = finishCallback;\n\n    _this._disposables.push(_this.events);\n\n    return _this;\n  }\n\n  BaseWizard.prototype._createLoadingState = function (page) {\n    var _this = this;\n\n    if (!page[_constants_1.__loadingStateFunctionName]) {\n      page[_constants_1.__loadingStateFunctionName] = function (newVal) {\n        return _this._loadingState(newVal);\n      };\n    }\n  };\n\n  BaseWizard.prototype._createNextAction = function (page) {\n    var _this = this;\n\n    if (!page[_constants_1.__nextActionFunctionName]) {\n      page[_constants_1.__nextActionFunctionName] = function () {\n        return _this.nextAction();\n      };\n    }\n  };\n\n  BaseWizard.prototype._loadingState = function (active) {\n    var _this = this;\n\n    if (active) {\n      this._loadingTimeout && clearTimeout(this._loadingTimeout);\n      this._loadingTimeout = setTimeout(function () {\n        _this.isLoading(true);\n      }, 100);\n    } else {\n      this._loadingTimeout && clearTimeout(this._loadingTimeout);\n      this.isLoading(false);\n    }\n  };\n\n  BaseWizard.prototype._callBeforeFinishHandler = function (state, wizardModel) {\n    this.events.call('beforeFinish', {\n      state: state\n    });\n  };\n\n  BaseWizard.prototype._callAfterFinishHandler = function (state, result) {\n    this.events.call('afterFinish', {\n      state: state\n    });\n  };\n\n  BaseWizard.prototype.onFinish = function () {\n    this.iterator.dispose();\n  };\n\n  BaseWizard.prototype.initialize = function (state, createIterator) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (createIterator === void 0) {\n      createIterator = function (pageFactory, stateManager) {\n        return new pageIterator_1.PageIterator(pageFactory, stateManager);\n      };\n    }\n\n    this.events.call('beforeInitialize', {\n      wizard: this,\n      state: state\n    });\n    this.stateManager = new stateManager_1.StateManager(state, this.pageFactory);\n    this.iterator = createIterator(this.pageFactory, this.stateManager);\n    this.events.call('afterInitialize', {\n      wizard: this\n    });\n  };\n\n  BaseWizard.prototype.isFirstPage = function () {\n    return this._currentPage() && this._currentPage().pageId == this.iterator.getNextPageId();\n  };\n\n  BaseWizard.prototype.canNext = function () {\n    return !this.isLoading() && this._currentPage() && this.pageFactory.getMetadata(this._currentPage().pageId).canNext(this._currentPage().page);\n  };\n\n  BaseWizard.prototype.canFinish = function () {\n    return !this.isLoading() && this._currentPage() && this.pageFactory.getMetadata(this._currentPage().pageId).canFinish(this._currentPage().page);\n  };\n\n  BaseWizard.prototype._initPage = function (page) {\n    this.events.call('beforePageInitialize', _utils_1._createBeforeInitializePageEventArgs(page, this));\n\n    this._createLoadingState(page.page);\n\n    this._createNextAction(page.page);\n\n    return page.initialize(this.stateManager.getPageState(page.pageId));\n  };\n\n  BaseWizard.prototype.start = function () {\n    var _this = this;\n\n    this.events.call('beforeStart', {\n      wizard: this\n    });\n\n    this._loadingState(true);\n\n    var startPage = this.iterator._getStartPage();\n\n    this._initPage(startPage).done(function () {\n      _this._currentPage(startPage);\n\n      _this.events.call('afterPageInitialize', _utils_1._createPageEventArgs(startPage, _this));\n    }).always(function () {\n      return _this._loadingState(false);\n    }).fail(function () {\n      _this.isVisible(false);\n    });\n  };\n\n  BaseWizard.prototype.canRunWizard = function () {\n    return true;\n  };\n\n  BaseWizard.prototype.nextAction = function () {\n    var _this = this;\n\n    if (!this.canNext()) return;\n\n    var currentPage = this.iterator._getCurrentPage();\n\n    this._loadingState(true);\n\n    var revertPreviosPage = function () {\n      return _this.iterator._getPreviousPage().always(function () {\n        _this.iterator._resetPages();\n\n        _this._loadingState(false);\n      });\n    };\n\n    currentPage.commit().done(function (result) {\n      if (currentPage.isChanged) _this.stateManager.setPageState(currentPage.pageId, result);\n\n      _this.iterator._getNextPage().done(function (page) {\n        if (page) {\n          _this._initPage(page).done(function () {\n            _this._currentPage(page);\n\n            _this.events.call('afterPageInitialize', _utils_1._createPageEventArgs(page, _this));\n\n            _this._loadingState(false);\n          }).fail(function () {\n            return revertPreviosPage();\n          });\n        } else revertPreviosPage();\n      }).fail(function () {\n        return _this._loadingState(false);\n      });\n    }).fail(function () {\n      return _this._loadingState(false);\n    });\n  };\n\n  BaseWizard.prototype.previousAction = function () {\n    var _this = this;\n\n    if (this.isFirstPage()) return;\n\n    this._loadingState(true);\n\n    this.iterator._getPreviousPage().done(function (page) {\n      if (page) {\n        _this._currentPage(page);\n      }\n    }).always(function () {\n      return _this._loadingState(false);\n    });\n  };\n\n  BaseWizard.prototype.goToPage = function (pageId) {\n    var _this = this;\n\n    this._loadingState(true);\n\n    this.iterator._goToPage(pageId).done(function (page) {\n      if (page) {\n        _this._currentPage(page);\n      }\n    }).always(function () {\n      return _this._loadingState(false);\n    });\n  };\n\n  BaseWizard.prototype.finishAction = function () {\n    var _this = this;\n\n    if (!this.canFinish()) return;\n\n    this._loadingState(true);\n\n    var currentPage = this.iterator._getCurrentPage();\n\n    currentPage.commit().done(function (result) {\n      _this.stateManager.setPageState(currentPage.pageId, result);\n\n      _this.iterator._resetPages();\n\n      if (_this._finishCallback) {\n        var currentState = _this.stateManager.getCurrentState();\n\n        _this._callBeforeFinishHandler(currentState);\n\n        _this._finishCallback(currentState).done(function (result) {\n          _this.onFinish();\n\n          _this._callAfterFinishHandler(currentState, result);\n\n          _this.isVisible(false);\n        }).always(function () {\n          _this._loadingState(false);\n        });\n      } else {\n        _this._loadingState(false);\n\n        _this.isVisible(false);\n      }\n    });\n  };\n\n  return BaseWizard;\n}(utils_1.Disposable);\n\nexports.BaseWizard = BaseWizard;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/query-builder/wizard/wizard.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","BaseWizard","ko","require","utils_1","stateManager_1","pageIterator_1","eventManager_1","_utils_1","_constants_1","_super","pageFactory","finishCallback","_this","events","EventManager","_loadingTimeout","isLoading","observable","_currentPage","isVisible","_finishCallback","_disposables","push","_createLoadingState","page","__loadingStateFunctionName","newVal","_loadingState","_createNextAction","__nextActionFunctionName","nextAction","active","clearTimeout","setTimeout","_callBeforeFinishHandler","state","wizardModel","_callAfterFinishHandler","result","onFinish","iterator","dispose","initialize","createIterator","stateManager","PageIterator","wizard","StateManager","isFirstPage","pageId","getNextPageId","canNext","getMetadata","canFinish","_initPage","_createBeforeInitializePageEventArgs","getPageState","start","startPage","_getStartPage","done","_createPageEventArgs","always","fail","canRunWizard","currentPage","_getCurrentPage","revertPreviosPage","_getPreviousPage","_resetPages","commit","isChanged","setPageState","_getNextPage","previousAction","goToPage","_goToPage","finishAction","currentState","getCurrentState","Disposable"],"mappings":"AAAA;;;;;;;AAOA;;AACA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIC,MAAM,CAACK,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EAAgDN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAFrG;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnB,QAAI,OAAOA,CAAP,KAAa,UAAb,IAA2BA,CAAC,KAAK,IAArC,EACI,MAAM,IAAIS,SAAJ,CAAc,yBAAyBC,MAAM,CAACV,CAAD,CAA/B,GAAqC,+BAAnD,CAAN;AACJF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASW,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBb,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACO,SAAF,GAAcN,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACY,MAAP,CAAcb,CAAd,CAAb,IAAiCW,EAAE,CAACL,SAAH,GAAeN,CAAC,CAACM,SAAjB,EAA4B,IAAIK,EAAJ,EAA7D,CAAd;AACH,GAND;AAOH,CAd2C,EAA5C;;AAeAV,MAAM,CAACa,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,UAAR,GAAqB,KAAK,CAA1B;;AACA,IAAIC,EAAE,GAAGC,OAAO,CAAC,UAAD,CAAhB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,wBAAD,CAArB;;AACA,IAAIE,cAAc,GAAGF,OAAO,CAAC,gBAAD,CAA5B;;AACA,IAAIG,cAAc,GAAGH,OAAO,CAAC,gBAAD,CAA5B;;AACA,IAAII,cAAc,GAAGJ,OAAO,CAAC,+BAAD,CAA5B;;AACA,IAAIK,QAAQ,GAAGL,OAAO,CAAC,mBAAD,CAAtB;;AACA,IAAIM,YAAY,GAAGN,OAAO,CAAC,uBAAD,CAA1B;;AACA,IAAIF,UAAU,GAAI,UAAUS,MAAV,EAAkB;AAChC7B,EAAAA,SAAS,CAACoB,UAAD,EAAaS,MAAb,CAAT;;AACA,WAAST,UAAT,CAAoBU,WAApB,EAAiCC,cAAjC,EAAiD;AAC7C,QAAIC,KAAK,GAAGH,MAAM,CAAClB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAqB,IAAAA,KAAK,CAACF,WAAN,GAAoBA,WAApB;AACAE,IAAAA,KAAK,CAACC,MAAN,GAAe,IAAIP,cAAc,CAACQ,YAAnB,EAAf;AACAF,IAAAA,KAAK,CAACG,eAAN,GAAwB,IAAxB;AACAH,IAAAA,KAAK,CAACI,SAAN,GAAkBf,EAAE,CAACgB,UAAH,CAAc,KAAd,CAAlB;AACAL,IAAAA,KAAK,CAACM,YAAN,GAAqBjB,EAAE,CAACgB,UAAH,EAArB;AACAL,IAAAA,KAAK,CAACO,SAAN,GAAkBlB,EAAE,CAACgB,UAAH,CAAc,KAAd,CAAlB;AACAL,IAAAA,KAAK,CAACQ,eAAN,GAAwBT,cAAxB;;AACAC,IAAAA,KAAK,CAACS,YAAN,CAAmBC,IAAnB,CAAwBV,KAAK,CAACC,MAA9B;;AACA,WAAOD,KAAP;AACH;;AACDZ,EAAAA,UAAU,CAACX,SAAX,CAAqBkC,mBAArB,GAA2C,UAAUC,IAAV,EAAgB;AACvD,QAAIZ,KAAK,GAAG,IAAZ;;AACA,QAAI,CAACY,IAAI,CAAChB,YAAY,CAACiB,0BAAd,CAAT,EAAoD;AAChDD,MAAAA,IAAI,CAAChB,YAAY,CAACiB,0BAAd,CAAJ,GAAgD,UAAUC,MAAV,EAAkB;AAAE,eAAOd,KAAK,CAACe,aAAN,CAAoBD,MAApB,CAAP;AAAqC,OAAzG;AACH;AACJ,GALD;;AAMA1B,EAAAA,UAAU,CAACX,SAAX,CAAqBuC,iBAArB,GAAyC,UAAUJ,IAAV,EAAgB;AACrD,QAAIZ,KAAK,GAAG,IAAZ;;AACA,QAAI,CAACY,IAAI,CAAChB,YAAY,CAACqB,wBAAd,CAAT,EAAkD;AAC9CL,MAAAA,IAAI,CAAChB,YAAY,CAACqB,wBAAd,CAAJ,GAA8C,YAAY;AAAE,eAAOjB,KAAK,CAACkB,UAAN,EAAP;AAA4B,OAAxF;AACH;AACJ,GALD;;AAMA9B,EAAAA,UAAU,CAACX,SAAX,CAAqBsC,aAArB,GAAqC,UAAUI,MAAV,EAAkB;AACnD,QAAInB,KAAK,GAAG,IAAZ;;AACA,QAAImB,MAAJ,EAAY;AACR,WAAKhB,eAAL,IAAwBiB,YAAY,CAAC,KAAKjB,eAAN,CAApC;AACA,WAAKA,eAAL,GAAuBkB,UAAU,CAAC,YAAY;AAC1CrB,QAAAA,KAAK,CAACI,SAAN,CAAgB,IAAhB;AACH,OAFgC,EAE9B,GAF8B,CAAjC;AAGH,KALD,MAMK;AACD,WAAKD,eAAL,IAAwBiB,YAAY,CAAC,KAAKjB,eAAN,CAApC;AACA,WAAKC,SAAL,CAAe,KAAf;AACH;AACJ,GAZD;;AAaAhB,EAAAA,UAAU,CAACX,SAAX,CAAqB6C,wBAArB,GAAgD,UAAUC,KAAV,EAAiBC,WAAjB,EAA8B;AAC1E,SAAKvB,MAAL,CAAYtB,IAAZ,CAAiB,cAAjB,EAAiC;AAAE4C,MAAAA,KAAK,EAAEA;AAAT,KAAjC;AACH,GAFD;;AAGAnC,EAAAA,UAAU,CAACX,SAAX,CAAqBgD,uBAArB,GAA+C,UAAUF,KAAV,EAAiBG,MAAjB,EAAyB;AACpE,SAAKzB,MAAL,CAAYtB,IAAZ,CAAiB,aAAjB,EAAgC;AAAE4C,MAAAA,KAAK,EAAEA;AAAT,KAAhC;AACH,GAFD;;AAGAnC,EAAAA,UAAU,CAACX,SAAX,CAAqBkD,QAArB,GAAgC,YAAY;AACxC,SAAKC,QAAL,CAAcC,OAAd;AACH,GAFD;;AAGAzC,EAAAA,UAAU,CAACX,SAAX,CAAqBqD,UAArB,GAAkC,UAAUP,KAAV,EAAiBQ,cAAjB,EAAiC;AAC/D,QAAIR,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,MAAAA,KAAK,GAAG,EAAR;AAAa;;AACrC,QAAIQ,cAAc,KAAK,KAAK,CAA5B,EAA+B;AAAEA,MAAAA,cAAc,GAAG,UAAUjC,WAAV,EAAuBkC,YAAvB,EAAqC;AAAE,eAAO,IAAIvC,cAAc,CAACwC,YAAnB,CAAgCnC,WAAhC,EAA6CkC,YAA7C,CAAP;AAAoE,OAA5H;AAA+H;;AAChK,SAAK/B,MAAL,CAAYtB,IAAZ,CAAiB,kBAAjB,EAAqC;AAAEuD,MAAAA,MAAM,EAAE,IAAV;AAAgBX,MAAAA,KAAK,EAAEA;AAAvB,KAArC;AACA,SAAKS,YAAL,GAAoB,IAAIxC,cAAc,CAAC2C,YAAnB,CAAgCZ,KAAhC,EAAuC,KAAKzB,WAA5C,CAApB;AACA,SAAK8B,QAAL,GAAgBG,cAAc,CAAC,KAAKjC,WAAN,EAAmB,KAAKkC,YAAxB,CAA9B;AACA,SAAK/B,MAAL,CAAYtB,IAAZ,CAAiB,iBAAjB,EAAoC;AAAEuD,MAAAA,MAAM,EAAE;AAAV,KAApC;AACH,GAPD;;AAQA9C,EAAAA,UAAU,CAACX,SAAX,CAAqB2D,WAArB,GAAmC,YAAY;AAC3C,WAAO,KAAK9B,YAAL,MAAuB,KAAKA,YAAL,GAAoB+B,MAApB,IAA8B,KAAKT,QAAL,CAAcU,aAAd,EAA5D;AACH,GAFD;;AAGAlD,EAAAA,UAAU,CAACX,SAAX,CAAqB8D,OAArB,GAA+B,YAAY;AACvC,WAAO,CAAC,KAAKnC,SAAL,EAAD,IAAqB,KAAKE,YAAL,EAArB,IAA4C,KAAKR,WAAL,CAAiB0C,WAAjB,CAA6B,KAAKlC,YAAL,GAAoB+B,MAAjD,EAAyDE,OAAzD,CAAiE,KAAKjC,YAAL,GAAoBM,IAArF,CAAnD;AACH,GAFD;;AAGAxB,EAAAA,UAAU,CAACX,SAAX,CAAqBgE,SAArB,GAAiC,YAAY;AACzC,WAAO,CAAC,KAAKrC,SAAL,EAAD,IAAqB,KAAKE,YAAL,EAArB,IAA4C,KAAKR,WAAL,CAAiB0C,WAAjB,CAA6B,KAAKlC,YAAL,GAAoB+B,MAAjD,EAAyDI,SAAzD,CAAmE,KAAKnC,YAAL,GAAoBM,IAAvF,CAAnD;AACH,GAFD;;AAGAxB,EAAAA,UAAU,CAACX,SAAX,CAAqBiE,SAArB,GAAiC,UAAU9B,IAAV,EAAgB;AAC7C,SAAKX,MAAL,CAAYtB,IAAZ,CAAiB,sBAAjB,EAAyCgB,QAAQ,CAACgD,oCAAT,CAA8C/B,IAA9C,EAAoD,IAApD,CAAzC;;AACA,SAAKD,mBAAL,CAAyBC,IAAI,CAACA,IAA9B;;AACA,SAAKI,iBAAL,CAAuBJ,IAAI,CAACA,IAA5B;;AACA,WAAOA,IAAI,CAACkB,UAAL,CAAgB,KAAKE,YAAL,CAAkBY,YAAlB,CAA+BhC,IAAI,CAACyB,MAApC,CAAhB,CAAP;AACH,GALD;;AAMAjD,EAAAA,UAAU,CAACX,SAAX,CAAqBoE,KAArB,GAA6B,YAAY;AACrC,QAAI7C,KAAK,GAAG,IAAZ;;AACA,SAAKC,MAAL,CAAYtB,IAAZ,CAAiB,aAAjB,EAAgC;AAAEuD,MAAAA,MAAM,EAAE;AAAV,KAAhC;;AACA,SAAKnB,aAAL,CAAmB,IAAnB;;AACA,QAAI+B,SAAS,GAAG,KAAKlB,QAAL,CAAcmB,aAAd,EAAhB;;AACA,SAAKL,SAAL,CAAeI,SAAf,EAA0BE,IAA1B,CAA+B,YAAY;AACvChD,MAAAA,KAAK,CAACM,YAAN,CAAmBwC,SAAnB;;AACA9C,MAAAA,KAAK,CAACC,MAAN,CAAatB,IAAb,CAAkB,qBAAlB,EAAyCgB,QAAQ,CAACsD,oBAAT,CAA8BH,SAA9B,EAAyC9C,KAAzC,CAAzC;AACH,KAHD,EAGGkD,MAHH,CAGU,YAAY;AAAE,aAAOlD,KAAK,CAACe,aAAN,CAAoB,KAApB,CAAP;AAAoC,KAH5D,EAG8DoC,IAH9D,CAGmE,YAAY;AAC3EnD,MAAAA,KAAK,CAACO,SAAN,CAAgB,KAAhB;AACH,KALD;AAMH,GAXD;;AAYAnB,EAAAA,UAAU,CAACX,SAAX,CAAqB2E,YAArB,GAAoC,YAAY;AAC5C,WAAO,IAAP;AACH,GAFD;;AAGAhE,EAAAA,UAAU,CAACX,SAAX,CAAqByC,UAArB,GAAkC,YAAY;AAC1C,QAAIlB,KAAK,GAAG,IAAZ;;AACA,QAAI,CAAC,KAAKuC,OAAL,EAAL,EACI;;AACJ,QAAIc,WAAW,GAAG,KAAKzB,QAAL,CAAc0B,eAAd,EAAlB;;AACA,SAAKvC,aAAL,CAAmB,IAAnB;;AACA,QAAIwC,iBAAiB,GAAG,YAAY;AAAE,aAAOvD,KAAK,CAAC4B,QAAN,CAAe4B,gBAAf,GAAkCN,MAAlC,CAAyC,YAAY;AAC9FlD,QAAAA,KAAK,CAAC4B,QAAN,CAAe6B,WAAf;;AACAzD,QAAAA,KAAK,CAACe,aAAN,CAAoB,KAApB;AACH,OAH4C,CAAP;AAGjC,KAHL;;AAIAsC,IAAAA,WAAW,CAACK,MAAZ,GAAqBV,IAArB,CAA0B,UAAUtB,MAAV,EAAkB;AACxC,UAAI2B,WAAW,CAACM,SAAhB,EACI3D,KAAK,CAACgC,YAAN,CAAmB4B,YAAnB,CAAgCP,WAAW,CAAChB,MAA5C,EAAoDX,MAApD;;AACJ1B,MAAAA,KAAK,CAAC4B,QAAN,CAAeiC,YAAf,GAA8Bb,IAA9B,CAAmC,UAAUpC,IAAV,EAAgB;AAC/C,YAAIA,IAAJ,EAAU;AACNZ,UAAAA,KAAK,CAAC0C,SAAN,CAAgB9B,IAAhB,EAAsBoC,IAAtB,CAA2B,YAAY;AACnChD,YAAAA,KAAK,CAACM,YAAN,CAAmBM,IAAnB;;AACAZ,YAAAA,KAAK,CAACC,MAAN,CAAatB,IAAb,CAAkB,qBAAlB,EAAyCgB,QAAQ,CAACsD,oBAAT,CAA8BrC,IAA9B,EAAoCZ,KAApC,CAAzC;;AACAA,YAAAA,KAAK,CAACe,aAAN,CAAoB,KAApB;AACH,WAJD,EAIGoC,IAJH,CAIQ,YAAY;AAAE,mBAAOI,iBAAiB,EAAxB;AAA6B,WAJnD;AAKH,SAND,MAQIA,iBAAiB;AACxB,OAVD,EAUGJ,IAVH,CAUQ,YAAY;AAAE,eAAOnD,KAAK,CAACe,aAAN,CAAoB,KAApB,CAAP;AAAoC,OAV1D;AAWH,KAdD,EAcGoC,IAdH,CAcQ,YAAY;AAAE,aAAOnD,KAAK,CAACe,aAAN,CAAoB,KAApB,CAAP;AAAoC,KAd1D;AAeH,GAzBD;;AA0BA3B,EAAAA,UAAU,CAACX,SAAX,CAAqBqF,cAArB,GAAsC,YAAY;AAC9C,QAAI9D,KAAK,GAAG,IAAZ;;AACA,QAAI,KAAKoC,WAAL,EAAJ,EACI;;AACJ,SAAKrB,aAAL,CAAmB,IAAnB;;AACA,SAAKa,QAAL,CAAc4B,gBAAd,GAAiCR,IAAjC,CAAsC,UAAUpC,IAAV,EAAgB;AAClD,UAAIA,IAAJ,EAAU;AACNZ,QAAAA,KAAK,CAACM,YAAN,CAAmBM,IAAnB;AACH;AACJ,KAJD,EAIGsC,MAJH,CAIU,YAAY;AAAE,aAAOlD,KAAK,CAACe,aAAN,CAAoB,KAApB,CAAP;AAAoC,KAJ5D;AAKH,GAVD;;AAWA3B,EAAAA,UAAU,CAACX,SAAX,CAAqBsF,QAArB,GAAgC,UAAU1B,MAAV,EAAkB;AAC9C,QAAIrC,KAAK,GAAG,IAAZ;;AACA,SAAKe,aAAL,CAAmB,IAAnB;;AACA,SAAKa,QAAL,CAAcoC,SAAd,CAAwB3B,MAAxB,EAAgCW,IAAhC,CAAqC,UAAUpC,IAAV,EAAgB;AACjD,UAAIA,IAAJ,EAAU;AACNZ,QAAAA,KAAK,CAACM,YAAN,CAAmBM,IAAnB;AACH;AACJ,KAJD,EAIGsC,MAJH,CAIU,YAAY;AAAE,aAAOlD,KAAK,CAACe,aAAN,CAAoB,KAApB,CAAP;AAAoC,KAJ5D;AAKH,GARD;;AASA3B,EAAAA,UAAU,CAACX,SAAX,CAAqBwF,YAArB,GAAoC,YAAY;AAC5C,QAAIjE,KAAK,GAAG,IAAZ;;AACA,QAAI,CAAC,KAAKyC,SAAL,EAAL,EACI;;AACJ,SAAK1B,aAAL,CAAmB,IAAnB;;AACA,QAAIsC,WAAW,GAAG,KAAKzB,QAAL,CAAc0B,eAAd,EAAlB;;AACAD,IAAAA,WAAW,CAACK,MAAZ,GAAqBV,IAArB,CAA0B,UAAUtB,MAAV,EAAkB;AACxC1B,MAAAA,KAAK,CAACgC,YAAN,CAAmB4B,YAAnB,CAAgCP,WAAW,CAAChB,MAA5C,EAAoDX,MAApD;;AACA1B,MAAAA,KAAK,CAAC4B,QAAN,CAAe6B,WAAf;;AACA,UAAIzD,KAAK,CAACQ,eAAV,EAA2B;AACvB,YAAI0D,YAAY,GAAGlE,KAAK,CAACgC,YAAN,CAAmBmC,eAAnB,EAAnB;;AACAnE,QAAAA,KAAK,CAACsB,wBAAN,CAA+B4C,YAA/B;;AACAlE,QAAAA,KAAK,CAACQ,eAAN,CAAsB0D,YAAtB,EACKlB,IADL,CACU,UAAUtB,MAAV,EAAkB;AACxB1B,UAAAA,KAAK,CAAC2B,QAAN;;AACA3B,UAAAA,KAAK,CAACyB,uBAAN,CAA8ByC,YAA9B,EAA4CxC,MAA5C;;AACA1B,UAAAA,KAAK,CAACO,SAAN,CAAgB,KAAhB;AACH,SALD,EAMK2C,MANL,CAMY,YAAY;AACpBlD,UAAAA,KAAK,CAACe,aAAN,CAAoB,KAApB;AACH,SARD;AASH,OAZD,MAaK;AACDf,QAAAA,KAAK,CAACe,aAAN,CAAoB,KAApB;;AACAf,QAAAA,KAAK,CAACO,SAAN,CAAgB,KAAhB;AACH;AACJ,KApBD;AAqBH,GA3BD;;AA4BA,SAAOnB,UAAP;AACH,CAjKiB,CAiKhBG,OAAO,CAAC6E,UAjKQ,CAAlB;;AAkKAlF,OAAO,CAACE,UAAR,GAAqBA,UAArB","sourcesContent":["/**\n* DevExpress Analytics (query-builder\\wizard\\wizard.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseWizard = void 0;\nvar ko = require(\"knockout\");\nvar utils_1 = require(\"../../serializer/utils\");\nvar stateManager_1 = require(\"./stateManager\");\nvar pageIterator_1 = require(\"./pageIterator\");\nvar eventManager_1 = require(\"../../serializer/eventManager\");\nvar _utils_1 = require(\"./internal/_utils\");\nvar _constants_1 = require(\"./internal/_constants\");\nvar BaseWizard = (function (_super) {\n    __extends(BaseWizard, _super);\n    function BaseWizard(pageFactory, finishCallback) {\n        var _this = _super.call(this) || this;\n        _this.pageFactory = pageFactory;\n        _this.events = new eventManager_1.EventManager();\n        _this._loadingTimeout = null;\n        _this.isLoading = ko.observable(false);\n        _this._currentPage = ko.observable();\n        _this.isVisible = ko.observable(false);\n        _this._finishCallback = finishCallback;\n        _this._disposables.push(_this.events);\n        return _this;\n    }\n    BaseWizard.prototype._createLoadingState = function (page) {\n        var _this = this;\n        if (!page[_constants_1.__loadingStateFunctionName]) {\n            page[_constants_1.__loadingStateFunctionName] = function (newVal) { return _this._loadingState(newVal); };\n        }\n    };\n    BaseWizard.prototype._createNextAction = function (page) {\n        var _this = this;\n        if (!page[_constants_1.__nextActionFunctionName]) {\n            page[_constants_1.__nextActionFunctionName] = function () { return _this.nextAction(); };\n        }\n    };\n    BaseWizard.prototype._loadingState = function (active) {\n        var _this = this;\n        if (active) {\n            this._loadingTimeout && clearTimeout(this._loadingTimeout);\n            this._loadingTimeout = setTimeout(function () {\n                _this.isLoading(true);\n            }, 100);\n        }\n        else {\n            this._loadingTimeout && clearTimeout(this._loadingTimeout);\n            this.isLoading(false);\n        }\n    };\n    BaseWizard.prototype._callBeforeFinishHandler = function (state, wizardModel) {\n        this.events.call('beforeFinish', { state: state });\n    };\n    BaseWizard.prototype._callAfterFinishHandler = function (state, result) {\n        this.events.call('afterFinish', { state: state });\n    };\n    BaseWizard.prototype.onFinish = function () {\n        this.iterator.dispose();\n    };\n    BaseWizard.prototype.initialize = function (state, createIterator) {\n        if (state === void 0) { state = {}; }\n        if (createIterator === void 0) { createIterator = function (pageFactory, stateManager) { return new pageIterator_1.PageIterator(pageFactory, stateManager); }; }\n        this.events.call('beforeInitialize', { wizard: this, state: state });\n        this.stateManager = new stateManager_1.StateManager(state, this.pageFactory);\n        this.iterator = createIterator(this.pageFactory, this.stateManager);\n        this.events.call('afterInitialize', { wizard: this });\n    };\n    BaseWizard.prototype.isFirstPage = function () {\n        return this._currentPage() && this._currentPage().pageId == this.iterator.getNextPageId();\n    };\n    BaseWizard.prototype.canNext = function () {\n        return !this.isLoading() && this._currentPage() && this.pageFactory.getMetadata(this._currentPage().pageId).canNext(this._currentPage().page);\n    };\n    BaseWizard.prototype.canFinish = function () {\n        return !this.isLoading() && this._currentPage() && this.pageFactory.getMetadata(this._currentPage().pageId).canFinish(this._currentPage().page);\n    };\n    BaseWizard.prototype._initPage = function (page) {\n        this.events.call('beforePageInitialize', _utils_1._createBeforeInitializePageEventArgs(page, this));\n        this._createLoadingState(page.page);\n        this._createNextAction(page.page);\n        return page.initialize(this.stateManager.getPageState(page.pageId));\n    };\n    BaseWizard.prototype.start = function () {\n        var _this = this;\n        this.events.call('beforeStart', { wizard: this });\n        this._loadingState(true);\n        var startPage = this.iterator._getStartPage();\n        this._initPage(startPage).done(function () {\n            _this._currentPage(startPage);\n            _this.events.call('afterPageInitialize', _utils_1._createPageEventArgs(startPage, _this));\n        }).always(function () { return _this._loadingState(false); }).fail(function () {\n            _this.isVisible(false);\n        });\n    };\n    BaseWizard.prototype.canRunWizard = function () {\n        return true;\n    };\n    BaseWizard.prototype.nextAction = function () {\n        var _this = this;\n        if (!this.canNext())\n            return;\n        var currentPage = this.iterator._getCurrentPage();\n        this._loadingState(true);\n        var revertPreviosPage = function () { return _this.iterator._getPreviousPage().always(function () {\n            _this.iterator._resetPages();\n            _this._loadingState(false);\n        }); };\n        currentPage.commit().done(function (result) {\n            if (currentPage.isChanged)\n                _this.stateManager.setPageState(currentPage.pageId, result);\n            _this.iterator._getNextPage().done(function (page) {\n                if (page) {\n                    _this._initPage(page).done(function () {\n                        _this._currentPage(page);\n                        _this.events.call('afterPageInitialize', _utils_1._createPageEventArgs(page, _this));\n                        _this._loadingState(false);\n                    }).fail(function () { return revertPreviosPage(); });\n                }\n                else\n                    revertPreviosPage();\n            }).fail(function () { return _this._loadingState(false); });\n        }).fail(function () { return _this._loadingState(false); });\n    };\n    BaseWizard.prototype.previousAction = function () {\n        var _this = this;\n        if (this.isFirstPage())\n            return;\n        this._loadingState(true);\n        this.iterator._getPreviousPage().done(function (page) {\n            if (page) {\n                _this._currentPage(page);\n            }\n        }).always(function () { return _this._loadingState(false); });\n    };\n    BaseWizard.prototype.goToPage = function (pageId) {\n        var _this = this;\n        this._loadingState(true);\n        this.iterator._goToPage(pageId).done(function (page) {\n            if (page) {\n                _this._currentPage(page);\n            }\n        }).always(function () { return _this._loadingState(false); });\n    };\n    BaseWizard.prototype.finishAction = function () {\n        var _this = this;\n        if (!this.canFinish())\n            return;\n        this._loadingState(true);\n        var currentPage = this.iterator._getCurrentPage();\n        currentPage.commit().done(function (result) {\n            _this.stateManager.setPageState(currentPage.pageId, result);\n            _this.iterator._resetPages();\n            if (_this._finishCallback) {\n                var currentState = _this.stateManager.getCurrentState();\n                _this._callBeforeFinishHandler(currentState);\n                _this._finishCallback(currentState)\n                    .done(function (result) {\n                    _this.onFinish();\n                    _this._callAfterFinishHandler(currentState, result);\n                    _this.isVisible(false);\n                })\n                    .always(function () {\n                    _this._loadingState(false);\n                });\n            }\n            else {\n                _this._loadingState(false);\n                _this.isVisible(false);\n            }\n        });\n    };\n    return BaseWizard;\n}(utils_1.Disposable));\nexports.BaseWizard = BaseWizard;\n"]},"metadata":{},"sourceType":"script"}