{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_pivot-item-format-rule-properties-composer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createPivotItemFormatRulePropertiesComposer = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _default_1 = require(\"../../../../data/localization/_default\");\n\nvar model_1 = require(\"../../../../model\");\n\nvar _cells_item_format_rule_1 = require(\"../../../../model/format-rules/metadata/_cells-item-format-rule\");\n\nvar _pivot_item_format_rule_1 = require(\"../../../../model/format-rules/metadata/_pivot-item-format-rule\");\n\nvar _pivot_item_format_rule_level_1 = require(\"../../../../model/format-rules/metadata/_pivot-item-format-rule-level\");\n\nvar _form_adapter_1 = require(\"../../../form-adapter/_form-adapter\");\n\nvar _form_adapter_editors_1 = require(\"../../../form-adapter/_form-adapter-editors\");\n\nvar _section_descriptors_1 = require(\"../../../items/_section-descriptors\");\n\nvar _display_name_provider_1 = require(\"../../../_display-name-provider\");\n\nvar _shared_format_rule_properties_composer_1 = require(\"./_shared-format-rule-properties-composer\");\n\nfunction createPivotItemFormatRulePropertiesComposer() {\n  return new _shared_format_rule_properties_composer_1.FormatRulePropertiesComposer({\n    createDataTypeObservable: _shared_format_rule_properties_composer_1.createDataTypeObservable,\n    getCommonFormatRuleProperties: function (formatRule, dashboardItem, dataSourceBrowser) {\n      var info = _shared_format_rule_properties_composer_1.getCommonCellsFormatRuleProperties(formatRule, grabDataItems(dashboardItem, dataSourceBrowser), grapApplyToItems(dashboardItem, dataSourceBrowser));\n\n      if (!info.disabledFilterRules) info.disabledFilterRules = {};\n\n      info.disabledFilterRules[_cells_item_format_rule_1.dataItemApplyTo.propertyName] = function (m) {\n        var pivot = dashboardItem;\n        return !(pivot.values().filter(function (v) {\n          return v.uniqueName() === m.dataItemName();\n        }).length || pivot.hiddenMeasures().filter(function (v) {\n          return v.uniqueName() === m.dataItemName();\n        }).length);\n      };\n\n      return info;\n    },\n    getConditionFormatRuleProperties: function () {\n      return {\n        properties: []\n      };\n    },\n    getMiscFormatRuleProperties: getMiscFormatRuleProperties\n  });\n}\n\nexports.createPivotItemFormatRulePropertiesComposer = createPivotItemFormatRulePropertiesComposer;\n\nfunction getMiscFormatRuleProperties(formatRule, pivot, dataSourceBrowser) {\n  var visibilityRules = {};\n  var properties = [];\n  var intersectionLevelModeValuesObservable = ko.observable(_form_adapter_1.transformValuesDictionary(_pivot_item_format_rule_1.intersectionLevelModeValues));\n  ko.computed(function () {\n    if (formatRule.condition() instanceof model_1.FormatConditionRangeBase && formatRule.condition().valueType() !== 'Number' || formatRule.condition() instanceof model_1.FormatConditionTopBottom || formatRule.condition() instanceof model_1.FormatConditionAverage) {\n      intersectionLevelModeValuesObservable(_form_adapter_1.transformValuesDictionary(_pivot_item_format_rule_1.restrictedIntersectionLevelModeValues));\n    } else {\n      intersectionLevelModeValuesObservable(_form_adapter_1.transformValuesDictionary(_pivot_item_format_rule_1.intersectionLevelModeValues));\n    }\n  });\n  properties.push(__assign(__assign({}, _pivot_item_format_rule_1.intersectionLevelMode), {\n    formAdapterItem: _form_adapter_editors_1.dynamicSelectBoxEditor({\n      values: intersectionLevelModeValuesObservable\n    })\n  }));\n  properties.push({\n    container: _pivot_item_format_rule_1.pivotLevel,\n    properties: [__assign({\n      valuesArray: [{\n        value: null,\n        displayValue: '[Grand Total]'\n      }].concat(pivot.columns().map(function (m) {\n        return {\n          value: m.uniqueName(),\n          displayValue: _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, m)\n        };\n      }))\n    }, _pivot_item_format_rule_level_1.pivotLevelColumn), __assign({\n      valuesArray: [{\n        value: null,\n        displayValue: '[Grand Total]'\n      }].concat(pivot.rows().map(function (m) {\n        return {\n          value: m.uniqueName(),\n          displayValue: _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, m)\n        };\n      }))\n    }, _pivot_item_format_rule_level_1.pivotLevelRow)]\n  });\n  properties.push(_pivot_item_format_rule_1.applyToColumn);\n  properties.push(_cells_item_format_rule_1.applyToRow);\n  var isMeasure = !!pivot.values().filter(function (v) {\n    return v.uniqueName() === formatRule.dataItemApplyToName();\n  }).length;\n\n  visibilityRules[_cells_item_format_rule_1.applyToRow.propertyName] = function (m) {\n    return !formatRule.condition()._isApplyToRowColumnRestricted && isMeasure;\n  };\n\n  visibilityRules[_pivot_item_format_rule_1.applyToColumn.propertyName] = function (m) {\n    return !formatRule.condition()._isApplyToRowColumnRestricted && isMeasure;\n  };\n\n  visibilityRules[_pivot_item_format_rule_level_1.pivotLevelColumn.propertyName] = [_pivot_item_format_rule_1.intersectionLevelMode.propertyName, '=', 'SpecificLevel'];\n  visibilityRules[_pivot_item_format_rule_level_1.pivotLevelRow.propertyName] = [_pivot_item_format_rule_1.intersectionLevelMode.propertyName, '=', 'SpecificLevel'];\n  return {\n    properties: properties,\n    visibilityFilterRules: visibilityRules\n  };\n}\n\nfunction grabDataItems(dashboardItem, dataSourceBrowser) {\n  return function () {\n    return grapApplyToItems(dashboardItem, dataSourceBrowser)().concat(dashboardItem.hiddenMeasures().map(function (m) {\n      return {\n        uniqueName: m.uniqueName(),\n        displayName: _default_1.getLocalizationById(_section_descriptors_1.SectionDescriptors.HiddenMeasures.title) + ' - ' + _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, dashboardItem, m)\n      };\n    }));\n  };\n}\n\nfunction grapApplyToItems(pivot, dataSourceBrowser) {\n  return function () {\n    return pivot.values().map(function (m) {\n      return {\n        uniqueName: m.uniqueName(),\n        displayName: _default_1.getLocalizationById(_section_descriptors_1.SectionDescriptors.Values.title) + ' - ' + _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, m)\n      };\n    }).concat(pivot.columns().map(function (d) {\n      return {\n        uniqueName: d.uniqueName(),\n        displayName: _default_1.getLocalizationById(_section_descriptors_1.SectionDescriptors.Columns.title) + ' - ' + _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, d)\n      };\n    })).concat(pivot.rows().map(function (d) {\n      return {\n        uniqueName: d.uniqueName(),\n        displayName: _default_1.getLocalizationById(_section_descriptors_1.SectionDescriptors.Rows.title) + ' - ' + _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, d)\n      };\n    }));\n  };\n}","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/conditional-formatting/items/properties-composers/_pivot-item-format-rule-properties-composer.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","createPivotItemFormatRulePropertiesComposer","ko","require","_default_1","model_1","_cells_item_format_rule_1","_pivot_item_format_rule_1","_pivot_item_format_rule_level_1","_form_adapter_1","_form_adapter_editors_1","_section_descriptors_1","_display_name_provider_1","_shared_format_rule_properties_composer_1","FormatRulePropertiesComposer","createDataTypeObservable","getCommonFormatRuleProperties","formatRule","dashboardItem","dataSourceBrowser","info","getCommonCellsFormatRuleProperties","grabDataItems","grapApplyToItems","disabledFilterRules","dataItemApplyTo","propertyName","m","pivot","values","filter","v","uniqueName","dataItemName","hiddenMeasures","getConditionFormatRuleProperties","properties","getMiscFormatRuleProperties","visibilityRules","intersectionLevelModeValuesObservable","observable","transformValuesDictionary","intersectionLevelModeValues","computed","condition","FormatConditionRangeBase","valueType","FormatConditionTopBottom","FormatConditionAverage","restrictedIntersectionLevelModeValues","push","intersectionLevelMode","formAdapterItem","dynamicSelectBoxEditor","container","pivotLevel","valuesArray","displayValue","concat","columns","map","getDataItemDisplayName","pivotLevelColumn","rows","pivotLevelRow","applyToColumn","applyToRow","isMeasure","dataItemApplyToName","_isApplyToRowColumnRestricted","visibilityFilterRules","displayName","getLocalizationById","SectionDescriptors","HiddenMeasures","title","Values","d","Columns","Rows"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_pivot-item-format-rule-properties-composer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createPivotItemFormatRulePropertiesComposer = void 0;\nvar ko = require(\"knockout\");\nvar _default_1 = require(\"../../../../data/localization/_default\");\nvar model_1 = require(\"../../../../model\");\nvar _cells_item_format_rule_1 = require(\"../../../../model/format-rules/metadata/_cells-item-format-rule\");\nvar _pivot_item_format_rule_1 = require(\"../../../../model/format-rules/metadata/_pivot-item-format-rule\");\nvar _pivot_item_format_rule_level_1 = require(\"../../../../model/format-rules/metadata/_pivot-item-format-rule-level\");\nvar _form_adapter_1 = require(\"../../../form-adapter/_form-adapter\");\nvar _form_adapter_editors_1 = require(\"../../../form-adapter/_form-adapter-editors\");\nvar _section_descriptors_1 = require(\"../../../items/_section-descriptors\");\nvar _display_name_provider_1 = require(\"../../../_display-name-provider\");\nvar _shared_format_rule_properties_composer_1 = require(\"./_shared-format-rule-properties-composer\");\nfunction createPivotItemFormatRulePropertiesComposer() {\n    return new _shared_format_rule_properties_composer_1.FormatRulePropertiesComposer({\n        createDataTypeObservable: _shared_format_rule_properties_composer_1.createDataTypeObservable,\n        getCommonFormatRuleProperties: function (formatRule, dashboardItem, dataSourceBrowser) {\n            var info = _shared_format_rule_properties_composer_1.getCommonCellsFormatRuleProperties(formatRule, grabDataItems(dashboardItem, dataSourceBrowser), grapApplyToItems(dashboardItem, dataSourceBrowser));\n            if (!info.disabledFilterRules)\n                info.disabledFilterRules = {};\n            info.disabledFilterRules[_cells_item_format_rule_1.dataItemApplyTo.propertyName] = function (m) {\n                var pivot = dashboardItem;\n                return !(pivot.values().filter(function (v) { return v.uniqueName() === m.dataItemName(); }).length\n                    || pivot.hiddenMeasures().filter(function (v) { return v.uniqueName() === m.dataItemName(); }).length);\n            };\n            return info;\n        },\n        getConditionFormatRuleProperties: function () { return ({ properties: [] }); },\n        getMiscFormatRuleProperties: getMiscFormatRuleProperties\n    });\n}\nexports.createPivotItemFormatRulePropertiesComposer = createPivotItemFormatRulePropertiesComposer;\nfunction getMiscFormatRuleProperties(formatRule, pivot, dataSourceBrowser) {\n    var visibilityRules = {};\n    var properties = [];\n    var intersectionLevelModeValuesObservable = ko.observable(_form_adapter_1.transformValuesDictionary(_pivot_item_format_rule_1.intersectionLevelModeValues));\n    ko.computed(function () {\n        if ((formatRule.condition() instanceof model_1.FormatConditionRangeBase && formatRule.condition().valueType() !== 'Number')\n            || formatRule.condition() instanceof model_1.FormatConditionTopBottom\n            || formatRule.condition() instanceof model_1.FormatConditionAverage) {\n            intersectionLevelModeValuesObservable(_form_adapter_1.transformValuesDictionary(_pivot_item_format_rule_1.restrictedIntersectionLevelModeValues));\n        }\n        else {\n            intersectionLevelModeValuesObservable(_form_adapter_1.transformValuesDictionary(_pivot_item_format_rule_1.intersectionLevelModeValues));\n        }\n    });\n    properties.push(__assign(__assign({}, _pivot_item_format_rule_1.intersectionLevelMode), { formAdapterItem: _form_adapter_editors_1.dynamicSelectBoxEditor({ values: intersectionLevelModeValuesObservable }) }));\n    properties.push({\n        container: _pivot_item_format_rule_1.pivotLevel,\n        properties: [\n            __assign({ valuesArray: [{ value: null, displayValue: '[Grand Total]' }].concat(pivot.columns().map(function (m) { return ({ value: m.uniqueName(), displayValue: _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, m) }); })) }, _pivot_item_format_rule_level_1.pivotLevelColumn),\n            __assign({ valuesArray: [{ value: null, displayValue: '[Grand Total]' }].concat(pivot.rows().map(function (m) { return ({ value: m.uniqueName(), displayValue: _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, m) }); })) }, _pivot_item_format_rule_level_1.pivotLevelRow)\n        ]\n    });\n    properties.push(_pivot_item_format_rule_1.applyToColumn);\n    properties.push(_cells_item_format_rule_1.applyToRow);\n    var isMeasure = !!pivot.values().filter(function (v) { return v.uniqueName() === formatRule.dataItemApplyToName(); }).length;\n    visibilityRules[_cells_item_format_rule_1.applyToRow.propertyName] = function (m) { return !formatRule.condition()._isApplyToRowColumnRestricted && isMeasure; };\n    visibilityRules[_pivot_item_format_rule_1.applyToColumn.propertyName] = function (m) { return !formatRule.condition()._isApplyToRowColumnRestricted && isMeasure; };\n    visibilityRules[_pivot_item_format_rule_level_1.pivotLevelColumn.propertyName] =\n        [_pivot_item_format_rule_1.intersectionLevelMode.propertyName, '=', 'SpecificLevel'];\n    visibilityRules[_pivot_item_format_rule_level_1.pivotLevelRow.propertyName] =\n        [_pivot_item_format_rule_1.intersectionLevelMode.propertyName, '=', 'SpecificLevel'];\n    return {\n        properties: properties,\n        visibilityFilterRules: visibilityRules\n    };\n}\nfunction grabDataItems(dashboardItem, dataSourceBrowser) {\n    return function () { return grapApplyToItems(dashboardItem, dataSourceBrowser)()\n        .concat(dashboardItem\n        .hiddenMeasures()\n        .map(function (m) { return ({\n        uniqueName: m.uniqueName(),\n        displayName: _default_1.getLocalizationById(_section_descriptors_1.SectionDescriptors.HiddenMeasures.title) + ' - ' + _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, dashboardItem, m)\n    }); })); };\n}\nfunction grapApplyToItems(pivot, dataSourceBrowser) {\n    return function () { return pivot.values().map(function (m) { return ({\n        uniqueName: m.uniqueName(),\n        displayName: _default_1.getLocalizationById(_section_descriptors_1.SectionDescriptors.Values.title) + ' - ' + _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, m)\n    }); }).concat(pivot.columns().map(function (d) { return ({\n        uniqueName: d.uniqueName(),\n        displayName: _default_1.getLocalizationById(_section_descriptors_1.SectionDescriptors.Columns.title) + ' - ' + _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, d)\n    }); })).concat(pivot.rows().map(function (d) { return ({\n        uniqueName: d.uniqueName(),\n        displayName: _default_1.getLocalizationById(_section_descriptors_1.SectionDescriptors.Rows.title) + ' - ' + _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, pivot, d)\n    }); })); };\n}\n"]},"metadata":{},"sourceType":"script"}