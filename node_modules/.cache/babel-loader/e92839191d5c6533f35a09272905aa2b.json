{"ast":null,"code":"/**\n* DevExpress Analytics (widgets\\filtereditor\\operators\\operandValueSurface.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OperandValueSurface = void 0;\n\nvar ko = require(\"knockout\");\n\nvar operandSurfaceBase_1 = require(\"./operandSurfaceBase\");\n\nvar unaryOperandSurface_1 = require(\"./unaryOperandSurface\");\n\nvar _utils_1 = require(\"../../_utils\");\n\nvar _localization_1 = require(\"../../../property-grid/localization/_localization\");\n\nvar operandPropertySurface_1 = require(\"./operandPropertySurface\");\n\nvar pathRequest_1 = require(\"../../common/pathRequest\");\n\nvar localization_utils_1 = require(\"../../../property-grid/localization/localization_utils\");\n\nvar _valueEditorHelper_1 = require(\"../../internal/_valueEditorHelper\");\n\nvar data_source_1 = require(\"devextreme/data/data_source\");\n\nvar unary_1 = require(\"../../criteria/operators/options/unary\");\n\nvar OperandValueSurface = function (_super) {\n  __extends(OperandValueSurface, _super);\n\n  function OperandValueSurface(operator, parent, fieldListProvider, path) {\n    var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;\n\n    _this._value = ko.observable(null);\n\n    _this._updateDate = function (specifics) {\n      if (specifics === 'date') {\n        if (!(this._value() instanceof Date)) {\n          this._value(new Date(new Date().setHours(0, 0, 0, 0)));\n        }\n      } else {\n        this._value('');\n      }\n    };\n\n    _this.changeValue = function () {\n      var parent = _this.getRealParent(_this.parent);\n\n      var property = _this.getRealProperty(_this);\n\n      var propertyLocation = _this.getPropertyName(parent, property);\n\n      var model = parent.model.changeValue(_this.model, _this.reverse, propertyLocation);\n\n      if (propertyLocation.index !== null) {\n        parent[propertyLocation.name]()[propertyLocation.index].dispose();\n        parent[propertyLocation.name].splice(propertyLocation.index, 1, parent.createChildSurface(model));\n      } else {\n        parent[propertyLocation.name]().dispose();\n        parent[propertyLocation.name](parent.createChildSurface(model));\n      }\n    };\n\n    _this.dataType = ko.observable('');\n    _this.values = ko.observable([]);\n    _this.isEditable = ko.observable(false);\n    _this.templateName = 'dx-filtereditor-value';\n\n    _this.getNumberEditorOptions = function () {\n      return _valueEditorHelper_1.ValueEditorHelper.getNumberEditorOptions(_this.dataType(), _this.specifics(), {\n        value: _this._value,\n        onFocusOut: function () {\n          _this.isEditable(false);\n        }\n      });\n    };\n\n    var dataSource = null;\n\n    _this._disposables.push(_this.dataSource = ko.computed(function () {\n      dataSource && dataSource.dispose();\n      dataSource = new data_source_1.default({\n        store: _this.values(),\n        paginate: _this.values().length > 200,\n        pageSize: 100\n      });\n      return dataSource;\n    }));\n\n    if (parent instanceof unaryOperandSurface_1.UnaryOperandSurface) {\n      _this.specifics = parent.parent.specifics;\n      _this.isUpdated = parent.parent.isUpdated;\n      _this.dataType = parent.parent.dataType;\n\n      if (parent.model.operatorType === unary_1.UnaryOperatorType.Minus) {\n        _this.reverse = true;\n      }\n    } else {\n      _this.specifics = parent.specifics;\n      _this.isUpdated = parent.isUpdated;\n      _this.dataType = parent.dataType;\n    }\n\n    if (operator.specifics && ko.isWritableObservable(_this.specifics)) _this.specifics(operator.specifics);\n\n    _this._disposables.push(_this.specifics.subscribe(function (newVal) {\n      if (!_this.isUpdated || !_this.isUpdated()) {\n        operator.specifics = newVal;\n\n        _this._updateDate(newVal);\n      }\n    }));\n\n    _this._value(operator.value);\n\n    _this._disposables.push(_this._value.subscribe(function (newVal) {\n      _this.model.value = newVal;\n\n      _this.helper.onChange();\n    }));\n\n    if (_utils_1.isNullOrEmptyString(_this._value())) {\n      _this._updateDate(_this.specifics());\n    }\n\n    _this._disposables.push(_this.value = ko.computed({\n      read: function () {\n        var value = _this._value();\n\n        if (value instanceof Date) {\n          value = _localization_1.formatDate(value);\n        }\n\n        if (_this.items.length > 0) {\n          var result = _this.items.filter(function (item) {\n            return String(item.value) === String(value);\n          })[0];\n\n          if (result) {\n            return result.display;\n          }\n        }\n\n        if (_this.reverse) {\n          value = '-' + value;\n        }\n\n        return value !== null && value !== undefined && value !== '' ? value : _this.getDefaultValue();\n      },\n      write: function (newVal) {\n        if (newVal > 0 && !_this.reverse || newVal < 0 && _this.reverse) {\n          _this._value(newVal);\n        } else if (newVal > 0 && _this.reverse || newVal < 0 && !_this.reverse) {\n          _this.reverse = !_this.reverse;\n\n          _this._value(newVal < 0 ? ('' + newVal).substring(1) : newVal);\n\n          _this.changeValue();\n        }\n      }\n    }));\n\n    _this._disposables.push(ko.computed(function () {\n      var itemsProvider = ko.unwrap(fieldListProvider);\n\n      if (itemsProvider && itemsProvider.getValues && _this.parent.leftPart instanceof operandPropertySurface_1.OperandPropertySurface) {\n        if (_this.parent.leftPart.propertyName()) {\n          itemsProvider.getValues(new pathRequest_1.PathRequest(ko.unwrap(_this.path) + '.' + _this.parent.leftPart.propertyName())).done(function (result) {\n            _this.values(result);\n          });\n        }\n      }\n    }));\n\n    operator.specifics = _this.specifics();\n    return _this;\n  }\n\n  Object.defineProperty(OperandValueSurface.prototype, \"items\", {\n    get: function () {\n      return this.values();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(OperandValueSurface.prototype, \"displayType\", {\n    get: function () {\n      return null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  OperandValueSurface.prototype.isDefaultDisplay = function () {\n    return this.value() === this.getDefaultValue();\n  };\n\n  OperandValueSurface.prototype.getDefaultValue = function () {\n    return OperandValueSurface._defaultValue ? OperandValueSurface._defaultValue : OperandValueSurface._defaultValue = localization_utils_1.getLocalization('Enter a value', 'StringId.FilterEmptyEnter');\n  };\n\n  return OperandValueSurface;\n}(operandSurfaceBase_1.OperandSurfaceBase);\n\nexports.OperandValueSurface = OperandValueSurface;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/widgets/filtereditor/operators/operandValueSurface.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","OperandValueSurface","ko","require","operandSurfaceBase_1","unaryOperandSurface_1","_utils_1","_localization_1","operandPropertySurface_1","pathRequest_1","localization_utils_1","_valueEditorHelper_1","data_source_1","unary_1","_super","operator","parent","fieldListProvider","path","_this","_value","observable","_updateDate","specifics","Date","setHours","changeValue","getRealParent","property","getRealProperty","propertyLocation","getPropertyName","model","reverse","index","name","dispose","splice","createChildSurface","dataType","values","isEditable","templateName","getNumberEditorOptions","ValueEditorHelper","onFocusOut","dataSource","_disposables","push","computed","default","store","paginate","length","pageSize","UnaryOperandSurface","isUpdated","operatorType","UnaryOperatorType","Minus","isWritableObservable","subscribe","newVal","helper","onChange","isNullOrEmptyString","read","formatDate","items","result","filter","item","display","undefined","getDefaultValue","write","substring","itemsProvider","unwrap","getValues","leftPart","OperandPropertySurface","propertyName","PathRequest","done","get","enumerable","configurable","isDefaultDisplay","_defaultValue","getLocalization","OperandSurfaceBase"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (widgets\\filtereditor\\operators\\operandValueSurface.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OperandValueSurface = void 0;\nvar ko = require(\"knockout\");\nvar operandSurfaceBase_1 = require(\"./operandSurfaceBase\");\nvar unaryOperandSurface_1 = require(\"./unaryOperandSurface\");\nvar _utils_1 = require(\"../../_utils\");\nvar _localization_1 = require(\"../../../property-grid/localization/_localization\");\nvar operandPropertySurface_1 = require(\"./operandPropertySurface\");\nvar pathRequest_1 = require(\"../../common/pathRequest\");\nvar localization_utils_1 = require(\"../../../property-grid/localization/localization_utils\");\nvar _valueEditorHelper_1 = require(\"../../internal/_valueEditorHelper\");\nvar data_source_1 = require(\"devextreme/data/data_source\");\nvar unary_1 = require(\"../../criteria/operators/options/unary\");\nvar OperandValueSurface = (function (_super) {\n    __extends(OperandValueSurface, _super);\n    function OperandValueSurface(operator, parent, fieldListProvider, path) {\n        var _this = _super.call(this, operator, parent, fieldListProvider, path) || this;\n        _this._value = ko.observable(null);\n        _this._updateDate = function (specifics) {\n            if (specifics === 'date') {\n                if (!(this._value() instanceof Date)) {\n                    this._value(new Date(new Date().setHours(0, 0, 0, 0)));\n                }\n            }\n            else {\n                this._value('');\n            }\n        };\n        _this.changeValue = function () {\n            var parent = _this.getRealParent(_this.parent);\n            var property = _this.getRealProperty(_this);\n            var propertyLocation = _this.getPropertyName(parent, property);\n            var model = parent.model.changeValue(_this.model, _this.reverse, propertyLocation);\n            if (propertyLocation.index !== null) {\n                parent[propertyLocation.name]()[propertyLocation.index].dispose();\n                parent[propertyLocation.name].splice(propertyLocation.index, 1, parent.createChildSurface(model));\n            }\n            else {\n                parent[propertyLocation.name]().dispose();\n                parent[propertyLocation.name](parent.createChildSurface(model));\n            }\n        };\n        _this.dataType = ko.observable('');\n        _this.values = ko.observable([]);\n        _this.isEditable = ko.observable(false);\n        _this.templateName = 'dx-filtereditor-value';\n        _this.getNumberEditorOptions = function () {\n            return _valueEditorHelper_1.ValueEditorHelper.getNumberEditorOptions(_this.dataType(), _this.specifics(), { value: _this._value, onFocusOut: function () { _this.isEditable(false); } });\n        };\n        var dataSource = null;\n        _this._disposables.push(_this.dataSource = ko.computed(function () {\n            dataSource && dataSource.dispose();\n            dataSource = new data_source_1.default({\n                store: _this.values(),\n                paginate: _this.values().length > 200,\n                pageSize: 100\n            });\n            return dataSource;\n        }));\n        if (parent instanceof unaryOperandSurface_1.UnaryOperandSurface) {\n            _this.specifics = parent.parent.specifics;\n            _this.isUpdated = parent.parent.isUpdated;\n            _this.dataType = parent.parent.dataType;\n            if (parent.model.operatorType === unary_1.UnaryOperatorType.Minus) {\n                _this.reverse = true;\n            }\n        }\n        else {\n            _this.specifics = parent.specifics;\n            _this.isUpdated = parent.isUpdated;\n            _this.dataType = parent.dataType;\n        }\n        if (operator.specifics && ko.isWritableObservable(_this.specifics))\n            _this.specifics(operator.specifics);\n        _this._disposables.push(_this.specifics.subscribe(function (newVal) {\n            if (!_this.isUpdated || !_this.isUpdated()) {\n                operator.specifics = newVal;\n                _this._updateDate(newVal);\n            }\n        }));\n        _this._value(operator.value);\n        _this._disposables.push(_this._value.subscribe(function (newVal) {\n            _this.model.value = newVal;\n            _this.helper.onChange();\n        }));\n        if (_utils_1.isNullOrEmptyString(_this._value())) {\n            _this._updateDate(_this.specifics());\n        }\n        _this._disposables.push(_this.value = ko.computed({\n            read: function () {\n                var value = _this._value();\n                if (value instanceof Date) {\n                    value = _localization_1.formatDate(value);\n                }\n                if (_this.items.length > 0) {\n                    var result = _this.items.filter(function (item) { return String(item.value) === String(value); })[0];\n                    if (result) {\n                        return result.display;\n                    }\n                }\n                if (_this.reverse) {\n                    value = '-' + value;\n                }\n                return value !== null && value !== undefined && value !== '' ? value : _this.getDefaultValue();\n            },\n            write: function (newVal) {\n                if (newVal > 0 && !_this.reverse || newVal < 0 && _this.reverse) {\n                    _this._value(newVal);\n                }\n                else if (newVal > 0 && _this.reverse || newVal < 0 && !_this.reverse) {\n                    _this.reverse = !_this.reverse;\n                    _this._value(newVal < 0 ? ('' + newVal).substring(1) : newVal);\n                    _this.changeValue();\n                }\n            }\n        }));\n        _this._disposables.push(ko.computed(function () {\n            var itemsProvider = ko.unwrap(fieldListProvider);\n            if (itemsProvider && itemsProvider.getValues && _this.parent.leftPart instanceof operandPropertySurface_1.OperandPropertySurface) {\n                if (_this.parent.leftPart.propertyName()) {\n                    itemsProvider.getValues(new pathRequest_1.PathRequest(ko.unwrap(_this.path) + '.' + _this.parent.leftPart.propertyName())).done(function (result) {\n                        _this.values(result);\n                    });\n                }\n            }\n        }));\n        operator.specifics = _this.specifics();\n        return _this;\n    }\n    Object.defineProperty(OperandValueSurface.prototype, \"items\", {\n        get: function () {\n            return this.values();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(OperandValueSurface.prototype, \"displayType\", {\n        get: function () {\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OperandValueSurface.prototype.isDefaultDisplay = function () {\n        return this.value() === this.getDefaultValue();\n    };\n    OperandValueSurface.prototype.getDefaultValue = function () {\n        return OperandValueSurface._defaultValue ? OperandValueSurface._defaultValue :\n            OperandValueSurface._defaultValue = localization_utils_1.getLocalization('Enter a value', 'StringId.FilterEmptyEnter');\n    };\n    return OperandValueSurface;\n}(operandSurfaceBase_1.OperandSurfaceBase));\nexports.OperandValueSurface = OperandValueSurface;\n"]},"metadata":{},"sourceType":"script"}