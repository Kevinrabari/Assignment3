{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_underlying-data-provider.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnderlyingDataProvider = void 0;\n\nvar string_1 = require(\"devextreme/core/utils/string\");\n\nvar _default_1 = require(\"../../data/localization/_default\");\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar _utils_1 = require(\"../../data/_utils\");\n\nvar _date_utils_1 = require(\"../../model/internal/_date-utils\");\n\nvar UnderlyingDataProvider = function () {\n  function UnderlyingDataProvider(_serviceClient) {\n    this._serviceClient = _serviceClient;\n  }\n\n  UnderlyingDataProvider.prototype._getValidDataQueryParamsValues = function (values, dataDashboardItem) {\n    var itemQueryParams = _jquery_helpers_1.deepExtend({}, dataDashboardItem._getDataQueryParams());\n\n    if (itemQueryParams.DrillDown) {\n      var drillDownLen = itemQueryParams.DrillDown.length;\n      var columnValuesLen = values.length;\n\n      var visibleDimensionsCount = dataDashboardItem._getInteractivityAxisDimensionCount();\n\n      var notInteractivityDimensionsCount = visibleDimensionsCount - dataDashboardItem._interactivityDimensions.length;\n      var interactivityColumnsValues = columnValuesLen - notInteractivityDimensionsCount;\n\n      if (drillDownLen > 0) {\n        var stateToModelDiff = interactivityColumnsValues - drillDownLen - 1;\n\n        if (stateToModelDiff < 0) {\n          itemQueryParams.DrillDown.splice(stateToModelDiff);\n        }\n      }\n    }\n\n    return itemQueryParams;\n  };\n\n  UnderlyingDataProvider.prototype._getUnderlyingDataArgsAxisPoints = function (data, args) {\n    var axisNames = data.getAxisNames(),\n        axisPoints = args.axisPoints;\n\n    if (!axisPoints) {\n      axisPoints = [];\n      axisNames.forEach(function (axisName) {\n        var axis = data.getAxis(axisName),\n            axisPoint = undefined;\n\n        if (args.uniqueValuesByAxisName) {\n          var axisValues = args.uniqueValuesByAxisName[axisName];\n          if (axisValues) axisPoint = axis.getPointByUniqueValues(axisValues.map(_utils_1.unwrapSpecialNullValue));\n        }\n\n        if (args.valuesByAxisName) {\n          var axisValues = args.valuesByAxisName[axisName];\n          if (axisValues) axisPoint = axis.getPointByValues(axisValues.map(_utils_1.unwrapSpecialNullValue));\n        }\n\n        if (!axisPoint) axisPoint = axis.getRootPoint();\n        axisPoints.push(axisPoint);\n      });\n    }\n\n    axisNames.forEach(function (axisName) {\n      var points = axisPoints.map(function (axisPoint) {\n        return axisPoint.getAxisName() === axisName;\n      });\n\n      if (points.length == 0) {\n        axisPoints.push(data.getAxis(axisName).getRootPoint());\n      }\n    });\n    return axisPoints;\n  };\n\n  UnderlyingDataProvider.prototype.requestUnderlyingData = function (dataDashboardItem, args) {\n    var itemDataManager = dataDashboardItem._dataManager();\n\n    if (!_utils_1.type.isDefined(itemDataManager)) throw Error(string_1.format(_default_1.getLocalizationById('DashboardWebStringId.Notification.UnderlyingRequestDataNotLoaded'), dataDashboardItem.name()));\n\n    var metaData = itemDataManager.getMetaData(),\n        axisPoints = this._getUnderlyingDataArgsAxisPoints(dataDashboardItem._getItemData(), args),\n        columnNames = args.dataMembers,\n        pivotAreaValues = {};\n\n    axisPoints.forEach(function (axisPoint) {\n      var name = axisPoint.getAxisName();\n      pivotAreaValues[metaData.getPivotAreaByAxisName(name)] = _date_utils_1.toStringArray(axisPoint.getUniquePath());\n    });\n\n    var isInteractivityByColumns = dataDashboardItem._itemInteractivityByColumnAxis();\n\n    var columnValues = pivotAreaValues['Columns'];\n    var rowValues = pivotAreaValues['Rows'];\n\n    var itemQueryParams = this._getValidDataQueryParamsValues(isInteractivityByColumns ? columnValues : rowValues, dataDashboardItem);\n\n    var promise = this._serviceClient.getUnderlyingData(dataDashboardItem.componentName(), columnValues, rowValues, columnNames, itemQueryParams);\n\n    return promise.then(function (data) {\n      data.Data = data.Data.map(function (row) {\n        return row = row.map(function (value) {\n          return _date_utils_1.tryConvertToDateTime(value);\n        });\n      });\n      return data;\n    });\n  };\n\n  return UnderlyingDataProvider;\n}();\n\nexports.UnderlyingDataProvider = UnderlyingDataProvider;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/common/data/_underlying-data-provider.js"],"names":["Object","defineProperty","exports","value","UnderlyingDataProvider","string_1","require","_default_1","_jquery_helpers_1","_utils_1","_date_utils_1","_serviceClient","prototype","_getValidDataQueryParamsValues","values","dataDashboardItem","itemQueryParams","deepExtend","_getDataQueryParams","DrillDown","drillDownLen","length","columnValuesLen","visibleDimensionsCount","_getInteractivityAxisDimensionCount","notInteractivityDimensionsCount","_interactivityDimensions","interactivityColumnsValues","stateToModelDiff","splice","_getUnderlyingDataArgsAxisPoints","data","args","axisNames","getAxisNames","axisPoints","forEach","axisName","axis","getAxis","axisPoint","undefined","uniqueValuesByAxisName","axisValues","getPointByUniqueValues","map","unwrapSpecialNullValue","valuesByAxisName","getPointByValues","getRootPoint","push","points","getAxisName","requestUnderlyingData","itemDataManager","_dataManager","type","isDefined","Error","format","getLocalizationById","name","metaData","getMetaData","_getItemData","columnNames","dataMembers","pivotAreaValues","getPivotAreaByAxisName","toStringArray","getUniquePath","isInteractivityByColumns","_itemInteractivityByColumnAxis","columnValues","rowValues","promise","getUnderlyingData","componentName","then","Data","row","tryConvertToDateTime"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_underlying-data-provider.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnderlyingDataProvider = void 0;\nvar string_1 = require(\"devextreme/core/utils/string\");\nvar _default_1 = require(\"../../data/localization/_default\");\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar _utils_1 = require(\"../../data/_utils\");\nvar _date_utils_1 = require(\"../../model/internal/_date-utils\");\nvar UnderlyingDataProvider = (function () {\n    function UnderlyingDataProvider(_serviceClient) {\n        this._serviceClient = _serviceClient;\n    }\n    UnderlyingDataProvider.prototype._getValidDataQueryParamsValues = function (values, dataDashboardItem) {\n        var itemQueryParams = _jquery_helpers_1.deepExtend({}, dataDashboardItem._getDataQueryParams());\n        if (itemQueryParams.DrillDown) {\n            var drillDownLen = itemQueryParams.DrillDown.length;\n            var columnValuesLen = values.length;\n            var visibleDimensionsCount = dataDashboardItem._getInteractivityAxisDimensionCount();\n            var notInteractivityDimensionsCount = visibleDimensionsCount - dataDashboardItem._interactivityDimensions.length;\n            var interactivityColumnsValues = columnValuesLen - notInteractivityDimensionsCount;\n            if (drillDownLen > 0) {\n                var stateToModelDiff = interactivityColumnsValues - drillDownLen - 1;\n                if (stateToModelDiff < 0) {\n                    itemQueryParams.DrillDown.splice(stateToModelDiff);\n                }\n            }\n        }\n        return itemQueryParams;\n    };\n    UnderlyingDataProvider.prototype._getUnderlyingDataArgsAxisPoints = function (data, args) {\n        var axisNames = data.getAxisNames(), axisPoints = args.axisPoints;\n        if (!axisPoints) {\n            axisPoints = [];\n            axisNames.forEach(function (axisName) {\n                var axis = data.getAxis(axisName), axisPoint = undefined;\n                if (args.uniqueValuesByAxisName) {\n                    var axisValues = args.uniqueValuesByAxisName[axisName];\n                    if (axisValues)\n                        axisPoint = axis.getPointByUniqueValues(axisValues.map(_utils_1.unwrapSpecialNullValue));\n                }\n                if (args.valuesByAxisName) {\n                    var axisValues = args.valuesByAxisName[axisName];\n                    if (axisValues)\n                        axisPoint = axis.getPointByValues(axisValues.map(_utils_1.unwrapSpecialNullValue));\n                }\n                if (!axisPoint)\n                    axisPoint = axis.getRootPoint();\n                axisPoints.push(axisPoint);\n            });\n        }\n        axisNames.forEach(function (axisName) {\n            var points = axisPoints.map(function (axisPoint) {\n                return axisPoint.getAxisName() === axisName;\n            });\n            if (points.length == 0) {\n                axisPoints.push(data.getAxis(axisName).getRootPoint());\n            }\n        });\n        return axisPoints;\n    };\n    UnderlyingDataProvider.prototype.requestUnderlyingData = function (dataDashboardItem, args) {\n        var itemDataManager = dataDashboardItem._dataManager();\n        if (!_utils_1.type.isDefined(itemDataManager))\n            throw Error(string_1.format(_default_1.getLocalizationById('DashboardWebStringId.Notification.UnderlyingRequestDataNotLoaded'), dataDashboardItem.name()));\n        var metaData = itemDataManager.getMetaData(), axisPoints = this._getUnderlyingDataArgsAxisPoints(dataDashboardItem._getItemData(), args), columnNames = args.dataMembers, pivotAreaValues = {};\n        axisPoints.forEach(function (axisPoint) {\n            var name = axisPoint.getAxisName();\n            pivotAreaValues[metaData.getPivotAreaByAxisName(name)] = _date_utils_1.toStringArray(axisPoint.getUniquePath());\n        });\n        var isInteractivityByColumns = dataDashboardItem._itemInteractivityByColumnAxis();\n        var columnValues = pivotAreaValues['Columns'];\n        var rowValues = pivotAreaValues['Rows'];\n        var itemQueryParams = this._getValidDataQueryParamsValues(isInteractivityByColumns ? columnValues : rowValues, dataDashboardItem);\n        var promise = this._serviceClient.getUnderlyingData(dataDashboardItem.componentName(), columnValues, rowValues, columnNames, itemQueryParams);\n        return promise.then(function (data) {\n            data.Data = data.Data.map(function (row) { return row = row.map(function (value) { return _date_utils_1.tryConvertToDateTime(value); }); });\n            return data;\n        });\n    };\n    return UnderlyingDataProvider;\n}());\nexports.UnderlyingDataProvider = UnderlyingDataProvider;\n"]},"metadata":{},"sourceType":"script"}