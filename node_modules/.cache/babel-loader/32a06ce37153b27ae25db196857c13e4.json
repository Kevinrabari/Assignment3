{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_map-item.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mapItem = void 0;\n\nvar string_1 = require(\"devextreme/core/utils/string\");\n\nvar vector_map_1 = require(\"devextreme/viz/vector_map\");\n\nvar projection_1 = require(\"devextreme/viz/vector_map/projection\");\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar _localization_ids_1 = require(\"../../data/_localization-ids\");\n\nvar _localizer_1 = require(\"../../data/_localizer\");\n\nvar caption_toolbar_options_1 = require(\"../widgets/caption-toolbar/caption-toolbar-options\");\n\nvar _caption_toolbar_css_classes_1 = require(\"../widgets/caption-toolbar/_caption-toolbar-css-classes\");\n\nvar _base_item_1 = require(\"./_base-item\");\n\nvar projection = function () {\n  var parameters = projection_1.projection.get('mercator').source(),\n      _to = parameters.to,\n      _from = parameters.from;\n\n  parameters.to = function (coordinates) {\n    var coords = _to(coordinates);\n\n    return [clamp(coords[0], -1, +1), coords[1]];\n  };\n\n  parameters.from = function (coordinates) {\n    var coords = [clamp(coordinates[0], -1, +1), coordinates[1]];\n    return _from(coords);\n  };\n\n  return projection_1.projection(parameters);\n\n  function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n  }\n}();\n\nvar mapItem = function (_super) {\n  __extends(mapItem, _super);\n\n  function mapItem($container, options) {\n    var _this = _super.call(this, $container, options) || this;\n\n    _this.isInitialExtentChanged = false;\n    return _this;\n  }\n\n  mapItem.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this.mapViewer && this.mapViewer.dispose();\n  };\n\n  mapItem.prototype._renderContentInternal = function (element, changeExisting, options) {\n    this._raiseItemWidgetOptionsPrepared(options);\n\n    if (changeExisting && this.mapViewer) {\n      this._unsubscribeItemEvents();\n\n      this.mapViewer.option(options);\n\n      if (this._shouldResetClientViewport(this.options.ViewModel.Viewport)) {\n        this.resetClientViewport();\n      }\n    } else {\n      this.mapViewer = new vector_map_1.default(element, options);\n    }\n\n    this._updatePreviousViewport(this.options.ViewModel.Viewport);\n\n    this._subscribeItemEvents();\n  };\n\n  mapItem.prototype.resetClientViewport = function () {\n    this.clientState = null;\n\n    this._onClientStateUpdate(this._getClientContext());\n  };\n\n  mapItem.prototype._shouldResetClientViewport = function (viewportViewModel) {\n    if (this.previousViewportViewModel) {\n      var viewportChanged = !this._viewportEquals(this.previousViewportViewModel, viewportViewModel) || this.previousViewportViewModel.CreateViewerPaddings !== viewportViewModel.CreateViewerPaddings;\n      if (viewportChanged && this.clientState && this._viewportEquals(this.clientState.clusterizationInfo.viewport, viewportViewModel) && !viewportViewModel.CreateViewerPaddings) return false;\n      return viewportChanged;\n    }\n\n    return false;\n  };\n\n  mapItem.prototype._viewportEquals = function (viewport1, viewport2) {\n    return viewport1.RightLongitude === viewport2.RightLongitude && viewport1.LeftLongitude === viewport2.LeftLongitude && viewport1.BottomLatitude === viewport2.BottomLatitude && viewport1.TopLatitude === viewport2.TopLatitude && viewport1.CenterPointLongitude === viewport2.CenterPointLongitude && viewport1.CenterPointLatitude === viewport2.CenterPointLatitude;\n  };\n\n  mapItem.prototype._updatePreviousViewport = function (viewport) {\n    this.previousViewportViewModel = {\n      RightLongitude: viewport.RightLongitude,\n      LeftLongitude: viewport.LeftLongitude,\n      BottomLatitude: viewport.BottomLatitude,\n      TopLatitude: viewport.TopLatitude,\n      CenterPointLongitude: viewport.CenterPointLongitude,\n      CenterPointLatitude: viewport.CenterPointLatitude,\n      CreateViewerPaddings: viewport.CreateViewerPaddings\n    };\n  };\n\n  mapItem.prototype._clearSelectionUnsafe = function () {\n    this.mapViewer.clearSelection();\n  };\n\n  mapItem.prototype.getInfoUnsafe = function () {\n    return _jquery_helpers_1.deepExtend(_super.prototype.getInfoUnsafe.call(this), {\n      viewport: this._getViewport()\n    });\n  };\n\n  mapItem.prototype._getSpecificStatePanelItems = function () {\n    var _this = this;\n\n    if (this.options.ViewModel.LockNavigation !== true && this.isInitialExtentChanged) {\n      return [{\n        name: caption_toolbar_options_1.dashboardToolbarItemNames.initialExtent,\n        click: function (element) {\n          _this._toggleInitialExtentChanged(false);\n        },\n        icon: _caption_toolbar_css_classes_1.cssClasses.iconInitialExtent,\n        type: 'button',\n        hint: _localizer_1.localizer.getString(_localization_ids_1.localizationId.buttonNames.InitialExtent)\n      }];\n    } else return [];\n  };\n\n  mapItem.prototype._getMapViewerOptions = function () {\n    var that = this,\n        viewModel = that.options.ViewModel;\n    return {\n      projection: projection,\n      encodeHtml: that._isEncodeHtml(),\n      background: {\n        borderWidth: 0,\n        borderColor: 'none'\n      },\n      controlBar: {\n        enabled: false\n      },\n      zoomFactor: that._calculateZoomFactor(viewModel.Viewport, _jquery_helpers_1.getWidth(that.contentRoot), _jquery_helpers_1.getHeight(that.contentRoot)),\n      maxZoomFactor: 1 << 18,\n      center: [viewModel.Viewport.CenterPointLongitude, viewModel.Viewport.CenterPointLatitude],\n      panningEnabled: viewModel.LockNavigation !== true,\n      zoomingEnabled: viewModel.LockNavigation !== true\n    };\n  };\n\n  mapItem.prototype._getLabelSettings = function (viewModel) {\n    return {\n      label: {\n        enabled: !!viewModel.ShapeTitleAttributeName || viewModel.IncludeSummaryValueToShapeTitle,\n        dataField: 'title'\n      }\n    };\n  };\n\n  mapItem.prototype._calculateZoomFactor = function (viewport, width, height) {\n    var min = width < height ? width : height,\n        mapWidth = this._translateLon(viewport.RightLongitude, min) - this._translateLon(viewport.LeftLongitude, min),\n        mapHeight = this._translateLat(viewport.BottomLatitude, min) - this._translateLat(viewport.TopLatitude, min),\n        latitudeZoom = width / mapWidth,\n        longitudeZoom = height / mapHeight,\n        zoom = latitudeZoom < longitudeZoom ? latitudeZoom : longitudeZoom;\n\n    if (viewport.CreateViewerPaddings) {\n      zoom *= 0.95;\n    }\n\n    return zoom;\n  };\n\n  mapItem.prototype._translateLon = function (lon, size) {\n    var lon_ = lon * Math.PI / 180;\n    return size / 2 + size / (2 * Math.PI) * lon_;\n  };\n\n  mapItem.prototype._translateLat = function (lat, size) {\n    var lat_ = lat * Math.PI / 180;\n    return size / 2 - size / (2 * Math.PI) * Math.log(Math.tan(Math.PI / 4 + lat_ / 2));\n  };\n\n  mapItem.prototype._getMapDataSource = function (mapItems, titleName) {\n    var mapDataSource = [],\n        data,\n        type,\n        points,\n        boundary,\n        point,\n        segments,\n        segmentData,\n        pushAction;\n\n    for (var i = 0; i < mapItems.length; i++) {\n      data = [];\n      type = 'area';\n\n      if (mapItems[i].Latitude && mapItems[i].Longitude && mapItems[i].Size) {\n        data.push([mapItems[i].Longitude, mapItems[i].Latitude]);\n      }\n\n      if (mapItems[i].Segments) {\n        segments = mapItems[i].Segments;\n\n        for (var j = 0; j < segments.length; j++) {\n          pushAction = function (row) {\n            if (segments[j].IsClosed && row.length > 1) {\n              var first = row[0],\n                  last = row[row.length - 1];\n              if (first[0] != last[0] || first[1] != last[1]) row.push(first);\n            }\n\n            data.push(row);\n          };\n\n          if (!segments[j].IsFilled) type = 'line';\n          points = segments[j].Points;\n          segmentData = [];\n\n          for (var k = 0; k < points.length; k++) {\n            segmentData.push([points[k].Longitude, points[k].Latitude]);\n          }\n\n          pushAction(segmentData);\n\n          for (var l = 0; l < segments[j].Boundaries.length; l++) {\n            segmentData = [];\n            boundary = segments[j].Boundaries[l];\n\n            for (var m = 0; m < boundary.Points.length; m++) {\n              point = boundary.Points[m];\n              segmentData.push([point.Longitude, point.Latitude]);\n            }\n\n            pushAction(segmentData);\n          }\n        }\n      }\n\n      mapDataSource.push({\n        coordinates: data,\n        type: type,\n        attributes: {}\n      });\n\n      for (var j = 0; j < mapItems[i].Attributes.length; j++) {\n        if (mapItems[i].Attributes[j].Name === titleName) {\n          mapDataSource[i].attributes.title = mapItems[i].Attributes[j].Value;\n          break;\n        }\n      }\n    }\n\n    return mapDataSource;\n  };\n\n  mapItem.prototype._configureGeometryLayers = function (mapDataSource, areaSettings) {\n    var areaDataSource = [],\n        lineDataSource = [],\n        layers = [];\n\n    for (var i = 0; i < mapDataSource.length; i++) {\n      if (mapDataSource[i].type === 'line') lineDataSource.push(mapDataSource[i]);else areaDataSource.push(mapDataSource[i]);\n    }\n\n    layers.push(__assign({\n      name: 'area',\n      type: 'area',\n      dataSource: areaDataSource\n    }, areaSettings));\n    if (lineDataSource.length > 0) layers.push({\n      name: 'line',\n      type: 'line',\n      dataSource: lineDataSource\n    });\n    return layers;\n  };\n\n  mapItem.prototype._getLegend = function (legendModel) {\n    var legend = legendModel && !!legendModel.Visible ? {} : undefined;\n\n    if (legend) {\n      this._updateLegendPosition(legend, legendModel);\n    }\n\n    return legend;\n  };\n\n  mapItem.prototype._updateLegendPosition = function (legend, legendModel) {\n    switch (legendModel.Orientation) {\n      case 'Vertical':\n        legend.orientation = 'vertical';\n        legend.inverted = true;\n        break;\n\n      case 'Horizontal':\n        legend.orientation = 'horizontal';\n        break;\n\n      default:\n        break;\n    }\n\n    switch (legendModel.Position) {\n      case 'TopLeft':\n        legend.verticalAlignment = 'top';\n        legend.horizontalAlignment = 'left';\n        break;\n\n      case 'TopCenter':\n        legend.verticalAlignment = 'top';\n        legend.horizontalAlignment = 'center';\n        break;\n\n      case 'TopRight':\n        legend.verticalAlignment = 'top';\n        legend.horizontalAlignment = 'right';\n        break;\n\n      case 'BottomLeft':\n        legend.verticalAlignment = 'bottom';\n        legend.horizontalAlignment = 'left';\n        break;\n\n      case 'BottomCenter':\n        legend.verticalAlignment = 'bottom';\n        legend.horizontalAlignment = 'center';\n        break;\n\n      case 'BottomRight':\n        legend.verticalAlignment = 'bottom';\n        legend.horizontalAlignment = 'right';\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  mapItem.prototype._isSelected = function (current) {\n    var selectedValues = this._getSelectedValues(),\n        selected = false,\n        equals;\n\n    if (selectedValues && selectedValues.length > 0 && selectedValues[0].length === current.length) {\n      for (var i = 0; i < selectedValues.length; i++) {\n        equals = true;\n\n        for (var j = 0; j < current.length; j++) {\n          if (selectedValues[i][j] !== current[j]) {\n            equals = false;\n            break;\n          }\n        }\n\n        if (equals) {\n          selected = true;\n          break;\n        }\n      }\n    }\n\n    return selected;\n  };\n\n  mapItem.prototype._getToolTip = function (name, value) {\n    return string_1.format('{0}: {1}', this._getHtml(name), this._getHtml(value));\n  };\n\n  mapItem.prototype._getColors = function (colorModels) {\n    var colors;\n\n    if (colorModels) {\n      colors = [];\n\n      for (var i = 0; i < colorModels.length; i++) {\n        colors.push('rgb(' + colorModels[i].R + ', ' + colorModels[i].G + ', ' + colorModels[i].B + ')');\n      }\n\n      return colors;\n    }\n  };\n\n  mapItem.prototype._updateRangeStops = function (rangeStops, min, max, percent) {\n    var res = [];\n\n    for (var i = 0; i < rangeStops.length; i++) {\n      res.push(rangeStops[i]);\n    }\n\n    if (percent) {\n      this._updatePercentRangeStops(res, min, max);\n    }\n\n    if (res.length > 0 && res[0] > min) {\n      res[0] = min;\n    }\n\n    if (res[res.length - 1] < max) {\n      res.push(max);\n    } else {\n      res.push(res[res.length - 1] + 1);\n    }\n\n    return res;\n  };\n\n  mapItem.prototype._updatePercentRangeStops = function (rangeStops, min, max) {\n    for (var i = 0; i < rangeStops.length; i++) {\n      rangeStops[i] = min + rangeStops[i] / 100 * (max - min);\n    }\n  };\n\n  mapItem.prototype._getViewport = function () {\n    var topLeft = this.mapViewer.convertCoordinates(0, 0),\n        bottomRight = this.mapViewer.convertCoordinates(_jquery_helpers_1.getWidth(this.contentRoot), _jquery_helpers_1.getHeight(this.contentRoot)),\n        viewport = this.mapViewer.viewport(),\n        center = this.mapViewer.center();\n    return {\n      LeftLongitude: !!topLeft[0] ? topLeft[0] : viewport[0],\n      TopLatitude: !!topLeft[1] ? topLeft[1] : viewport[1],\n      RightLongitude: !!bottomRight[0] ? bottomRight[0] : viewport[2],\n      BottomLatitude: !!bottomRight[1] ? bottomRight[1] : viewport[3],\n      CenterPointLongitude: center[0],\n      CenterPointLatitude: center[1]\n    };\n  };\n\n  mapItem.prototype._getClientContext = function () {\n    return {\n      clusterizationInfo: this._getClusterizationInfo(),\n      widgetState: this._getWidgetState()\n    };\n  };\n\n  mapItem.prototype._getClusterizationInfo = function () {\n    return {\n      viewport: this._getViewport(),\n      clientSize: {\n        width: _jquery_helpers_1.getWidth(this.contentRoot),\n        height: _jquery_helpers_1.getHeight(this.contentRoot)\n      }\n    };\n  };\n\n  mapItem.prototype._getWidgetState = function () {\n    return this.mapViewer && {\n      zoomFactor: this.mapViewer.zoomFactor(),\n      center: this.mapViewer.center()\n    };\n  };\n\n  mapItem.prototype._updateClientStateUnsafe = function (clientState) {\n    this._updateWidgetState(clientState.widgetState);\n  };\n\n  mapItem.prototype._updateViewport = function (viewport) {\n    this._updateWidgetState({\n      zoomFactor: this._calculateZoomFactor(viewport, _jquery_helpers_1.getWidth(this.contentRoot), _jquery_helpers_1.getHeight(this.contentRoot)),\n      center: [viewport.CenterPointLongitude, viewport.CenterPointLatitude]\n    });\n  };\n\n  mapItem.prototype._updateWidgetState = function (widgetState) {\n    this._lock();\n\n    try {\n      this.mapViewer.zoomFactor(widgetState.zoomFactor);\n      this.mapViewer.center(widgetState.center);\n    } finally {\n      this._unlock();\n    }\n  };\n\n  mapItem.prototype._updateContentSizeUnsafe = function () {\n    _super.prototype._updateContentSizeUnsafe.call(this);\n\n    if (!!this.mapViewer) {\n      if (this.clientState) this._updateWidgetState(this.clientState.widgetState);else this._updateViewport(this.options.ViewModel.Viewport);\n      this.mapViewer.render();\n\n      this._onClientStateUpdate(this._getClientContext());\n    }\n  };\n\n  mapItem.prototype._onViewPortChanged = function () {\n    if (!this._isLocked()) {\n      this.clientState = this._getClientContext();\n      this.viewportChangedCallback && this.viewportChangedCallback(this.clientState.clusterizationInfo.viewport);\n\n      this._onClientStateUpdate(this.clientState);\n\n      this._toggleInitialExtentChanged(true);\n    }\n  };\n\n  mapItem.prototype.onInitialExtent = function (newViewport) {\n    if (this.hasWidget) {\n      this._onInitialExtentUnsafe(newViewport);\n    } else {\n      this._onInitialExtentBase(newViewport);\n    }\n  };\n\n  mapItem.prototype._onInitialExtentUnsafe = function (newViewport) {\n    this._updateViewport(newViewport || this.options.ViewModel.Viewport);\n\n    this.clientState = null;\n\n    this._onClientStateUpdate(this._getClientContext());\n  };\n\n  mapItem.prototype._onInitialExtentBase = function (newViewport) {\n    this.clientState = null;\n  };\n\n  mapItem.prototype._getWidget = function () {\n    return this.mapViewer;\n  };\n\n  mapItem.prototype._subscribeItemEvents = function () {\n    var that = this;\n    this.mapViewer.option('onCenterChanged', function () {\n      that._onViewPortChanged();\n    });\n    this.mapViewer.option('onZoomFactorChanged', function () {\n      that._onViewPortChanged();\n    });\n  };\n\n  mapItem.prototype._unsubscribeItemEvents = function () {\n    this.mapViewer.option('onCenterChanged', null);\n    this.mapViewer.option('onZoomFactorChanged', null);\n  };\n\n  mapItem.prototype._toggleInitialExtentChanged = function (changed) {\n    if (this.isInitialExtentChanged != changed) {\n      this.isInitialExtentChanged = changed;\n      this.initialExtentChanged && this.initialExtentChanged(this.isInitialExtentChanged);\n    }\n  };\n\n  return mapItem;\n}(_base_item_1.baseItem);\n\nexports.mapItem = mapItem;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/viewer-parts/viewer-items/_map-item.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","defineProperty","exports","value","mapItem","string_1","require","vector_map_1","projection_1","_jquery_helpers_1","_localization_ids_1","_localizer_1","caption_toolbar_options_1","_caption_toolbar_css_classes_1","_base_item_1","projection","parameters","get","source","_to","to","_from","from","coordinates","coords","clamp","min","max","Math","_super","$container","options","_this","isInitialExtentChanged","dispose","mapViewer","_renderContentInternal","element","changeExisting","_raiseItemWidgetOptionsPrepared","_unsubscribeItemEvents","option","_shouldResetClientViewport","ViewModel","Viewport","resetClientViewport","default","_updatePreviousViewport","_subscribeItemEvents","clientState","_onClientStateUpdate","_getClientContext","viewportViewModel","previousViewportViewModel","viewportChanged","_viewportEquals","CreateViewerPaddings","clusterizationInfo","viewport","viewport1","viewport2","RightLongitude","LeftLongitude","BottomLatitude","TopLatitude","CenterPointLongitude","CenterPointLatitude","_clearSelectionUnsafe","clearSelection","getInfoUnsafe","deepExtend","_getViewport","_getSpecificStatePanelItems","LockNavigation","name","dashboardToolbarItemNames","initialExtent","click","_toggleInitialExtentChanged","icon","cssClasses","iconInitialExtent","type","hint","localizer","getString","localizationId","buttonNames","InitialExtent","_getMapViewerOptions","that","viewModel","encodeHtml","_isEncodeHtml","background","borderWidth","borderColor","controlBar","enabled","zoomFactor","_calculateZoomFactor","getWidth","contentRoot","getHeight","maxZoomFactor","center","panningEnabled","zoomingEnabled","_getLabelSettings","label","ShapeTitleAttributeName","IncludeSummaryValueToShapeTitle","dataField","width","height","mapWidth","_translateLon","mapHeight","_translateLat","latitudeZoom","longitudeZoom","zoom","lon","size","lon_","PI","lat","lat_","log","tan","_getMapDataSource","mapItems","titleName","mapDataSource","data","points","boundary","point","segments","segmentData","pushAction","Latitude","Longitude","Size","push","Segments","j","row","IsClosed","first","last","IsFilled","Points","k","l","Boundaries","m","attributes","Attributes","Name","title","Value","_configureGeometryLayers","areaSettings","areaDataSource","lineDataSource","layers","dataSource","_getLegend","legendModel","legend","Visible","undefined","_updateLegendPosition","Orientation","orientation","inverted","Position","verticalAlignment","horizontalAlignment","_isSelected","current","selectedValues","_getSelectedValues","selected","equals","_getToolTip","format","_getHtml","_getColors","colorModels","colors","R","G","B","_updateRangeStops","rangeStops","percent","res","_updatePercentRangeStops","topLeft","convertCoordinates","bottomRight","_getClusterizationInfo","widgetState","_getWidgetState","clientSize","_updateClientStateUnsafe","_updateWidgetState","_updateViewport","_lock","_unlock","_updateContentSizeUnsafe","render","_onViewPortChanged","_isLocked","viewportChangedCallback","onInitialExtent","newViewport","hasWidget","_onInitialExtentUnsafe","_onInitialExtentBase","_getWidget","changed","initialExtentChanged","baseItem"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_map-item.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mapItem = void 0;\nvar string_1 = require(\"devextreme/core/utils/string\");\nvar vector_map_1 = require(\"devextreme/viz/vector_map\");\nvar projection_1 = require(\"devextreme/viz/vector_map/projection\");\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar _localization_ids_1 = require(\"../../data/_localization-ids\");\nvar _localizer_1 = require(\"../../data/_localizer\");\nvar caption_toolbar_options_1 = require(\"../widgets/caption-toolbar/caption-toolbar-options\");\nvar _caption_toolbar_css_classes_1 = require(\"../widgets/caption-toolbar/_caption-toolbar-css-classes\");\nvar _base_item_1 = require(\"./_base-item\");\nvar projection = (function () {\n    var parameters = projection_1.projection.get('mercator').source(), _to = parameters.to, _from = parameters.from;\n    parameters.to = function (coordinates) {\n        var coords = _to(coordinates);\n        return [clamp(coords[0], -1, +1), coords[1]];\n    };\n    parameters.from = function (coordinates) {\n        var coords = [clamp(coordinates[0], -1, +1), coordinates[1]];\n        return _from(coords);\n    };\n    return projection_1.projection(parameters);\n    function clamp(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n}());\nvar mapItem = (function (_super) {\n    __extends(mapItem, _super);\n    function mapItem($container, options) {\n        var _this = _super.call(this, $container, options) || this;\n        _this.isInitialExtentChanged = false;\n        return _this;\n    }\n    mapItem.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.mapViewer && this.mapViewer.dispose();\n    };\n    mapItem.prototype._renderContentInternal = function (element, changeExisting, options) {\n        this._raiseItemWidgetOptionsPrepared(options);\n        if (changeExisting && this.mapViewer) {\n            this._unsubscribeItemEvents();\n            this.mapViewer.option(options);\n            if (this._shouldResetClientViewport(this.options.ViewModel.Viewport)) {\n                this.resetClientViewport();\n            }\n        }\n        else {\n            this.mapViewer = new vector_map_1.default(element, options);\n        }\n        this._updatePreviousViewport(this.options.ViewModel.Viewport);\n        this._subscribeItemEvents();\n    };\n    mapItem.prototype.resetClientViewport = function () {\n        this.clientState = null;\n        this._onClientStateUpdate(this._getClientContext());\n    };\n    mapItem.prototype._shouldResetClientViewport = function (viewportViewModel) {\n        if (this.previousViewportViewModel) {\n            var viewportChanged = !this._viewportEquals(this.previousViewportViewModel, viewportViewModel) || this.previousViewportViewModel.CreateViewerPaddings !== viewportViewModel.CreateViewerPaddings;\n            if (viewportChanged && this.clientState && this._viewportEquals(this.clientState.clusterizationInfo.viewport, viewportViewModel) && !viewportViewModel.CreateViewerPaddings)\n                return false;\n            return viewportChanged;\n        }\n        return false;\n    };\n    mapItem.prototype._viewportEquals = function (viewport1, viewport2) {\n        return viewport1.RightLongitude === viewport2.RightLongitude && viewport1.LeftLongitude === viewport2.LeftLongitude\n            && viewport1.BottomLatitude === viewport2.BottomLatitude && viewport1.TopLatitude === viewport2.TopLatitude\n            && viewport1.CenterPointLongitude === viewport2.CenterPointLongitude && viewport1.CenterPointLatitude === viewport2.CenterPointLatitude;\n    };\n    mapItem.prototype._updatePreviousViewport = function (viewport) {\n        this.previousViewportViewModel = {\n            RightLongitude: viewport.RightLongitude,\n            LeftLongitude: viewport.LeftLongitude,\n            BottomLatitude: viewport.BottomLatitude,\n            TopLatitude: viewport.TopLatitude,\n            CenterPointLongitude: viewport.CenterPointLongitude,\n            CenterPointLatitude: viewport.CenterPointLatitude,\n            CreateViewerPaddings: viewport.CreateViewerPaddings\n        };\n    };\n    mapItem.prototype._clearSelectionUnsafe = function () {\n        this.mapViewer.clearSelection();\n    };\n    mapItem.prototype.getInfoUnsafe = function () {\n        return _jquery_helpers_1.deepExtend(_super.prototype.getInfoUnsafe.call(this), {\n            viewport: this._getViewport()\n        });\n    };\n    mapItem.prototype._getSpecificStatePanelItems = function () {\n        var _this = this;\n        if (this.options.ViewModel.LockNavigation !== true && this.isInitialExtentChanged) {\n            return [{\n                    name: caption_toolbar_options_1.dashboardToolbarItemNames.initialExtent,\n                    click: function (element) {\n                        _this._toggleInitialExtentChanged(false);\n                    },\n                    icon: _caption_toolbar_css_classes_1.cssClasses.iconInitialExtent,\n                    type: 'button',\n                    hint: _localizer_1.localizer.getString(_localization_ids_1.localizationId.buttonNames.InitialExtent)\n                }];\n        }\n        else\n            return [];\n    };\n    mapItem.prototype._getMapViewerOptions = function () {\n        var that = this, viewModel = that.options.ViewModel;\n        return {\n            projection: projection,\n            encodeHtml: that._isEncodeHtml(),\n            background: { borderWidth: 0, borderColor: 'none' },\n            controlBar: { enabled: false },\n            zoomFactor: that._calculateZoomFactor(viewModel.Viewport, _jquery_helpers_1.getWidth(that.contentRoot), _jquery_helpers_1.getHeight(that.contentRoot)),\n            maxZoomFactor: 1 << 18,\n            center: [viewModel.Viewport.CenterPointLongitude, viewModel.Viewport.CenterPointLatitude],\n            panningEnabled: viewModel.LockNavigation !== true,\n            zoomingEnabled: viewModel.LockNavigation !== true\n        };\n    };\n    mapItem.prototype._getLabelSettings = function (viewModel) {\n        return {\n            label: {\n                enabled: !!viewModel.ShapeTitleAttributeName || viewModel.IncludeSummaryValueToShapeTitle,\n                dataField: 'title'\n            }\n        };\n    };\n    mapItem.prototype._calculateZoomFactor = function (viewport, width, height) {\n        var min = width < height ? width : height, mapWidth = this._translateLon(viewport.RightLongitude, min) - this._translateLon(viewport.LeftLongitude, min), mapHeight = this._translateLat(viewport.BottomLatitude, min) - this._translateLat(viewport.TopLatitude, min), latitudeZoom = width / mapWidth, longitudeZoom = height / mapHeight, zoom = latitudeZoom < longitudeZoom ? latitudeZoom : longitudeZoom;\n        if (viewport.CreateViewerPaddings) {\n            zoom *= 0.95;\n        }\n        return zoom;\n    };\n    mapItem.prototype._translateLon = function (lon, size) {\n        var lon_ = lon * Math.PI / 180;\n        return (size / 2) + (size / (2 * Math.PI)) * lon_;\n    };\n    mapItem.prototype._translateLat = function (lat, size) {\n        var lat_ = lat * Math.PI / 180;\n        return (size / 2) - (size / (2 * Math.PI)) * Math.log(Math.tan(Math.PI / 4 + lat_ / 2));\n    };\n    mapItem.prototype._getMapDataSource = function (mapItems, titleName) {\n        var mapDataSource = [], data, type, points, boundary, point, segments, segmentData, pushAction;\n        for (var i = 0; i < mapItems.length; i++) {\n            data = [];\n            type = 'area';\n            if (mapItems[i].Latitude && mapItems[i].Longitude && mapItems[i].Size) {\n                data.push([mapItems[i].Longitude, mapItems[i].Latitude]);\n            }\n            if (mapItems[i].Segments) {\n                segments = mapItems[i].Segments;\n                for (var j = 0; j < segments.length; j++) {\n                    pushAction = function (row) {\n                        if (segments[j].IsClosed && row.length > 1) {\n                            var first = row[0], last = row[row.length - 1];\n                            if (first[0] != last[0] || first[1] != last[1])\n                                row.push(first);\n                        }\n                        data.push(row);\n                    };\n                    if (!segments[j].IsFilled)\n                        type = 'line';\n                    points = segments[j].Points;\n                    segmentData = [];\n                    for (var k = 0; k < points.length; k++) {\n                        segmentData.push([points[k].Longitude, points[k].Latitude]);\n                    }\n                    pushAction(segmentData);\n                    for (var l = 0; l < segments[j].Boundaries.length; l++) {\n                        segmentData = [];\n                        boundary = segments[j].Boundaries[l];\n                        for (var m = 0; m < boundary.Points.length; m++) {\n                            point = boundary.Points[m];\n                            segmentData.push([point.Longitude, point.Latitude]);\n                        }\n                        pushAction(segmentData);\n                    }\n                }\n            }\n            mapDataSource.push({\n                coordinates: data,\n                type: type,\n                attributes: {}\n            });\n            for (var j = 0; j < mapItems[i].Attributes.length; j++) {\n                if (mapItems[i].Attributes[j].Name === titleName) {\n                    mapDataSource[i].attributes.title = mapItems[i].Attributes[j].Value;\n                    break;\n                }\n            }\n        }\n        return mapDataSource;\n    };\n    mapItem.prototype._configureGeometryLayers = function (mapDataSource, areaSettings) {\n        var areaDataSource = [], lineDataSource = [], layers = [];\n        for (var i = 0; i < mapDataSource.length; i++) {\n            if (mapDataSource[i].type === 'line')\n                lineDataSource.push(mapDataSource[i]);\n            else\n                areaDataSource.push(mapDataSource[i]);\n        }\n        layers.push(__assign({ name: 'area', type: 'area', dataSource: areaDataSource }, areaSettings));\n        if (lineDataSource.length > 0)\n            layers.push({ name: 'line', type: 'line', dataSource: lineDataSource });\n        return layers;\n    };\n    mapItem.prototype._getLegend = function (legendModel) {\n        var legend = legendModel && !!legendModel.Visible ? {} : undefined;\n        if (legend) {\n            this._updateLegendPosition(legend, legendModel);\n        }\n        return legend;\n    };\n    mapItem.prototype._updateLegendPosition = function (legend, legendModel) {\n        switch (legendModel.Orientation) {\n            case 'Vertical':\n                legend.orientation = 'vertical';\n                legend.inverted = true;\n                break;\n            case 'Horizontal':\n                legend.orientation = 'horizontal';\n                break;\n            default:\n                break;\n        }\n        switch (legendModel.Position) {\n            case 'TopLeft':\n                legend.verticalAlignment = 'top';\n                legend.horizontalAlignment = 'left';\n                break;\n            case 'TopCenter':\n                legend.verticalAlignment = 'top';\n                legend.horizontalAlignment = 'center';\n                break;\n            case 'TopRight':\n                legend.verticalAlignment = 'top';\n                legend.horizontalAlignment = 'right';\n                break;\n            case 'BottomLeft':\n                legend.verticalAlignment = 'bottom';\n                legend.horizontalAlignment = 'left';\n                break;\n            case 'BottomCenter':\n                legend.verticalAlignment = 'bottom';\n                legend.horizontalAlignment = 'center';\n                break;\n            case 'BottomRight':\n                legend.verticalAlignment = 'bottom';\n                legend.horizontalAlignment = 'right';\n                break;\n            default:\n                break;\n        }\n    };\n    mapItem.prototype._isSelected = function (current) {\n        var selectedValues = this._getSelectedValues(), selected = false, equals;\n        if (selectedValues && selectedValues.length > 0 && selectedValues[0].length === current.length) {\n            for (var i = 0; i < selectedValues.length; i++) {\n                equals = true;\n                for (var j = 0; j < current.length; j++) {\n                    if (selectedValues[i][j] !== current[j]) {\n                        equals = false;\n                        break;\n                    }\n                }\n                if (equals) {\n                    selected = true;\n                    break;\n                }\n            }\n        }\n        return selected;\n    };\n    mapItem.prototype._getToolTip = function (name, value) {\n        return string_1.format('{0}: {1}', this._getHtml(name), this._getHtml(value));\n    };\n    mapItem.prototype._getColors = function (colorModels) {\n        var colors;\n        if (colorModels) {\n            colors = [];\n            for (var i = 0; i < colorModels.length; i++) {\n                colors.push('rgb(' + colorModels[i].R + ', ' + colorModels[i].G + ', ' + colorModels[i].B + ')');\n            }\n            return colors;\n        }\n    };\n    mapItem.prototype._updateRangeStops = function (rangeStops, min, max, percent) {\n        var res = [];\n        for (var i = 0; i < rangeStops.length; i++) {\n            res.push(rangeStops[i]);\n        }\n        if (percent) {\n            this._updatePercentRangeStops(res, min, max);\n        }\n        if (res.length > 0 && res[0] > min) {\n            res[0] = min;\n        }\n        if (res[res.length - 1] < max) {\n            res.push(max);\n        }\n        else {\n            res.push(res[res.length - 1] + 1);\n        }\n        return res;\n    };\n    mapItem.prototype._updatePercentRangeStops = function (rangeStops, min, max) {\n        for (var i = 0; i < rangeStops.length; i++) {\n            rangeStops[i] = min + (rangeStops[i] / 100) * (max - min);\n        }\n    };\n    mapItem.prototype._getViewport = function () {\n        var topLeft = this.mapViewer.convertCoordinates(0, 0), bottomRight = this.mapViewer.convertCoordinates(_jquery_helpers_1.getWidth(this.contentRoot), _jquery_helpers_1.getHeight(this.contentRoot)), viewport = this.mapViewer.viewport(), center = this.mapViewer.center();\n        return {\n            LeftLongitude: !!topLeft[0] ? topLeft[0] : viewport[0],\n            TopLatitude: !!topLeft[1] ? topLeft[1] : viewport[1],\n            RightLongitude: !!bottomRight[0] ? bottomRight[0] : viewport[2],\n            BottomLatitude: !!bottomRight[1] ? bottomRight[1] : viewport[3],\n            CenterPointLongitude: center[0],\n            CenterPointLatitude: center[1]\n        };\n    };\n    mapItem.prototype._getClientContext = function () {\n        return {\n            clusterizationInfo: this._getClusterizationInfo(),\n            widgetState: this._getWidgetState()\n        };\n    };\n    mapItem.prototype._getClusterizationInfo = function () {\n        return {\n            viewport: this._getViewport(),\n            clientSize: {\n                width: _jquery_helpers_1.getWidth(this.contentRoot),\n                height: _jquery_helpers_1.getHeight(this.contentRoot)\n            }\n        };\n    };\n    mapItem.prototype._getWidgetState = function () {\n        return this.mapViewer && {\n            zoomFactor: this.mapViewer.zoomFactor(),\n            center: this.mapViewer.center()\n        };\n    };\n    mapItem.prototype._updateClientStateUnsafe = function (clientState) {\n        this._updateWidgetState(clientState.widgetState);\n    };\n    mapItem.prototype._updateViewport = function (viewport) {\n        this._updateWidgetState({\n            zoomFactor: this._calculateZoomFactor(viewport, _jquery_helpers_1.getWidth(this.contentRoot), _jquery_helpers_1.getHeight(this.contentRoot)),\n            center: [viewport.CenterPointLongitude, viewport.CenterPointLatitude]\n        });\n    };\n    mapItem.prototype._updateWidgetState = function (widgetState) {\n        this._lock();\n        try {\n            this.mapViewer.zoomFactor(widgetState.zoomFactor);\n            this.mapViewer.center(widgetState.center);\n        }\n        finally {\n            this._unlock();\n        }\n    };\n    mapItem.prototype._updateContentSizeUnsafe = function () {\n        _super.prototype._updateContentSizeUnsafe.call(this);\n        if (!!this.mapViewer) {\n            if (this.clientState)\n                this._updateWidgetState(this.clientState.widgetState);\n            else\n                this._updateViewport(this.options.ViewModel.Viewport);\n            this.mapViewer.render();\n            this._onClientStateUpdate(this._getClientContext());\n        }\n    };\n    mapItem.prototype._onViewPortChanged = function () {\n        if (!this._isLocked()) {\n            this.clientState = this._getClientContext();\n            this.viewportChangedCallback && this.viewportChangedCallback(this.clientState.clusterizationInfo.viewport);\n            this._onClientStateUpdate(this.clientState);\n            this._toggleInitialExtentChanged(true);\n        }\n    };\n    mapItem.prototype.onInitialExtent = function (newViewport) {\n        if (this.hasWidget) {\n            this._onInitialExtentUnsafe(newViewport);\n        }\n        else {\n            this._onInitialExtentBase(newViewport);\n        }\n    };\n    mapItem.prototype._onInitialExtentUnsafe = function (newViewport) {\n        this._updateViewport(newViewport || this.options.ViewModel.Viewport);\n        this.clientState = null;\n        this._onClientStateUpdate(this._getClientContext());\n    };\n    mapItem.prototype._onInitialExtentBase = function (newViewport) {\n        this.clientState = null;\n    };\n    mapItem.prototype._getWidget = function () {\n        return this.mapViewer;\n    };\n    mapItem.prototype._subscribeItemEvents = function () {\n        var that = this;\n        this.mapViewer.option('onCenterChanged', function () { that._onViewPortChanged(); });\n        this.mapViewer.option('onZoomFactorChanged', function () { that._onViewPortChanged(); });\n    };\n    mapItem.prototype._unsubscribeItemEvents = function () {\n        this.mapViewer.option('onCenterChanged', null);\n        this.mapViewer.option('onZoomFactorChanged', null);\n    };\n    mapItem.prototype._toggleInitialExtentChanged = function (changed) {\n        if (this.isInitialExtentChanged != changed) {\n            this.isInitialExtentChanged = changed;\n            this.initialExtentChanged && this.initialExtentChanged(this.isInitialExtentChanged);\n        }\n    };\n    return mapItem;\n}(_base_item_1.baseItem));\nexports.mapItem = mapItem;\n"]},"metadata":{},"sourceType":"script"}