{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_filter-field-wrapper.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterFieldSelector = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\n\nvar model_1 = require(\"../../../model\");\n\nvar dimension_1 = require(\"../../../model/data-item/dimension\");\n\nvar _display_name_provider_1 = require(\"../../_display-name-provider\");\n\nvar FilterFieldWrapper = function () {\n  function FilterFieldWrapper(dimension, getDisplayName) {\n    var _this = this;\n\n    this.getDisplayName = getDisplayName;\n\n    this.add = function (d) {\n      return _this._dimensions.push(d);\n    };\n\n    this.dataMember = function () {\n      return _this._dimensions[0].dataMember();\n    };\n\n    this.displayName = function () {\n      return _this._dimensions.map(function (d) {\n        return '[' + _this.getDisplayName(d) + ']';\n      }).join(' - ');\n    };\n\n    this.groupIndex = function () {\n      return _this._dimensions[0].groupIndex();\n    };\n\n    this.hasItems = function (path) {\n      return _this.isGroup() && !!path ? path.length !== _this._dimensions.length : _this.isGroup();\n    };\n\n    this.isGroup = function () {\n      return _this._dimensions.length > 1;\n    };\n\n    this.reorder = function (dataFields) {\n      if (!dataFields) return;\n      var newDimensions = [];\n      dataFields.forEach(function (dataField) {\n        var dimension = _this._dimensions.filter(function (d) {\n          return d.dataMember() == dataField.dataMember();\n        })[0];\n\n        if (!!dimension) {\n          newDimensions.push(dimension);\n        }\n      });\n      _this._dimensions = newDimensions;\n    };\n\n    this._dimensions = [dimension];\n  }\n\n  return FilterFieldWrapper;\n}();\n\nvar FilterFieldSelector = function (_super) {\n  __extends(FilterFieldSelector, _super);\n\n  function FilterFieldSelector(dashboardItem, dataSourceBrowser, selectedFieldChanged) {\n    var _this = _super.call(this) || this;\n\n    _this.dashboardItem = dashboardItem;\n    _this.dataSourceBrowser = dataSourceBrowser;\n    _this._selectedField = ko.observable();\n    _this._fields = ko.observableArray();\n    _this.template = {\n      name: 'dx-simple-filter-data-field-selector',\n      data: {\n        selectedField: _this._selectedField,\n        fields: _this._fields\n      }\n    };\n\n    _this.toDispose(_this._selectedField.subscribe(function (field) {\n      selectedFieldChanged(field);\n    }));\n\n    return _this;\n  }\n\n  Object.defineProperty(FilterFieldSelector.prototype, \"selectedField\", {\n    get: function () {\n      return this._selectedField();\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  FilterFieldSelector.prototype.init = function () {\n    var _this = this;\n\n    this._loadDataFields().done(function (fields) {\n      _this._selectedField(fields[0]);\n\n      _this._fields(fields);\n    });\n  };\n\n  FilterFieldSelector.prototype.clear = function () {\n    this._selectedField(null);\n  };\n\n  FilterFieldSelector.prototype._loadDataFields = function () {\n    var _this = this;\n\n    var deferred = _jquery_helpers_1.createJQueryDeferred();\n\n    var dimensions = this.dashboardItem._uniqueDataItems.filter(function (item) {\n      return item instanceof dimension_1.Dimension;\n    });\n\n    var result = this._generateFields(dimensions);\n\n    var findPromises = dimensions.map(function (dimension) {\n      return _this.dataSourceBrowser.findDataField(_this.dashboardItem.dataSource(), _this.dashboardItem.dataMember(), dimension.dataMember());\n    });\n\n    _jquery_helpers_1.jqueryWhenArray(findPromises).done(function () {\n      var dataFields = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        dataFields[_i] = arguments[_i];\n      }\n\n      result.forEach(function (wrapper) {\n        if (wrapper.groupIndex() !== undefined && wrapper.groupIndex() !== null) {\n          var groupedFields = dataFields.filter(function (dataField) {\n            return !!dataField && dataField.groupIndex() == wrapper.groupIndex();\n          });\n          wrapper.reorder(groupedFields && groupedFields.length > 0 && groupedFields[0].groupDataItems);\n        }\n      });\n      deferred.resolve(result);\n    });\n\n    return deferred.promise();\n  };\n\n  FilterFieldSelector.prototype._generateFields = function (dimensions) {\n    var _this = this;\n\n    var fields = [];\n    return dimensions.reduce(function (acc, dimension) {\n      if (dimension.groupIndex() !== undefined && dimension.groupIndex() !== null) {\n        var groupField = acc.filter(function (wrapper) {\n          return wrapper.groupIndex() === dimension.groupIndex();\n        })[0];\n\n        if (groupField) {\n          groupField.add(dimension);\n          return acc;\n        }\n      }\n\n      acc.push(new FilterFieldWrapper(dimension, function (dataItem) {\n        return _display_name_provider_1.getDataItemDisplayName(_this.dataSourceBrowser, _this.dashboardItem, dataItem);\n      }));\n      return acc;\n    }, []);\n  };\n\n  return FilterFieldSelector;\n}(model_1.DisposableObject);\n\nexports.FilterFieldSelector = FilterFieldSelector;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/filtering/simple-filter-editor/_filter-field-wrapper.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","FilterFieldSelector","ko","require","_jquery_helpers_1","model_1","dimension_1","_display_name_provider_1","FilterFieldWrapper","dimension","getDisplayName","_this","add","_dimensions","push","dataMember","displayName","map","join","groupIndex","hasItems","path","isGroup","length","reorder","dataFields","newDimensions","forEach","dataField","filter","_super","dashboardItem","dataSourceBrowser","selectedFieldChanged","_selectedField","observable","_fields","observableArray","template","name","data","selectedField","fields","toDispose","subscribe","field","get","enumerable","configurable","init","_loadDataFields","done","clear","deferred","createJQueryDeferred","dimensions","_uniqueDataItems","item","Dimension","result","_generateFields","findPromises","findDataField","dataSource","jqueryWhenArray","_i","arguments","wrapper","undefined","groupedFields","groupDataItems","resolve","promise","reduce","acc","groupField","dataItem","getDataItemDisplayName","DisposableObject"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_filter-field-wrapper.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FilterFieldSelector = void 0;\nvar ko = require(\"knockout\");\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\nvar model_1 = require(\"../../../model\");\nvar dimension_1 = require(\"../../../model/data-item/dimension\");\nvar _display_name_provider_1 = require(\"../../_display-name-provider\");\nvar FilterFieldWrapper = (function () {\n    function FilterFieldWrapper(dimension, getDisplayName) {\n        var _this = this;\n        this.getDisplayName = getDisplayName;\n        this.add = function (d) { return _this._dimensions.push(d); };\n        this.dataMember = function () { return _this._dimensions[0].dataMember(); };\n        this.displayName = function () { return _this._dimensions.map(function (d) { return '[' + _this.getDisplayName(d) + ']'; }).join(' - '); };\n        this.groupIndex = function () { return _this._dimensions[0].groupIndex(); };\n        this.hasItems = function (path) { return (_this.isGroup() && !!path) ? path.length !== _this._dimensions.length : _this.isGroup(); };\n        this.isGroup = function () { return _this._dimensions.length > 1; };\n        this.reorder = function (dataFields) {\n            if (!dataFields)\n                return;\n            var newDimensions = [];\n            dataFields.forEach(function (dataField) {\n                var dimension = _this._dimensions.filter(function (d) { return d.dataMember() == dataField.dataMember(); })[0];\n                if (!!dimension) {\n                    newDimensions.push(dimension);\n                }\n            });\n            _this._dimensions = newDimensions;\n        };\n        this._dimensions = [dimension];\n    }\n    return FilterFieldWrapper;\n}());\nvar FilterFieldSelector = (function (_super) {\n    __extends(FilterFieldSelector, _super);\n    function FilterFieldSelector(dashboardItem, dataSourceBrowser, selectedFieldChanged) {\n        var _this = _super.call(this) || this;\n        _this.dashboardItem = dashboardItem;\n        _this.dataSourceBrowser = dataSourceBrowser;\n        _this._selectedField = ko.observable();\n        _this._fields = ko.observableArray();\n        _this.template = {\n            name: 'dx-simple-filter-data-field-selector',\n            data: {\n                selectedField: _this._selectedField,\n                fields: _this._fields\n            }\n        };\n        _this.toDispose(_this._selectedField.subscribe(function (field) {\n            selectedFieldChanged(field);\n        }));\n        return _this;\n    }\n    Object.defineProperty(FilterFieldSelector.prototype, \"selectedField\", {\n        get: function () {\n            return this._selectedField();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FilterFieldSelector.prototype.init = function () {\n        var _this = this;\n        this._loadDataFields().done(function (fields) {\n            _this._selectedField(fields[0]);\n            _this._fields(fields);\n        });\n    };\n    FilterFieldSelector.prototype.clear = function () {\n        this._selectedField(null);\n    };\n    FilterFieldSelector.prototype._loadDataFields = function () {\n        var _this = this;\n        var deferred = _jquery_helpers_1.createJQueryDeferred();\n        var dimensions = this.dashboardItem._uniqueDataItems.filter(function (item) { return item instanceof dimension_1.Dimension; });\n        var result = this._generateFields(dimensions);\n        var findPromises = dimensions.map(function (dimension) { return _this.dataSourceBrowser.findDataField(_this.dashboardItem.dataSource(), _this.dashboardItem.dataMember(), dimension.dataMember()); });\n        _jquery_helpers_1.jqueryWhenArray(findPromises).done(function () {\n            var dataFields = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                dataFields[_i] = arguments[_i];\n            }\n            result.forEach(function (wrapper) {\n                if (wrapper.groupIndex() !== undefined && wrapper.groupIndex() !== null) {\n                    var groupedFields = dataFields.filter(function (dataField) { return !!dataField && dataField.groupIndex() == wrapper.groupIndex(); });\n                    wrapper.reorder(groupedFields && groupedFields.length > 0 && groupedFields[0].groupDataItems);\n                }\n            });\n            deferred.resolve(result);\n        });\n        return deferred.promise();\n    };\n    FilterFieldSelector.prototype._generateFields = function (dimensions) {\n        var _this = this;\n        var fields = [];\n        return dimensions.reduce(function (acc, dimension) {\n            if (dimension.groupIndex() !== undefined && dimension.groupIndex() !== null) {\n                var groupField = acc.filter(function (wrapper) { return wrapper.groupIndex() === dimension.groupIndex(); })[0];\n                if (groupField) {\n                    groupField.add(dimension);\n                    return acc;\n                }\n            }\n            acc.push(new FilterFieldWrapper(dimension, function (dataItem) { return _display_name_provider_1.getDataItemDisplayName(_this.dataSourceBrowser, _this.dashboardItem, dataItem); }));\n            return acc;\n        }, []);\n    };\n    return FilterFieldSelector;\n}(model_1.DisposableObject));\nexports.FilterFieldSelector = FilterFieldSelector;\n"]},"metadata":{},"sourceType":"script"}