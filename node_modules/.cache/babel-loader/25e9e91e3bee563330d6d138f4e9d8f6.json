{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/html_editor/modules/dropImage.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Quill from \"devextreme-quill\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport { addNamespace } from \"../../../events/utils/index\";\nimport { each } from \"../../../core/utils/iterator\";\nimport browser from \"../../../core/utils/browser\";\nimport { getWindow } from \"../../../core/utils/window\";\nimport BaseModule from \"./base\";\nvar DropImageModule = BaseModule;\n\nif (Quill) {\n  DropImageModule = class extends BaseModule {\n    constructor(quill, options) {\n      super(quill, options);\n      var widgetName = this.editorInstance.NAME;\n      eventsEngine.on(this.quill.root, addNamespace(\"drop\", widgetName), this._dropHandler.bind(this));\n      eventsEngine.on(this.quill.root, addNamespace(\"paste\", widgetName), this._pasteHandler.bind(this));\n    }\n\n    _dropHandler(e) {\n      var _dataTransfer$files;\n\n      var dataTransfer = e.originalEvent.dataTransfer;\n      var hasFiles = null === dataTransfer || void 0 === dataTransfer ? void 0 : null === (_dataTransfer$files = dataTransfer.files) || void 0 === _dataTransfer$files ? void 0 : _dataTransfer$files.length;\n      this.saveValueChangeEvent(e);\n      e.preventDefault();\n\n      if (hasFiles) {\n        this._getImage(dataTransfer.files, this._addImage.bind(this));\n      }\n    }\n\n    _pasteHandler(e) {\n      var _clipboardData$items;\n\n      var {\n        clipboardData: clipboardData\n      } = e.originalEvent;\n      this.saveValueChangeEvent(e);\n\n      if (!clipboardData) {\n        return;\n      }\n\n      var hasDataItems = null === (_clipboardData$items = clipboardData.items) || void 0 === _clipboardData$items ? void 0 : _clipboardData$items.length;\n      var isHtmlData = clipboardData.getData(\"text/html\");\n\n      if (!isHtmlData && hasDataItems) {\n        this._getImage(clipboardData.items, imageData => {\n          if (this._isBrowserSupportImagePaste(browser)) {\n            return;\n          }\n\n          this._addImage(imageData);\n        });\n      }\n    }\n\n    _isBrowserSupportImagePaste(_ref) {\n      var {\n        mozilla: mozilla,\n        chrome: chrome,\n        version: version\n      } = _ref;\n      return mozilla || chrome && version > 82;\n    }\n\n    _isImage(file) {\n      return !!file.type.match(/^image\\/(a?png|bmp|gif|p?jpe?g|svg|vnd\\.microsoft\\.icon|webp)/i);\n    }\n\n    _getImage(files, callback) {\n      var window = getWindow();\n      each(files, (index, file) => {\n        if (!this._isImage(file)) {\n          return;\n        }\n\n        var reader = new window.FileReader();\n\n        reader.onload = _ref2 => {\n          var {\n            target: target\n          } = _ref2;\n          callback(target.result);\n        };\n\n        var readableFile = file.getAsFile ? file.getAsFile() : file;\n\n        if (readableFile instanceof window.Blob) {\n          reader.readAsDataURL(readableFile);\n        }\n      });\n    }\n\n    _addImage(data) {\n      var selection = this.quill.getSelection();\n      var pasteIndex = selection ? selection.index : this.quill.getLength();\n      this.quill.insertEmbed(pasteIndex, \"extendedImage\", data, \"user\");\n    }\n\n  };\n}\n\nexport default DropImageModule;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/html_editor/modules/dropImage.js"],"names":["Quill","eventsEngine","addNamespace","each","browser","getWindow","BaseModule","DropImageModule","constructor","quill","options","widgetName","editorInstance","NAME","on","root","_dropHandler","bind","_pasteHandler","e","_dataTransfer$files","dataTransfer","originalEvent","hasFiles","files","length","saveValueChangeEvent","preventDefault","_getImage","_addImage","_clipboardData$items","clipboardData","hasDataItems","items","isHtmlData","getData","imageData","_isBrowserSupportImagePaste","_ref","mozilla","chrome","version","_isImage","file","type","match","callback","window","index","reader","FileReader","onload","_ref2","target","result","readableFile","getAsFile","Blob","readAsDataURL","data","selection","getSelection","pasteIndex","getLength","insertEmbed"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/html_editor/modules/dropImage.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Quill from \"devextreme-quill\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport {\r\n    addNamespace\r\n} from \"../../../events/utils/index\";\r\nimport {\r\n    each\r\n} from \"../../../core/utils/iterator\";\r\nimport browser from \"../../../core/utils/browser\";\r\nimport {\r\n    getWindow\r\n} from \"../../../core/utils/window\";\r\nimport BaseModule from \"./base\";\r\nvar DropImageModule = BaseModule;\r\nif (Quill) {\r\n    DropImageModule = class extends BaseModule {\r\n        constructor(quill, options) {\r\n            super(quill, options);\r\n            var widgetName = this.editorInstance.NAME;\r\n            eventsEngine.on(this.quill.root, addNamespace(\"drop\", widgetName), this._dropHandler.bind(this));\r\n            eventsEngine.on(this.quill.root, addNamespace(\"paste\", widgetName), this._pasteHandler.bind(this))\r\n        }\r\n        _dropHandler(e) {\r\n            var _dataTransfer$files;\r\n            var dataTransfer = e.originalEvent.dataTransfer;\r\n            var hasFiles = null === dataTransfer || void 0 === dataTransfer ? void 0 : null === (_dataTransfer$files = dataTransfer.files) || void 0 === _dataTransfer$files ? void 0 : _dataTransfer$files.length;\r\n            this.saveValueChangeEvent(e);\r\n            e.preventDefault();\r\n            if (hasFiles) {\r\n                this._getImage(dataTransfer.files, this._addImage.bind(this))\r\n            }\r\n        }\r\n        _pasteHandler(e) {\r\n            var _clipboardData$items;\r\n            var {\r\n                clipboardData: clipboardData\r\n            } = e.originalEvent;\r\n            this.saveValueChangeEvent(e);\r\n            if (!clipboardData) {\r\n                return\r\n            }\r\n            var hasDataItems = null === (_clipboardData$items = clipboardData.items) || void 0 === _clipboardData$items ? void 0 : _clipboardData$items.length;\r\n            var isHtmlData = clipboardData.getData(\"text/html\");\r\n            if (!isHtmlData && hasDataItems) {\r\n                this._getImage(clipboardData.items, imageData => {\r\n                    if (this._isBrowserSupportImagePaste(browser)) {\r\n                        return\r\n                    }\r\n                    this._addImage(imageData)\r\n                })\r\n            }\r\n        }\r\n        _isBrowserSupportImagePaste(_ref) {\r\n            var {\r\n                mozilla: mozilla,\r\n                chrome: chrome,\r\n                version: version\r\n            } = _ref;\r\n            return mozilla || chrome && version > 82\r\n        }\r\n        _isImage(file) {\r\n            return !!file.type.match(/^image\\/(a?png|bmp|gif|p?jpe?g|svg|vnd\\.microsoft\\.icon|webp)/i)\r\n        }\r\n        _getImage(files, callback) {\r\n            var window = getWindow();\r\n            each(files, (index, file) => {\r\n                if (!this._isImage(file)) {\r\n                    return\r\n                }\r\n                var reader = new window.FileReader;\r\n                reader.onload = _ref2 => {\r\n                    var {\r\n                        target: target\r\n                    } = _ref2;\r\n                    callback(target.result)\r\n                };\r\n                var readableFile = file.getAsFile ? file.getAsFile() : file;\r\n                if (readableFile instanceof window.Blob) {\r\n                    reader.readAsDataURL(readableFile)\r\n                }\r\n            })\r\n        }\r\n        _addImage(data) {\r\n            var selection = this.quill.getSelection();\r\n            var pasteIndex = selection ? selection.index : this.quill.getLength();\r\n            this.quill.insertEmbed(pasteIndex, \"extendedImage\", data, \"user\")\r\n        }\r\n    }\r\n}\r\nexport default DropImageModule;\r\n"]},"metadata":{},"sourceType":"module"}