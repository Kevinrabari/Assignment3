{"ast":null,"code":"/**\n* DevExpress Analytics (core\\utils\\_designerInitializer.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDesigner = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _selection_1 = require(\"../selection/_selection\");\n\nvar _snapLinesHelper_1 = require(\"../snapLines/_snapLinesHelper\");\n\nvar _dragHelperContent_1 = require(\"../dragDrop/_dragHelperContent\");\n\nvar _selectionDragDropHandler_1 = require(\"../dragDrop/_selectionDragDropHandler\");\n\nvar _toolboxDragDropHandler_1 = require(\"../dragDrop/_toolboxDragDropHandler\");\n\nvar tabPanel_1 = require(\"../tools/tabPanel\");\n\nvar _inlineTextEdit_1 = require(\"../internal/_inlineTextEdit\");\n\nvar _dragDropHandler_1 = require(\"../dragDrop/_dragDropHandler\");\n\nvar _fonts_1 = require(\"../../property-grid/widgets/fonteditor/_fonts\");\n\nvar _snapLinesCollector_1 = require(\"../snapLines/_snapLinesCollector\");\n\nvar _combinedObj_1 = require(\"../selection/_combinedObj\");\n\nvar _utils_1 = require(\"../internal/_utils\");\n\nvar localization_utils_1 = require(\"../../property-grid/localization/localization_utils\");\n\nvar _designerCreator_1 = require(\"./_designerCreator\");\n\nfunction createDesigner(model, surface, controlsFactory, groups, editors, parts, rtl, selection, designControlsHelper, undoEngine, customMerge, snapLinesCollector, groupLocalizationIDs) {\n  if (groups === void 0) {\n    groups = {};\n  }\n\n  if (editors === void 0) {\n    editors = [];\n  }\n\n  var context = new _designerCreator_1.DesignerContextGenerator(rtl).addModel(model).addSurface(surface).addUndoEngine(undoEngine).getContext();\n  var designerGenerator = new _designerCreator_1.CommonDesignerGenerator(context, rtl);\n  return designerGenerator.addDisposableContainer().mapOnContext().addSelection(function (settings) {\n    settings.selection = selection || new _selection_1.SurfaceSelection();\n    settings.snapHelper = new _snapLinesHelper_1.SnapLinesHelper(surface, _snapLinesHelper_1.SnapLinesHelper.snapTolerance, snapLinesCollector || new _snapLinesCollector_1.SnapLinesCollector());\n    settings.editableObject = _combinedObj_1.CombinedObject.getEditableObject(settings.selection, context.undoEngine, customMerge).extend({\n      throttle: 1\n    });\n    settings.addDragDrop(function (dragDropSettings) {\n      dragDropSettings.dragHelperContent = new _dragHelperContent_1.DragHelperContent(settings.selection);\n      dragDropSettings.dragDropStarted = _dragDropHandler_1.DragDropHandler.started;\n      dragDropSettings.addDragDropHandler('dragHandler', new _selectionDragDropHandler_1.SelectionDragDropHandler(context.surface, settings.selection, context.undoEngine, settings.snapHelper, dragDropSettings.dragHelperContent));\n      dragDropSettings.addDragDropHandler('toolboxDragHandler', new _toolboxDragDropHandler_1.ToolboxDragDropHandler(context.surface, settings.selection, context.undoEngine, settings.snapHelper, dragDropSettings.dragHelperContent, controlsFactory));\n    });\n    settings.addResize(function (resizeSettings) {\n      resizeSettings.handler = {\n        starting: function () {\n          selection.expectClick = true;\n          context.undoEngine().start();\n        },\n        stopped: function () {\n          context.undoEngine().end();\n          setTimeout(function () {\n            selection.expectClick = false;\n          }, 100);\n        },\n        disabled: _dragDropHandler_1.DragDropHandler.started,\n        snapHelper: settings.snapHelper\n      };\n    });\n  }).addToolboxItems(function () {\n    return _utils_1.getToolboxItems(controlsFactory.controlsMap);\n  }).addIsLoading().addControlProperties(editors, groups, groupLocalizationIDs).addPopularProperties(controlsFactory).addControlsHelper(function (settings) {\n    settings.addControlsHelper(designControlsHelper).addControlsStore();\n  }).addTabPanel(undefined, function () {\n    return [new tabPanel_1.TabInfo({\n      text: 'Properties',\n      template: 'dxrd-propertiestab',\n      model: designerGenerator.getModel().propertyGrid,\n      localizationId: 'AnalyticsCoreStringId.Cmd_Properties',\n      visible: ko.pureComputed(function () {\n        return !!model();\n      }),\n      disabled: ko.pureComputed(function () {\n        return designerGenerator.getModel().propertyGrid.focusedItem() instanceof Array;\n      }).extend({\n        throttle: 100\n      })\n    })];\n  }).addContextActions(function (settings) {\n    settings.actionProviders = [];\n    settings.createDefaultActions(designerGenerator.getModel().editableObject, designerGenerator.getModel().undoEngine);\n  }).addMenu(function (settings) {\n    settings.appMenuVisible = ko.observable(false);\n\n    settings.toggleAppMenu = function () {\n      settings.appMenuVisible(!settings.appMenuVisible());\n    };\n\n    settings.getMenuPopupContainer = function (el) {\n      return $(el).closest('.dxrd-menu-button').prev('.dxrd-menu-container');\n    };\n\n    settings.getMenuPopupTarget = function (el) {\n      return $(el).closest('.dxrd-menu-button').find('.dxrd-menu-place');\n    };\n  }).addElement('inlineTextEdit', function () {\n    return new _inlineTextEdit_1.InlineTextEdit(designerGenerator.getModel().selection);\n  }).addElement('actionsGroupTitle', function () {\n    return function () {\n      return localization_utils_1.getLocalization('Actions', 'AnalyticsCoreStringId.Actions');\n    };\n  }).addElement('updateFont', function () {\n    return function (values) {\n      _fonts_1.availableFonts(__assign(__assign({}, _fonts_1.availableFonts()), values));\n    };\n  }).addElement('sortFont', function () {\n    return function () {\n      var sortedObj = {};\n\n      var fonts = _fonts_1.availableFonts.peek();\n\n      Object.keys(fonts).sort(function (a, b) {\n        return a.localeCompare(b);\n      }).forEach(function (key) {\n        return sortedObj[key] = fonts[key];\n      });\n\n      _fonts_1.availableFonts(sortedObj);\n    };\n  }).addElement('surfaceSize', function () {\n    return ko.observable(0);\n  }).addElement('popularVisible', function () {\n    return ko.pureComputed(function () {\n      return designerGenerator.getModel().popularProperties._editors().some(function (x) {\n        return x.visible();\n      }) || designerGenerator.getModel().contextActions && designerGenerator.getModel().contextActions().length > 0;\n    });\n  }).addActionList().addParts().getModel();\n}\n\nexports.createDesigner = createDesigner;","map":{"version":3,"sources":["/Users/kevinrabari/Desktop/Georgian College Work/1005_ Mobile Web Application/Assignment3/node_modules/@devexpress/analytics-core/core/utils/_designerInitializer.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","createDesigner","ko","require","_selection_1","_snapLinesHelper_1","_dragHelperContent_1","_selectionDragDropHandler_1","_toolboxDragDropHandler_1","tabPanel_1","_inlineTextEdit_1","_dragDropHandler_1","_fonts_1","_snapLinesCollector_1","_combinedObj_1","_utils_1","localization_utils_1","_designerCreator_1","model","surface","controlsFactory","groups","editors","parts","rtl","selection","designControlsHelper","undoEngine","customMerge","snapLinesCollector","groupLocalizationIDs","context","DesignerContextGenerator","addModel","addSurface","addUndoEngine","getContext","designerGenerator","CommonDesignerGenerator","addDisposableContainer","mapOnContext","addSelection","settings","SurfaceSelection","snapHelper","SnapLinesHelper","snapTolerance","SnapLinesCollector","editableObject","CombinedObject","getEditableObject","extend","throttle","addDragDrop","dragDropSettings","dragHelperContent","DragHelperContent","dragDropStarted","DragDropHandler","started","addDragDropHandler","SelectionDragDropHandler","ToolboxDragDropHandler","addResize","resizeSettings","handler","starting","expectClick","start","stopped","end","setTimeout","disabled","addToolboxItems","getToolboxItems","controlsMap","addIsLoading","addControlProperties","addPopularProperties","addControlsHelper","addControlsStore","addTabPanel","undefined","TabInfo","text","template","getModel","propertyGrid","localizationId","visible","pureComputed","focusedItem","Array","addContextActions","actionProviders","createDefaultActions","addMenu","appMenuVisible","observable","toggleAppMenu","getMenuPopupContainer","el","$","closest","prev","getMenuPopupTarget","find","addElement","InlineTextEdit","getLocalization","values","availableFonts","sortedObj","fonts","peek","keys","sort","a","b","localeCompare","forEach","key","popularProperties","_editors","some","x","contextActions","addActionList","addParts"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (core\\utils\\_designerInitializer.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createDesigner = void 0;\nvar ko = require(\"knockout\");\nvar _selection_1 = require(\"../selection/_selection\");\nvar _snapLinesHelper_1 = require(\"../snapLines/_snapLinesHelper\");\nvar _dragHelperContent_1 = require(\"../dragDrop/_dragHelperContent\");\nvar _selectionDragDropHandler_1 = require(\"../dragDrop/_selectionDragDropHandler\");\nvar _toolboxDragDropHandler_1 = require(\"../dragDrop/_toolboxDragDropHandler\");\nvar tabPanel_1 = require(\"../tools/tabPanel\");\nvar _inlineTextEdit_1 = require(\"../internal/_inlineTextEdit\");\nvar _dragDropHandler_1 = require(\"../dragDrop/_dragDropHandler\");\nvar _fonts_1 = require(\"../../property-grid/widgets/fonteditor/_fonts\");\nvar _snapLinesCollector_1 = require(\"../snapLines/_snapLinesCollector\");\nvar _combinedObj_1 = require(\"../selection/_combinedObj\");\nvar _utils_1 = require(\"../internal/_utils\");\nvar localization_utils_1 = require(\"../../property-grid/localization/localization_utils\");\nvar _designerCreator_1 = require(\"./_designerCreator\");\nfunction createDesigner(model, surface, controlsFactory, groups, editors, parts, rtl, selection, designControlsHelper, undoEngine, customMerge, snapLinesCollector, groupLocalizationIDs) {\n    if (groups === void 0) { groups = {}; }\n    if (editors === void 0) { editors = []; }\n    var context = new _designerCreator_1.DesignerContextGenerator(rtl)\n        .addModel(model)\n        .addSurface(surface)\n        .addUndoEngine(undoEngine)\n        .getContext();\n    var designerGenerator = new _designerCreator_1.CommonDesignerGenerator(context, rtl);\n    return designerGenerator\n        .addDisposableContainer()\n        .mapOnContext()\n        .addSelection(function (settings) {\n        settings.selection = selection || new _selection_1.SurfaceSelection();\n        settings.snapHelper = new _snapLinesHelper_1.SnapLinesHelper(surface, _snapLinesHelper_1.SnapLinesHelper.snapTolerance, snapLinesCollector || new _snapLinesCollector_1.SnapLinesCollector());\n        settings.editableObject = _combinedObj_1.CombinedObject.getEditableObject(settings.selection, context.undoEngine, customMerge).extend({ throttle: 1 });\n        settings.addDragDrop(function (dragDropSettings) {\n            dragDropSettings.dragHelperContent = new _dragHelperContent_1.DragHelperContent(settings.selection);\n            dragDropSettings.dragDropStarted = _dragDropHandler_1.DragDropHandler.started;\n            dragDropSettings.addDragDropHandler('dragHandler', new _selectionDragDropHandler_1.SelectionDragDropHandler(context.surface, settings.selection, context.undoEngine, settings.snapHelper, dragDropSettings.dragHelperContent));\n            dragDropSettings.addDragDropHandler('toolboxDragHandler', new _toolboxDragDropHandler_1.ToolboxDragDropHandler(context.surface, settings.selection, context.undoEngine, settings.snapHelper, dragDropSettings.dragHelperContent, controlsFactory));\n        });\n        settings.addResize(function (resizeSettings) {\n            resizeSettings.handler = {\n                starting: function () {\n                    selection.expectClick = true;\n                    context.undoEngine().start();\n                },\n                stopped: function () {\n                    context.undoEngine().end();\n                    setTimeout(function () { selection.expectClick = false; }, 100);\n                },\n                disabled: _dragDropHandler_1.DragDropHandler.started,\n                snapHelper: settings.snapHelper\n            };\n        });\n    })\n        .addToolboxItems(function () { return _utils_1.getToolboxItems(controlsFactory.controlsMap); })\n        .addIsLoading()\n        .addControlProperties(editors, groups, groupLocalizationIDs)\n        .addPopularProperties(controlsFactory)\n        .addControlsHelper(function (settings) {\n        settings\n            .addControlsHelper(designControlsHelper)\n            .addControlsStore();\n    })\n        .addTabPanel(undefined, function () {\n        return [\n            new tabPanel_1.TabInfo({\n                text: 'Properties',\n                template: 'dxrd-propertiestab',\n                model: designerGenerator.getModel().propertyGrid,\n                localizationId: 'AnalyticsCoreStringId.Cmd_Properties',\n                visible: ko.pureComputed(function () { return !!model(); }),\n                disabled: ko.pureComputed(function () { return designerGenerator.getModel().propertyGrid.focusedItem() instanceof Array; }).extend({ throttle: 100 })\n            })\n        ];\n    })\n        .addContextActions(function (settings) {\n        settings.actionProviders = [];\n        settings.createDefaultActions(designerGenerator.getModel().editableObject, designerGenerator.getModel().undoEngine);\n    })\n        .addMenu(function (settings) {\n        settings.appMenuVisible = ko.observable(false);\n        settings.toggleAppMenu = function () {\n            settings.appMenuVisible(!settings.appMenuVisible());\n        };\n        settings.getMenuPopupContainer = function (el) { return $(el).closest('.dxrd-menu-button').prev('.dxrd-menu-container'); };\n        settings.getMenuPopupTarget = function (el) { return $(el).closest('.dxrd-menu-button').find('.dxrd-menu-place'); };\n    })\n        .addElement('inlineTextEdit', function () { return new _inlineTextEdit_1.InlineTextEdit(designerGenerator.getModel().selection); })\n        .addElement('actionsGroupTitle', function () { return function () { return localization_utils_1.getLocalization('Actions', 'AnalyticsCoreStringId.Actions'); }; })\n        .addElement('updateFont', function () { return function (values) {\n        _fonts_1.availableFonts(__assign(__assign({}, _fonts_1.availableFonts()), values));\n    }; })\n        .addElement('sortFont', function () { return function () {\n        var sortedObj = {};\n        var fonts = _fonts_1.availableFonts.peek();\n        Object.keys(fonts).sort(function (a, b) { return a.localeCompare(b); }).forEach(function (key) { return sortedObj[key] = fonts[key]; });\n        _fonts_1.availableFonts(sortedObj);\n    }; })\n        .addElement('surfaceSize', function () { return ko.observable(0); })\n        .addElement('popularVisible', function () { return ko.pureComputed(function () {\n        return designerGenerator.getModel().popularProperties._editors().some(function (x) { return x.visible(); }) ||\n            designerGenerator.getModel().contextActions && designerGenerator.getModel().contextActions().length > 0;\n    }); })\n        .addActionList()\n        .addParts()\n        .getModel();\n}\nexports.createDesigner = createDesigner;\n"]},"metadata":{},"sourceType":"script"}