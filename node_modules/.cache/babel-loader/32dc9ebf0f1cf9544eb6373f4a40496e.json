{"ast":null,"code":"/**\n* DevExpress Analytics (core\\selection\\_combinedObj.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CombinedObject = void 0;\n\nvar ko = require(\"knockout\");\n\nvar $ = require(\"jquery\");\n\nvar _utils_1 = require(\"../../serializer/_utils\");\n\nvar CombinedObject = function () {\n  function CombinedObject() {}\n\n  CombinedObject.getInfo = function (controls) {\n    var infos = controls.map(function (item) {\n      return item['getInfo']();\n    });\n    return function () {\n      var info = [];\n\n      for (var i = 0; i < infos[0].length; i++) {\n        if (infos.filter(function (info) {\n          return info.filter(function (x) {\n            return x.propertyName === infos[0][i].propertyName;\n          }).length > 0;\n        }).length === infos.length) {\n          info.push(infos[0][i]);\n        }\n      }\n\n      return info;\n    };\n  };\n\n  CombinedObject.isPropertyDisabled = function (controls) {\n    return function (name) {\n      for (var i = 0; i < controls.length; i++) {\n        if (controls[i]['isPropertyDisabled'](name)) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n  };\n\n  CombinedObject.getPath = function (controls) {\n    return function (name) {\n      var result = '';\n\n      for (var i = 0; i < controls.length; i++) {\n        var currentPath = controls[i].getPath(name);\n\n        if (i === 0) {\n          result = currentPath;\n        } else if (result !== currentPath) {\n          result = '';\n          break;\n        }\n      }\n\n      return result;\n    };\n  };\n\n  CombinedObject.isPropertyVisible = function (controls) {\n    return function (name) {\n      for (var i = 0; i < controls.length; i++) {\n        if (!controls[i]['isPropertyVisible'](name)) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n  };\n\n  CombinedObject.mergeProperty = function (controls, propertyName, undoEngine, customMerge) {\n    var property = controls[0][propertyName];\n    var combinedObj = null;\n    var subscriptions = null;\n\n    if (controls.filter(function (x) {\n      return !!x[propertyName];\n    }).length === controls.length) {\n      combinedObj = customMerge && customMerge(propertyName, controls, undoEngine);\n\n      if (!combinedObj) {\n        if (ko.isObservable(property) && !property['push']) {\n          if (!controls.every(function (control) {\n            return ko.isObservable(control[propertyName]);\n          })) return combinedObj;\n          var combinedObservable = ko.observable(controls.every(function (control) {\n            return controls[0][propertyName].peek() === control[propertyName].peek();\n          }) ? controls[0][propertyName].peek() : null);\n          combinedObj = {\n            result: combinedObservable,\n            subscriptions: [combinedObservable.subscribe(function (newVal) {\n              undoEngine && undoEngine().start();\n              controls.forEach(function (control) {\n                control[propertyName](newVal);\n              });\n              undoEngine && undoEngine().end();\n            })]\n          };\n        } else if (typeof property === 'object' && !$.isArray(property)) {\n          combinedObj = this._merge(controls.map(function (x) {\n            return x[propertyName];\n          }), undoEngine, customMerge);\n        }\n      }\n    }\n\n    return combinedObj;\n  };\n\n  CombinedObject._createProperty = function (result, propertyName, propertyValue) {\n    if (propertyValue) {\n      if (typeof propertyValue === 'object' && _utils_1.isEmptyObject(propertyValue)) return;\n      result[propertyName] = propertyValue;\n    }\n  };\n\n  CombinedObject._merge = function (controls, undoEngine, customMerge, ignoreProperties) {\n    var _this = this;\n\n    var result = {};\n    var subscriptions = [];\n    ['getInfo', 'isPropertyVisible', 'isPropertyDisabled', 'getPath'].forEach(function (propertyName) {\n      if (controls[0][propertyName]) _this._createProperty(result, propertyName, _this[propertyName](controls));\n    });\n\n    if (ignoreProperties) {\n      var oldPropertyDisabled = result['isPropertyDisabled'];\n\n      result['isPropertyDisabled'] = function (name) {\n        return oldPropertyDisabled && oldPropertyDisabled(name) || ignoreProperties.indexOf(name) !== -1;\n      };\n    }\n\n    if (result && result['getInfo']) {\n      result['getInfo']().map(function (x) {\n        return x.propertyName;\n      }).forEach(function (propertyName) {\n        var combinedObj = _this.mergeProperty(controls, propertyName, undoEngine, customMerge);\n\n        if (combinedObj) {\n          subscriptions = [].concat.apply(subscriptions, combinedObj.subscriptions);\n\n          _this._createProperty(result, propertyName, combinedObj.result);\n        }\n      });\n    } else {\n      Object.keys(controls[0]).forEach(function (propertyName) {\n        var combinedObj = _this.mergeProperty(controls, propertyName, undoEngine, customMerge);\n\n        if (combinedObj) {\n          subscriptions = [].concat.apply(subscriptions, combinedObj.subscriptions);\n\n          _this._createProperty(result, propertyName, combinedObj.result);\n        }\n      });\n    }\n\n    return {\n      result: result,\n      subscriptions: subscriptions\n    };\n  };\n\n  CombinedObject.mergeControls = function (controls, undoEngine, customMerge, ignoreProperties) {\n    var combinedObj = this._merge(controls, undoEngine, customMerge, ignoreProperties);\n\n    return {\n      result: _utils_1.extend(combinedObj.result, {\n        controlType: 'multiselect',\n        displayName: ko.observable('')\n      }),\n      subscriptions: combinedObj.subscriptions\n    };\n  };\n\n  CombinedObject.getEditableObject = function (selectionProvider, undoEngine, customMerge) {\n    var _this = this;\n\n    var editableObject = ko.observable(null);\n    var subscriptions = [];\n    var subscription = selectionProvider.focused.subscribe(function (newVal) {\n      editableObject(newVal && newVal.getControlModel());\n    });\n\n    if (selectionProvider._disposables) {\n      selectionProvider._disposables.push(subscription);\n\n      selectionProvider._disposables.push({\n        dispose: function () {\n          subscriptions.forEach(function (x) {\n            return x.dispose();\n          });\n          subscriptions.splice(0);\n        }\n      });\n    }\n\n    return ko.pureComputed({\n      read: function () {\n        subscriptions.forEach(function (x) {\n          return x.dispose();\n        });\n        subscriptions = [];\n\n        if (selectionProvider.selectedItems.length > 1) {\n          var combinedObj = _this.mergeControls(selectionProvider.selectedItems.map(function (item) {\n            return item.getControlModel();\n          }), undoEngine, customMerge, selectionProvider.ignoreMultiSelectProperties);\n\n          subscriptions = combinedObj.subscriptions;\n          return combinedObj.result;\n        } else {\n          return editableObject();\n        }\n      },\n      write: function (val) {\n        if (val && val.surface) {\n          selectionProvider.focused(val.surface);\n        } else {\n          selectionProvider.updateSelection(null);\n          editableObject(val);\n        }\n      }\n    }).extend({\n      deferred: true\n    });\n  };\n\n  return CombinedObject;\n}();\n\nexports.CombinedObject = CombinedObject;","map":{"version":3,"sources":["/Users/kevinrabari/Desktop/Georgian College Work/1005_ Mobile Web Application/Assignment3/node_modules/@devexpress/analytics-core/core/selection/_combinedObj.js"],"names":["Object","defineProperty","exports","value","CombinedObject","ko","require","$","_utils_1","getInfo","controls","infos","map","item","info","i","length","filter","x","propertyName","push","isPropertyDisabled","name","getPath","result","currentPath","isPropertyVisible","mergeProperty","undoEngine","customMerge","property","combinedObj","subscriptions","isObservable","every","control","combinedObservable","observable","peek","subscribe","newVal","start","forEach","end","isArray","_merge","_createProperty","propertyValue","isEmptyObject","ignoreProperties","_this","oldPropertyDisabled","indexOf","concat","apply","keys","mergeControls","extend","controlType","displayName","getEditableObject","selectionProvider","editableObject","subscription","focused","getControlModel","_disposables","dispose","splice","pureComputed","read","selectedItems","ignoreMultiSelectProperties","write","val","surface","updateSelection","deferred"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (core\\selection\\_combinedObj.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CombinedObject = void 0;\nvar ko = require(\"knockout\");\nvar $ = require(\"jquery\");\nvar _utils_1 = require(\"../../serializer/_utils\");\nvar CombinedObject = (function () {\n    function CombinedObject() {\n    }\n    CombinedObject.getInfo = function (controls) {\n        var infos = controls.map(function (item) { return item['getInfo'](); });\n        return function () {\n            var info = [];\n            for (var i = 0; i < infos[0].length; i++) {\n                if (infos.filter(function (info) { return info.filter(function (x) { return x.propertyName === infos[0][i].propertyName; }).length > 0; }).length === infos.length) {\n                    info.push(infos[0][i]);\n                }\n            }\n            return info;\n        };\n    };\n    CombinedObject.isPropertyDisabled = function (controls) {\n        return function (name) {\n            for (var i = 0; i < controls.length; i++) {\n                if (controls[i]['isPropertyDisabled'](name)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    CombinedObject.getPath = function (controls) {\n        return function (name) {\n            var result = '';\n            for (var i = 0; i < controls.length; i++) {\n                var currentPath = controls[i].getPath(name);\n                if (i === 0) {\n                    result = currentPath;\n                }\n                else if (result !== currentPath) {\n                    result = '';\n                    break;\n                }\n            }\n            return result;\n        };\n    };\n    CombinedObject.isPropertyVisible = function (controls) {\n        return function (name) {\n            for (var i = 0; i < controls.length; i++) {\n                if (!controls[i]['isPropertyVisible'](name)) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    };\n    CombinedObject.mergeProperty = function (controls, propertyName, undoEngine, customMerge) {\n        var property = controls[0][propertyName];\n        var combinedObj = null;\n        var subscriptions = null;\n        if (controls.filter(function (x) { return !!x[propertyName]; }).length === controls.length) {\n            combinedObj = customMerge && customMerge(propertyName, controls, undoEngine);\n            if (!combinedObj) {\n                if (ko.isObservable(property) && !property['push']) {\n                    if (!controls.every(function (control) { return ko.isObservable(control[propertyName]); }))\n                        return combinedObj;\n                    var combinedObservable = ko.observable(controls.every(function (control) { return controls[0][propertyName].peek() === control[propertyName].peek(); }) ? controls[0][propertyName].peek() : null);\n                    combinedObj = {\n                        result: combinedObservable,\n                        subscriptions: [combinedObservable.subscribe(function (newVal) {\n                                undoEngine && undoEngine().start();\n                                controls.forEach(function (control) { control[propertyName](newVal); });\n                                undoEngine && undoEngine().end();\n                            })]\n                    };\n                }\n                else if (typeof property === 'object' && !$.isArray(property)) {\n                    combinedObj = this._merge(controls.map(function (x) { return x[propertyName]; }), undoEngine, customMerge);\n                }\n            }\n        }\n        return combinedObj;\n    };\n    CombinedObject._createProperty = function (result, propertyName, propertyValue) {\n        if (propertyValue) {\n            if (typeof propertyValue === 'object' && _utils_1.isEmptyObject(propertyValue))\n                return;\n            result[propertyName] = propertyValue;\n        }\n    };\n    CombinedObject._merge = function (controls, undoEngine, customMerge, ignoreProperties) {\n        var _this = this;\n        var result = {};\n        var subscriptions = [];\n        ['getInfo', 'isPropertyVisible', 'isPropertyDisabled', 'getPath'].forEach(function (propertyName) {\n            if (controls[0][propertyName])\n                _this._createProperty(result, propertyName, _this[propertyName](controls));\n        });\n        if (ignoreProperties) {\n            var oldPropertyDisabled = result['isPropertyDisabled'];\n            result['isPropertyDisabled'] = function (name) {\n                return (oldPropertyDisabled && oldPropertyDisabled(name)) || ignoreProperties.indexOf(name) !== -1;\n            };\n        }\n        if (result && result['getInfo']) {\n            result['getInfo']().map(function (x) { return x.propertyName; }).forEach(function (propertyName) {\n                var combinedObj = _this.mergeProperty(controls, propertyName, undoEngine, customMerge);\n                if (combinedObj) {\n                    subscriptions = [].concat.apply(subscriptions, combinedObj.subscriptions);\n                    _this._createProperty(result, propertyName, combinedObj.result);\n                }\n            });\n        }\n        else {\n            Object.keys(controls[0]).forEach(function (propertyName) {\n                var combinedObj = _this.mergeProperty(controls, propertyName, undoEngine, customMerge);\n                if (combinedObj) {\n                    subscriptions = [].concat.apply(subscriptions, combinedObj.subscriptions);\n                    _this._createProperty(result, propertyName, combinedObj.result);\n                }\n            });\n        }\n        return { result: result, subscriptions: subscriptions };\n    };\n    CombinedObject.mergeControls = function (controls, undoEngine, customMerge, ignoreProperties) {\n        var combinedObj = this._merge(controls, undoEngine, customMerge, ignoreProperties);\n        return {\n            result: _utils_1.extend(combinedObj.result, { controlType: 'multiselect', displayName: ko.observable('') }),\n            subscriptions: combinedObj.subscriptions\n        };\n    };\n    CombinedObject.getEditableObject = function (selectionProvider, undoEngine, customMerge) {\n        var _this = this;\n        var editableObject = ko.observable(null);\n        var subscriptions = [];\n        var subscription = selectionProvider.focused.subscribe(function (newVal) {\n            editableObject(newVal && newVal.getControlModel());\n        });\n        if (selectionProvider._disposables) {\n            selectionProvider._disposables.push(subscription);\n            selectionProvider._disposables.push({\n                dispose: function () {\n                    subscriptions.forEach(function (x) { return x.dispose(); });\n                    subscriptions.splice(0);\n                }\n            });\n        }\n        return ko.pureComputed({\n            read: function () {\n                subscriptions.forEach(function (x) { return x.dispose(); });\n                subscriptions = [];\n                if (selectionProvider.selectedItems.length > 1) {\n                    var combinedObj = _this.mergeControls(selectionProvider.selectedItems.map(function (item) { return item.getControlModel(); }), undoEngine, customMerge, selectionProvider.ignoreMultiSelectProperties);\n                    subscriptions = combinedObj.subscriptions;\n                    return combinedObj.result;\n                }\n                else {\n                    return editableObject();\n                }\n            },\n            write: function (val) {\n                if (val && val.surface) {\n                    selectionProvider.focused(val.surface);\n                }\n                else {\n                    selectionProvider.updateSelection(null);\n                    editableObject(val);\n                }\n            }\n        }).extend({ deferred: true });\n    };\n    return CombinedObject;\n}());\nexports.CombinedObject = CombinedObject;\n"]},"metadata":{},"sourceType":"script"}