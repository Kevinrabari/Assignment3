{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_layout-item.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LayoutItem = exports.MinWeight = exports.SplitterSize = exports.setHoverLocation = exports._syncLayoutHelper = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\n\nvar _dashboard_viewer_constants_1 = require(\"../../../viewer-parts/viewer/_dashboard-viewer-constants\");\n\nfunction _syncLayoutHelper(sourceArray, destArray, addHandler) {\n  if (sourceArray) {\n    destArray(sourceArray.peek().map(function (item) {\n      return addHandler(item);\n    }));\n    return sourceArray.subscribe(function (changes) {\n      changes.sort(function (a, b) {\n        return a.status === 'deleted' ? -1 : 1;\n      }).forEach(function (arrayChange) {\n        var change = arrayChange;\n\n        if (change.status === 'added') {\n          destArray.splice(change.index, 0, addHandler(change.value));\n        } else if (change.status === 'deleted') {\n          var itemToDelete = destArray.peek()[change.index];\n          destArray.remove(itemToDelete);\n          itemToDelete.dispose();\n        }\n      });\n    }, null, 'arrayChange');\n  }\n\n  return undefined;\n}\n\nexports._syncLayoutHelper = _syncLayoutHelper;\n\nfunction setHoverLocation(hoverLayoutItem, location, dropBehavior) {\n  if (location === void 0) {\n    location = null;\n  }\n\n  if (dropBehavior === void 0) {\n    dropBehavior = 'InsertBesideGroup';\n  }\n\n  if (hoverLayoutItem) {\n    if (hoverLayoutItem.viewModel.hasItem()) {\n      if (dropBehavior === 'InsertIntoGroup') {\n        setHoverLocationCore(hoverLayoutItem, location);\n      } else {\n        hoverLayoutItem.dragOverLocation(location);\n      }\n    } else {\n      setHoverLocationCore(hoverLayoutItem, location);\n    }\n  }\n}\n\nexports.setHoverLocation = setHoverLocation;\n\nfunction setHoverLocationCore(hoverLayoutItem, location) {\n  if (location === void 0) {\n    location = null;\n  }\n\n  var items = hoverLayoutItem.items().filter(function (item) {\n    return item.visible();\n  });\n\n  if (!location || hoverLayoutItem.viewModel.orientation() === 'Horizontal' && (location === 'top' || location === 'bottom') || hoverLayoutItem.viewModel.orientation() === 'Vertical' && (location === 'left' || location === 'right')) {\n    items.forEach(function (child) {\n      return setHoverLocation(child, location);\n    });\n  } else {\n    var index = location === 'top' || location === 'left' ? 0 : items.length - 1;\n    setHoverLocation(items[index], location);\n  }\n}\n\nexports.SplitterSize = 6;\nexports.MinWeight = 0.00001;\n\nvar LayoutItem = function () {\n  function LayoutItem(viewModel, parent) {\n    var _this = this;\n\n    this.viewModel = viewModel;\n    this._isUpdating = ko.observable(false);\n    this._constraints = null;\n    this._width = ko.observable(800);\n    this._height = ko.observable(600);\n    this._subscriptions = [];\n\n    this.setConstraints = function (constraints) {\n      var correctSize = function (value, addition) {\n        return Number.MAX_VALUE - value >= addition ? value + addition : Number.MAX_VALUE;\n      };\n\n      _this._constraints.min.width(correctSize(constraints.min.width, exports.SplitterSize));\n\n      _this._constraints.min.height(correctSize(constraints.min.height, exports.SplitterSize));\n\n      _this._constraints.max.width(correctSize(constraints.max.width, exports.SplitterSize));\n\n      _this._constraints.max.height(correctSize(constraints.max.height, exports.SplitterSize));\n    };\n\n    this.items = ko.observableArray([]);\n    this.resizeHandles = ko.observable('none');\n    this.isSelected = ko.observable(false);\n    this.dragOverLocation = ko.observable();\n    this.itemStyle = ko.computed(function () {\n      var result = '';\n\n      if (!!_this.dragOverLocation()) {\n        result += ' dx-drag-over-' + _this.dragOverLocation();\n      }\n\n      if (_this.isSelected()) {\n        result += ' dx-layout-selected';\n      }\n\n      return result;\n    });\n\n    this.coverClickHandler = function (e) {\n      _this.onEvent && _this.onEvent(_this, 'click');\n    };\n\n    this.coverMouseOverHandler = function (e) {\n      _this.onEvent && _this.onEvent(_this, 'mouseover');\n    };\n\n    this.resizeStarted = function () {\n      _this.onEvent && _this.onEvent(_this, 'resize-started');\n    };\n\n    this.resizeCompleted = function () {\n      _this.onEvent && _this.onEvent(_this, 'resize-completed');\n    };\n\n    this.getContext = function () {\n      return _this.onEvent && _this.onEvent(_this, 'get-context');\n    };\n\n    this.getLocalContext = function () {\n      return _this.onEvent && _this.onEvent(_this, 'get-local-context');\n    };\n\n    this.getContextMenu = function () {\n      var service = _this.onEvent && _this.onEvent(_this, 'get-context-menu-service');\n\n      return service && service(_this);\n    };\n\n    this.getEmptyItemTemplates = function () {\n      var service = _this.onEvent && _this.onEvent(_this, 'get-empty-item-templates-service');\n\n      return service && service(_this);\n    };\n\n    this.getLayoutItemPlaceholder = function () {\n      var service = _this.onEvent && _this.onEvent(_this, 'get-layout-item-placeholder-service');\n\n      return service && service(_this);\n    };\n\n    this.verticalPaddings = ko.observable(0);\n    this.horizontalPaddings = ko.observable(0);\n    this.repaintCallbacks = _jquery_helpers_1.createJQueryCallbacks();\n    var self = this;\n    this._parent = ko.observable(parent);\n\n    if (!!this._parent()) {\n      this.isDesignMode = this._parent().isDesignMode;\n      this.isLayoutReady = this._parent().isLayoutReady;\n    } else {\n      this.isDesignMode = ko.observable(false);\n      this.isLayoutReady = ko.observable(true);\n    }\n\n    this._constraints = {\n      min: {\n        width: ko.observable(viewModel.hasItem() ? _dashboard_viewer_constants_1.MIN_PANE_WIDTH : 0),\n        height: ko.observable(viewModel.hasItem() ? _dashboard_viewer_constants_1.MIN_PANE_HEIGHT : 0)\n      },\n      max: {\n        width: ko.observable(Number.MAX_VALUE),\n        height: ko.observable(Number.MAX_VALUE)\n      }\n    };\n    var visible = ko.observable(true);\n    this.visible = ko.computed({\n      read: function () {\n        var atLeastOneChildVisible = _this.items().reduce(function (res, item) {\n          return res || item.visible();\n        }, _this.items().length === 0 || !!_this.viewModel.hasItem());\n\n        return atLeastOneChildVisible && visible();\n      },\n      write: function (val) {\n        visible(val);\n      }\n    });\n    this.sizeController = {\n      getWidth: function () {\n        return _this.containerWidth();\n      },\n      getHeight: function () {\n        return _this.containerHeight();\n      },\n      requestRepaint: this.repaintCallbacks,\n      visible: this.visible,\n      setConstraints: this.setConstraints\n    };\n    this.minWidth = ko.computed(function () {\n      var result = _this._constraints.min.width();\n\n      if (_this.items().length > 0) {\n        if (_this.viewModel.orientation() === 'Horizontal') {\n          var minFromChildren = _this.items().reduce(function (total, item) {\n            return total + item.minWidth();\n          }, 0);\n\n          result = minFromChildren > result ? minFromChildren : result;\n        } else {\n          _this.items().forEach(function (item) {\n            if (item.minWidth() > result) {\n              result = item.minWidth();\n            }\n          });\n        }\n      }\n\n      return result + _this.horizontalPaddings();\n    });\n    this.minHeight = ko.computed(function () {\n      var result = _this._constraints.min.height();\n\n      if (_this.items().length > 0) {\n        if (_this.viewModel.orientation() === 'Vertical') {\n          var minFromChildren = _this.items().reduce(function (total, item) {\n            return total + item.minHeight();\n          }, 0);\n\n          result = Math.max(minFromChildren, result);\n        } else {\n          _this.items().forEach(function (item) {\n            if (item.minHeight() > result) {\n              result = item.minHeight();\n            }\n          });\n        }\n      }\n\n      return result + _this.verticalPaddings();\n    });\n    this.maxWidth = ko.computed(function () {\n      return Math.min(Number.MAX_VALUE, _this._constraints.max.width());\n    });\n    this.maxHeight = ko.computed(function () {\n      var result = _this._constraints.max.height();\n\n      if (_this.items().length > 0 && !_this.viewModel.ignoreChildMaxHeight) {\n        if (_this.viewModel.orientation() === 'Vertical') {\n          if (_this.items().some(function (item) {\n            return item.maxHeight() === Number.MAX_VALUE;\n          })) {\n            result = Number.MAX_VALUE;\n          } else {\n            result = _this.items().reduce(function (total, item) {\n              return total + item.maxHeight();\n            }, 0);\n          }\n        } else {\n          result = _this.items().reduce(function (total, item) {\n            return Math.max(total, item.maxHeight());\n          }, 0);\n        }\n      }\n\n      return Math.min(Number.MAX_VALUE, result + _this.verticalPaddings());\n    });\n    this.width = ko.computed({\n      read: function () {\n        return _this._width() > _this.minWidth() ? _this._width() : _this.minWidth();\n      },\n      write: function (val) {\n        if (_this._parent()) {\n          var newWeight = _this.viewModel.weight() * (val / _this._width() || 1);\n\n          _this._changeWeight(newWeight);\n        } else {\n          _this._width(val);\n        }\n      }\n    });\n    this.height = ko.computed({\n      read: function () {\n        return _this._height() > _this.minHeight() ? _this._height() : _this.minHeight();\n      },\n      write: function (val) {\n        if (_this._parent()) {\n          var newWeight = _this.viewModel.weight() * (val / _this._height() || 1);\n\n          _this._changeWeight(newWeight);\n        } else {\n          _this._height(val);\n        }\n      }\n    });\n    this.contentWidth = ko.computed(function () {\n      return _this.width() - _this.horizontalPaddings();\n    });\n    this.contentHeight = ko.computed(function () {\n      return _this.height() - _this.verticalPaddings();\n    });\n    this.containerWidth = ko.computed(function () {\n      return _this.width() - exports.SplitterSize;\n    });\n    this.containerHeight = ko.computed(function () {\n      return _this.height() - exports.SplitterSize;\n    });\n    this.areChildrenSelected = ko.pureComputed(function () {\n      var result = !!_this.viewModel.hasItem() && !!_this.visible() && _this.isSelected();\n\n      _this.items().forEach(function (layoutItem) {\n        result = result || layoutItem.areChildrenSelected();\n      });\n\n      return result;\n    });\n\n    this._subscriptions.push(_syncLayoutHelper(viewModel.visibleItems, this.items, function (model) {\n      return new LayoutItem(model._createViewModel(), self);\n    }));\n\n    this._subscriptions.push(ko.computed(function () {\n      if (!_this._isUpdating()) {\n        _this._updateChildrenSize(_this.items().filter(function (item) {\n          return item.visible();\n        }));\n\n        _this._updateChildrenResizeHandles(_this.items());\n      }\n    }));\n\n    var fireRepaintCallback = function () {\n      if (_this.isLayoutReady()) {\n        _this.repaintCallbacks.fire();\n      }\n    };\n\n    this._subscriptions.push(this.height.subscribe(function () {\n      return fireRepaintCallback();\n    }));\n\n    this._subscriptions.push(this.width.subscribe(function () {\n      return fireRepaintCallback();\n    }));\n\n    this._subscriptions.push(this.isLayoutReady.subscribe(function () {\n      return fireRepaintCallback();\n    }));\n\n    fireRepaintCallback();\n    var placeholderViewModel = this.viewModel.getPlaceholder && this.viewModel.getPlaceholder();\n\n    if (placeholderViewModel) {\n      this.placeholderItem = new LayoutItem(placeholderViewModel, this);\n    }\n\n    this._subscriptions.push(this.visible, this.minWidth, this.minHeight, this.maxWidth, this.maxHeight, this.width, this.height, this.areChildrenSelected);\n  }\n\n  LayoutItem.findLargestItem = function (layoutItem) {\n    var _this = this;\n\n    if (layoutItem.viewModel.hasItem()) {\n      return {\n        maxSquare: layoutItem.width() * layoutItem.height(),\n        item: layoutItem\n      };\n    }\n\n    var result = {\n      maxSquare: 0,\n      item: null\n    };\n    layoutItem.items().forEach(function (item) {\n      var itemMaxSquare = _this.findLargestItem(item);\n\n      if (result.maxSquare < itemMaxSquare.maxSquare) {\n        result = itemMaxSquare;\n      }\n    });\n    return result;\n  };\n\n  LayoutItem.prototype._changeWeight = function (newWeight) {\n    this._parent() && this._parent()._isUpdating(true);\n\n    try {\n      this._changeWeightCore(newWeight);\n    } finally {\n      this._parent() && this._parent()._isUpdating(false);\n    }\n  };\n\n  LayoutItem.prototype._changeWeightCore = function (newWeight) {\n    var selfIndex = this._parent().items().indexOf(this);\n\n    var neighbourItem = this._parent().items()[selfIndex + 1];\n\n    var newNeighbourWeight = neighbourItem.viewModel.weight() - (newWeight - this.viewModel.weight());\n    neighbourItem.viewModel.weight(this._correntWeight(newNeighbourWeight));\n    this.viewModel.weight(this._correntWeight(newWeight));\n  };\n\n  LayoutItem.prototype._correntWeight = function (weight) {\n    return weight < exports.MinWeight ? exports.MinWeight : weight;\n  };\n\n  LayoutItem.prototype._safeSetWidth = function (itemWidth) {\n    var computedWidth = itemWidth;\n\n    if (computedWidth < this.minWidth()) {\n      computedWidth = this.minWidth();\n    }\n\n    if (computedWidth > this.maxWidth()) {\n      computedWidth = this.maxWidth();\n    }\n\n    this._width(computedWidth);\n  };\n\n  LayoutItem.prototype._safeSetHeight = function (itemHeight) {\n    var computedHeight = itemHeight;\n\n    if (computedHeight < this.minHeight()) {\n      computedHeight = this.minHeight();\n    }\n\n    if (computedHeight > this.maxHeight()) {\n      computedHeight = this.maxHeight();\n    }\n\n    this._height(computedHeight);\n  };\n\n  LayoutItem.prototype._updateChildrenSize = function (items) {\n    var _this = this;\n\n    if (items.length > 0) {\n      var totalWeight = items.reduce(function (total, item) {\n        return total + item.viewModel.weight();\n      }, 0);\n      var undistributedDelta = 0;\n\n      if (this.viewModel.orientation() === 'Horizontal') {\n        items.forEach(function (item) {\n          item._height(_this.contentHeight());\n\n          var itemDimension = _this.contentWidth() * item.viewModel.weight() / totalWeight;\n\n          item._safeSetWidth(itemDimension);\n\n          undistributedDelta += item._width.peek() - itemDimension;\n        });\n        items.reduceRight(function (_, item) {\n          if (undistributedDelta !== 0) {\n            var itemDimenstion = item._width.peek();\n\n            item._safeSetWidth(itemDimenstion - undistributedDelta);\n\n            undistributedDelta += item._width.peek() - itemDimenstion;\n          }\n        }, {});\n\n        if (undistributedDelta < 0) {\n          items[items.length - 1]._width(items[items.length - 1]._width.peek() - undistributedDelta);\n        }\n      } else {\n        items.forEach(function (item) {\n          item._width(_this.contentWidth());\n\n          var itemDimension = _this.contentHeight() * item.viewModel.weight() / totalWeight;\n\n          item._safeSetHeight(itemDimension);\n\n          undistributedDelta += item._height.peek() - itemDimension;\n        });\n        items.reduceRight(function (_, item) {\n          if (undistributedDelta !== 0) {\n            var itemDimenstion = item._height.peek();\n\n            item._safeSetHeight(itemDimenstion - undistributedDelta);\n\n            undistributedDelta += item._height.peek() - itemDimenstion;\n          }\n        }, {});\n\n        if (undistributedDelta < 0) {\n          items[items.length - 1]._height(items[items.length - 1]._height.peek() - undistributedDelta);\n        }\n      }\n    }\n  };\n\n  LayoutItem.prototype._updateChildrenResizeHandles = function (items) {\n    var itemsCount = items.length;\n\n    if (itemsCount > 0) {\n      var handle = this.viewModel.orientation() === 'Horizontal' ? 'e' : 's';\n      items.forEach(function (item, index) {\n        item.resizeHandles(index < itemsCount - 1 ? handle : 'none');\n      });\n    }\n  };\n\n  LayoutItem.prototype.dispose = function () {\n    this._parent(null);\n\n    if (this.placeholderItem) {\n      this.placeholderItem.dispose();\n      this.placeholderItem = null;\n    }\n\n    this.repaintCallbacks.empty();\n    this.items().forEach(function (i) {\n      return i.dispose();\n    });\n\n    this._subscriptions.forEach(function (subscription) {\n      return subscription && subscription.dispose();\n    });\n\n    this._subscriptions = [];\n  };\n\n  LayoutItem.prototype.isValidWidth = function (val) {\n    if (this._parent()) {\n      if (val < this.minWidth() || val > this.maxWidth()) {\n        return false;\n      }\n\n      var selfIndex = this._parent().items().indexOf(this);\n\n      if (selfIndex < this._parent().items().length - 1) {\n        var neighbourItem = this._parent().items()[selfIndex + 1];\n\n        var neighbourNewWidth = neighbourItem.width() - val + this.width();\n\n        if (neighbourNewWidth < neighbourItem.minWidth() || neighbourNewWidth > neighbourItem.maxWidth()) {\n          return false;\n        }\n      }\n    }\n\n    return this.minWidth() !== this.maxWidth();\n  };\n\n  LayoutItem.prototype.isValidHeight = function (val) {\n    if (this._parent()) {\n      if (val < this.minHeight() || val > this.maxHeight()) {\n        return false;\n      }\n\n      var selfIndex = this._parent().items().indexOf(this);\n\n      if (selfIndex < this._parent().items().length - 1) {\n        var neighbourItem = this._parent().items()[selfIndex + 1];\n\n        var neighbourNewHeight = neighbourItem.height() - val + this.height();\n\n        if (neighbourNewHeight < neighbourItem.minHeight() || neighbourNewHeight > neighbourItem.maxHeight()) {\n          return false;\n        }\n      }\n    }\n\n    return this.minHeight() !== this.maxHeight();\n  };\n\n  LayoutItem.prototype.getSelectionParentsList = function (location) {\n    var current = this;\n\n    var parent = current._parent();\n\n    var result = [{\n      node: current,\n      dropBehavior: 'InsertBesideGroup'\n    }];\n    var orientation = !!parent && parent.viewModel.orientation();\n\n    do {\n      if (!!parent && !parent.viewModel.hasItem()) {\n        var items = parent.items().filter(function (item) {\n          return item.visible();\n        });\n        var itemIndex = items.indexOf(current);\n        var firstItemIndex = 0;\n        var lastItemIndex = items.length - 1;\n\n        if (parent.viewModel.orientation() === 'Horizontal' && (location === 'left' || location === 'right')) {\n          if (items.length > 1 && (location === 'left' && itemIndex > firstItemIndex || location === 'right' && itemIndex < lastItemIndex || location === 'left' && itemIndex === lastItemIndex || location === 'right' && itemIndex === firstItemIndex)) {\n            return result;\n          }\n\n          if (location === 'left' && itemIndex === firstItemIndex || location === 'right' && itemIndex === lastItemIndex) {\n            orientation = this._inverseOrientation(parent.viewModel.orientation());\n          }\n        }\n\n        if (parent.viewModel.orientation() === 'Vertical' && (location === 'top' || location === 'bottom')) {\n          if (items.length > 1 && (location === 'top' && itemIndex > firstItemIndex || location === 'bottom' && itemIndex < lastItemIndex || location === 'top' && itemIndex === lastItemIndex || location === 'bottom' && itemIndex === firstItemIndex)) {\n            return result;\n          }\n\n          if (location === 'top' && itemIndex === firstItemIndex || location === 'bottom' && itemIndex === lastItemIndex) {\n            orientation = this._inverseOrientation(parent.viewModel.orientation());\n          }\n        }\n      }\n\n      current = parent;\n      parent = current && current._parent();\n\n      if (!!current && !current.viewModel.hasItem() && orientation == current.viewModel.orientation()) {\n        result.push({\n          node: current,\n          dropBehavior: 'InsertBesideGroup'\n        });\n      }\n\n      if (!!current && current.viewModel.hasItem() && current.viewModel.orientation() !== this._getRequiredOrientationByLocation(location)) {\n        result.push({\n          node: current,\n          dropBehavior: 'InsertIntoGroup'\n        });\n      }\n    } while (!!current && !!parent && !current.viewModel.hasItem());\n\n    return result;\n  };\n\n  LayoutItem.prototype._getRequiredOrientationByLocation = function (location) {\n    return location === 'left' || location === 'right' ? 'Horizontal' : 'Vertical';\n  };\n\n  LayoutItem.prototype._inverseOrientation = function (orientation) {\n    return orientation === 'Horizontal' ? 'Vertical' : 'Horizontal';\n  };\n\n  LayoutItem.prototype.findLayoutItem = function (criteria) {\n    var result = undefined;\n\n    if (criteria(this)) {\n      result = this;\n    }\n\n    if (!result) {\n      this.items.peek().forEach(function (item) {\n        result = item.findLayoutItem(criteria) || result;\n      });\n    }\n\n    return result;\n  };\n\n  LayoutItem.prototype.findLayoutItemByItemModel = function (itemModel) {\n    return this.findLayoutItem(function (item) {\n      return item.viewModel.model === itemModel.model;\n    });\n  };\n\n  LayoutItem.prototype.onEvent = function (item, event) {\n    return this._parent() && this._parent().onEvent && this._parent().onEvent(item, event);\n  };\n\n  LayoutItem.prototype.updateSize = function (width, height) {\n    try {\n      this.isLayoutReady(false);\n      this.width(width);\n      this.height(height);\n    } finally {\n      this.isLayoutReady(true);\n    }\n  };\n\n  LayoutItem.prototype.create = function (modelItemJson, location, insertBehavior) {\n    var rootItem = this.getRoot();\n    var createdItemViewModel = this.viewModel.create(modelItemJson, location, insertBehavior);\n    var createdLayoutItem = rootItem.findLayoutItemByItemModel(createdItemViewModel);\n    createdLayoutItem && createdLayoutItem.coverClickHandler(null);\n    return createdLayoutItem;\n  };\n\n  LayoutItem.prototype.moveTo = function (layoutNode, location, insertBehavior) {\n    var rootItem = this.getRoot();\n    this.viewModel.moveTo(layoutNode.viewModel, location, insertBehavior);\n    var createdLayoutItem = rootItem.findLayoutItemByItemModel(this.viewModel);\n    createdLayoutItem && createdLayoutItem.coverClickHandler(null);\n    return createdLayoutItem;\n  };\n\n  LayoutItem.prototype.delete = function () {\n    this.viewModel.delete();\n\n    this._parent(null);\n  };\n\n  LayoutItem.prototype.getRoot = function () {\n    var root = this;\n\n    while (root._parent()) {\n      root = root._parent();\n    }\n\n    return root;\n  };\n\n  LayoutItem.prototype.canAttach = function (something) {\n    return !!this._parent() && this.viewModel.canAttach(something);\n  };\n\n  LayoutItem.prototype.getPlaceholder = function () {\n    return this.placeholderItem;\n  };\n\n  return LayoutItem;\n}();\n\nexports.LayoutItem = LayoutItem;\nko.components.register('dx-layout-item', {\n  viewModel: function (params) {\n    this.layoutItem = ko.computed(function () {\n      return ko.unwrap(params.layoutItem);\n    });\n  },\n  template: {\n    element: 'dx-layout-item'\n  }\n});","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/common/docking-layout/core/_layout-item.js"],"names":["Object","defineProperty","exports","value","LayoutItem","MinWeight","SplitterSize","setHoverLocation","_syncLayoutHelper","ko","require","_jquery_helpers_1","_dashboard_viewer_constants_1","sourceArray","destArray","addHandler","peek","map","item","subscribe","changes","sort","a","b","status","forEach","arrayChange","change","splice","index","itemToDelete","remove","dispose","undefined","hoverLayoutItem","location","dropBehavior","viewModel","hasItem","setHoverLocationCore","dragOverLocation","items","filter","visible","orientation","child","length","parent","_this","_isUpdating","observable","_constraints","_width","_height","_subscriptions","setConstraints","constraints","correctSize","addition","Number","MAX_VALUE","min","width","height","max","observableArray","resizeHandles","isSelected","itemStyle","computed","result","coverClickHandler","e","onEvent","coverMouseOverHandler","resizeStarted","resizeCompleted","getContext","getLocalContext","getContextMenu","service","getEmptyItemTemplates","getLayoutItemPlaceholder","verticalPaddings","horizontalPaddings","repaintCallbacks","createJQueryCallbacks","self","_parent","isDesignMode","isLayoutReady","MIN_PANE_WIDTH","MIN_PANE_HEIGHT","read","atLeastOneChildVisible","reduce","res","write","val","sizeController","getWidth","containerWidth","getHeight","containerHeight","requestRepaint","minWidth","minFromChildren","total","minHeight","Math","maxWidth","maxHeight","ignoreChildMaxHeight","some","newWeight","weight","_changeWeight","contentWidth","contentHeight","areChildrenSelected","pureComputed","layoutItem","push","visibleItems","model","_createViewModel","_updateChildrenSize","_updateChildrenResizeHandles","fireRepaintCallback","fire","placeholderViewModel","getPlaceholder","placeholderItem","findLargestItem","maxSquare","itemMaxSquare","prototype","_changeWeightCore","selfIndex","indexOf","neighbourItem","newNeighbourWeight","_correntWeight","_safeSetWidth","itemWidth","computedWidth","_safeSetHeight","itemHeight","computedHeight","totalWeight","undistributedDelta","itemDimension","reduceRight","_","itemDimenstion","itemsCount","handle","empty","i","subscription","isValidWidth","neighbourNewWidth","isValidHeight","neighbourNewHeight","getSelectionParentsList","current","node","itemIndex","firstItemIndex","lastItemIndex","_inverseOrientation","_getRequiredOrientationByLocation","findLayoutItem","criteria","findLayoutItemByItemModel","itemModel","event","updateSize","create","modelItemJson","insertBehavior","rootItem","getRoot","createdItemViewModel","createdLayoutItem","moveTo","layoutNode","delete","root","canAttach","something","components","register","params","unwrap","template","element"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_layout-item.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LayoutItem = exports.MinWeight = exports.SplitterSize = exports.setHoverLocation = exports._syncLayoutHelper = void 0;\nvar ko = require(\"knockout\");\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\nvar _dashboard_viewer_constants_1 = require(\"../../../viewer-parts/viewer/_dashboard-viewer-constants\");\nfunction _syncLayoutHelper(sourceArray, destArray, addHandler) {\n    if (sourceArray) {\n        destArray(sourceArray.peek().map(function (item) { return addHandler(item); }));\n        return sourceArray.subscribe(function (changes) {\n            changes.sort(function (a, b) { return a.status === 'deleted' ? -1 : 1; }).forEach(function (arrayChange) {\n                var change = arrayChange;\n                if (change.status === 'added') {\n                    destArray.splice(change.index, 0, addHandler(change.value));\n                }\n                else if (change.status === 'deleted') {\n                    var itemToDelete = destArray.peek()[change.index];\n                    destArray.remove(itemToDelete);\n                    itemToDelete.dispose();\n                }\n            });\n        }, null, 'arrayChange');\n    }\n    return undefined;\n}\nexports._syncLayoutHelper = _syncLayoutHelper;\nfunction setHoverLocation(hoverLayoutItem, location, dropBehavior) {\n    if (location === void 0) { location = null; }\n    if (dropBehavior === void 0) { dropBehavior = 'InsertBesideGroup'; }\n    if (hoverLayoutItem) {\n        if (hoverLayoutItem.viewModel.hasItem()) {\n            if (dropBehavior === 'InsertIntoGroup') {\n                setHoverLocationCore(hoverLayoutItem, location);\n            }\n            else {\n                hoverLayoutItem.dragOverLocation(location);\n            }\n        }\n        else {\n            setHoverLocationCore(hoverLayoutItem, location);\n        }\n    }\n}\nexports.setHoverLocation = setHoverLocation;\nfunction setHoverLocationCore(hoverLayoutItem, location) {\n    if (location === void 0) { location = null; }\n    var items = hoverLayoutItem.items().filter(function (item) { return item.visible(); });\n    if (!location || hoverLayoutItem.viewModel.orientation() === 'Horizontal' && (location === 'top' || location === 'bottom') ||\n        hoverLayoutItem.viewModel.orientation() === 'Vertical' && (location === 'left' || location === 'right')) {\n        items.forEach(function (child) { return setHoverLocation(child, location); });\n    }\n    else {\n        var index = (location === 'top' || location === 'left') ? 0 : items.length - 1;\n        setHoverLocation(items[index], location);\n    }\n}\nexports.SplitterSize = 6;\nexports.MinWeight = 0.00001;\nvar LayoutItem = (function () {\n    function LayoutItem(viewModel, parent) {\n        var _this = this;\n        this.viewModel = viewModel;\n        this._isUpdating = ko.observable(false);\n        this._constraints = null;\n        this._width = ko.observable(800);\n        this._height = ko.observable(600);\n        this._subscriptions = [];\n        this.setConstraints = function (constraints) {\n            var correctSize = function (value, addition) {\n                return (Number.MAX_VALUE - value >= addition) ? value + addition : Number.MAX_VALUE;\n            };\n            _this._constraints.min.width(correctSize(constraints.min.width, exports.SplitterSize));\n            _this._constraints.min.height(correctSize(constraints.min.height, exports.SplitterSize));\n            _this._constraints.max.width(correctSize(constraints.max.width, exports.SplitterSize));\n            _this._constraints.max.height(correctSize(constraints.max.height, exports.SplitterSize));\n        };\n        this.items = ko.observableArray([]);\n        this.resizeHandles = ko.observable('none');\n        this.isSelected = ko.observable(false);\n        this.dragOverLocation = ko.observable();\n        this.itemStyle = ko.computed(function () {\n            var result = '';\n            if (!!_this.dragOverLocation()) {\n                result += ' dx-drag-over-' + _this.dragOverLocation();\n            }\n            if (_this.isSelected()) {\n                result += ' dx-layout-selected';\n            }\n            return result;\n        });\n        this.coverClickHandler = function (e) {\n            _this.onEvent && _this.onEvent(_this, 'click');\n        };\n        this.coverMouseOverHandler = function (e) {\n            _this.onEvent && _this.onEvent(_this, 'mouseover');\n        };\n        this.resizeStarted = function () {\n            _this.onEvent && _this.onEvent(_this, 'resize-started');\n        };\n        this.resizeCompleted = function () {\n            _this.onEvent && _this.onEvent(_this, 'resize-completed');\n        };\n        this.getContext = function () {\n            return _this.onEvent && _this.onEvent(_this, 'get-context');\n        };\n        this.getLocalContext = function () {\n            return _this.onEvent && _this.onEvent(_this, 'get-local-context');\n        };\n        this.getContextMenu = function () {\n            var service = _this.onEvent && _this.onEvent(_this, 'get-context-menu-service');\n            return service && service(_this);\n        };\n        this.getEmptyItemTemplates = function () {\n            var service = _this.onEvent && _this.onEvent(_this, 'get-empty-item-templates-service');\n            return service && service(_this);\n        };\n        this.getLayoutItemPlaceholder = function () {\n            var service = _this.onEvent && _this.onEvent(_this, 'get-layout-item-placeholder-service');\n            return service && service(_this);\n        };\n        this.verticalPaddings = ko.observable(0);\n        this.horizontalPaddings = ko.observable(0);\n        this.repaintCallbacks = _jquery_helpers_1.createJQueryCallbacks();\n        var self = this;\n        this._parent = ko.observable(parent);\n        if (!!this._parent()) {\n            this.isDesignMode = this._parent().isDesignMode;\n            this.isLayoutReady = this._parent().isLayoutReady;\n        }\n        else {\n            this.isDesignMode = ko.observable(false);\n            this.isLayoutReady = ko.observable(true);\n        }\n        this._constraints = {\n            min: {\n                width: ko.observable(viewModel.hasItem() ? _dashboard_viewer_constants_1.MIN_PANE_WIDTH : 0),\n                height: ko.observable(viewModel.hasItem() ? _dashboard_viewer_constants_1.MIN_PANE_HEIGHT : 0)\n            },\n            max: {\n                width: ko.observable(Number.MAX_VALUE),\n                height: ko.observable(Number.MAX_VALUE)\n            }\n        };\n        var visible = ko.observable(true);\n        this.visible = ko.computed({\n            read: function () {\n                var atLeastOneChildVisible = _this.items().reduce(function (res, item) { return res || item.visible(); }, _this.items().length === 0 || !!_this.viewModel.hasItem());\n                return atLeastOneChildVisible && visible();\n            },\n            write: function (val) {\n                visible(val);\n            }\n        });\n        this.sizeController = {\n            getWidth: function () { return _this.containerWidth(); },\n            getHeight: function () { return _this.containerHeight(); },\n            requestRepaint: this.repaintCallbacks,\n            visible: this.visible,\n            setConstraints: this.setConstraints\n        };\n        this.minWidth = ko.computed(function () {\n            var result = _this._constraints.min.width();\n            if (_this.items().length > 0) {\n                if (_this.viewModel.orientation() === 'Horizontal') {\n                    var minFromChildren = _this.items().reduce(function (total, item) { return total + item.minWidth(); }, 0);\n                    result = minFromChildren > result ? minFromChildren : result;\n                }\n                else {\n                    _this.items().forEach(function (item) {\n                        if (item.minWidth() > result) {\n                            result = item.minWidth();\n                        }\n                    });\n                }\n            }\n            return result + _this.horizontalPaddings();\n        });\n        this.minHeight = ko.computed(function () {\n            var result = _this._constraints.min.height();\n            if (_this.items().length > 0) {\n                if (_this.viewModel.orientation() === 'Vertical') {\n                    var minFromChildren = _this.items().reduce(function (total, item) { return total + item.minHeight(); }, 0);\n                    result = Math.max(minFromChildren, result);\n                }\n                else {\n                    _this.items().forEach(function (item) {\n                        if (item.minHeight() > result) {\n                            result = item.minHeight();\n                        }\n                    });\n                }\n            }\n            return result + _this.verticalPaddings();\n        });\n        this.maxWidth = ko.computed(function () {\n            return Math.min(Number.MAX_VALUE, _this._constraints.max.width());\n        });\n        this.maxHeight = ko.computed(function () {\n            var result = _this._constraints.max.height();\n            if (_this.items().length > 0 && !_this.viewModel.ignoreChildMaxHeight) {\n                if (_this.viewModel.orientation() === 'Vertical') {\n                    if (_this.items().some(function (item) { return item.maxHeight() === Number.MAX_VALUE; })) {\n                        result = Number.MAX_VALUE;\n                    }\n                    else {\n                        result = _this.items().reduce(function (total, item) { return total + item.maxHeight(); }, 0);\n                    }\n                }\n                else {\n                    result = _this.items().reduce(function (total, item) { return Math.max(total, item.maxHeight()); }, 0);\n                }\n            }\n            return Math.min(Number.MAX_VALUE, result + _this.verticalPaddings());\n        });\n        this.width = ko.computed({\n            read: function () {\n                return _this._width() > _this.minWidth() ? _this._width() : _this.minWidth();\n            },\n            write: function (val) {\n                if (_this._parent()) {\n                    var newWeight = _this.viewModel.weight() * (val / _this._width() || 1);\n                    _this._changeWeight(newWeight);\n                }\n                else {\n                    _this._width(val);\n                }\n            }\n        });\n        this.height = ko.computed({\n            read: function () {\n                return _this._height() > _this.minHeight() ? _this._height() : _this.minHeight();\n            },\n            write: function (val) {\n                if (_this._parent()) {\n                    var newWeight = _this.viewModel.weight() * (val / _this._height() || 1);\n                    _this._changeWeight(newWeight);\n                }\n                else {\n                    _this._height(val);\n                }\n            }\n        });\n        this.contentWidth = ko.computed(function () { return _this.width() - _this.horizontalPaddings(); });\n        this.contentHeight = ko.computed(function () { return _this.height() - _this.verticalPaddings(); });\n        this.containerWidth = ko.computed(function () { return _this.width() - exports.SplitterSize; });\n        this.containerHeight = ko.computed(function () { return _this.height() - exports.SplitterSize; });\n        this.areChildrenSelected = ko.pureComputed(function () {\n            var result = !!_this.viewModel.hasItem() && !!_this.visible() && _this.isSelected();\n            _this.items().forEach(function (layoutItem) {\n                result = result || layoutItem.areChildrenSelected();\n            });\n            return result;\n        });\n        this._subscriptions.push(_syncLayoutHelper(viewModel.visibleItems, this.items, function (model) { return new LayoutItem(model._createViewModel(), self); }));\n        this._subscriptions.push(ko.computed(function () {\n            if (!_this._isUpdating()) {\n                _this._updateChildrenSize(_this.items().filter(function (item) { return item.visible(); }));\n                _this._updateChildrenResizeHandles(_this.items());\n            }\n        }));\n        var fireRepaintCallback = function () {\n            if (_this.isLayoutReady()) {\n                _this.repaintCallbacks.fire();\n            }\n        };\n        this._subscriptions.push(this.height.subscribe(function () { return fireRepaintCallback(); }));\n        this._subscriptions.push(this.width.subscribe(function () { return fireRepaintCallback(); }));\n        this._subscriptions.push(this.isLayoutReady.subscribe(function () { return fireRepaintCallback(); }));\n        fireRepaintCallback();\n        var placeholderViewModel = this.viewModel.getPlaceholder && this.viewModel.getPlaceholder();\n        if (placeholderViewModel) {\n            this.placeholderItem = new LayoutItem(placeholderViewModel, this);\n        }\n        this._subscriptions.push(this.visible, this.minWidth, this.minHeight, this.maxWidth, this.maxHeight, this.width, this.height, this.areChildrenSelected);\n    }\n    LayoutItem.findLargestItem = function (layoutItem) {\n        var _this = this;\n        if (layoutItem.viewModel.hasItem()) {\n            return { maxSquare: layoutItem.width() * layoutItem.height(), item: layoutItem };\n        }\n        var result = { maxSquare: 0, item: null };\n        layoutItem.items().forEach(function (item) {\n            var itemMaxSquare = _this.findLargestItem(item);\n            if (result.maxSquare < itemMaxSquare.maxSquare) {\n                result = itemMaxSquare;\n            }\n        });\n        return result;\n    };\n    LayoutItem.prototype._changeWeight = function (newWeight) {\n        this._parent() && this._parent()._isUpdating(true);\n        try {\n            this._changeWeightCore(newWeight);\n        }\n        finally {\n            this._parent() && this._parent()._isUpdating(false);\n        }\n    };\n    LayoutItem.prototype._changeWeightCore = function (newWeight) {\n        var selfIndex = this._parent().items().indexOf(this);\n        var neighbourItem = this._parent().items()[selfIndex + 1];\n        var newNeighbourWeight = neighbourItem.viewModel.weight() - (newWeight - this.viewModel.weight());\n        neighbourItem.viewModel.weight(this._correntWeight(newNeighbourWeight));\n        this.viewModel.weight(this._correntWeight(newWeight));\n    };\n    LayoutItem.prototype._correntWeight = function (weight) {\n        return weight < exports.MinWeight ? exports.MinWeight : weight;\n    };\n    LayoutItem.prototype._safeSetWidth = function (itemWidth) {\n        var computedWidth = itemWidth;\n        if (computedWidth < this.minWidth()) {\n            computedWidth = this.minWidth();\n        }\n        if (computedWidth > this.maxWidth()) {\n            computedWidth = this.maxWidth();\n        }\n        this._width(computedWidth);\n    };\n    LayoutItem.prototype._safeSetHeight = function (itemHeight) {\n        var computedHeight = itemHeight;\n        if (computedHeight < this.minHeight()) {\n            computedHeight = this.minHeight();\n        }\n        if (computedHeight > this.maxHeight()) {\n            computedHeight = this.maxHeight();\n        }\n        this._height(computedHeight);\n    };\n    LayoutItem.prototype._updateChildrenSize = function (items) {\n        var _this = this;\n        if (items.length > 0) {\n            var totalWeight = items.reduce(function (total, item) { return total + item.viewModel.weight(); }, 0);\n            var undistributedDelta = 0;\n            if (this.viewModel.orientation() === 'Horizontal') {\n                items.forEach(function (item) {\n                    item._height(_this.contentHeight());\n                    var itemDimension = _this.contentWidth() * item.viewModel.weight() / totalWeight;\n                    item._safeSetWidth(itemDimension);\n                    undistributedDelta += item._width.peek() - itemDimension;\n                });\n                items.reduceRight(function (_, item) {\n                    if (undistributedDelta !== 0) {\n                        var itemDimenstion = item._width.peek();\n                        item._safeSetWidth(itemDimenstion - undistributedDelta);\n                        undistributedDelta += item._width.peek() - itemDimenstion;\n                    }\n                }, {});\n                if (undistributedDelta < 0) {\n                    items[items.length - 1]._width(items[items.length - 1]._width.peek() - undistributedDelta);\n                }\n            }\n            else {\n                items.forEach(function (item) {\n                    item._width(_this.contentWidth());\n                    var itemDimension = _this.contentHeight() * item.viewModel.weight() / totalWeight;\n                    item._safeSetHeight(itemDimension);\n                    undistributedDelta += item._height.peek() - itemDimension;\n                });\n                items.reduceRight(function (_, item) {\n                    if (undistributedDelta !== 0) {\n                        var itemDimenstion = item._height.peek();\n                        item._safeSetHeight(itemDimenstion - undistributedDelta);\n                        undistributedDelta += item._height.peek() - itemDimenstion;\n                    }\n                }, {});\n                if (undistributedDelta < 0) {\n                    items[items.length - 1]._height(items[items.length - 1]._height.peek() - undistributedDelta);\n                }\n            }\n        }\n    };\n    LayoutItem.prototype._updateChildrenResizeHandles = function (items) {\n        var itemsCount = items.length;\n        if (itemsCount > 0) {\n            var handle = this.viewModel.orientation() === 'Horizontal' ? 'e' : 's';\n            items.forEach(function (item, index) {\n                item.resizeHandles(index < itemsCount - 1 ? handle : 'none');\n            });\n        }\n    };\n    LayoutItem.prototype.dispose = function () {\n        this._parent(null);\n        if (this.placeholderItem) {\n            this.placeholderItem.dispose();\n            this.placeholderItem = null;\n        }\n        this.repaintCallbacks.empty();\n        this.items().forEach(function (i) { return i.dispose(); });\n        this._subscriptions.forEach(function (subscription) { return subscription && subscription.dispose(); });\n        this._subscriptions = [];\n    };\n    LayoutItem.prototype.isValidWidth = function (val) {\n        if (this._parent()) {\n            if (val < this.minWidth() || val > this.maxWidth()) {\n                return false;\n            }\n            var selfIndex = this._parent().items().indexOf(this);\n            if (selfIndex < this._parent().items().length - 1) {\n                var neighbourItem = this._parent().items()[selfIndex + 1];\n                var neighbourNewWidth = neighbourItem.width() - val + this.width();\n                if (neighbourNewWidth < neighbourItem.minWidth() || neighbourNewWidth > neighbourItem.maxWidth()) {\n                    return false;\n                }\n            }\n        }\n        return this.minWidth() !== this.maxWidth();\n    };\n    LayoutItem.prototype.isValidHeight = function (val) {\n        if (this._parent()) {\n            if (val < this.minHeight() || val > this.maxHeight()) {\n                return false;\n            }\n            var selfIndex = this._parent().items().indexOf(this);\n            if (selfIndex < this._parent().items().length - 1) {\n                var neighbourItem = this._parent().items()[selfIndex + 1];\n                var neighbourNewHeight = neighbourItem.height() - val + this.height();\n                if (neighbourNewHeight < neighbourItem.minHeight() || neighbourNewHeight > neighbourItem.maxHeight()) {\n                    return false;\n                }\n            }\n        }\n        return this.minHeight() !== this.maxHeight();\n    };\n    LayoutItem.prototype.getSelectionParentsList = function (location) {\n        var current = this;\n        var parent = current._parent();\n        var result = [{ node: current, dropBehavior: 'InsertBesideGroup' }];\n        var orientation = !!parent && parent.viewModel.orientation();\n        do {\n            if (!!parent && !parent.viewModel.hasItem()) {\n                var items = parent.items().filter(function (item) { return item.visible(); });\n                var itemIndex = items.indexOf(current);\n                var firstItemIndex = 0;\n                var lastItemIndex = items.length - 1;\n                if (parent.viewModel.orientation() === 'Horizontal' && (location === 'left' || location === 'right')) {\n                    if (items.length > 1 &&\n                        (location === 'left' && itemIndex > firstItemIndex || location === 'right' && itemIndex < lastItemIndex\n                            || location === 'left' && itemIndex === lastItemIndex || location === 'right' && itemIndex === firstItemIndex)) {\n                        return result;\n                    }\n                    if (location === 'left' && itemIndex === firstItemIndex || location === 'right' && itemIndex === lastItemIndex) {\n                        orientation = this._inverseOrientation(parent.viewModel.orientation());\n                    }\n                }\n                if (parent.viewModel.orientation() === 'Vertical' && (location === 'top' || location === 'bottom')) {\n                    if (items.length > 1 &&\n                        (location === 'top' && itemIndex > firstItemIndex || location === 'bottom' && itemIndex < lastItemIndex\n                            || location === 'top' && itemIndex === lastItemIndex || location === 'bottom' && itemIndex === firstItemIndex)) {\n                        return result;\n                    }\n                    if (location === 'top' && itemIndex === firstItemIndex || location === 'bottom' && itemIndex === lastItemIndex) {\n                        orientation = this._inverseOrientation(parent.viewModel.orientation());\n                    }\n                }\n            }\n            current = parent;\n            parent = current && current._parent();\n            if (!!current && !current.viewModel.hasItem() && orientation == current.viewModel.orientation()) {\n                result.push({ node: current, dropBehavior: 'InsertBesideGroup' });\n            }\n            if (!!current && current.viewModel.hasItem()\n                && current.viewModel.orientation() !== this._getRequiredOrientationByLocation(location)) {\n                result.push({ node: current, dropBehavior: 'InsertIntoGroup' });\n            }\n        } while (!!current && !!parent && !current.viewModel.hasItem());\n        return result;\n    };\n    LayoutItem.prototype._getRequiredOrientationByLocation = function (location) {\n        return (location === 'left' || location === 'right') ? 'Horizontal' : 'Vertical';\n    };\n    LayoutItem.prototype._inverseOrientation = function (orientation) {\n        return orientation === 'Horizontal' ? 'Vertical' : 'Horizontal';\n    };\n    LayoutItem.prototype.findLayoutItem = function (criteria) {\n        var result = undefined;\n        if (criteria(this)) {\n            result = this;\n        }\n        if (!result) {\n            this.items.peek().forEach(function (item) {\n                result = item.findLayoutItem(criteria) || result;\n            });\n        }\n        return result;\n    };\n    LayoutItem.prototype.findLayoutItemByItemModel = function (itemModel) {\n        return this.findLayoutItem(function (item) {\n            return item.viewModel.model === itemModel.model;\n        });\n    };\n    LayoutItem.prototype.onEvent = function (item, event) {\n        return this._parent() && this._parent().onEvent && this._parent().onEvent(item, event);\n    };\n    LayoutItem.prototype.updateSize = function (width, height) {\n        try {\n            this.isLayoutReady(false);\n            this.width(width);\n            this.height(height);\n        }\n        finally {\n            this.isLayoutReady(true);\n        }\n    };\n    LayoutItem.prototype.create = function (modelItemJson, location, insertBehavior) {\n        var rootItem = this.getRoot();\n        var createdItemViewModel = this.viewModel.create(modelItemJson, location, insertBehavior);\n        var createdLayoutItem = rootItem.findLayoutItemByItemModel(createdItemViewModel);\n        createdLayoutItem && createdLayoutItem.coverClickHandler(null);\n        return createdLayoutItem;\n    };\n    LayoutItem.prototype.moveTo = function (layoutNode, location, insertBehavior) {\n        var rootItem = this.getRoot();\n        this.viewModel.moveTo(layoutNode.viewModel, location, insertBehavior);\n        var createdLayoutItem = rootItem.findLayoutItemByItemModel(this.viewModel);\n        createdLayoutItem && createdLayoutItem.coverClickHandler(null);\n        return createdLayoutItem;\n    };\n    LayoutItem.prototype.delete = function () {\n        this.viewModel.delete();\n        this._parent(null);\n    };\n    LayoutItem.prototype.getRoot = function () {\n        var root = this;\n        while (root._parent()) {\n            root = root._parent();\n        }\n        return root;\n    };\n    LayoutItem.prototype.canAttach = function (something) {\n        return !!this._parent() && this.viewModel.canAttach(something);\n    };\n    LayoutItem.prototype.getPlaceholder = function () {\n        return this.placeholderItem;\n    };\n    return LayoutItem;\n}());\nexports.LayoutItem = LayoutItem;\nko.components.register('dx-layout-item', {\n    viewModel: function (params) {\n        this.layoutItem = ko.computed(function () { return ko.unwrap(params.layoutItem); });\n    },\n    template: { element: 'dx-layout-item' }\n});\n"]},"metadata":{},"sourceType":"script"}