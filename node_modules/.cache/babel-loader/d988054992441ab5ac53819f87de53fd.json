{"ast":null,"code":"/**\n* DevExpress Analytics (query-builder\\wizard\\internal\\_queryBuilderPopup.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QueryBuilderPopup = exports.QueryBuilderPopupBase = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _arrayutils_1 = require(\"../../../core/utils/_arrayutils\");\n\nvar tableQuery_1 = require(\"../../dataSource/sql/tableQuery\");\n\nvar serializer_1 = require(\"../../../serializer/serializer\");\n\nvar _utils_1 = require(\"../../../widgets/_utils\");\n\nvar localization_utils_1 = require(\"../../../property-grid/localization/localization_utils\");\n\nvar utils_1 = require(\"../../../serializer/utils\");\n\nvar QueryBuilderPopupBase = function (_super) {\n  __extends(QueryBuilderPopupBase, _super);\n\n  function QueryBuilderPopupBase(applyNewQuery, rtl, customizeQBInitializationData) {\n    if (rtl === void 0) {\n      rtl = false;\n    }\n\n    if (customizeQBInitializationData === void 0) {\n      customizeQBInitializationData = function (options) {\n        return options;\n      };\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.customizeQBInitializationData = customizeQBInitializationData;\n    _this._querySource = ko.observable(null);\n    _this._dbSchemaProvider = ko.observable(null);\n    _this.designer = ko.observable();\n    _this.qbOptions = ko.observable(null);\n    _this.okButtonDisabled = ko.pureComputed(function () {\n      return _this.designer() && !_this.designer().model().isValid();\n    });\n    _this.isVisible = ko.observable(false);\n    _this.showLoadIndicator = ko.observable(false);\n    _this.localizationIdMap = {\n      'title': {\n        text: 'Query Builder',\n        localizationId: 'DataAccessUIStringId.QueryBuilder'\n      },\n      'loading': {\n        text: 'Loading...',\n        localizationId: 'AnalyticsCoreStringId.Loading'\n      },\n      'previewResults': {\n        text: 'Preview Results...',\n        localizationId: 'DataAccessUIStringId.QueryBuilderButtons_PreviewResults'\n      },\n      'cancel': {\n        text: 'Cancel',\n        localizationId: 'AnalyticsCoreStringId.SearchDialog_Cancel'\n      },\n      'ok': {\n        text: 'OK',\n        localizationId: 'DataAccessUIStringId.Button_OK'\n      }\n    };\n    _this._rtl = rtl;\n    _this._applyQuery = applyNewQuery;\n\n    _this.qbOptions(_this.qbOptions() || _this.customizeQBInitializationData({\n      queryBuilderModel: _this.designer,\n      dbSchemaProvider: _this._dbSchemaProvider,\n      querySource: _this._querySource,\n      callbacks: {\n        customizeActions: QueryBuilderPopup.customizeQueryBuilderActions\n      },\n      rtl: _this._rtl\n    }));\n\n    return _this;\n  }\n\n  QueryBuilderPopupBase.prototype.show = function (query, dataSource) {\n    this._dataSource = dataSource;\n\n    this._dbSchemaProvider(dataSource.dbSchemaProvider);\n\n    this._querySource(new serializer_1.ModelSerializer().serialize(query));\n\n    this.isVisible(true);\n    this.designer().updateSurface();\n  };\n\n  QueryBuilderPopupBase.prototype.cancelHandler = function () {\n    this.isVisible(false);\n  };\n\n  QueryBuilderPopupBase.prototype.previewHandler = function () {\n    this.designer().showPreview();\n  };\n\n  QueryBuilderPopupBase.prototype.okHandler = function () {\n    var _this = this;\n\n    if (this.designer().model().canSave()) {\n      this._applyQuery(this.createQuery(), this.showLoadIndicator).done(function () {\n        _this.isVisible(false);\n      });\n    }\n  };\n\n  QueryBuilderPopupBase.prototype.onHiddingHandler = function () {\n    this.designer().dataPreview.isVisible(false);\n  };\n\n  QueryBuilderPopupBase.prototype.popupViewModel = function (element) {\n    var $container = _utils_1.getParentContainer(element);\n\n    return {\n      visible: this.isVisible,\n      title: this.getDisplayText('title'),\n      showTitle: true,\n      shading: true,\n      fullScreen: false,\n      width: '95%',\n      height: '95%',\n      container: $container,\n      wrapperAttr: {\n        class: 'dxrd-querybuilder-popup'\n      },\n      position: {\n        of: $container\n      },\n      onHidding: this.onHiddingHandler\n    };\n  };\n\n  QueryBuilderPopupBase.prototype.getDisplayText = function (key) {\n    return localization_utils_1.getLocalization(this.localizationIdMap[key].text, this.localizationIdMap[key].localizationId);\n  };\n\n  QueryBuilderPopupBase.customizeQueryBuilderActions = function (actions) {\n    var del = _arrayutils_1.findFirstItemMatchesCondition(actions, function (action) {\n      return action.text === 'Delete';\n    }),\n        undo = _arrayutils_1.findFirstItemMatchesCondition(actions, function (action) {\n      return action.text === 'Undo';\n    }),\n        redo = _arrayutils_1.findFirstItemMatchesCondition(actions, function (action) {\n      return action.text === 'Redo';\n    });\n\n    actions.splice(0, actions.length, del, undo, redo);\n  };\n\n  return QueryBuilderPopupBase;\n}(utils_1.Disposable);\n\nexports.QueryBuilderPopupBase = QueryBuilderPopupBase;\n\nvar QueryBuilderPopup = function (_super) {\n  __extends(QueryBuilderPopup, _super);\n\n  function QueryBuilderPopup(applyNewQuery, rtl, customizeQBInitializationData) {\n    if (rtl === void 0) {\n      rtl = false;\n    }\n\n    if (customizeQBInitializationData === void 0) {\n      customizeQBInitializationData = function (options) {\n        return options;\n      };\n    }\n\n    var _this = _super.call(this, applyNewQuery, rtl, customizeQBInitializationData) || this;\n\n    _this.customizeQBInitializationData = customizeQBInitializationData;\n    return _this;\n  }\n\n  QueryBuilderPopup.prototype.getDataSource = function () {\n    return this._dataSource;\n  };\n\n  QueryBuilderPopup.prototype.createQuery = function () {\n    return new tableQuery_1.TableQuery(this.designer().model().serialize(), this.getDataSource());\n  };\n\n  return QueryBuilderPopup;\n}(QueryBuilderPopupBase);\n\nexports.QueryBuilderPopup = QueryBuilderPopup;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/query-builder/wizard/internal/_queryBuilderPopup.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","QueryBuilderPopup","QueryBuilderPopupBase","ko","require","_arrayutils_1","tableQuery_1","serializer_1","_utils_1","localization_utils_1","utils_1","_super","applyNewQuery","rtl","customizeQBInitializationData","options","_this","_querySource","observable","_dbSchemaProvider","designer","qbOptions","okButtonDisabled","pureComputed","model","isValid","isVisible","showLoadIndicator","localizationIdMap","text","localizationId","_rtl","_applyQuery","queryBuilderModel","dbSchemaProvider","querySource","callbacks","customizeActions","customizeQueryBuilderActions","show","query","dataSource","_dataSource","ModelSerializer","serialize","updateSurface","cancelHandler","previewHandler","showPreview","okHandler","canSave","createQuery","done","onHiddingHandler","dataPreview","popupViewModel","element","$container","getParentContainer","visible","title","getDisplayText","showTitle","shading","fullScreen","width","height","container","wrapperAttr","class","position","of","onHidding","key","getLocalization","actions","del","findFirstItemMatchesCondition","action","undo","redo","splice","length","Disposable","getDataSource","TableQuery"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (query-builder\\wizard\\internal\\_queryBuilderPopup.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QueryBuilderPopup = exports.QueryBuilderPopupBase = void 0;\nvar ko = require(\"knockout\");\nvar _arrayutils_1 = require(\"../../../core/utils/_arrayutils\");\nvar tableQuery_1 = require(\"../../dataSource/sql/tableQuery\");\nvar serializer_1 = require(\"../../../serializer/serializer\");\nvar _utils_1 = require(\"../../../widgets/_utils\");\nvar localization_utils_1 = require(\"../../../property-grid/localization/localization_utils\");\nvar utils_1 = require(\"../../../serializer/utils\");\nvar QueryBuilderPopupBase = (function (_super) {\n    __extends(QueryBuilderPopupBase, _super);\n    function QueryBuilderPopupBase(applyNewQuery, rtl, customizeQBInitializationData) {\n        if (rtl === void 0) { rtl = false; }\n        if (customizeQBInitializationData === void 0) { customizeQBInitializationData = function (options) { return options; }; }\n        var _this = _super.call(this) || this;\n        _this.customizeQBInitializationData = customizeQBInitializationData;\n        _this._querySource = ko.observable(null);\n        _this._dbSchemaProvider = ko.observable(null);\n        _this.designer = ko.observable();\n        _this.qbOptions = ko.observable(null);\n        _this.okButtonDisabled = ko.pureComputed(function () { return _this.designer() && !_this.designer().model().isValid(); });\n        _this.isVisible = ko.observable(false);\n        _this.showLoadIndicator = ko.observable(false);\n        _this.localizationIdMap = {\n            'title': { text: 'Query Builder', localizationId: 'DataAccessUIStringId.QueryBuilder' },\n            'loading': { text: 'Loading...', localizationId: 'AnalyticsCoreStringId.Loading' },\n            'previewResults': { text: 'Preview Results...', localizationId: 'DataAccessUIStringId.QueryBuilderButtons_PreviewResults' },\n            'cancel': { text: 'Cancel', localizationId: 'AnalyticsCoreStringId.SearchDialog_Cancel' },\n            'ok': { text: 'OK', localizationId: 'DataAccessUIStringId.Button_OK' }\n        };\n        _this._rtl = rtl;\n        _this._applyQuery = applyNewQuery;\n        _this.qbOptions(_this.qbOptions() || _this.customizeQBInitializationData({\n            queryBuilderModel: _this.designer,\n            dbSchemaProvider: _this._dbSchemaProvider,\n            querySource: _this._querySource,\n            callbacks: { customizeActions: QueryBuilderPopup.customizeQueryBuilderActions },\n            rtl: _this._rtl\n        }));\n        return _this;\n    }\n    QueryBuilderPopupBase.prototype.show = function (query, dataSource) {\n        this._dataSource = dataSource;\n        this._dbSchemaProvider(dataSource.dbSchemaProvider);\n        this._querySource(new serializer_1.ModelSerializer().serialize(query));\n        this.isVisible(true);\n        this.designer().updateSurface();\n    };\n    QueryBuilderPopupBase.prototype.cancelHandler = function () {\n        this.isVisible(false);\n    };\n    QueryBuilderPopupBase.prototype.previewHandler = function () {\n        this.designer().showPreview();\n    };\n    QueryBuilderPopupBase.prototype.okHandler = function () {\n        var _this = this;\n        if (this.designer().model().canSave()) {\n            this._applyQuery(this.createQuery(), this.showLoadIndicator)\n                .done(function () {\n                _this.isVisible(false);\n            });\n        }\n    };\n    QueryBuilderPopupBase.prototype.onHiddingHandler = function () {\n        this.designer().dataPreview.isVisible(false);\n    };\n    QueryBuilderPopupBase.prototype.popupViewModel = function (element) {\n        var $container = _utils_1.getParentContainer(element);\n        return {\n            visible: this.isVisible,\n            title: this.getDisplayText('title'),\n            showTitle: true,\n            shading: true,\n            fullScreen: false,\n            width: '95%',\n            height: '95%',\n            container: $container,\n            wrapperAttr: { class: 'dxrd-querybuilder-popup' },\n            position: { of: $container },\n            onHidding: this.onHiddingHandler\n        };\n    };\n    QueryBuilderPopupBase.prototype.getDisplayText = function (key) {\n        return localization_utils_1.getLocalization(this.localizationIdMap[key].text, this.localizationIdMap[key].localizationId);\n    };\n    QueryBuilderPopupBase.customizeQueryBuilderActions = function (actions) {\n        var del = _arrayutils_1.findFirstItemMatchesCondition(actions, function (action) { return action.text === 'Delete'; }), undo = _arrayutils_1.findFirstItemMatchesCondition(actions, function (action) { return action.text === 'Undo'; }), redo = _arrayutils_1.findFirstItemMatchesCondition(actions, function (action) { return action.text === 'Redo'; });\n        actions.splice(0, actions.length, del, undo, redo);\n    };\n    return QueryBuilderPopupBase;\n}(utils_1.Disposable));\nexports.QueryBuilderPopupBase = QueryBuilderPopupBase;\nvar QueryBuilderPopup = (function (_super) {\n    __extends(QueryBuilderPopup, _super);\n    function QueryBuilderPopup(applyNewQuery, rtl, customizeQBInitializationData) {\n        if (rtl === void 0) { rtl = false; }\n        if (customizeQBInitializationData === void 0) { customizeQBInitializationData = function (options) { return options; }; }\n        var _this = _super.call(this, applyNewQuery, rtl, customizeQBInitializationData) || this;\n        _this.customizeQBInitializationData = customizeQBInitializationData;\n        return _this;\n    }\n    QueryBuilderPopup.prototype.getDataSource = function () {\n        return this._dataSource;\n    };\n    QueryBuilderPopup.prototype.createQuery = function () {\n        return new tableQuery_1.TableQuery(this.designer().model().serialize(), this.getDataSource());\n    };\n    return QueryBuilderPopup;\n}(QueryBuilderPopupBase));\nexports.QueryBuilderPopup = QueryBuilderPopup;\n"]},"metadata":{},"sourceType":"script"}