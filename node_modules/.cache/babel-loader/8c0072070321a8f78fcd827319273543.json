{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/map.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport eventsEngine from \"../events/core/events_engine\";\nimport { fromPromise } from \"../core/utils/deferred\";\nimport registerComponent from \"../core/component_registrator\";\nimport errors from \"./widget/ui.errors\";\nimport devices from \"../core/devices\";\nimport Widget from \"./widget/ui.widget\";\nimport { titleize } from \"../core/utils/inflector\";\nimport { each } from \"../core/utils/iterator\";\nimport { extend } from \"../core/utils/extend\";\nimport { wrapToArray } from \"../core/utils/array\";\nimport { isNumeric } from \"../core/utils/type\";\nimport { addNamespace } from \"../events/utils/index\";\nimport pointerEvents from \"../events/pointer\";\nimport googleStatic from \"./map/provider.google_static\";\nimport google from \"./map/provider.dynamic.google\";\nimport bing from \"./map/provider.dynamic.bing\";\nvar PROVIDERS = {\n  googleStatic: googleStatic,\n  google: google,\n  bing: bing\n};\nvar MAP_CLASS = \"dx-map\";\nvar MAP_CONTAINER_CLASS = \"dx-map-container\";\nvar MAP_SHIELD_CLASS = \"dx-map-shield\";\nvar Map = Widget.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      bounds: {\n        northEast: null,\n        southWest: null\n      },\n      center: {\n        lat: 0,\n        lng: 0\n      },\n      zoom: 1,\n      width: 300,\n      height: 300,\n      type: \"roadmap\",\n      provider: \"google\",\n      autoAdjust: true,\n      markers: [],\n      markerIconSrc: null,\n      onMarkerAdded: null,\n      onMarkerRemoved: null,\n      routes: [],\n      onRouteAdded: null,\n      onRouteRemoved: null,\n      apiKey: {\n        bing: \"\",\n        google: \"\",\n        googleStatic: \"\"\n      },\n      controls: false,\n      onReady: null,\n      onUpdated: null,\n      onClick: null\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _init: function () {\n    this.callBase();\n    this.$element().addClass(MAP_CLASS);\n    this._lastAsyncAction = Promise.resolve();\n\n    this._checkOption(\"provider\");\n\n    this._checkOption(\"markers\");\n\n    this._checkOption(\"routes\");\n\n    this._initContainer();\n\n    this._grabEvents();\n\n    this._rendered = {};\n  },\n  _useTemplates: function () {\n    return false;\n  },\n  _checkOption: function (option) {\n    var value = this.option(option);\n\n    if (\"markers\" === option && !Array.isArray(value)) {\n      throw errors.Error(\"E1022\");\n    }\n\n    if (\"routes\" === option && !Array.isArray(value)) {\n      throw errors.Error(\"E1023\");\n    }\n  },\n  _initContainer: function () {\n    this._$container = $(\"<div>\").addClass(MAP_CONTAINER_CLASS);\n    this.$element().append(this._$container);\n  },\n  _grabEvents: function () {\n    var eventName = addNamespace(pointerEvents.down, this.NAME);\n    eventsEngine.on(this.$element(), eventName, this._cancelEvent.bind(this));\n  },\n  _cancelEvent: function (e) {\n    var cancelByProvider = this._provider && this._provider.isEventsCanceled(e) && !this.option(\"disabled\");\n\n    if (cancelByProvider) {\n      e.stopPropagation();\n    }\n  },\n  _saveRendered: function (option) {\n    var value = this.option(option);\n    this._rendered[option] = value.slice();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderShield();\n\n    this._saveRendered(\"markers\");\n\n    this._saveRendered(\"routes\");\n\n    this._provider = new PROVIDERS[this.option(\"provider\")](this, this._$container);\n\n    this._queueAsyncAction(\"render\", this._rendered.markers, this._rendered.routes);\n  },\n  _renderShield: function () {\n    var $shield;\n\n    if (this.option(\"disabled\")) {\n      $shield = $(\"<div>\").addClass(MAP_SHIELD_CLASS);\n      this.$element().append($shield);\n    } else {\n      $shield = this.$element().find(\".\" + MAP_SHIELD_CLASS);\n      $shield.remove();\n    }\n  },\n  _clean: function () {\n    this._cleanFocusState();\n\n    if (this._provider) {\n      this._provider.clean();\n    }\n\n    this._provider = null;\n    this._lastAsyncAction = Promise.resolve();\n    this.setOptionSilent(\"bounds\", {\n      northEast: null,\n      southWest: null\n    });\n    delete this._suppressAsyncAction;\n  },\n  _optionChanged: function (args) {\n    var name = args.name;\n    var changeBag = this._optionChangeBag;\n    this._optionChangeBag = null;\n\n    switch (name) {\n      case \"disabled\":\n        this._renderShield();\n\n        this.callBase(args);\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"provider\":\n        this._suppressAsyncAction = true;\n\n        this._invalidate();\n\n        break;\n\n      case \"apiKey\":\n        errors.log(\"W1001\");\n        break;\n\n      case \"bounds\":\n        this._queueAsyncAction(\"updateBounds\");\n\n        break;\n\n      case \"center\":\n        this._queueAsyncAction(\"updateCenter\");\n\n        break;\n\n      case \"zoom\":\n        this._queueAsyncAction(\"updateZoom\");\n\n        break;\n\n      case \"type\":\n        this._queueAsyncAction(\"updateMapType\");\n\n        break;\n\n      case \"controls\":\n        this._queueAsyncAction(\"updateControls\", this._rendered.markers, this._rendered.routes);\n\n        break;\n\n      case \"autoAdjust\":\n        this._queueAsyncAction(\"adjustViewport\");\n\n        break;\n\n      case \"markers\":\n      case \"routes\":\n        this._checkOption(name);\n\n        var prevValue = this._rendered[name];\n\n        this._saveRendered(name);\n\n        this._queueAsyncAction(\"update\" + titleize(name), changeBag ? changeBag.removed : prevValue, changeBag ? changeBag.added : this._rendered[name]).then(function (result) {\n          if (changeBag) {\n            changeBag.resolve(result);\n          }\n        });\n\n        break;\n\n      case \"markerIconSrc\":\n        this._queueAsyncAction(\"updateMarkers\", this._rendered.markers, this._rendered.markers);\n\n        break;\n\n      case \"onReady\":\n      case \"onUpdated\":\n      case \"onMarkerAdded\":\n      case \"onMarkerRemoved\":\n      case \"onRouteAdded\":\n      case \"onRouteRemoved\":\n      case \"onClick\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      this._dimensionChanged();\n    }\n  },\n  _dimensionChanged: function () {\n    this._queueAsyncAction(\"updateDimensions\");\n  },\n  _queueAsyncAction: function (name) {\n    var options = [].slice.call(arguments).slice(1);\n    var isActionSuppressed = this._suppressAsyncAction;\n    this._lastAsyncAction = this._lastAsyncAction.then(function () {\n      if (!this._provider || isActionSuppressed) {\n        return Promise.resolve();\n      }\n\n      return this._provider[name].apply(this._provider, options).then(function (result) {\n        result = wrapToArray(result);\n        var mapRefreshed = result[0];\n\n        if (mapRefreshed && !this._disposed) {\n          this._triggerReadyAction();\n        }\n\n        return result[1];\n      }.bind(this));\n    }.bind(this));\n    return this._lastAsyncAction;\n  },\n  _triggerReadyAction: function () {\n    this._createActionByOption(\"onReady\")({\n      originalMap: this._provider.map()\n    });\n  },\n  _triggerUpdateAction: function () {\n    this._createActionByOption(\"onUpdated\")();\n  },\n  setOptionSilent: function (name, value) {\n    this._setOptionWithoutOptionChange(name, value);\n  },\n  addMarker: function (marker) {\n    return this._addFunction(\"markers\", marker);\n  },\n  removeMarker: function (marker) {\n    return this._removeFunction(\"markers\", marker);\n  },\n  addRoute: function (route) {\n    return this._addFunction(\"routes\", route);\n  },\n  removeRoute: function (route) {\n    return this._removeFunction(\"routes\", route);\n  },\n  _addFunction: function (optionName, addingValue) {\n    var optionValue = this.option(optionName);\n    var addingValues = wrapToArray(addingValue);\n    optionValue.push.apply(optionValue, addingValues);\n    return this._partialArrayOptionChange(optionName, optionValue, addingValues, []);\n  },\n  _removeFunction: function (optionName, removingValue) {\n    var optionValue = this.option(optionName);\n    var removingValues = wrapToArray(removingValue);\n    each(removingValues, function (removingIndex, removingValue) {\n      var index = isNumeric(removingValue) ? removingValue : null === optionValue || void 0 === optionValue ? void 0 : optionValue.indexOf(removingValue);\n\n      if (-1 !== index) {\n        var removing = optionValue.splice(index, 1)[0];\n        removingValues.splice(removingIndex, 1, removing);\n      } else {\n        throw errors.log(\"E1021\", titleize(optionName.substring(0, optionName.length - 1)), removingValue);\n      }\n    });\n    return this._partialArrayOptionChange(optionName, optionValue, [], removingValues);\n  },\n  _partialArrayOptionChange: function (optionName, optionValue, addingValues, removingValues) {\n    return fromPromise(new Promise(function (resolve) {\n      this._optionChangeBag = {\n        resolve: resolve,\n        added: addingValues,\n        removed: removingValues\n      };\n      this.option(optionName, optionValue);\n    }.bind(this)).then(function (result) {\n      return result && 1 === result.length ? result[0] : result;\n    }), this);\n  }\n});\nregisterComponent(\"dxMap\", Map);\nexport default Map;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/map.js"],"names":["$","eventsEngine","fromPromise","registerComponent","errors","devices","Widget","titleize","each","extend","wrapToArray","isNumeric","addNamespace","pointerEvents","googleStatic","google","bing","PROVIDERS","MAP_CLASS","MAP_CONTAINER_CLASS","MAP_SHIELD_CLASS","Map","inherit","_getDefaultOptions","callBase","bounds","northEast","southWest","center","lat","lng","zoom","width","height","type","provider","autoAdjust","markers","markerIconSrc","onMarkerAdded","onMarkerRemoved","routes","onRouteAdded","onRouteRemoved","apiKey","controls","onReady","onUpdated","onClick","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_init","$element","addClass","_lastAsyncAction","Promise","resolve","_checkOption","_initContainer","_grabEvents","_rendered","_useTemplates","option","value","Array","isArray","Error","_$container","append","eventName","down","NAME","on","_cancelEvent","bind","e","cancelByProvider","_provider","isEventsCanceled","stopPropagation","_saveRendered","slice","_render","_renderShield","_queueAsyncAction","$shield","find","remove","_clean","_cleanFocusState","clean","setOptionSilent","_suppressAsyncAction","_optionChanged","args","name","changeBag","_optionChangeBag","_dimensionChanged","_invalidate","log","prevValue","removed","added","then","result","apply","arguments","_visibilityChanged","visible","call","isActionSuppressed","mapRefreshed","_disposed","_triggerReadyAction","_createActionByOption","originalMap","map","_triggerUpdateAction","_setOptionWithoutOptionChange","addMarker","marker","_addFunction","removeMarker","_removeFunction","addRoute","route","removeRoute","optionName","addingValue","optionValue","addingValues","push","_partialArrayOptionChange","removingValue","removingValues","removingIndex","index","indexOf","removing","splice","substring","length"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/map.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport {\r\n    fromPromise\r\n} from \"../core/utils/deferred\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport errors from \"./widget/ui.errors\";\r\nimport devices from \"../core/devices\";\r\nimport Widget from \"./widget/ui.widget\";\r\nimport {\r\n    titleize\r\n} from \"../core/utils/inflector\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    wrapToArray\r\n} from \"../core/utils/array\";\r\nimport {\r\n    isNumeric\r\n} from \"../core/utils/type\";\r\nimport {\r\n    addNamespace\r\n} from \"../events/utils/index\";\r\nimport pointerEvents from \"../events/pointer\";\r\nimport googleStatic from \"./map/provider.google_static\";\r\nimport google from \"./map/provider.dynamic.google\";\r\nimport bing from \"./map/provider.dynamic.bing\";\r\nvar PROVIDERS = {\r\n    googleStatic: googleStatic,\r\n    google: google,\r\n    bing: bing\r\n};\r\nvar MAP_CLASS = \"dx-map\";\r\nvar MAP_CONTAINER_CLASS = \"dx-map-container\";\r\nvar MAP_SHIELD_CLASS = \"dx-map-shield\";\r\nvar Map = Widget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            bounds: {\r\n                northEast: null,\r\n                southWest: null\r\n            },\r\n            center: {\r\n                lat: 0,\r\n                lng: 0\r\n            },\r\n            zoom: 1,\r\n            width: 300,\r\n            height: 300,\r\n            type: \"roadmap\",\r\n            provider: \"google\",\r\n            autoAdjust: true,\r\n            markers: [],\r\n            markerIconSrc: null,\r\n            onMarkerAdded: null,\r\n            onMarkerRemoved: null,\r\n            routes: [],\r\n            onRouteAdded: null,\r\n            onRouteRemoved: null,\r\n            apiKey: {\r\n                bing: \"\",\r\n                google: \"\",\r\n                googleStatic: \"\"\r\n            },\r\n            controls: false,\r\n            onReady: null,\r\n            onUpdated: null,\r\n            onClick: null\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(MAP_CLASS);\r\n        this._lastAsyncAction = Promise.resolve();\r\n        this._checkOption(\"provider\");\r\n        this._checkOption(\"markers\");\r\n        this._checkOption(\"routes\");\r\n        this._initContainer();\r\n        this._grabEvents();\r\n        this._rendered = {}\r\n    },\r\n    _useTemplates: function() {\r\n        return false\r\n    },\r\n    _checkOption: function(option) {\r\n        var value = this.option(option);\r\n        if (\"markers\" === option && !Array.isArray(value)) {\r\n            throw errors.Error(\"E1022\")\r\n        }\r\n        if (\"routes\" === option && !Array.isArray(value)) {\r\n            throw errors.Error(\"E1023\")\r\n        }\r\n    },\r\n    _initContainer: function() {\r\n        this._$container = $(\"<div>\").addClass(MAP_CONTAINER_CLASS);\r\n        this.$element().append(this._$container)\r\n    },\r\n    _grabEvents: function() {\r\n        var eventName = addNamespace(pointerEvents.down, this.NAME);\r\n        eventsEngine.on(this.$element(), eventName, this._cancelEvent.bind(this))\r\n    },\r\n    _cancelEvent: function(e) {\r\n        var cancelByProvider = this._provider && this._provider.isEventsCanceled(e) && !this.option(\"disabled\");\r\n        if (cancelByProvider) {\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _saveRendered: function(option) {\r\n        var value = this.option(option);\r\n        this._rendered[option] = value.slice()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderShield();\r\n        this._saveRendered(\"markers\");\r\n        this._saveRendered(\"routes\");\r\n        this._provider = new(PROVIDERS[this.option(\"provider\")])(this, this._$container);\r\n        this._queueAsyncAction(\"render\", this._rendered.markers, this._rendered.routes)\r\n    },\r\n    _renderShield: function() {\r\n        var $shield;\r\n        if (this.option(\"disabled\")) {\r\n            $shield = $(\"<div>\").addClass(MAP_SHIELD_CLASS);\r\n            this.$element().append($shield)\r\n        } else {\r\n            $shield = this.$element().find(\".\" + MAP_SHIELD_CLASS);\r\n            $shield.remove()\r\n        }\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        if (this._provider) {\r\n            this._provider.clean()\r\n        }\r\n        this._provider = null;\r\n        this._lastAsyncAction = Promise.resolve();\r\n        this.setOptionSilent(\"bounds\", {\r\n            northEast: null,\r\n            southWest: null\r\n        });\r\n        delete this._suppressAsyncAction\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        var changeBag = this._optionChangeBag;\r\n        this._optionChangeBag = null;\r\n        switch (name) {\r\n            case \"disabled\":\r\n                this._renderShield();\r\n                this.callBase(args);\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"provider\":\r\n                this._suppressAsyncAction = true;\r\n                this._invalidate();\r\n                break;\r\n            case \"apiKey\":\r\n                errors.log(\"W1001\");\r\n                break;\r\n            case \"bounds\":\r\n                this._queueAsyncAction(\"updateBounds\");\r\n                break;\r\n            case \"center\":\r\n                this._queueAsyncAction(\"updateCenter\");\r\n                break;\r\n            case \"zoom\":\r\n                this._queueAsyncAction(\"updateZoom\");\r\n                break;\r\n            case \"type\":\r\n                this._queueAsyncAction(\"updateMapType\");\r\n                break;\r\n            case \"controls\":\r\n                this._queueAsyncAction(\"updateControls\", this._rendered.markers, this._rendered.routes);\r\n                break;\r\n            case \"autoAdjust\":\r\n                this._queueAsyncAction(\"adjustViewport\");\r\n                break;\r\n            case \"markers\":\r\n            case \"routes\":\r\n                this._checkOption(name);\r\n                var prevValue = this._rendered[name];\r\n                this._saveRendered(name);\r\n                this._queueAsyncAction(\"update\" + titleize(name), changeBag ? changeBag.removed : prevValue, changeBag ? changeBag.added : this._rendered[name]).then((function(result) {\r\n                    if (changeBag) {\r\n                        changeBag.resolve(result)\r\n                    }\r\n                }));\r\n                break;\r\n            case \"markerIconSrc\":\r\n                this._queueAsyncAction(\"updateMarkers\", this._rendered.markers, this._rendered.markers);\r\n                break;\r\n            case \"onReady\":\r\n            case \"onUpdated\":\r\n            case \"onMarkerAdded\":\r\n            case \"onMarkerRemoved\":\r\n            case \"onRouteAdded\":\r\n            case \"onRouteRemoved\":\r\n            case \"onClick\":\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._dimensionChanged()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._queueAsyncAction(\"updateDimensions\")\r\n    },\r\n    _queueAsyncAction: function(name) {\r\n        var options = [].slice.call(arguments).slice(1);\r\n        var isActionSuppressed = this._suppressAsyncAction;\r\n        this._lastAsyncAction = this._lastAsyncAction.then(function() {\r\n            if (!this._provider || isActionSuppressed) {\r\n                return Promise.resolve()\r\n            }\r\n            return this._provider[name].apply(this._provider, options).then(function(result) {\r\n                result = wrapToArray(result);\r\n                var mapRefreshed = result[0];\r\n                if (mapRefreshed && !this._disposed) {\r\n                    this._triggerReadyAction()\r\n                }\r\n                return result[1]\r\n            }.bind(this))\r\n        }.bind(this));\r\n        return this._lastAsyncAction\r\n    },\r\n    _triggerReadyAction: function() {\r\n        this._createActionByOption(\"onReady\")({\r\n            originalMap: this._provider.map()\r\n        })\r\n    },\r\n    _triggerUpdateAction: function() {\r\n        this._createActionByOption(\"onUpdated\")()\r\n    },\r\n    setOptionSilent: function(name, value) {\r\n        this._setOptionWithoutOptionChange(name, value)\r\n    },\r\n    addMarker: function(marker) {\r\n        return this._addFunction(\"markers\", marker)\r\n    },\r\n    removeMarker: function(marker) {\r\n        return this._removeFunction(\"markers\", marker)\r\n    },\r\n    addRoute: function(route) {\r\n        return this._addFunction(\"routes\", route)\r\n    },\r\n    removeRoute: function(route) {\r\n        return this._removeFunction(\"routes\", route)\r\n    },\r\n    _addFunction: function(optionName, addingValue) {\r\n        var optionValue = this.option(optionName);\r\n        var addingValues = wrapToArray(addingValue);\r\n        optionValue.push.apply(optionValue, addingValues);\r\n        return this._partialArrayOptionChange(optionName, optionValue, addingValues, [])\r\n    },\r\n    _removeFunction: function(optionName, removingValue) {\r\n        var optionValue = this.option(optionName);\r\n        var removingValues = wrapToArray(removingValue);\r\n        each(removingValues, (function(removingIndex, removingValue) {\r\n            var index = isNumeric(removingValue) ? removingValue : null === optionValue || void 0 === optionValue ? void 0 : optionValue.indexOf(removingValue);\r\n            if (-1 !== index) {\r\n                var removing = optionValue.splice(index, 1)[0];\r\n                removingValues.splice(removingIndex, 1, removing)\r\n            } else {\r\n                throw errors.log(\"E1021\", titleize(optionName.substring(0, optionName.length - 1)), removingValue)\r\n            }\r\n        }));\r\n        return this._partialArrayOptionChange(optionName, optionValue, [], removingValues)\r\n    },\r\n    _partialArrayOptionChange: function(optionName, optionValue, addingValues, removingValues) {\r\n        return fromPromise(new Promise(function(resolve) {\r\n            this._optionChangeBag = {\r\n                resolve: resolve,\r\n                added: addingValues,\r\n                removed: removingValues\r\n            };\r\n            this.option(optionName, optionValue)\r\n        }.bind(this)).then((function(result) {\r\n            return result && 1 === result.length ? result[0] : result\r\n        })), this)\r\n    }\r\n});\r\nregisterComponent(\"dxMap\", Map);\r\nexport default Map;\r\n"]},"metadata":{},"sourceType":"module"}