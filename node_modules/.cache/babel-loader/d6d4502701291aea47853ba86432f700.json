{"ast":null,"code":"/**\n* DevExpress Analytics (widgets\\filtereditor\\helpers\\_serializer.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterEditorSerializer = void 0;\n\nvar $ = require(\"jquery\");\n\nvar group_1 = require(\"../../criteria/operators/group\");\n\nvar aggregate_1 = require(\"../../criteria/operators/aggregate\");\n\nvar property_1 = require(\"../../criteria/operators/property\");\n\nvar _codeCompletor_1 = require(\"../../common/_codeCompletor\");\n\nvar value_1 = require(\"../../criteria/operators/value\");\n\nvar _internal_1 = require(\"../../../property-grid/widgets/internal/_internal\");\n\nvar utils_1 = require(\"../../../serializer/utils\");\n\nvar parameter_1 = require(\"../../criteria/operators/parameter\");\n\nvar between_1 = require(\"../../criteria/operators/between\");\n\nvar in_1 = require(\"../../criteria/operators/in\");\n\nvar binary_1 = require(\"../../criteria/operators/binary\");\n\nvar unary_1 = require(\"../../criteria/operators/unary\");\n\nvar function_1 = require(\"../../criteria/operators/function\");\n\nvar operatorTokens_1 = require(\"../../criteria/utils/operatorTokens\");\n\nvar constant_1 = require(\"../../criteria/operators/constant\");\n\nvar criteriaOperatorStateMachine_1 = require(\"../../criteria/utils/criteriaOperatorStateMachine\");\n\nvar binary_2 = require(\"../../criteria/operators/options/binary\");\n\nvar unary_2 = require(\"../../criteria/operators/options/unary\");\n\nvar group_2 = require(\"../../criteria/operators/options/group\");\n\nvar FilterEditorSerializer = function () {\n  function FilterEditorSerializer(operatorTokens, custom) {\n    if (operatorTokens === void 0) {\n      operatorTokens = operatorTokens_1.operatorTokens;\n    }\n\n    this.operatorTokens = operatorTokens;\n    this.custom = custom;\n  }\n\n  FilterEditorSerializer.prototype.serializeGroupOperand = function (groupOperator, reverse) {\n    var _this = this;\n\n    var result = groupOperator.operands.map(function (operand) {\n      if (operand instanceof group_1.GroupOperator) {\n        return '(' + _this.serialize(operand) + ')';\n      } else {\n        return _this.serialize(operand);\n      }\n    }).filter(function (serialize) {\n      return serialize !== '' && serialize !== '()';\n    }).join(' ' + (this.operatorTokens[groupOperator.displayType] || groupOperator.displayType) + ' ');\n    return reverse && result ? 'Not(' + result + ')' : result;\n  };\n\n  FilterEditorSerializer.prototype.serializeAggregateOperand = function (aggregateOperand, reverse) {\n    var operatorTypeSuffix = aggregateOperand.operatorType === 'Exists' ? '' : '.' + aggregateOperand.operatorType;\n    var condition = aggregateOperand.condition ? this.serialize(aggregateOperand.condition) : '';\n    var propertyResult = this.serialize(aggregateOperand.property);\n    var conditionResult = '[' + condition + ']';\n    var aggregateSuffix = aggregateOperand.operatorType !== 'Exists' ? '(' + (aggregateOperand.aggregatedExpression && this.serialize(aggregateOperand.aggregatedExpression) || '') + ')' : '';\n    var result = propertyResult;\n\n    if (!condition && !aggregateSuffix || condition) {\n      result += conditionResult;\n    }\n\n    return result + operatorTypeSuffix + aggregateSuffix;\n  };\n\n  FilterEditorSerializer.prototype.serializeOperandProperty = function (operandProperty) {\n    if (!operandProperty.propertyName) {\n      return operandProperty.circumflex ? '^' : '[]';\n    }\n\n    var value = operandProperty.displayType;\n\n    if (value.length - _codeCompletor_1.trimBrackets(value).length === 2) {\n      value = '[' + _codeCompletor_1.trimBrackets(value).replace(/\\\\/g, '\\\\').replace(/\\]/g, '\\\\]') + ']';\n    }\n\n    return operandProperty.circumflex ? '^.' + value : value;\n  };\n\n  FilterEditorSerializer.prototype.serializeOperandValue = function (operandValue) {\n    var result = operandValue.value;\n\n    if (result !== null && result !== undefined && ($.isNumeric(result) || String(result).toLowerCase() === 'true' || String(result).toLowerCase() === 'false')) {\n      if (operandValue.specifics === 'string') return \"'\" + result + \"'\";\n      if (operandValue.specifics === 'guid' && _internal_1.validateGuid(result)) return '{' + result + '}';\n      return result;\n    } else if (result && operandValue.value instanceof Date) {\n      return '#' + utils_1.serializeDate(result) + '#';\n    } else if (operandValue.specifics === 'integer' || operandValue.specifics === 'integer') {\n      return result || '?';\n    } else if (operandValue.specifics === 'guid' && _internal_1.validateGuid(result)) {\n      return '{' + result + '}';\n    }\n\n    if (result.indexOf(\"'\") !== -1) {\n      result = result.replace(\"'\", \"''\");\n    }\n\n    return result ? \"'\" + result + \"'\" : '?';\n  };\n\n  FilterEditorSerializer.prototype.serializeOperandParameter = function (operandParameter) {\n    return operandParameter.displayType;\n  };\n\n  FilterEditorSerializer.prototype.serializeBetweenOperator = function (betweenOperator, reverse) {\n    var result = this.serialize(betweenOperator.property) + ' ' + betweenOperator.displayType + '(' + this.serialize(betweenOperator.begin) + ', ' + this.serialize(betweenOperator.end) + ')';\n    return reverse ? 'Not ' + result : result;\n  };\n\n  FilterEditorSerializer.prototype.serializeInOperator = function (inOperator, reverse) {\n    var _this = this;\n\n    var result = this.serialize(inOperator.criteriaOperator) + ' ' + inOperator.displayType + '(' + inOperator.operands.map(function (operand) {\n      return _this.serialize(operand);\n    }).join(', ') + ')';\n    return reverse ? 'Not ' + result : result;\n  };\n\n  FilterEditorSerializer.prototype.serializeBinaryOperator = function (binaryOperator, reverse) {\n    if (binaryOperator.operatorType === binary_2.BinaryOperatorType.Like) {\n      var separator = reverse ? ' Not ' : ' ';\n      return this.serialize(binaryOperator.leftOperand) + separator + (this.operatorTokens[binaryOperator.displayType] || binaryOperator.displayType) + ' ' + this.serialize(binaryOperator.rightOperand);\n    }\n\n    return (reverse ? 'Not ' : '') + this.serialize(binaryOperator.leftOperand) + ' ' + (this.operatorTokens[binaryOperator.displayType] || binaryOperator.displayType) + ' ' + this.serialize(binaryOperator.rightOperand);\n  };\n\n  FilterEditorSerializer.prototype.serializeUnaryOperator = function (unaryOperator, reverse) {\n    if (unaryOperator.operatorType === unary_2.UnaryOperatorType.IsNull) {\n      var separator = reverse ? ' Not ' : ' ';\n      return this.serialize(unaryOperator.operand) + ' Is' + separator + 'Null';\n    } else if (unaryOperator.operatorType === unary_2.UnaryOperatorType.Not) {\n      return this.serialize(unaryOperator.operand, true);\n    }\n\n    var result = (this.operatorTokens[unaryOperator.displayType] || unaryOperator.displayType) + this.serialize(unaryOperator.operand);\n    return reverse ? 'Not ' + result : result;\n  };\n\n  FilterEditorSerializer.prototype.serializeFunctionOperator = function (functionOperator, reverse) {\n    var _this = this;\n\n    var result = (this.operatorTokens[functionOperator.displayType] || functionOperator.displayType) + '(' + functionOperator.operands.map(function (operand) {\n      return _this.serialize(operand);\n    }).join(', ') + ')';\n    return reverse ? 'Not ' + result : result;\n  };\n\n  FilterEditorSerializer.prototype.serialize = function (criteriaOperator, reverse) {\n    if (reverse === void 0) {\n      reverse = false;\n    }\n\n    if (criteriaOperator instanceof aggregate_1.AggregateOperand) {\n      return this.serializeAggregateOperand(criteriaOperator, reverse);\n    }\n\n    if (criteriaOperator instanceof between_1.BetweenOperator) {\n      return this.serializeBetweenOperator(criteriaOperator, reverse);\n    }\n\n    if (criteriaOperator instanceof binary_1.BinaryOperator) {\n      return this.serializeBinaryOperator(criteriaOperator, reverse);\n    }\n\n    if (criteriaOperator instanceof constant_1.ConstantValue) {\n      return this.serializeOperandValue(criteriaOperator);\n    }\n\n    if (criteriaOperator instanceof function_1.FunctionOperator) {\n      return this.serializeFunctionOperator(criteriaOperator, reverse);\n    }\n\n    if (criteriaOperator instanceof group_1.GroupOperator) {\n      return this.serializeGroupOperand(criteriaOperator, reverse);\n    }\n\n    if (criteriaOperator instanceof in_1.InOperator) {\n      return this.serializeInOperator(criteriaOperator, reverse);\n    }\n\n    if (criteriaOperator instanceof parameter_1.OperandParameter) {\n      return this.serializeOperandParameter(criteriaOperator);\n    }\n\n    if (criteriaOperator instanceof property_1.OperandProperty) {\n      return this.serializeOperandProperty(criteriaOperator);\n    }\n\n    if (criteriaOperator instanceof value_1.OperandValue) {\n      return this.serializeOperandValue(criteriaOperator);\n    }\n\n    if (criteriaOperator instanceof unary_1.UnaryOperator) {\n      return this.serializeUnaryOperator(criteriaOperator, reverse);\n    }\n\n    if (this.custom) {\n      return this.custom(criteriaOperator, reverse);\n    }\n\n    throw Error('Undefined type criteria operator');\n  };\n\n  FilterEditorSerializer.prototype.deserialize = function (stringCriteria) {\n    return this.deserializeOperand(criteriaOperatorStateMachine_1.CriteriaOperatorStateMachine.parse(stringCriteria));\n  };\n\n  FilterEditorSerializer.prototype.deserializeOperand = function (operand) {\n    if (operand instanceof group_1.GroupOperator) {\n      return operand;\n    } else if (operand instanceof unary_1.UnaryOperator && operand.operatorType === unary_2.UnaryOperatorType.Not) {\n      var child = operand['operand'];\n\n      if (child instanceof group_1.GroupOperator || child instanceof function_1.FunctionOperator) {\n        return operand;\n      } else if (child instanceof unary_1.UnaryOperator && operand.operatorType === unary_2.UnaryOperatorType.Not && !(child.operand instanceof property_1.OperandProperty)) {\n        return this.deserializeOperand(child.operand);\n      }\n\n      return new unary_1.UnaryOperator(unary_2.UnaryOperatorType.Not, new group_1.GroupOperator(group_2.GroupOperatorType.And, child ? [child] : []));\n    }\n\n    return new group_1.GroupOperator(group_2.GroupOperatorType.And, operand ? [operand] : []);\n  };\n\n  return FilterEditorSerializer;\n}();\n\nexports.FilterEditorSerializer = FilterEditorSerializer;","map":{"version":3,"sources":["/Users/kevinrabari/Desktop/Georgian College Work/1005_ Mobile Web Application/Assignment3/node_modules/@devexpress/analytics-core/widgets/filtereditor/helpers/_serializer.js"],"names":["Object","defineProperty","exports","value","FilterEditorSerializer","$","require","group_1","aggregate_1","property_1","_codeCompletor_1","value_1","_internal_1","utils_1","parameter_1","between_1","in_1","binary_1","unary_1","function_1","operatorTokens_1","constant_1","criteriaOperatorStateMachine_1","binary_2","unary_2","group_2","operatorTokens","custom","prototype","serializeGroupOperand","groupOperator","reverse","_this","result","operands","map","operand","GroupOperator","serialize","filter","join","displayType","serializeAggregateOperand","aggregateOperand","operatorTypeSuffix","operatorType","condition","propertyResult","property","conditionResult","aggregateSuffix","aggregatedExpression","serializeOperandProperty","operandProperty","propertyName","circumflex","length","trimBrackets","replace","serializeOperandValue","operandValue","undefined","isNumeric","String","toLowerCase","specifics","validateGuid","Date","serializeDate","indexOf","serializeOperandParameter","operandParameter","serializeBetweenOperator","betweenOperator","begin","end","serializeInOperator","inOperator","criteriaOperator","serializeBinaryOperator","binaryOperator","BinaryOperatorType","Like","separator","leftOperand","rightOperand","serializeUnaryOperator","unaryOperator","UnaryOperatorType","IsNull","Not","serializeFunctionOperator","functionOperator","AggregateOperand","BetweenOperator","BinaryOperator","ConstantValue","FunctionOperator","InOperator","OperandParameter","OperandProperty","OperandValue","UnaryOperator","Error","deserialize","stringCriteria","deserializeOperand","CriteriaOperatorStateMachine","parse","child","GroupOperatorType","And"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (widgets\\filtereditor\\helpers\\_serializer.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FilterEditorSerializer = void 0;\nvar $ = require(\"jquery\");\nvar group_1 = require(\"../../criteria/operators/group\");\nvar aggregate_1 = require(\"../../criteria/operators/aggregate\");\nvar property_1 = require(\"../../criteria/operators/property\");\nvar _codeCompletor_1 = require(\"../../common/_codeCompletor\");\nvar value_1 = require(\"../../criteria/operators/value\");\nvar _internal_1 = require(\"../../../property-grid/widgets/internal/_internal\");\nvar utils_1 = require(\"../../../serializer/utils\");\nvar parameter_1 = require(\"../../criteria/operators/parameter\");\nvar between_1 = require(\"../../criteria/operators/between\");\nvar in_1 = require(\"../../criteria/operators/in\");\nvar binary_1 = require(\"../../criteria/operators/binary\");\nvar unary_1 = require(\"../../criteria/operators/unary\");\nvar function_1 = require(\"../../criteria/operators/function\");\nvar operatorTokens_1 = require(\"../../criteria/utils/operatorTokens\");\nvar constant_1 = require(\"../../criteria/operators/constant\");\nvar criteriaOperatorStateMachine_1 = require(\"../../criteria/utils/criteriaOperatorStateMachine\");\nvar binary_2 = require(\"../../criteria/operators/options/binary\");\nvar unary_2 = require(\"../../criteria/operators/options/unary\");\nvar group_2 = require(\"../../criteria/operators/options/group\");\nvar FilterEditorSerializer = (function () {\n    function FilterEditorSerializer(operatorTokens, custom) {\n        if (operatorTokens === void 0) { operatorTokens = operatorTokens_1.operatorTokens; }\n        this.operatorTokens = operatorTokens;\n        this.custom = custom;\n    }\n    FilterEditorSerializer.prototype.serializeGroupOperand = function (groupOperator, reverse) {\n        var _this = this;\n        var result = groupOperator.operands.map(function (operand) {\n            if (operand instanceof group_1.GroupOperator) {\n                return '(' + _this.serialize(operand) + ')';\n            }\n            else {\n                return _this.serialize(operand);\n            }\n        }).filter(function (serialize) { return serialize !== '' && serialize !== '()'; }).join(' ' + (this.operatorTokens[groupOperator.displayType] || groupOperator.displayType) + ' ');\n        return reverse && result ? 'Not(' + result + ')' : result;\n    };\n    FilterEditorSerializer.prototype.serializeAggregateOperand = function (aggregateOperand, reverse) {\n        var operatorTypeSuffix = aggregateOperand.operatorType === 'Exists' ? '' : '.' + aggregateOperand.operatorType;\n        var condition = aggregateOperand.condition ? this.serialize(aggregateOperand.condition) : '';\n        var propertyResult = this.serialize(aggregateOperand.property);\n        var conditionResult = '[' + condition + ']';\n        var aggregateSuffix = aggregateOperand.operatorType !== 'Exists' ?\n            '(' + (aggregateOperand.aggregatedExpression && this.serialize(aggregateOperand.aggregatedExpression) || '') + ')' : '';\n        var result = propertyResult;\n        if (!condition && !aggregateSuffix || condition) {\n            result += conditionResult;\n        }\n        return result + operatorTypeSuffix + aggregateSuffix;\n    };\n    FilterEditorSerializer.prototype.serializeOperandProperty = function (operandProperty) {\n        if (!operandProperty.propertyName) {\n            return operandProperty.circumflex ? '^' : '[]';\n        }\n        var value = operandProperty.displayType;\n        if (value.length - _codeCompletor_1.trimBrackets(value).length === 2) {\n            value = '[' + _codeCompletor_1.trimBrackets(value).replace(/\\\\/g, '\\\\').replace(/\\]/g, '\\\\]') + ']';\n        }\n        return operandProperty.circumflex ? '^.' + value : value;\n    };\n    FilterEditorSerializer.prototype.serializeOperandValue = function (operandValue) {\n        var result = operandValue.value;\n        if (result !== null && result !== undefined && ($.isNumeric(result) || String(result).toLowerCase() === 'true' || String(result).toLowerCase() === 'false')) {\n            if (operandValue.specifics === 'string')\n                return \"'\" + result + \"'\";\n            if (operandValue.specifics === 'guid' && _internal_1.validateGuid(result))\n                return '{' + result + '}';\n            return result;\n        }\n        else if (result && operandValue.value instanceof Date) {\n            return '#' + utils_1.serializeDate(result) + '#';\n        }\n        else if (operandValue.specifics === 'integer' || operandValue.specifics === 'integer') {\n            return result || '?';\n        }\n        else if (operandValue.specifics === 'guid' && _internal_1.validateGuid(result)) {\n            return '{' + result + '}';\n        }\n        if (result.indexOf(\"'\") !== -1) {\n            result = result.replace(\"'\", \"''\");\n        }\n        return result ? \"'\" + result + \"'\" : '?';\n    };\n    FilterEditorSerializer.prototype.serializeOperandParameter = function (operandParameter) {\n        return operandParameter.displayType;\n    };\n    FilterEditorSerializer.prototype.serializeBetweenOperator = function (betweenOperator, reverse) {\n        var result = this.serialize(betweenOperator.property) + ' ' + betweenOperator.displayType +\n            '(' + this.serialize(betweenOperator.begin) + ', ' + this.serialize(betweenOperator.end) + ')';\n        return reverse ? 'Not ' + result : result;\n    };\n    FilterEditorSerializer.prototype.serializeInOperator = function (inOperator, reverse) {\n        var _this = this;\n        var result = this.serialize(inOperator.criteriaOperator) + ' ' + inOperator.displayType + '(' +\n            inOperator.operands.map(function (operand) { return _this.serialize(operand); }).join(', ') + ')';\n        return reverse ? 'Not ' + result : result;\n    };\n    FilterEditorSerializer.prototype.serializeBinaryOperator = function (binaryOperator, reverse) {\n        if (binaryOperator.operatorType === binary_2.BinaryOperatorType.Like) {\n            var separator = reverse ? ' Not ' : ' ';\n            return this.serialize(binaryOperator.leftOperand) + separator + (this.operatorTokens[binaryOperator.displayType] || binaryOperator.displayType) + ' ' + this.serialize(binaryOperator.rightOperand);\n        }\n        return (reverse ? 'Not ' : '') + this.serialize(binaryOperator.leftOperand) + ' ' + (this.operatorTokens[binaryOperator.displayType] || binaryOperator.displayType) + ' ' + this.serialize(binaryOperator.rightOperand);\n    };\n    FilterEditorSerializer.prototype.serializeUnaryOperator = function (unaryOperator, reverse) {\n        if (unaryOperator.operatorType === unary_2.UnaryOperatorType.IsNull) {\n            var separator = reverse ? ' Not ' : ' ';\n            return this.serialize(unaryOperator.operand) + ' Is' + separator + 'Null';\n        }\n        else if (unaryOperator.operatorType === unary_2.UnaryOperatorType.Not) {\n            return this.serialize(unaryOperator.operand, true);\n        }\n        var result = (this.operatorTokens[unaryOperator.displayType] || unaryOperator.displayType) + this.serialize(unaryOperator.operand);\n        return reverse ? 'Not ' + result : result;\n    };\n    FilterEditorSerializer.prototype.serializeFunctionOperator = function (functionOperator, reverse) {\n        var _this = this;\n        var result = (this.operatorTokens[functionOperator.displayType] || functionOperator.displayType) + '(' + functionOperator.operands.map(function (operand) {\n            return _this.serialize(operand);\n        }).join(', ') + ')';\n        return reverse ? 'Not ' + result : result;\n    };\n    FilterEditorSerializer.prototype.serialize = function (criteriaOperator, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        if (criteriaOperator instanceof aggregate_1.AggregateOperand) {\n            return this.serializeAggregateOperand(criteriaOperator, reverse);\n        }\n        if (criteriaOperator instanceof between_1.BetweenOperator) {\n            return this.serializeBetweenOperator(criteriaOperator, reverse);\n        }\n        if (criteriaOperator instanceof binary_1.BinaryOperator) {\n            return this.serializeBinaryOperator(criteriaOperator, reverse);\n        }\n        if (criteriaOperator instanceof constant_1.ConstantValue) {\n            return this.serializeOperandValue(criteriaOperator);\n        }\n        if (criteriaOperator instanceof function_1.FunctionOperator) {\n            return this.serializeFunctionOperator(criteriaOperator, reverse);\n        }\n        if (criteriaOperator instanceof group_1.GroupOperator) {\n            return this.serializeGroupOperand(criteriaOperator, reverse);\n        }\n        if (criteriaOperator instanceof in_1.InOperator) {\n            return this.serializeInOperator(criteriaOperator, reverse);\n        }\n        if (criteriaOperator instanceof parameter_1.OperandParameter) {\n            return this.serializeOperandParameter(criteriaOperator);\n        }\n        if (criteriaOperator instanceof property_1.OperandProperty) {\n            return this.serializeOperandProperty(criteriaOperator);\n        }\n        if (criteriaOperator instanceof value_1.OperandValue) {\n            return this.serializeOperandValue(criteriaOperator);\n        }\n        if (criteriaOperator instanceof unary_1.UnaryOperator) {\n            return this.serializeUnaryOperator(criteriaOperator, reverse);\n        }\n        if (this.custom) {\n            return this.custom(criteriaOperator, reverse);\n        }\n        throw Error('Undefined type criteria operator');\n    };\n    FilterEditorSerializer.prototype.deserialize = function (stringCriteria) {\n        return this.deserializeOperand(criteriaOperatorStateMachine_1.CriteriaOperatorStateMachine.parse(stringCriteria));\n    };\n    FilterEditorSerializer.prototype.deserializeOperand = function (operand) {\n        if (operand instanceof group_1.GroupOperator) {\n            return operand;\n        }\n        else if (operand instanceof unary_1.UnaryOperator && operand.operatorType === unary_2.UnaryOperatorType.Not) {\n            var child = operand['operand'];\n            if (child instanceof group_1.GroupOperator || child instanceof function_1.FunctionOperator) {\n                return operand;\n            }\n            else if (child instanceof unary_1.UnaryOperator && operand.operatorType === unary_2.UnaryOperatorType.Not\n                && !(child.operand instanceof property_1.OperandProperty)) {\n                return this.deserializeOperand(child.operand);\n            }\n            return new unary_1.UnaryOperator(unary_2.UnaryOperatorType.Not, new group_1.GroupOperator(group_2.GroupOperatorType.And, child ? [child] : []));\n        }\n        return new group_1.GroupOperator(group_2.GroupOperatorType.And, operand ? [operand] : []);\n    };\n    return FilterEditorSerializer;\n}());\nexports.FilterEditorSerializer = FilterEditorSerializer;\n"]},"metadata":{},"sourceType":"script"}