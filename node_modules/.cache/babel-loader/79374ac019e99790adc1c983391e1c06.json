{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_chart-item-format-rule-properties-composer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getChartFormatRuleLegendSettingsTab = exports.chartFormatRuleConditionFilters = exports.getChartApplyToDataItems = exports.createChartItemFormatRulePropertiesComposer = void 0;\n\nvar ko = require(\"knockout\");\n\nvar model_1 = require(\"../../../../model\");\n\nvar format_condition_range_base_1 = require(\"../../../../model/format-rules/conditions/range/format-condition-range-base\");\n\nvar _chart_item_format_rule_1 = require(\"../../../../model/format-rules/metadata/_chart-item-format-rule\");\n\nvar _chart_item_format_rule_base_1 = require(\"../../../../model/format-rules/metadata/_chart-item-format-rule-base\");\n\nvar chart_series_1 = require(\"../../../../model/items/chart/chart-series\");\n\nvar _form_adapter_editors_1 = require(\"../../../form-adapter/_form-adapter-editors\");\n\nvar _object_properties_wrapper_1 = require(\"../../../form-adapter/_object-properties-wrapper\");\n\nvar _accordion_tab_1 = require(\"../../../properties-controller/_accordion-tab\");\n\nvar _display_name_provider_1 = require(\"../../../_display-name-provider\");\n\nvar _shared_format_rule_properties_composer_1 = require(\"./_shared-format-rule-properties-composer\");\n\nfunction createChartItemFormatRulePropertiesComposer() {\n  var opts = {\n    conditionTypeFilter: exports.chartFormatRuleConditionFilters,\n    createDataTypeObservable: _shared_format_rule_properties_composer_1.createDataTypeObservable,\n    getCommonFormatRuleProperties: function (model, dashboardItem, dataSourceBrowser, ruleAdded) {\n      return getCommonChartFormatRuleProperties(model, getDataItems(dashboardItem, dataSourceBrowser), getChartApplyToDataItems(dashboardItem, dataSourceBrowser));\n    },\n    getConditionFormatRuleProperties: function (model, dashboardItem, dataSourceBrowser) {\n      var _a;\n\n      return {\n        properties: [_chart_item_format_rule_1.applyToChartElement],\n        visibilityFilterRules: (_a = {}, _a[_chart_item_format_rule_1.applyToChartElement.propertyName] = function (_) {\n          return canChangeApplyToElement(dashboardItem, model);\n        }, _a)\n      };\n    },\n    getMiscFormatRuleProperties: function () {\n      return {\n        properties: []\n      };\n    },\n    getAdditionalTabs: function (formatRule) {\n      return getChartFormatRuleLegendSettingsTab(formatRule);\n    }\n  };\n  return new _shared_format_rule_properties_composer_1.FormatRulePropertiesComposer(opts);\n}\n\nexports.createChartItemFormatRulePropertiesComposer = createChartItemFormatRulePropertiesComposer;\n\nfunction getCommonChartFormatRuleProperties(formatRule, getDataItems, getApplyToDataItems) {\n  var dataItems = ko.pureComputed(function () {\n    return getDataItems().map(function (m) {\n      return {\n        value: ko.unwrap(m.uniqueName),\n        displayValueId: ko.unwrap(m.displayName)\n      };\n    });\n  });\n  var applyToDataItems = ko.pureComputed(function () {\n    return getApplyToDataItems().map(function (m) {\n      return {\n        value: ko.unwrap(m.uniqueName),\n        displayValueId: ko.unwrap(m.displayName)\n      };\n    });\n  });\n\n  if (!formatRule.dataItemName() && dataItems().length) {\n    formatRule.dataItemName(ko.unwrap(dataItems()[0].value));\n  }\n\n  var applyToDataItemsNames = applyToDataItems().map(function (di) {\n    return ko.unwrap(di.value);\n  });\n\n  if (!formatRule.dataItemApplyToName() && applyToDataItemsNames.length) {\n    formatRule.dataItemApplyToName(applyToDataItemsNames[0]);\n  }\n\n  var commonProperties = [];\n  commonProperties.push(__assign(__assign({}, _chart_item_format_rule_base_1.dataItemName), {\n    formAdapterItem: _form_adapter_editors_1.dynamicSelectBoxEditor({\n      values: dataItems\n    })\n  }));\n  commonProperties.push(__assign(__assign({}, _chart_item_format_rule_1.dataItemApplyToName), {\n    formAdapterItem: _form_adapter_editors_1.dynamicSelectBoxEditor({\n      values: applyToDataItems\n    })\n  }));\n  return {\n    properties: commonProperties\n  };\n}\n\nfunction getChartCFSeries(dashboardItem) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, dashboardItem.panes().map(function (pane) {\n    return pane.series();\n  })).filter(function (series) {\n    return series._isConditionalFormattingSupported;\n  });\n}\n\nfunction getDataItems(dashboardItem, dataSourceBrowser) {\n  return function () {\n    return [].concat.apply([], __spreadArray(__spreadArray([], getChartCFSeries(dashboardItem).map(function (s) {\n      return s._measures;\n    })), [dashboardItem.arguments(), dashboardItem.seriesDimensions(), dashboardItem.hiddenMeasures()])).map(function (dataItem) {\n      return {\n        uniqueName: dataItem.uniqueName(),\n        displayName: _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, dashboardItem, dataItem)\n      };\n    });\n  };\n}\n\nfunction canChangeApplyToElement(chartItem, formatRule) {\n  var unsupportedSimpleSeriesTypes = ['Bar', 'StackedBar', 'FullStackedBar', 'Point'];\n  var unsupportedRangeSeriesTypes = ['SideBySideRangeBar'];\n  var selectedSeries = chartItem.panes().reduce(function (seriesCollection, pane) {\n    return __spreadArray(__spreadArray([], seriesCollection), pane.series());\n  }, []).filter(function (series) {\n    return series._measures.some(function (measure) {\n      return measure.uniqueName() === formatRule.dataItemApplyToName();\n    });\n  })[0];\n  return selectedSeries instanceof chart_series_1.SimpleSeries && unsupportedSimpleSeriesTypes.indexOf(selectedSeries.seriesType()) === -1 || selectedSeries instanceof chart_series_1.RangeSeries && unsupportedRangeSeriesTypes.indexOf(selectedSeries.seriesType()) === -1;\n}\n\nfunction getChartApplyToDataItems(dashboardItem, dataSourceBrowser) {\n  return function () {\n    return getChartCFSeries(dashboardItem).reduce(function (result, series) {\n      result.push({\n        uniqueName: series._getDataId(),\n        displayName: series.name() || _display_name_provider_1.getDataItemContainerDisplayName(dataSourceBrowser, dashboardItem, series)\n      });\n      return result;\n    }, []);\n  };\n}\n\nexports.getChartApplyToDataItems = getChartApplyToDataItems;\nexports.chartFormatRuleConditionFilters = {\n  conditionTypeFilter: function (name, subType) {\n    var disabledTypes = [{\n      name: 'conditionBar'\n    }, {\n      name: 'conditionColorRangeBar'\n    }, {\n      name: 'conditionGradientRangeBar'\n    }, {\n      name: 'conditionRangeSet',\n      subType: 'icons'\n    }];\n    return disabledTypes.filter(function (item) {\n      return item.name === name && (!item.subType || item.subType === subType);\n    }).length === 0;\n  },\n  rangeGradientPredefinedTypeFilter: function (type) {\n    var validTypes = [model_1.FormatConditionRangeGradientPredefinedType.YellowGreen, model_1.FormatConditionRangeGradientPredefinedType.GreenYellow, model_1.FormatConditionRangeGradientPredefinedType.YellowRed, model_1.FormatConditionRangeGradientPredefinedType.RedYellow, model_1.FormatConditionRangeGradientPredefinedType.BlueRed, model_1.FormatConditionRangeGradientPredefinedType.RedBlue, model_1.FormatConditionRangeGradientPredefinedType.YellowBlue, model_1.FormatConditionRangeGradientPredefinedType.BlueYellow, model_1.FormatConditionRangeGradientPredefinedType.GreenBlue, model_1.FormatConditionRangeGradientPredefinedType.BlueGreen, model_1.FormatConditionRangeGradientPredefinedType.GreenYellowRed, model_1.FormatConditionRangeGradientPredefinedType.RedYellowGreen, model_1.FormatConditionRangeGradientPredefinedType.BlueYellowRed, model_1.FormatConditionRangeGradientPredefinedType.RedYellowBlue, model_1.FormatConditionRangeGradientPredefinedType.GreenYellowBlue, model_1.FormatConditionRangeGradientPredefinedType.BlueYellowGreen];\n    return validTypes.indexOf(type) !== -1;\n  },\n  rangeSetPredefinedTypeFilter: function (type) {\n    var validTypes = [model_1.FormatConditionRangeSetPredefinedType.ColorsRedGreen, model_1.FormatConditionRangeSetPredefinedType.ColorsRedGreenBlue, model_1.FormatConditionRangeSetPredefinedType.ColorsRedYellowGreenBlue, model_1.FormatConditionRangeSetPredefinedType.ColorsRedOrangeYellowGreenBlue];\n    return validTypes.indexOf(type) !== -1;\n  }\n};\n\nfunction getChartFormatRuleLegendSettingsTab(formatRule) {\n  var _a, _b;\n\n  var tab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.FormatRuleChartLegend, 'DashboardWebStringId.AccordionTab.ChartLegend');\n  var wrapper = new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n    model: formatRule,\n    properties: [_chart_item_format_rule_base_1.displayName, _chart_item_format_rule_base_1.showInLegend],\n    disabledFilterRules: (_a = {}, _a[_chart_item_format_rule_base_1.showInLegend.propertyName] = function (_) {\n      return !(formatRule.displayName() || formatRule.condition() instanceof format_condition_range_base_1.FormatConditionRangeBase);\n    }, _a),\n    visibilityFilterRules: (_b = {}, _b[_chart_item_format_rule_base_1.displayName.propertyName] = function (_) {\n      return !(formatRule.condition() instanceof format_condition_range_base_1.FormatConditionRangeBase);\n    }, _b)\n  });\n  tab.tabModel(wrapper);\n  return [tab];\n}\n\nexports.getChartFormatRuleLegendSettingsTab = getChartFormatRuleLegendSettingsTab;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/conditional-formatting/items/properties-composers/_chart-item-format-rule-properties-composer.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","il","j","defineProperty","exports","value","getChartFormatRuleLegendSettingsTab","chartFormatRuleConditionFilters","getChartApplyToDataItems","createChartItemFormatRulePropertiesComposer","ko","require","model_1","format_condition_range_base_1","_chart_item_format_rule_1","_chart_item_format_rule_base_1","chart_series_1","_form_adapter_editors_1","_object_properties_wrapper_1","_accordion_tab_1","_display_name_provider_1","_shared_format_rule_properties_composer_1","opts","conditionTypeFilter","createDataTypeObservable","getCommonFormatRuleProperties","model","dashboardItem","dataSourceBrowser","ruleAdded","getCommonChartFormatRuleProperties","getDataItems","getConditionFormatRuleProperties","_a","properties","applyToChartElement","visibilityFilterRules","propertyName","_","canChangeApplyToElement","getMiscFormatRuleProperties","getAdditionalTabs","formatRule","FormatRulePropertiesComposer","getApplyToDataItems","dataItems","pureComputed","map","m","unwrap","uniqueName","displayValueId","displayName","applyToDataItems","dataItemName","applyToDataItemsNames","di","dataItemApplyToName","commonProperties","push","formAdapterItem","dynamicSelectBoxEditor","values","getChartCFSeries","concat","panes","pane","series","filter","_isConditionalFormattingSupported","_measures","seriesDimensions","hiddenMeasures","dataItem","getDataItemDisplayName","chartItem","unsupportedSimpleSeriesTypes","unsupportedRangeSeriesTypes","selectedSeries","reduce","seriesCollection","some","measure","SimpleSeries","indexOf","seriesType","RangeSeries","result","_getDataId","name","getDataItemContainerDisplayName","subType","disabledTypes","item","rangeGradientPredefinedTypeFilter","type","validTypes","FormatConditionRangeGradientPredefinedType","YellowGreen","GreenYellow","YellowRed","RedYellow","BlueRed","RedBlue","YellowBlue","BlueYellow","GreenBlue","BlueGreen","GreenYellowRed","RedYellowGreen","BlueYellowRed","RedYellowBlue","GreenYellowBlue","BlueYellowGreen","rangeSetPredefinedTypeFilter","FormatConditionRangeSetPredefinedType","ColorsRedGreen","ColorsRedGreenBlue","ColorsRedYellowGreenBlue","ColorsRedOrangeYellowGreenBlue","_b","tab","AccordionTab","KnownTabs","FormatRuleChartLegend","wrapper","ObjectPropertiesWrapper","showInLegend","disabledFilterRules","condition","FormatConditionRangeBase","tabModel"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_chart-item-format-rule-properties-composer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getChartFormatRuleLegendSettingsTab = exports.chartFormatRuleConditionFilters = exports.getChartApplyToDataItems = exports.createChartItemFormatRulePropertiesComposer = void 0;\nvar ko = require(\"knockout\");\nvar model_1 = require(\"../../../../model\");\nvar format_condition_range_base_1 = require(\"../../../../model/format-rules/conditions/range/format-condition-range-base\");\nvar _chart_item_format_rule_1 = require(\"../../../../model/format-rules/metadata/_chart-item-format-rule\");\nvar _chart_item_format_rule_base_1 = require(\"../../../../model/format-rules/metadata/_chart-item-format-rule-base\");\nvar chart_series_1 = require(\"../../../../model/items/chart/chart-series\");\nvar _form_adapter_editors_1 = require(\"../../../form-adapter/_form-adapter-editors\");\nvar _object_properties_wrapper_1 = require(\"../../../form-adapter/_object-properties-wrapper\");\nvar _accordion_tab_1 = require(\"../../../properties-controller/_accordion-tab\");\nvar _display_name_provider_1 = require(\"../../../_display-name-provider\");\nvar _shared_format_rule_properties_composer_1 = require(\"./_shared-format-rule-properties-composer\");\nfunction createChartItemFormatRulePropertiesComposer() {\n    var opts = {\n        conditionTypeFilter: exports.chartFormatRuleConditionFilters,\n        createDataTypeObservable: _shared_format_rule_properties_composer_1.createDataTypeObservable,\n        getCommonFormatRuleProperties: function (model, dashboardItem, dataSourceBrowser, ruleAdded) {\n            return getCommonChartFormatRuleProperties(model, getDataItems(dashboardItem, dataSourceBrowser), getChartApplyToDataItems(dashboardItem, dataSourceBrowser));\n        },\n        getConditionFormatRuleProperties: function (model, dashboardItem, dataSourceBrowser) {\n            var _a;\n            return ({\n                properties: [_chart_item_format_rule_1.applyToChartElement],\n                visibilityFilterRules: (_a = {},\n                    _a[_chart_item_format_rule_1.applyToChartElement.propertyName] = function (_) { return canChangeApplyToElement(dashboardItem, model); },\n                    _a)\n            });\n        },\n        getMiscFormatRuleProperties: function () { return ({ properties: [] }); },\n        getAdditionalTabs: function (formatRule) { return getChartFormatRuleLegendSettingsTab(formatRule); },\n    };\n    return new _shared_format_rule_properties_composer_1.FormatRulePropertiesComposer(opts);\n}\nexports.createChartItemFormatRulePropertiesComposer = createChartItemFormatRulePropertiesComposer;\nfunction getCommonChartFormatRuleProperties(formatRule, getDataItems, getApplyToDataItems) {\n    var dataItems = ko.pureComputed(function () { return getDataItems().map(function (m) { return ({ value: ko.unwrap(m.uniqueName), displayValueId: ko.unwrap(m.displayName) }); }); });\n    var applyToDataItems = ko.pureComputed(function () { return getApplyToDataItems().map(function (m) { return ({ value: ko.unwrap(m.uniqueName), displayValueId: ko.unwrap(m.displayName) }); }); });\n    if (!formatRule.dataItemName() && dataItems().length) {\n        formatRule.dataItemName(ko.unwrap(dataItems()[0].value));\n    }\n    var applyToDataItemsNames = applyToDataItems().map(function (di) { return ko.unwrap(di.value); });\n    if (!formatRule.dataItemApplyToName() && applyToDataItemsNames.length) {\n        formatRule.dataItemApplyToName(applyToDataItemsNames[0]);\n    }\n    var commonProperties = [];\n    commonProperties.push(__assign(__assign({}, _chart_item_format_rule_base_1.dataItemName), { formAdapterItem: _form_adapter_editors_1.dynamicSelectBoxEditor({ values: dataItems }) }));\n    commonProperties.push(__assign(__assign({}, _chart_item_format_rule_1.dataItemApplyToName), { formAdapterItem: _form_adapter_editors_1.dynamicSelectBoxEditor({ values: applyToDataItems }) }));\n    return {\n        properties: commonProperties\n    };\n}\nfunction getChartCFSeries(dashboardItem) {\n    var _a;\n    return (_a = [])\n        .concat.apply(_a, dashboardItem.panes().map(function (pane) { return pane.series(); })).filter(function (series) { return series._isConditionalFormattingSupported; });\n}\nfunction getDataItems(dashboardItem, dataSourceBrowser) {\n    return function () { return []\n        .concat.apply([], __spreadArray(__spreadArray([], getChartCFSeries(dashboardItem).map(function (s) { return s._measures; })), [dashboardItem.arguments(),\n        dashboardItem.seriesDimensions(),\n        dashboardItem.hiddenMeasures()])).map(function (dataItem) { return ({\n        uniqueName: dataItem.uniqueName(),\n        displayName: _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, dashboardItem, dataItem)\n    }); }); };\n}\nfunction canChangeApplyToElement(chartItem, formatRule) {\n    var unsupportedSimpleSeriesTypes = ['Bar', 'StackedBar', 'FullStackedBar', 'Point'];\n    var unsupportedRangeSeriesTypes = ['SideBySideRangeBar'];\n    var selectedSeries = chartItem\n        .panes()\n        .reduce(function (seriesCollection, pane) { return __spreadArray(__spreadArray([], seriesCollection), pane.series()); }, [])\n        .filter(function (series) { return series._measures.some(function (measure) { return measure.uniqueName() === formatRule.dataItemApplyToName(); }); })[0];\n    return (selectedSeries instanceof chart_series_1.SimpleSeries && unsupportedSimpleSeriesTypes.indexOf(selectedSeries.seriesType()) === -1)\n        || (selectedSeries instanceof chart_series_1.RangeSeries && unsupportedRangeSeriesTypes.indexOf(selectedSeries.seriesType()) === -1);\n}\nfunction getChartApplyToDataItems(dashboardItem, dataSourceBrowser) {\n    return function () { return getChartCFSeries(dashboardItem).reduce(function (result, series) {\n        result.push({\n            uniqueName: series._getDataId(),\n            displayName: series.name() || _display_name_provider_1.getDataItemContainerDisplayName(dataSourceBrowser, dashboardItem, series)\n        });\n        return result;\n    }, []); };\n}\nexports.getChartApplyToDataItems = getChartApplyToDataItems;\nexports.chartFormatRuleConditionFilters = {\n    conditionTypeFilter: function (name, subType) {\n        var disabledTypes = [{\n                name: 'conditionBar'\n            }, {\n                name: 'conditionColorRangeBar'\n            }, {\n                name: 'conditionGradientRangeBar'\n            }, {\n                name: 'conditionRangeSet',\n                subType: 'icons'\n            }];\n        return disabledTypes.filter(function (item) { return item.name === name && (!item.subType || item.subType === subType); }).length === 0;\n    },\n    rangeGradientPredefinedTypeFilter: function (type) {\n        var validTypes = [\n            model_1.FormatConditionRangeGradientPredefinedType.YellowGreen,\n            model_1.FormatConditionRangeGradientPredefinedType.GreenYellow,\n            model_1.FormatConditionRangeGradientPredefinedType.YellowRed,\n            model_1.FormatConditionRangeGradientPredefinedType.RedYellow,\n            model_1.FormatConditionRangeGradientPredefinedType.BlueRed,\n            model_1.FormatConditionRangeGradientPredefinedType.RedBlue,\n            model_1.FormatConditionRangeGradientPredefinedType.YellowBlue,\n            model_1.FormatConditionRangeGradientPredefinedType.BlueYellow,\n            model_1.FormatConditionRangeGradientPredefinedType.GreenBlue,\n            model_1.FormatConditionRangeGradientPredefinedType.BlueGreen,\n            model_1.FormatConditionRangeGradientPredefinedType.GreenYellowRed,\n            model_1.FormatConditionRangeGradientPredefinedType.RedYellowGreen,\n            model_1.FormatConditionRangeGradientPredefinedType.BlueYellowRed,\n            model_1.FormatConditionRangeGradientPredefinedType.RedYellowBlue,\n            model_1.FormatConditionRangeGradientPredefinedType.GreenYellowBlue,\n            model_1.FormatConditionRangeGradientPredefinedType.BlueYellowGreen\n        ];\n        return validTypes.indexOf(type) !== -1;\n    },\n    rangeSetPredefinedTypeFilter: function (type) {\n        var validTypes = [\n            model_1.FormatConditionRangeSetPredefinedType.ColorsRedGreen,\n            model_1.FormatConditionRangeSetPredefinedType.ColorsRedGreenBlue,\n            model_1.FormatConditionRangeSetPredefinedType.ColorsRedYellowGreenBlue,\n            model_1.FormatConditionRangeSetPredefinedType.ColorsRedOrangeYellowGreenBlue\n        ];\n        return validTypes.indexOf(type) !== -1;\n    }\n};\nfunction getChartFormatRuleLegendSettingsTab(formatRule) {\n    var _a, _b;\n    var tab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.FormatRuleChartLegend, 'DashboardWebStringId.AccordionTab.ChartLegend');\n    var wrapper = new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n        model: formatRule,\n        properties: [_chart_item_format_rule_base_1.displayName, _chart_item_format_rule_base_1.showInLegend],\n        disabledFilterRules: (_a = {},\n            _a[_chart_item_format_rule_base_1.showInLegend.propertyName] = function (_) { return !(formatRule.displayName() || formatRule.condition() instanceof format_condition_range_base_1.FormatConditionRangeBase); },\n            _a),\n        visibilityFilterRules: (_b = {},\n            _b[_chart_item_format_rule_base_1.displayName.propertyName] = function (_) { return !(formatRule.condition() instanceof format_condition_range_base_1.FormatConditionRangeBase); },\n            _b)\n    });\n    tab.tabModel(wrapper);\n    return [tab];\n}\nexports.getChartFormatRuleLegendSettingsTab = getChartFormatRuleLegendSettingsTab;\n"]},"metadata":{},"sourceType":"script"}