{"ast":null,"code":"/**\n* DevExpress Analytics (query-builder\\wizard\\internal\\_jsonSourceSettings.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JsonDataSourceJsonSourcePageUriSettings = exports.JsonDataSourceJsonSourcePageStringSettings = exports.JsonDataSourceJsonSourcePageSettingsBase = void 0;\n\nvar ko = require(\"knockout\");\n\nvar $ = require(\"jquery\");\n\nvar localization_utils_1 = require(\"../../../property-grid/localization/localization_utils\");\n\nvar utils_1 = require(\"../../../serializer/utils\");\n\nvar jsonSourceSettings_1 = require(\"./jsonSourceSettings\");\n\nvar propertygrid_1 = require(\"../../../property-grid/propertygrid\");\n\nvar jsonDataSource_1 = require(\"../../dataSource/json/jsonDataSource\");\n\nvar _jsonDataSourceWidgets_1 = require(\"./_jsonDataSourceWidgets\");\n\nvar jsonAuthenticationInfo_1 = require(\"../../dataSource/json/jsonAuthenticationInfo\");\n\nvar editorsInfo_1 = require(\"../../../property-grid/widgets/editorsInfo\");\n\nvar _getNameHelpers_1 = require(\"../../../core/internal/_getNameHelpers\");\n\nvar jsonParameter_1 = require(\"../../dataSource/json/jsonParameter\");\n\nvar _utils_1 = require(\"./_utils\");\n\nvar _utils_2 = require(\"../../../core/utils/_utils\");\n\nvar JsonDataSourceJsonSourcePageSettingsBase = function (_super) {\n  __extends(JsonDataSourceJsonSourcePageSettingsBase, _super);\n\n  function JsonDataSourceJsonSourcePageSettingsBase() {\n    var _this = _super.call(this) || this;\n\n    _this._validationGroup = null;\n    _this._validationSummary = null;\n    _this.validationGroup = {\n      onInitialized: function (args) {\n        return _this._onValidationGroupInitialized(args);\n      },\n      onDisposing: function (args) {\n        return _this._onValidationGroupDisposing(args);\n      },\n      validate: function () {\n        return _this._validate();\n      }\n    };\n    _this.validationSummary = {\n      onInitialized: function (args) {\n        return _this._onValidationSummaryInitialized(args);\n      },\n      onDisposing: function (args) {\n        return _this._onValidationSummaryDisposing(args);\n      }\n    };\n\n    _this._disposables.push(_this.grid = new propertygrid_1.ObjectProperties(ko.observable(_this)));\n\n    return _this;\n  }\n\n  JsonDataSourceJsonSourcePageSettingsBase.prototype.dispose = function () {\n    this._validationSummary && this._validationSummary.dispose();\n    this._validationGroup && this._validationGroup.dispose();\n    this._validationSummary = null;\n    this._validationGroup = null;\n\n    _super.prototype.dispose.call(this);\n  };\n\n  JsonDataSourceJsonSourcePageSettingsBase.prototype._onValidationGroupInitialized = function (args) {\n    this._validationGroup = args.component;\n  };\n\n  JsonDataSourceJsonSourcePageSettingsBase.prototype._onValidationGroupDisposing = function (args) {\n    this._validationGroup = null;\n  };\n\n  JsonDataSourceJsonSourcePageSettingsBase.prototype._onValidationSummaryInitialized = function (args) {\n    this._validationSummary = args.component;\n  };\n\n  JsonDataSourceJsonSourcePageSettingsBase.prototype._onValidationSummaryDisposing = function (args) {\n    this._validationSummary = null;\n  };\n\n  JsonDataSourceJsonSourcePageSettingsBase.prototype._repaintSummary = function () {\n    this._validationSummary && this._validationSummary.repaint();\n  };\n\n  JsonDataSourceJsonSourcePageSettingsBase.prototype._validate = function () {\n    this._validationSummary && this._validationGroup && this._validationGroup.validate();\n  };\n\n  return JsonDataSourceJsonSourcePageSettingsBase;\n}(utils_1.Disposable);\n\nexports.JsonDataSourceJsonSourcePageSettingsBase = JsonDataSourceJsonSourcePageSettingsBase;\n\nvar JsonDataSourceJsonSourcePageStringSettings = function (_super) {\n  __extends(JsonDataSourceJsonSourcePageStringSettings, _super);\n\n  function JsonDataSourceJsonSourcePageStringSettings() {\n    var _this = _super.call(this) || this;\n\n    _this._validatorsReady = ko.observable(false);\n    _this.isValid = ko.pureComputed(function () {\n      var isJsonValid = _this._isJsonSourceValid(_this.stringSource());\n\n      var aceHasErrors = _this.aceEditorHasErrors();\n\n      return isJsonValid && !aceHasErrors;\n    });\n    _this.validationGroup = null;\n    _this.validationSummary = null;\n    _this.stringSource = ko.observable('');\n    _this.aceEditorHasErrors = ko.observable(false);\n    _this.cssClass = {\n      'dxrd-wizard-json-string-source-grid': true\n    };\n\n    _this._disposables.push(_this.grid = new propertygrid_1.ObjectProperties(ko.observable(_this)));\n\n    return _this;\n  }\n\n  JsonDataSourceJsonSourcePageStringSettings.prototype.onChange = function (_onChange) {\n    var _this = this;\n\n    var timeoutId = null;\n\n    var localOnChange = function () {\n      _onChange();\n\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(function () {\n        return _this._validate();\n      }, 1);\n    };\n\n    this._disposables.push(this.stringSource.subscribe(function (newVal) {\n      return localOnChange();\n    }));\n  };\n\n  JsonDataSourceJsonSourcePageStringSettings.prototype._isJsonSourceValid = function (jsonString) {\n    if (!jsonString) return false;\n    var isJsonSourceValid = true;\n\n    try {\n      JSON.parse(jsonString);\n    } catch (ex) {\n      isJsonSourceValid = false;\n    }\n\n    return isJsonSourceValid;\n  };\n\n  JsonDataSourceJsonSourcePageStringSettings.prototype.isEmpty = function () {\n    return !this.stringSource();\n  };\n\n  JsonDataSourceJsonSourcePageStringSettings.prototype.reset = function () {\n    this.stringSource('');\n  };\n\n  JsonDataSourceJsonSourcePageStringSettings.prototype.setValue = function (dataSource) {\n    this.stringSource(dataSource.source.json());\n  };\n\n  JsonDataSourceJsonSourcePageStringSettings.prototype.getInfo = function () {\n    return [{\n      propertyName: 'stringSource',\n      defaultVal: '',\n      displayName: 'JSON String',\n      editor: {\n        header: 'dx-jsonwizard-jsonstring-editor',\n        editorType: _jsonDataSourceWidgets_1.JsonStringEditor,\n        custom: 'dx-property-json-string-editor'\n      }\n    }];\n  };\n\n  JsonDataSourceJsonSourcePageStringSettings.prototype.applySettings = function (jsonDataSource) {\n    jsonDataSource.source.uri(undefined);\n    jsonDataSource.source.json(this.stringSource());\n    jsonDataSource.source.authenticationInfo = new jsonAuthenticationInfo_1.JsonAuthenticationInfo({});\n    jsonDataSource.source.headers([]);\n    jsonDataSource.source.queryParameters([]);\n    jsonDataSource.source.pathParameters([]);\n  };\n\n  return JsonDataSourceJsonSourcePageStringSettings;\n}(JsonDataSourceJsonSourcePageSettingsBase);\n\nexports.JsonDataSourceJsonSourcePageStringSettings = JsonDataSourceJsonSourcePageStringSettings;\n\nvar JsonDataSourceJsonSourcePageUriSettings = function (_super) {\n  __extends(JsonDataSourceJsonSourcePageUriSettings, _super);\n\n  function JsonDataSourceJsonSourcePageUriSettings(_requestWrapper, _itemsProvider) {\n    var _this = _super.call(this) || this;\n\n    _this._requestWrapper = _requestWrapper;\n    _this._itemsProvider = _itemsProvider;\n    _this._isUriValid = ko.observable(false);\n    _this._lastValidatedJsonSourceJSON = '';\n    _this._authNameValidatorInstance = null;\n    _this._isInitUri = true;\n    _this._collectionItemNamePlaceholder = localization_utils_1.getLocalization('Name', 'AnalyticsCoreStringId.CollectionEditor_Name_Placeholder');\n    _this._lastValidateDeferred = null;\n    _this._sourceUriValidatorsReady = ko.observable(true);\n    _this._basicAuthValidatorsReady = ko.observable(false);\n    _this._validationRequested = ko.observable(false).extend({\n      deferred: true\n    });\n    _this._noEmptyProperties = ko.pureComputed(function () {\n      var isBasicHttpAuthValid = _this._isBasicHttpAuthValid();\n\n      var isParametersValid = _this._isParametersValid();\n\n      var sourceUriNotEmpty = !!_this.sourceUri();\n      return isBasicHttpAuthValid && isParametersValid && sourceUriNotEmpty;\n    });\n    _this._lastValidationMessage = ko.observable();\n\n    _this._getSerializedUriSource = function (jsonDataSource) {\n      if (jsonDataSource === void 0) {\n        jsonDataSource = new jsonDataSource_1.JsonDataSource({});\n      }\n\n      _this.applySettings(jsonDataSource);\n\n      return JSON.stringify(jsonDataSource.source.serialize(true));\n    };\n\n    _this._sourceUriValidationCallback = function (params) {\n      if (!_this.sourceUri()) {\n        if (_this._isInitUri) {\n          _this._isInitUri = false;\n          return true;\n        }\n\n        params.rule.message = _jsonDataSourceWidgets_1.getLocalizedValidationErrorMessage(null, localization_utils_1.getLocalization('Web Service Endpoint (URI):', 'DataAccessUIStringId.WizardPageChooseJsonSource_URI'));\n        return false;\n      }\n\n      var serverValidationResult = false;\n      _this._isInitUri = false;\n\n      var serializedJsonSource = _this._getSerializedUriSource();\n\n      if (serializedJsonSource != _this._lastValidatedJsonSourceJSON) {\n        if (!_this._lastValidationMessage()) _this._lastValidationMessage(localization_utils_1.getLocalization('Validation...', 'AnalyticsCoreStringId.Validation'));\n\n        _this._validateUriSource().done(function (result) {\n          serverValidationResult = params.rule.isValid = result.isUriValid;\n          result.faultMessage && (params.rule.message = result.faultMessage);\n\n          _this._lastValidationMessage(serverValidationResult ? null : result.faultMessage);\n\n          params.validator.validate();\n          setTimeout(function () {\n            return _this._repaintSummary();\n          }, 1);\n        });\n      } else {\n        return !_this._lastValidationMessage();\n      }\n\n      return serverValidationResult;\n    };\n\n    _this.isValid = ko.pureComputed(function () {\n      var isPropertiesNotEmpty = _this._noEmptyProperties();\n\n      var isUriValid = _this._isUriValid();\n\n      return isPropertiesNotEmpty && isUriValid;\n    });\n    _this._validatorsReady = ko.pureComputed({\n      read: function () {\n        var sourceUriValidatorReady = _this._sourceUriValidatorsReady();\n\n        var authIsEmpty = !_this.basicHttpAuth.password() && !_this.basicHttpAuth.userName();\n\n        var authInitialized = _this._basicAuthValidatorsReady();\n\n        return sourceUriValidatorReady && (authInitialized || authIsEmpty);\n      },\n      write: function (newVal) {\n        _this._basicAuthValidatorsReady(newVal);\n      }\n    });\n    _this.sourceUri = ko.observable('');\n    _this.basicHttpAuth = {\n      password: ko.observable(''),\n      userName: ko.observable('')\n    };\n    _this.parameters = ko.observableArray([]);\n\n    _this._disposables.push(_this.resultUri = ko.pureComputed(function () {\n      return _this._getResultUri();\n    }));\n\n    _this._disposables.push(_this.grid = new propertygrid_1.ObjectProperties(ko.observable(_this)));\n\n    _this._disposables.push(ko.computed(function () {\n      var editorsInitialized = _this._validatorsReady();\n\n      var validationRequested = _this._validationRequested();\n\n      if (editorsInitialized && validationRequested) {\n        _this._validate();\n      }\n    }));\n\n    _this._disposables.push(_this._validatorsReady);\n\n    return _this;\n  }\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._validateUriSource = function () {\n    var _this = this;\n\n    var defaultValidationErrorMessage = localization_utils_1.getLocalization('Invalid URI.', 'AnalyticsCoreStringId.ReportDesigner_Wizard_JsonSource_UriValidationError');\n    var endpointUriDisplayName = localization_utils_1.getLocalization('Web Service Endpoint (URI):', 'DataAccessUIStringId.WizardPageChooseJsonSource_URI');\n\n    this._isUriValid(false);\n\n    if (this._lastValidateDeferred) {\n      this._lastValidateDeferred.reject();\n    }\n\n    var resultDeferred = $.Deferred();\n    this._lastValidateDeferred = resultDeferred;\n\n    try {\n      var jsonDataSource = new jsonDataSource_1.JsonDataSource({});\n\n      var serializedJsonSource = this._getSerializedUriSource(jsonDataSource);\n\n      this._lastValidatedJsonSourceJSON = serializedJsonSource;\n\n      var validationResultHandler = function (data) {\n        if (resultDeferred.state && resultDeferred.state() === 'rejected') return;\n\n        _this._isUriValid(data.isUriValid);\n\n        var faultMessage = _jsonDataSourceWidgets_1.getLocalizedValidationErrorMessage((data.isUriValid ? '' : data && data.faultMessage) || defaultValidationErrorMessage, endpointUriDisplayName);\n\n        resultDeferred.resolve({\n          isUriValid: data.isUriValid,\n          faultMessage: faultMessage\n        });\n      };\n\n      this._requestWrapper.validateJsonUri(jsonDataSource).done(validationResultHandler).fail(function (data) {\n        if (data === void 0) {\n          data = {};\n        }\n\n        data.isValid = false;\n        validationResultHandler(data);\n      });\n    } catch (ex) {\n      this._isUriValid(false);\n    }\n\n    return resultDeferred.promise();\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._isCollectionValid = function (collectionName) {\n    return !this[collectionName]().length || this[collectionName]().every(function (x) {\n      return x.name();\n    });\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._isParametersValid = function () {\n    return this._isCollectionValid('parameters');\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._isBasicHttpAuthValid = function () {\n    return !this.basicHttpAuth.password() || !!this.basicHttpAuth.userName();\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._getSourceUriInfo = function () {\n    var _this = this;\n\n    var sourceUri = {\n      propertyName: 'sourceUri',\n      displayName: 'Web Service Endpoint (URI):',\n      localizationId: 'DataAccessUIStringId.WizardPageChooseJsonSource_URI',\n      defaultVal: '',\n      editor: editorsInfo_1.editorTemplates.getEditor('text'),\n      validatorOptions: null,\n      isRequired: true,\n      editorOptions: {\n        elementAttr: {\n          title: this.sourceUri\n        }\n      }\n    };\n\n    var _self = this;\n\n    sourceUri.validatorOptions = {\n      onInitialized: function (e) {\n        _this._sourceUriValidatorsReady(true);\n      },\n      onDisposed: function () {\n        _this._sourceUriValidatorsReady(false);\n      },\n      validationRules: [{\n        type: 'custom',\n        assignValueFirst: true,\n        isDeferred: ko.pureComputed(function () {\n          return _this._noEmptyProperties();\n        }),\n\n        get message() {\n          return _self._lastValidationMessage();\n        },\n\n        validationCallback: this._sourceUriValidationCallback\n      }]\n    };\n    return sourceUri;\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._getBasicHttpAuthInfo = function () {\n    var _this = this;\n\n    var basicHttpAuthName = {\n      propertyName: 'userName',\n      displayName: 'Username:',\n      localizationId: 'DataAccessUIStringId.WizardPageConfigureJsonConnection_UsernameText',\n      editor: editorsInfo_1.editorTemplates.getEditor('text'),\n      validatorOptions: undefined\n    };\n    var basicHttpAuth = {\n      propertyName: 'basicHttpAuth',\n      displayName: 'Basic HTTP Authentication',\n      localizationId: 'DataAccessUIStringId.WizardPageConfigureJsonConnection_BasicHttpAuthText',\n      info: [basicHttpAuthName, _utils_2.createPasswordSerializationInfo({\n        propertyName: 'password',\n        displayName: 'Password:',\n        localizationId: 'DataAccessUIStringId.WizardPageConfigureJsonConnection_PasswordText'\n      }, false)],\n      editor: editorsInfo_1.editorTemplates.getEditor('objecteditor')\n    };\n\n    var onValidatorInitialied = function (e) {\n      var authNmeValidatorInstance = e && e.component;\n\n      if (_this._authNameValidatorInstance && _this._authNameValidatorInstance != authNmeValidatorInstance) {\n        _this._authNameValidatorInstance.dispose();\n      }\n\n      _this._authNameValidatorInstance = authNmeValidatorInstance;\n\n      _this._basicAuthValidatorsReady(true);\n    };\n\n    var authNameValidatorDisposed = function () {\n      _this._authNameValidatorInstance = null;\n    };\n\n    basicHttpAuthName.validatorOptions = {\n      onInitialized: onValidatorInitialied,\n      onDisposed: authNameValidatorDisposed,\n      validationRules: [{\n        type: 'custom',\n        reevaluate: true,\n        assignValueFirst: true,\n\n        get message() {\n          return _jsonDataSourceWidgets_1.getLocalizedValidationErrorMessage(null, localization_utils_1.getLocalization(basicHttpAuth.displayName, basicHttpAuth.localizationId), localization_utils_1.getLocalization(basicHttpAuthName.displayName, basicHttpAuthName.localizationId));\n        },\n\n        validationCallback: function (params) {\n          return _this._isBasicHttpAuthValid();\n        }\n      }]\n    };\n    return basicHttpAuth;\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._getParametersInfo = function () {\n    var _this = this;\n\n    var parameters = {\n      propertyName: 'parameters',\n      displayName: 'Parameters',\n      localizationId: 'AnalyticsCoreStringId.QueryBuilder_Parameters',\n      array: true,\n      addHandler: function () {\n        var newName = _getNameHelpers_1.getUniqueNameForNamedObjectsArray(_this.parameters(), 'parameter');\n\n        return jsonParameter_1.JsonParameter.from({\n          '@Name': newName\n        });\n      },\n      editor: editorsInfo_1.editorTemplates.getEditor('commonCollection'),\n      editorOptions: null,\n      template: '#dx-jsonwizard-parametercollection'\n    };\n    parameters.editorOptions = {\n      itemsProvider: this._itemsProvider,\n      nameValidationRules: [{\n        type: 'required',\n\n        get message() {\n          return _jsonDataSourceWidgets_1.getLocalizedValidationErrorMessage(null, localization_utils_1.getLocalization(parameters.displayName, parameters.localizationId), this._collectionItemNamePlaceholder);\n        }\n\n      }]\n    };\n    return parameters;\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._getResultUriInfo = function () {\n    var _resultUri = {\n      propertyName: 'resultUri',\n      displayName: 'Resulting URI:',\n      localizationId: 'DataAccessUIStringId.WizardPageChooseJsonSource_ResultingUri',\n      defaultVal: '',\n      editor: editorsInfo_1.editorTemplates.getEditor('text'),\n      editorOptions: {\n        readOnly: true,\n        elementAttr: {\n          title: this.resultUri\n        }\n      }\n    };\n    return _resultUri;\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._getResultUri = function () {\n    if (!this.sourceUri() || !this._isUriValid() || !this._isParametersValid()) return null;\n    if (this.sourceUri() && this.parameters().length === 0) return this.sourceUri();\n    var uriParts = this.sourceUri().split('?');\n    var url = uriParts[0];\n    var query = uriParts[1];\n    url = this._appendPathSegmentsToUri(uriParts[0]);\n    return this._appendQuerySegmentsToUri(url, query);\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._appendPathSegmentsToUri = function (uri) {\n    var segments = this.parameters().filter(function (p) {\n      return p.itemType() === 'PathParameter';\n    }).map(function (p) {\n      return '{' + p.name() + '}';\n    });\n    segments.forEach(function (segment) {\n      uri = uri.replace(/[\\/]+$/g, '') + '/' + segment.replace(/^[\\/]+/g, '');\n    });\n    return uri;\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._appendQuerySegmentsToUri = function (uri, originalQuery) {\n    var separator = '';\n    var uriArguments = originalQuery || '';\n    var querySegments = this.parameters().filter(function (p) {\n      return p.itemType() === 'QueryParameter';\n    }).map(function (p) {\n      return p.name() + '={?}';\n    });\n    querySegments.forEach(function (q) {\n      if (!!uriArguments) uriArguments += '&';\n      uriArguments += q;\n    });\n    if (uriArguments.length > 0) uri += '?' + uriArguments;\n    return uri;\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._onValidationSummaryInitialized = function (args) {\n    var _this = this;\n\n    _super.prototype._onValidationSummaryInitialized.call(this, args);\n\n    this._isInitUri = true;\n    setTimeout(function () {\n      _this._validate();\n    }, 1);\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._applyParametersToSource = function (jsonDataSource) {\n    var parametersByType = this.parameters().reduce(function (result, parameter) {\n      var _a;\n\n      return __assign(__assign({}, result), (_a = {}, _a[parameter.itemType()] = __spreadArray(__spreadArray([], result[parameter.itemType()] || []), [parameter]), _a));\n    }, {});\n    ['PathParameter', 'QueryParameter', 'Header'].forEach(function (type) {\n      if (parametersByType[type]) jsonDataSource.source[jsonSourceSettings_1.parameterTypeToPropertyMap[type]](parametersByType[type]);\n    });\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype.applySettings = function (jsonDataSource) {\n    jsonDataSource.source.uri(this.sourceUri());\n    jsonDataSource.source.json(undefined);\n    jsonDataSource.source.authenticationInfo.password(this.basicHttpAuth.password());\n    jsonDataSource.source.authenticationInfo.userName(this.basicHttpAuth.userName());\n\n    this._applyParametersToSource(jsonDataSource);\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype.getInfo = function () {\n    var sourceUri = this._getSourceUriInfo();\n\n    var basicHttpAuth = this._getBasicHttpAuthInfo();\n\n    var parameters = this._getParametersInfo();\n\n    var resultUriInfo = this._getResultUriInfo();\n\n    return [sourceUri, basicHttpAuth, parameters, resultUriInfo];\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype.reset = function () {\n    this.sourceUri('');\n    this.basicHttpAuth.password('');\n    this.basicHttpAuth.userName('');\n    this.parameters([]);\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype.setValue = function (dataSource) {\n    this.sourceUri(dataSource.source.uri());\n    this.basicHttpAuth.userName(dataSource.source.authenticationInfo.userName());\n    this.basicHttpAuth.password(dataSource.source.authenticationInfo.password());\n    var sourceParameters = [].concat.apply([], [dataSource.source.pathParameters(), dataSource.source.queryParameters(), dataSource.source.headers()]);\n    this.parameters(sourceParameters);\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype.dispose = function () {\n    this._authNameValidatorInstance && this._authNameValidatorInstance.dispose();\n\n    if (this._lastValidateDeferred) {\n      this._lastValidateDeferred.reject();\n\n      this._lastValidateDeferred = null;\n    }\n\n    _super.prototype.dispose.call(this);\n\n    this.disposeObservableArray(this.parameters);\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype.onChange = function (_onChange) {\n    var _a;\n\n    var _this = this;\n\n    var timeoutId = null;\n\n    var localOnChange = function () {\n      _onChange();\n\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(function () {\n        return _this._validate();\n      }, 1);\n    };\n\n    (_a = this._disposables).push.apply(_a, _utils_1.subscribeProperties([this.sourceUri, this.basicHttpAuth.password, this.basicHttpAuth.userName, this.resultUri], localOnChange));\n\n    this._disposables.push(_utils_1.subscribeArray(this.parameters, function (item) {\n      var _a;\n\n      (_a = item._disposables).push.apply(_a, _utils_1.subscribeProperties([item.name, item.itemType, item.value], localOnChange));\n    }, localOnChange));\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype.isEmpty = function () {\n    return !this.sourceUri();\n  };\n\n  JsonDataSourceJsonSourcePageUriSettings.prototype._validate = function () {\n    if (this._validationSummary && this._validationGroup) {\n      if (this._validatorsReady()) {\n        this._validationGroup.validate();\n\n        this._validationRequested(false);\n      } else {\n        this._validationRequested(true);\n      }\n    }\n  };\n\n  return JsonDataSourceJsonSourcePageUriSettings;\n}(JsonDataSourceJsonSourcePageSettingsBase);\n\nexports.JsonDataSourceJsonSourcePageUriSettings = JsonDataSourceJsonSourcePageUriSettings;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/query-builder/wizard/internal/_jsonSourceSettings.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArray","to","from","il","j","defineProperty","exports","value","JsonDataSourceJsonSourcePageUriSettings","JsonDataSourceJsonSourcePageStringSettings","JsonDataSourceJsonSourcePageSettingsBase","ko","require","$","localization_utils_1","utils_1","jsonSourceSettings_1","propertygrid_1","jsonDataSource_1","_jsonDataSourceWidgets_1","jsonAuthenticationInfo_1","editorsInfo_1","_getNameHelpers_1","jsonParameter_1","_utils_1","_utils_2","_super","_this","_validationGroup","_validationSummary","validationGroup","onInitialized","args","_onValidationGroupInitialized","onDisposing","_onValidationGroupDisposing","validate","_validate","validationSummary","_onValidationSummaryInitialized","_onValidationSummaryDisposing","_disposables","push","grid","ObjectProperties","observable","dispose","component","_repaintSummary","repaint","Disposable","_validatorsReady","isValid","pureComputed","isJsonValid","_isJsonSourceValid","stringSource","aceHasErrors","aceEditorHasErrors","cssClass","onChange","_onChange","timeoutId","localOnChange","clearTimeout","setTimeout","subscribe","newVal","jsonString","isJsonSourceValid","JSON","parse","ex","isEmpty","reset","setValue","dataSource","source","json","getInfo","propertyName","defaultVal","displayName","editor","header","editorType","JsonStringEditor","custom","applySettings","jsonDataSource","uri","undefined","authenticationInfo","JsonAuthenticationInfo","headers","queryParameters","pathParameters","_requestWrapper","_itemsProvider","_isUriValid","_lastValidatedJsonSourceJSON","_authNameValidatorInstance","_isInitUri","_collectionItemNamePlaceholder","getLocalization","_lastValidateDeferred","_sourceUriValidatorsReady","_basicAuthValidatorsReady","_validationRequested","extend","deferred","_noEmptyProperties","isBasicHttpAuthValid","_isBasicHttpAuthValid","isParametersValid","_isParametersValid","sourceUriNotEmpty","sourceUri","_lastValidationMessage","_getSerializedUriSource","JsonDataSource","stringify","serialize","_sourceUriValidationCallback","params","rule","message","getLocalizedValidationErrorMessage","serverValidationResult","serializedJsonSource","_validateUriSource","done","result","isUriValid","faultMessage","validator","isPropertiesNotEmpty","read","sourceUriValidatorReady","authIsEmpty","basicHttpAuth","password","userName","authInitialized","write","parameters","observableArray","resultUri","_getResultUri","computed","editorsInitialized","validationRequested","defaultValidationErrorMessage","endpointUriDisplayName","reject","resultDeferred","Deferred","validationResultHandler","data","state","resolve","validateJsonUri","fail","promise","_isCollectionValid","collectionName","every","x","name","_getSourceUriInfo","localizationId","editorTemplates","getEditor","validatorOptions","isRequired","editorOptions","elementAttr","title","_self","e","onDisposed","validationRules","type","assignValueFirst","isDeferred","validationCallback","_getBasicHttpAuthInfo","basicHttpAuthName","info","createPasswordSerializationInfo","onValidatorInitialied","authNmeValidatorInstance","authNameValidatorDisposed","reevaluate","_getParametersInfo","array","addHandler","newName","getUniqueNameForNamedObjectsArray","JsonParameter","template","itemsProvider","nameValidationRules","_getResultUriInfo","_resultUri","readOnly","uriParts","split","url","query","_appendPathSegmentsToUri","_appendQuerySegmentsToUri","segments","filter","itemType","map","forEach","segment","replace","originalQuery","separator","uriArguments","querySegments","q","_applyParametersToSource","parametersByType","reduce","parameter","_a","parameterTypeToPropertyMap","resultUriInfo","sourceParameters","concat","disposeObservableArray","subscribeProperties","subscribeArray","item"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (query-builder\\wizard\\internal\\_jsonSourceSettings.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JsonDataSourceJsonSourcePageUriSettings = exports.JsonDataSourceJsonSourcePageStringSettings = exports.JsonDataSourceJsonSourcePageSettingsBase = void 0;\nvar ko = require(\"knockout\");\nvar $ = require(\"jquery\");\nvar localization_utils_1 = require(\"../../../property-grid/localization/localization_utils\");\nvar utils_1 = require(\"../../../serializer/utils\");\nvar jsonSourceSettings_1 = require(\"./jsonSourceSettings\");\nvar propertygrid_1 = require(\"../../../property-grid/propertygrid\");\nvar jsonDataSource_1 = require(\"../../dataSource/json/jsonDataSource\");\nvar _jsonDataSourceWidgets_1 = require(\"./_jsonDataSourceWidgets\");\nvar jsonAuthenticationInfo_1 = require(\"../../dataSource/json/jsonAuthenticationInfo\");\nvar editorsInfo_1 = require(\"../../../property-grid/widgets/editorsInfo\");\nvar _getNameHelpers_1 = require(\"../../../core/internal/_getNameHelpers\");\nvar jsonParameter_1 = require(\"../../dataSource/json/jsonParameter\");\nvar _utils_1 = require(\"./_utils\");\nvar _utils_2 = require(\"../../../core/utils/_utils\");\nvar JsonDataSourceJsonSourcePageSettingsBase = (function (_super) {\n    __extends(JsonDataSourceJsonSourcePageSettingsBase, _super);\n    function JsonDataSourceJsonSourcePageSettingsBase() {\n        var _this = _super.call(this) || this;\n        _this._validationGroup = null;\n        _this._validationSummary = null;\n        _this.validationGroup = {\n            onInitialized: function (args) { return _this._onValidationGroupInitialized(args); },\n            onDisposing: function (args) { return _this._onValidationGroupDisposing(args); },\n            validate: function () { return _this._validate(); }\n        };\n        _this.validationSummary = {\n            onInitialized: function (args) { return _this._onValidationSummaryInitialized(args); },\n            onDisposing: function (args) { return _this._onValidationSummaryDisposing(args); }\n        };\n        _this._disposables.push(_this.grid = new propertygrid_1.ObjectProperties(ko.observable(_this)));\n        return _this;\n    }\n    JsonDataSourceJsonSourcePageSettingsBase.prototype.dispose = function () {\n        this._validationSummary && this._validationSummary.dispose();\n        this._validationGroup && this._validationGroup.dispose();\n        this._validationSummary = null;\n        this._validationGroup = null;\n        _super.prototype.dispose.call(this);\n    };\n    JsonDataSourceJsonSourcePageSettingsBase.prototype._onValidationGroupInitialized = function (args) {\n        this._validationGroup = args.component;\n    };\n    JsonDataSourceJsonSourcePageSettingsBase.prototype._onValidationGroupDisposing = function (args) {\n        this._validationGroup = null;\n    };\n    JsonDataSourceJsonSourcePageSettingsBase.prototype._onValidationSummaryInitialized = function (args) {\n        this._validationSummary = args.component;\n    };\n    JsonDataSourceJsonSourcePageSettingsBase.prototype._onValidationSummaryDisposing = function (args) {\n        this._validationSummary = null;\n    };\n    JsonDataSourceJsonSourcePageSettingsBase.prototype._repaintSummary = function () {\n        this._validationSummary && this._validationSummary.repaint();\n    };\n    JsonDataSourceJsonSourcePageSettingsBase.prototype._validate = function () {\n        this._validationSummary && this._validationGroup && this._validationGroup.validate();\n    };\n    return JsonDataSourceJsonSourcePageSettingsBase;\n}(utils_1.Disposable));\nexports.JsonDataSourceJsonSourcePageSettingsBase = JsonDataSourceJsonSourcePageSettingsBase;\nvar JsonDataSourceJsonSourcePageStringSettings = (function (_super) {\n    __extends(JsonDataSourceJsonSourcePageStringSettings, _super);\n    function JsonDataSourceJsonSourcePageStringSettings() {\n        var _this = _super.call(this) || this;\n        _this._validatorsReady = ko.observable(false);\n        _this.isValid = ko.pureComputed(function () {\n            var isJsonValid = _this._isJsonSourceValid(_this.stringSource());\n            var aceHasErrors = _this.aceEditorHasErrors();\n            return isJsonValid && !aceHasErrors;\n        });\n        _this.validationGroup = null;\n        _this.validationSummary = null;\n        _this.stringSource = ko.observable('');\n        _this.aceEditorHasErrors = ko.observable(false);\n        _this.cssClass = { 'dxrd-wizard-json-string-source-grid': true };\n        _this._disposables.push(_this.grid = new propertygrid_1.ObjectProperties(ko.observable(_this)));\n        return _this;\n    }\n    JsonDataSourceJsonSourcePageStringSettings.prototype.onChange = function (_onChange) {\n        var _this = this;\n        var timeoutId = null;\n        var localOnChange = function () {\n            _onChange();\n            clearTimeout(timeoutId);\n            timeoutId = setTimeout(function () { return _this._validate(); }, 1);\n        };\n        this._disposables.push(this.stringSource.subscribe(function (newVal) { return localOnChange(); }));\n    };\n    JsonDataSourceJsonSourcePageStringSettings.prototype._isJsonSourceValid = function (jsonString) {\n        if (!jsonString)\n            return false;\n        var isJsonSourceValid = true;\n        try {\n            JSON.parse(jsonString);\n        }\n        catch (ex) {\n            isJsonSourceValid = false;\n        }\n        return isJsonSourceValid;\n    };\n    JsonDataSourceJsonSourcePageStringSettings.prototype.isEmpty = function () {\n        return !this.stringSource();\n    };\n    JsonDataSourceJsonSourcePageStringSettings.prototype.reset = function () {\n        this.stringSource('');\n    };\n    JsonDataSourceJsonSourcePageStringSettings.prototype.setValue = function (dataSource) {\n        this.stringSource(dataSource.source.json());\n    };\n    JsonDataSourceJsonSourcePageStringSettings.prototype.getInfo = function () {\n        return [\n            {\n                propertyName: 'stringSource', defaultVal: '', displayName: 'JSON String', editor: {\n                    header: 'dx-jsonwizard-jsonstring-editor', editorType: _jsonDataSourceWidgets_1.JsonStringEditor, custom: 'dx-property-json-string-editor'\n                }\n            }\n        ];\n    };\n    JsonDataSourceJsonSourcePageStringSettings.prototype.applySettings = function (jsonDataSource) {\n        jsonDataSource.source.uri(undefined);\n        jsonDataSource.source.json(this.stringSource());\n        jsonDataSource.source.authenticationInfo = new jsonAuthenticationInfo_1.JsonAuthenticationInfo({});\n        jsonDataSource.source.headers([]);\n        jsonDataSource.source.queryParameters([]);\n        jsonDataSource.source.pathParameters([]);\n    };\n    return JsonDataSourceJsonSourcePageStringSettings;\n}(JsonDataSourceJsonSourcePageSettingsBase));\nexports.JsonDataSourceJsonSourcePageStringSettings = JsonDataSourceJsonSourcePageStringSettings;\nvar JsonDataSourceJsonSourcePageUriSettings = (function (_super) {\n    __extends(JsonDataSourceJsonSourcePageUriSettings, _super);\n    function JsonDataSourceJsonSourcePageUriSettings(_requestWrapper, _itemsProvider) {\n        var _this = _super.call(this) || this;\n        _this._requestWrapper = _requestWrapper;\n        _this._itemsProvider = _itemsProvider;\n        _this._isUriValid = ko.observable(false);\n        _this._lastValidatedJsonSourceJSON = '';\n        _this._authNameValidatorInstance = null;\n        _this._isInitUri = true;\n        _this._collectionItemNamePlaceholder = localization_utils_1.getLocalization('Name', 'AnalyticsCoreStringId.CollectionEditor_Name_Placeholder');\n        _this._lastValidateDeferred = null;\n        _this._sourceUriValidatorsReady = ko.observable(true);\n        _this._basicAuthValidatorsReady = ko.observable(false);\n        _this._validationRequested = ko.observable(false).extend({ deferred: true });\n        _this._noEmptyProperties = ko.pureComputed(function () {\n            var isBasicHttpAuthValid = _this._isBasicHttpAuthValid();\n            var isParametersValid = _this._isParametersValid();\n            var sourceUriNotEmpty = !!_this.sourceUri();\n            return isBasicHttpAuthValid && isParametersValid && sourceUriNotEmpty;\n        });\n        _this._lastValidationMessage = ko.observable();\n        _this._getSerializedUriSource = function (jsonDataSource) {\n            if (jsonDataSource === void 0) { jsonDataSource = new jsonDataSource_1.JsonDataSource({}); }\n            _this.applySettings(jsonDataSource);\n            return JSON.stringify(jsonDataSource.source.serialize(true));\n        };\n        _this._sourceUriValidationCallback = function (params) {\n            if (!_this.sourceUri()) {\n                if (_this._isInitUri) {\n                    _this._isInitUri = false;\n                    return true;\n                }\n                params.rule.message = _jsonDataSourceWidgets_1.getLocalizedValidationErrorMessage(null, localization_utils_1.getLocalization('Web Service Endpoint (URI):', 'DataAccessUIStringId.WizardPageChooseJsonSource_URI'));\n                return false;\n            }\n            var serverValidationResult = false;\n            _this._isInitUri = false;\n            var serializedJsonSource = _this._getSerializedUriSource();\n            if (serializedJsonSource != _this._lastValidatedJsonSourceJSON) {\n                if (!_this._lastValidationMessage())\n                    _this._lastValidationMessage(localization_utils_1.getLocalization('Validation...', 'AnalyticsCoreStringId.Validation'));\n                _this._validateUriSource().done(function (result) {\n                    serverValidationResult = params.rule.isValid = result.isUriValid;\n                    result.faultMessage && (params.rule.message = result.faultMessage);\n                    _this._lastValidationMessage(serverValidationResult ? null : result.faultMessage);\n                    params.validator.validate();\n                    setTimeout(function () { return _this._repaintSummary(); }, 1);\n                });\n            }\n            else {\n                return !_this._lastValidationMessage();\n            }\n            return serverValidationResult;\n        };\n        _this.isValid = ko.pureComputed(function () {\n            var isPropertiesNotEmpty = _this._noEmptyProperties();\n            var isUriValid = _this._isUriValid();\n            return isPropertiesNotEmpty && isUriValid;\n        });\n        _this._validatorsReady = ko.pureComputed({\n            read: function () {\n                var sourceUriValidatorReady = _this._sourceUriValidatorsReady();\n                var authIsEmpty = !_this.basicHttpAuth.password() && !_this.basicHttpAuth.userName();\n                var authInitialized = _this._basicAuthValidatorsReady();\n                return sourceUriValidatorReady && (authInitialized || authIsEmpty);\n            },\n            write: function (newVal) {\n                _this._basicAuthValidatorsReady(newVal);\n            }\n        });\n        _this.sourceUri = ko.observable('');\n        _this.basicHttpAuth = {\n            password: ko.observable(''),\n            userName: ko.observable(''),\n        };\n        _this.parameters = ko.observableArray([]);\n        _this._disposables.push(_this.resultUri = ko.pureComputed(function () {\n            return _this._getResultUri();\n        }));\n        _this._disposables.push(_this.grid = new propertygrid_1.ObjectProperties(ko.observable(_this)));\n        _this._disposables.push(ko.computed(function () {\n            var editorsInitialized = _this._validatorsReady();\n            var validationRequested = _this._validationRequested();\n            if (editorsInitialized && validationRequested) {\n                _this._validate();\n            }\n        }));\n        _this._disposables.push(_this._validatorsReady);\n        return _this;\n    }\n    JsonDataSourceJsonSourcePageUriSettings.prototype._validateUriSource = function () {\n        var _this = this;\n        var defaultValidationErrorMessage = localization_utils_1.getLocalization('Invalid URI.', 'AnalyticsCoreStringId.ReportDesigner_Wizard_JsonSource_UriValidationError');\n        var endpointUriDisplayName = localization_utils_1.getLocalization('Web Service Endpoint (URI):', 'DataAccessUIStringId.WizardPageChooseJsonSource_URI');\n        this._isUriValid(false);\n        if (this._lastValidateDeferred) {\n            this._lastValidateDeferred.reject();\n        }\n        var resultDeferred = $.Deferred();\n        this._lastValidateDeferred = resultDeferred;\n        try {\n            var jsonDataSource = new jsonDataSource_1.JsonDataSource({});\n            var serializedJsonSource = this._getSerializedUriSource(jsonDataSource);\n            this._lastValidatedJsonSourceJSON = serializedJsonSource;\n            var validationResultHandler = function (data) {\n                if (resultDeferred.state && resultDeferred.state() === 'rejected')\n                    return;\n                _this._isUriValid(data.isUriValid);\n                var faultMessage = _jsonDataSourceWidgets_1.getLocalizedValidationErrorMessage((data.isUriValid ? '' : data && data.faultMessage) || defaultValidationErrorMessage, endpointUriDisplayName);\n                resultDeferred.resolve({\n                    isUriValid: data.isUriValid,\n                    faultMessage: faultMessage\n                });\n            };\n            this._requestWrapper.validateJsonUri(jsonDataSource)\n                .done(validationResultHandler)\n                .fail(function (data) {\n                if (data === void 0) { data = {}; }\n                data.isValid = false;\n                validationResultHandler(data);\n            });\n        }\n        catch (ex) {\n            this._isUriValid(false);\n        }\n        return resultDeferred.promise();\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._isCollectionValid = function (collectionName) {\n        return !this[collectionName]().length || this[collectionName]().every(function (x) { return x.name(); });\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._isParametersValid = function () {\n        return this._isCollectionValid('parameters');\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._isBasicHttpAuthValid = function () {\n        return !this.basicHttpAuth.password() || !!this.basicHttpAuth.userName();\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._getSourceUriInfo = function () {\n        var _this = this;\n        var sourceUri = {\n            propertyName: 'sourceUri',\n            displayName: 'Web Service Endpoint (URI):',\n            localizationId: 'DataAccessUIStringId.WizardPageChooseJsonSource_URI',\n            defaultVal: '',\n            editor: editorsInfo_1.editorTemplates.getEditor('text'),\n            validatorOptions: null,\n            isRequired: true,\n            editorOptions: {\n                elementAttr: {\n                    title: this.sourceUri\n                }\n            }\n        };\n        var _self = this;\n        sourceUri.validatorOptions = {\n            onInitialized: function (e) {\n                _this._sourceUriValidatorsReady(true);\n            },\n            onDisposed: function () {\n                _this._sourceUriValidatorsReady(false);\n            },\n            validationRules: [\n                {\n                    type: 'custom',\n                    assignValueFirst: true,\n                    isDeferred: ko.pureComputed(function () { return _this._noEmptyProperties(); }),\n                    get message() {\n                        return _self._lastValidationMessage();\n                    },\n                    validationCallback: this._sourceUriValidationCallback\n                }\n            ]\n        };\n        return sourceUri;\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._getBasicHttpAuthInfo = function () {\n        var _this = this;\n        var basicHttpAuthName = {\n            propertyName: 'userName', displayName: 'Username:', localizationId: 'DataAccessUIStringId.WizardPageConfigureJsonConnection_UsernameText', editor: editorsInfo_1.editorTemplates.getEditor('text'),\n            validatorOptions: undefined,\n        };\n        var basicHttpAuth = {\n            propertyName: 'basicHttpAuth', displayName: 'Basic HTTP Authentication', localizationId: 'DataAccessUIStringId.WizardPageConfigureJsonConnection_BasicHttpAuthText', info: [\n                basicHttpAuthName,\n                _utils_2.createPasswordSerializationInfo({ propertyName: 'password', displayName: 'Password:', localizationId: 'DataAccessUIStringId.WizardPageConfigureJsonConnection_PasswordText' }, false),\n            ], editor: editorsInfo_1.editorTemplates.getEditor('objecteditor')\n        };\n        var onValidatorInitialied = function (e) {\n            var authNmeValidatorInstance = e && e.component;\n            if (_this._authNameValidatorInstance && _this._authNameValidatorInstance != authNmeValidatorInstance) {\n                _this._authNameValidatorInstance.dispose();\n            }\n            _this._authNameValidatorInstance = authNmeValidatorInstance;\n            _this._basicAuthValidatorsReady(true);\n        };\n        var authNameValidatorDisposed = function () {\n            _this._authNameValidatorInstance = null;\n        };\n        basicHttpAuthName.validatorOptions = {\n            onInitialized: onValidatorInitialied,\n            onDisposed: authNameValidatorDisposed,\n            validationRules: [{\n                    type: 'custom',\n                    reevaluate: true,\n                    assignValueFirst: true,\n                    get message() {\n                        return _jsonDataSourceWidgets_1.getLocalizedValidationErrorMessage(null, localization_utils_1.getLocalization(basicHttpAuth.displayName, basicHttpAuth.localizationId), localization_utils_1.getLocalization(basicHttpAuthName.displayName, basicHttpAuthName.localizationId));\n                    },\n                    validationCallback: function (params) {\n                        return _this._isBasicHttpAuthValid();\n                    }\n                }]\n        };\n        return basicHttpAuth;\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._getParametersInfo = function () {\n        var _this = this;\n        var parameters = {\n            propertyName: 'parameters', displayName: 'Parameters', localizationId: 'AnalyticsCoreStringId.QueryBuilder_Parameters',\n            array: true,\n            addHandler: function () {\n                var newName = _getNameHelpers_1.getUniqueNameForNamedObjectsArray(_this.parameters(), 'parameter');\n                return jsonParameter_1.JsonParameter.from({ '@Name': newName });\n            },\n            editor: editorsInfo_1.editorTemplates.getEditor('commonCollection'),\n            editorOptions: null,\n            template: '#dx-jsonwizard-parametercollection'\n        };\n        parameters.editorOptions = {\n            itemsProvider: this._itemsProvider,\n            nameValidationRules: [{\n                    type: 'required',\n                    get message() {\n                        return _jsonDataSourceWidgets_1.getLocalizedValidationErrorMessage(null, localization_utils_1.getLocalization(parameters.displayName, parameters.localizationId), this._collectionItemNamePlaceholder);\n                    }\n                }]\n        };\n        return parameters;\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._getResultUriInfo = function () {\n        var _resultUri = {\n            propertyName: 'resultUri',\n            displayName: 'Resulting URI:',\n            localizationId: 'DataAccessUIStringId.WizardPageChooseJsonSource_ResultingUri',\n            defaultVal: '',\n            editor: editorsInfo_1.editorTemplates.getEditor('text'),\n            editorOptions: {\n                readOnly: true,\n                elementAttr: {\n                    title: this.resultUri\n                }\n            }\n        };\n        return _resultUri;\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._getResultUri = function () {\n        if (!this.sourceUri() || !this._isUriValid() || !this._isParametersValid())\n            return null;\n        if (this.sourceUri() && this.parameters().length === 0)\n            return this.sourceUri();\n        var uriParts = this.sourceUri().split('?');\n        var url = uriParts[0];\n        var query = uriParts[1];\n        url = this._appendPathSegmentsToUri(uriParts[0]);\n        return this._appendQuerySegmentsToUri(url, query);\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._appendPathSegmentsToUri = function (uri) {\n        var segments = this.parameters()\n            .filter(function (p) { return p.itemType() === 'PathParameter'; })\n            .map(function (p) { return '{' + p.name() + '}'; });\n        segments.forEach(function (segment) {\n            uri = uri.replace(/[\\/]+$/g, '') + '/' + segment.replace(/^[\\/]+/g, '');\n        });\n        return uri;\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._appendQuerySegmentsToUri = function (uri, originalQuery) {\n        var separator = '';\n        var uriArguments = originalQuery || '';\n        var querySegments = this.parameters()\n            .filter(function (p) { return p.itemType() === 'QueryParameter'; })\n            .map(function (p) { return p.name() + '={?}'; });\n        querySegments.forEach(function (q) {\n            if (!!uriArguments)\n                uriArguments += '&';\n            uriArguments += q;\n        });\n        if (uriArguments.length > 0)\n            uri += '?' + uriArguments;\n        return uri;\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._onValidationSummaryInitialized = function (args) {\n        var _this = this;\n        _super.prototype._onValidationSummaryInitialized.call(this, args);\n        this._isInitUri = true;\n        setTimeout(function () {\n            _this._validate();\n        }, 1);\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._applyParametersToSource = function (jsonDataSource) {\n        var parametersByType = this.parameters().reduce(function (result, parameter) {\n            var _a;\n            return (__assign(__assign({}, result), (_a = {}, _a[parameter.itemType()] = __spreadArray(__spreadArray([], (result[parameter.itemType()] || [])), [parameter]), _a)));\n        }, {});\n        ['PathParameter', 'QueryParameter', 'Header'].forEach(function (type) {\n            if (parametersByType[type])\n                jsonDataSource.source[jsonSourceSettings_1.parameterTypeToPropertyMap[type]](parametersByType[type]);\n        });\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype.applySettings = function (jsonDataSource) {\n        jsonDataSource.source.uri(this.sourceUri());\n        jsonDataSource.source.json(undefined);\n        jsonDataSource.source.authenticationInfo.password(this.basicHttpAuth.password());\n        jsonDataSource.source.authenticationInfo.userName(this.basicHttpAuth.userName());\n        this._applyParametersToSource(jsonDataSource);\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype.getInfo = function () {\n        var sourceUri = this._getSourceUriInfo();\n        var basicHttpAuth = this._getBasicHttpAuthInfo();\n        var parameters = this._getParametersInfo();\n        var resultUriInfo = this._getResultUriInfo();\n        return [sourceUri, basicHttpAuth, parameters, resultUriInfo];\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype.reset = function () {\n        this.sourceUri('');\n        this.basicHttpAuth.password('');\n        this.basicHttpAuth.userName('');\n        this.parameters([]);\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype.setValue = function (dataSource) {\n        this.sourceUri(dataSource.source.uri());\n        this.basicHttpAuth.userName(dataSource.source.authenticationInfo.userName());\n        this.basicHttpAuth.password(dataSource.source.authenticationInfo.password());\n        var sourceParameters = [].concat.apply([], [dataSource.source.pathParameters(), dataSource.source.queryParameters(), dataSource.source.headers()]);\n        this.parameters(sourceParameters);\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype.dispose = function () {\n        this._authNameValidatorInstance && this._authNameValidatorInstance.dispose();\n        if (this._lastValidateDeferred) {\n            this._lastValidateDeferred.reject();\n            this._lastValidateDeferred = null;\n        }\n        _super.prototype.dispose.call(this);\n        this.disposeObservableArray(this.parameters);\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype.onChange = function (_onChange) {\n        var _a;\n        var _this = this;\n        var timeoutId = null;\n        var localOnChange = function () {\n            _onChange();\n            clearTimeout(timeoutId);\n            timeoutId = setTimeout(function () { return _this._validate(); }, 1);\n        };\n        (_a = this._disposables).push.apply(_a, _utils_1.subscribeProperties([this.sourceUri, this.basicHttpAuth.password, this.basicHttpAuth.userName, this.resultUri], localOnChange));\n        this._disposables.push(_utils_1.subscribeArray(this.parameters, function (item) {\n            var _a;\n            (_a = item._disposables).push.apply(_a, _utils_1.subscribeProperties([item.name, item.itemType, item.value], localOnChange));\n        }, localOnChange));\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype.isEmpty = function () {\n        return !this.sourceUri();\n    };\n    JsonDataSourceJsonSourcePageUriSettings.prototype._validate = function () {\n        if (this._validationSummary && this._validationGroup) {\n            if (this._validatorsReady()) {\n                this._validationGroup.validate();\n                this._validationRequested(false);\n            }\n            else {\n                this._validationRequested(true);\n            }\n        }\n    };\n    return JsonDataSourceJsonSourcePageUriSettings;\n}(JsonDataSourceJsonSourcePageSettingsBase));\nexports.JsonDataSourceJsonSourcePageUriSettings = JsonDataSourceJsonSourcePageUriSettings;\n"]},"metadata":{},"sourceType":"script"}