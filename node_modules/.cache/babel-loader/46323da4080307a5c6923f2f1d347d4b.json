{"ast":null,"code":"/**\n* DevExpress Analytics (query-builder\\widgets\\_manageFederatedQueriesEditor.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ManageFederatedQueriesEditor = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _arrayutils_1 = require(\"../../core/utils/_arrayutils\");\n\nvar _popupEditorBase_1 = require(\"../../core/widgets/_popupEditorBase\");\n\nvar _localization_1 = require(\"../../property-grid/localization/_localization\");\n\nvar templateUtils_1 = require(\"../../property-grid/widgets/templateUtils\");\n\nvar utils_1 = require(\"../dataSource/utils\");\n\nvar _federatedQueriesTreeNode_1 = require(\"../wizard/internal/federationDataSource/_federatedQueriesTreeNode\");\n\nvar _federatedQueriesHelper_1 = require(\"./_federatedQueriesHelper\");\n\nvar ManageFederatedQueriesEditor = function (_super) {\n  __extends(ManageFederatedQueriesEditor, _super);\n\n  function ManageFederatedQueriesEditor(_dataSource, _callBack, rtl) {\n    if (rtl === void 0) {\n      rtl = false;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._dataSource = _dataSource;\n    _this._callBack = _callBack;\n    _this.rtl = rtl;\n    _this.className = 'dxrd-federated-manageQueries-editor';\n\n    _this._disposables.push(_this._queriesPopupHelper = new _federatedQueriesHelper_1.FederatedQueriesHelper(_this._dataSource, _this._dataSource.queries, function () {\n      return null;\n    }, rtl));\n\n    _this._createAddQueryButton();\n\n    _this.queriesStoreData = ko.pureComputed(function () {\n      return _this._dataSource && _this._dataSource.queries().map(function (x) {\n        return {\n          name: x.alias(),\n          id: x.alias(),\n          type: utils_1.FederationQueryType[x.queryType()]\n        };\n      });\n    });\n\n    _this._disposables.push(_this.queriesStoreData);\n\n    _this.queriesGrid = {\n      rtlEnabled: rtl,\n      dataSource: _this.queriesStoreData,\n      showColumnLines: false,\n      hoverStateEnabled: true,\n      scrolling: {\n        mode: 'infinite'\n      },\n      height: '100%',\n      editing: {\n        mode: 'cell',\n        allowUpdating: true\n      },\n      onRowUpdating: function (event) {\n        event.oldData.alias = event.newData.name;\n      },\n      columns: [{\n        dataField: 'name',\n\n        get caption() {\n          return _localization_1.getLocalization('Name', 'AnalyticsCoreStringId.CollectionEditor_Name_Placeholder');\n        }\n\n      }, {\n        type: 'buttons',\n        width: 100,\n        buttons: [{\n          icon: 'edit',\n          onClick: function (e) {\n            switch (e.row.data.type) {\n              case utils_1.FederationQueryType.SelectNode:\n                _this._queriesPopupHelper.callBacks.joinCallBack(e.row.data.id);\n\n                break;\n\n              case utils_1.FederationQueryType.UnionNode:\n                _this._queriesPopupHelper.callBacks.unionCallBack(e.row.data.id);\n\n                break;\n\n              case utils_1.FederationQueryType.TransformationNode:\n                _this._queriesPopupHelper.callBacks.transformCallBack(e.row.data.id);\n\n                break;\n            }\n          },\n          cssClass: 'dxrd-manage-queries-actions dxd-icon-highlighted dxrd-image-operations-edit-query',\n          template: templateUtils_1.getTemplate('dxrd-svg-operations-edit')\n        }, {\n          icon: 'delete',\n          onClick: function (e) {\n            _this._dataSource.removeQuery(e.row.data.id);\n          },\n          cssClass: 'dxrd-manage-queries-actions dxd-icon-highlighted dxrd-image-recycle-bin',\n          template: templateUtils_1.getTemplate('dxrd-svg-operations-recycle_bin')\n        }]\n      }]\n    };\n    return _this;\n  }\n\n  ManageFederatedQueriesEditor.prototype._createAddQueryButton = function () {\n    var addQueryTemplate = 'dxrd-managequeries-selectbox';\n    var queriesTreeNode = new _federatedQueriesTreeNode_1.FederatedQueriesTreeNode('queries', _localization_1.getLocalization('Federated Queries', 'DataAccessUIStringId.FederatedQueryCollectionList_Title'), 'list', false, ko.observable({\n      showQbCallBacks: this._queriesPopupHelper.callBacks\n    }));\n    var popoverListItems = queriesTreeNode.popoverListItems();\n    var addAction = {\n      text: _localization_1.getLocalization('Add query', 'AnalyticsCoreStringId.SqlDSWizard_AddQuery'),\n      items: popoverListItems.map(function (x) {\n        return {\n          text: x.name,\n          onClick: x.addAction\n        };\n      }),\n      dropDownOptions: {\n        width: 150,\n        container: '.dx-designer-viewport'\n      },\n      useItemTextAsTitle: false\n    };\n    this.buttonItems.push({\n      toolbar: 'bottom',\n      location: 'before',\n      template: function () {\n        return templateUtils_1.getTemplate(addQueryTemplate);\n      },\n      options: addAction\n    });\n  };\n\n  ManageFederatedQueriesEditor.prototype.save = function () {\n    var _this = this;\n\n    this.queriesStoreData().forEach(function (data) {\n      var query = _arrayutils_1.findFirstItemMatchesCondition(_this._dataSource.queries(), function (query) {\n        return query.alias() === data.id;\n      });\n\n      query.sources().forEach(function (x) {\n        return _this._dataSource.addSource(x);\n      });\n\n      if (query && data.id !== data.name) {\n        query.alias(data.name);\n      }\n    });\n\n    this._callBack();\n\n    _super.prototype.save.call(this);\n\n    this.dispose();\n  };\n\n  ManageFederatedQueriesEditor.prototype.canSave = function () {\n    return !!this.queriesStoreData().length;\n  };\n\n  ManageFederatedQueriesEditor.prototype.close = function () {\n    _super.prototype.close.call(this);\n\n    this.dispose();\n  };\n\n  ManageFederatedQueriesEditor.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this.queriesGrid = null;\n    this._dataSource = null;\n    this._callBack = null;\n  };\n\n  ManageFederatedQueriesEditor.prototype.title = function () {\n    return _localization_1.getLocalization('Manage Queries', 'DataAccessUIStringId.FederatedQueryCollectionEditorForm_Title');\n  };\n\n  return ManageFederatedQueriesEditor;\n}(_popupEditorBase_1.PopupEditorBase);\n\nexports.ManageFederatedQueriesEditor = ManageFederatedQueriesEditor;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/query-builder/widgets/_manageFederatedQueriesEditor.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","ManageFederatedQueriesEditor","ko","require","_arrayutils_1","_popupEditorBase_1","_localization_1","templateUtils_1","utils_1","_federatedQueriesTreeNode_1","_federatedQueriesHelper_1","_super","_dataSource","_callBack","rtl","_this","className","_disposables","push","_queriesPopupHelper","FederatedQueriesHelper","queries","_createAddQueryButton","queriesStoreData","pureComputed","map","x","name","alias","id","type","FederationQueryType","queryType","queriesGrid","rtlEnabled","dataSource","showColumnLines","hoverStateEnabled","scrolling","mode","height","editing","allowUpdating","onRowUpdating","event","oldData","newData","columns","dataField","caption","getLocalization","width","buttons","icon","onClick","e","row","data","SelectNode","callBacks","joinCallBack","UnionNode","unionCallBack","TransformationNode","transformCallBack","cssClass","template","getTemplate","removeQuery","addQueryTemplate","queriesTreeNode","FederatedQueriesTreeNode","observable","showQbCallBacks","popoverListItems","addAction","text","items","dropDownOptions","container","useItemTextAsTitle","buttonItems","toolbar","location","options","save","forEach","query","findFirstItemMatchesCondition","sources","addSource","dispose","canSave","length","close","title","PopupEditorBase"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (query-builder\\widgets\\_manageFederatedQueriesEditor.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ManageFederatedQueriesEditor = void 0;\nvar ko = require(\"knockout\");\nvar _arrayutils_1 = require(\"../../core/utils/_arrayutils\");\nvar _popupEditorBase_1 = require(\"../../core/widgets/_popupEditorBase\");\nvar _localization_1 = require(\"../../property-grid/localization/_localization\");\nvar templateUtils_1 = require(\"../../property-grid/widgets/templateUtils\");\nvar utils_1 = require(\"../dataSource/utils\");\nvar _federatedQueriesTreeNode_1 = require(\"../wizard/internal/federationDataSource/_federatedQueriesTreeNode\");\nvar _federatedQueriesHelper_1 = require(\"./_federatedQueriesHelper\");\nvar ManageFederatedQueriesEditor = (function (_super) {\n    __extends(ManageFederatedQueriesEditor, _super);\n    function ManageFederatedQueriesEditor(_dataSource, _callBack, rtl) {\n        if (rtl === void 0) { rtl = false; }\n        var _this = _super.call(this) || this;\n        _this._dataSource = _dataSource;\n        _this._callBack = _callBack;\n        _this.rtl = rtl;\n        _this.className = 'dxrd-federated-manageQueries-editor';\n        _this._disposables.push(_this._queriesPopupHelper = new _federatedQueriesHelper_1.FederatedQueriesHelper(_this._dataSource, _this._dataSource.queries, function () { return null; }, rtl));\n        _this._createAddQueryButton();\n        _this.queriesStoreData = ko.pureComputed(function () { return _this._dataSource && _this._dataSource.queries().map(function (x) {\n            return {\n                name: x.alias(),\n                id: x.alias(),\n                type: utils_1.FederationQueryType[x.queryType()]\n            };\n        }); });\n        _this._disposables.push(_this.queriesStoreData);\n        _this.queriesGrid = {\n            rtlEnabled: rtl,\n            dataSource: _this.queriesStoreData,\n            showColumnLines: false,\n            hoverStateEnabled: true,\n            scrolling: { mode: 'infinite' },\n            height: '100%',\n            editing: {\n                mode: 'cell',\n                allowUpdating: true,\n            },\n            onRowUpdating: function (event) {\n                event.oldData.alias = event.newData.name;\n            },\n            columns: [{\n                    dataField: 'name',\n                    get caption() {\n                        return _localization_1.getLocalization('Name', 'AnalyticsCoreStringId.CollectionEditor_Name_Placeholder');\n                    },\n                }, {\n                    type: 'buttons',\n                    width: 100,\n                    buttons: [\n                        {\n                            icon: 'edit',\n                            onClick: function (e) {\n                                switch (e.row.data.type) {\n                                    case utils_1.FederationQueryType.SelectNode:\n                                        _this._queriesPopupHelper.callBacks.joinCallBack(e.row.data.id);\n                                        break;\n                                    case utils_1.FederationQueryType.UnionNode:\n                                        _this._queriesPopupHelper.callBacks.unionCallBack(e.row.data.id);\n                                        break;\n                                    case utils_1.FederationQueryType.TransformationNode:\n                                        _this._queriesPopupHelper.callBacks.transformCallBack(e.row.data.id);\n                                        break;\n                                }\n                            },\n                            cssClass: 'dxrd-manage-queries-actions dxd-icon-highlighted dxrd-image-operations-edit-query',\n                            template: templateUtils_1.getTemplate('dxrd-svg-operations-edit'),\n                        },\n                        {\n                            icon: 'delete',\n                            onClick: function (e) {\n                                _this._dataSource.removeQuery(e.row.data.id);\n                            },\n                            cssClass: 'dxrd-manage-queries-actions dxd-icon-highlighted dxrd-image-recycle-bin',\n                            template: templateUtils_1.getTemplate('dxrd-svg-operations-recycle_bin'),\n                        }\n                    ]\n                }\n            ]\n        };\n        return _this;\n    }\n    ManageFederatedQueriesEditor.prototype._createAddQueryButton = function () {\n        var addQueryTemplate = 'dxrd-managequeries-selectbox';\n        var queriesTreeNode = new _federatedQueriesTreeNode_1.FederatedQueriesTreeNode('queries', _localization_1.getLocalization('Federated Queries', 'DataAccessUIStringId.FederatedQueryCollectionList_Title'), 'list', false, ko.observable({ showQbCallBacks: this._queriesPopupHelper.callBacks }));\n        var popoverListItems = queriesTreeNode.popoverListItems();\n        var addAction = {\n            text: _localization_1.getLocalization('Add query', 'AnalyticsCoreStringId.SqlDSWizard_AddQuery'),\n            items: popoverListItems.map(function (x) {\n                return {\n                    text: x.name,\n                    onClick: x.addAction\n                };\n            }),\n            dropDownOptions: {\n                width: 150,\n                container: '.dx-designer-viewport',\n            },\n            useItemTextAsTitle: false\n        };\n        this.buttonItems.push({ toolbar: 'bottom', location: 'before', template: function () { return templateUtils_1.getTemplate(addQueryTemplate); }, options: addAction });\n    };\n    ManageFederatedQueriesEditor.prototype.save = function () {\n        var _this = this;\n        this.queriesStoreData().forEach(function (data) {\n            var query = _arrayutils_1.findFirstItemMatchesCondition(_this._dataSource.queries(), function (query) { return query.alias() === data.id; });\n            query.sources().forEach(function (x) { return _this._dataSource.addSource(x); });\n            if (query && data.id !== data.name) {\n                query.alias(data.name);\n            }\n        });\n        this._callBack();\n        _super.prototype.save.call(this);\n        this.dispose();\n    };\n    ManageFederatedQueriesEditor.prototype.canSave = function () {\n        return !!this.queriesStoreData().length;\n    };\n    ManageFederatedQueriesEditor.prototype.close = function () {\n        _super.prototype.close.call(this);\n        this.dispose();\n    };\n    ManageFederatedQueriesEditor.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.queriesGrid = null;\n        this._dataSource = null;\n        this._callBack = null;\n    };\n    ManageFederatedQueriesEditor.prototype.title = function () {\n        return _localization_1.getLocalization('Manage Queries', 'DataAccessUIStringId.FederatedQueryCollectionEditorForm_Title');\n    };\n    return ManageFederatedQueriesEditor;\n}(_popupEditorBase_1.PopupEditorBase));\nexports.ManageFederatedQueriesEditor = ManageFederatedQueriesEditor;\n"]},"metadata":{},"sourceType":"script"}