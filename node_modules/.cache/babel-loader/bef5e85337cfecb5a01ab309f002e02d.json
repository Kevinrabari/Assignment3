{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_card-item.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CardItem = exports.cardValue1Counter = void 0;\n\nvar string_1 = require(\"devextreme/core/utils/string\");\n\nvar tooltip_1 = require(\"devextreme/ui/tooltip\");\n\nvar sparkline_1 = require(\"devextreme/viz/sparkline\");\n\nvar $ = require(\"jquery\");\n\nvar _format_helper_1 = require(\"../../../../data/_format-helper\");\n\nvar _jquery_helpers_1 = require(\"../../../../data/_jquery-helpers\");\n\nvar _delta_indicator_1 = require(\"../../indicators/_delta-indicator\");\n\nvar _simple_indicator_1 = require(\"../../indicators/_simple-indicator\");\n\nvar _base_widget_item_1 = require(\"../_base-widget-item\");\n\nvar _css_class_names_1 = require(\"../_css-class-names\");\n\nvar hiddenContainer = $('<div>', {\n  id: _css_class_names_1.cssClassNames.cardHiddenContainer\n}),\n    nowrapHiddenContainer = $('<div>', {\n  id: _css_class_names_1.cssClassNames.cardNowrapHiddenContainer\n}),\n    _ceil = Math.ceil,\n    _floor = Math.floor,\n    TITLE_TOOLTIP_PREFIX = 'titleTooltip',\n    TITLE_CONTAINER_PREFIX = 'titleContainer';\nexports.cardValue1Counter = 0;\n\nfunction getSparklineHeight(cardHeight) {\n  return cardHeight * 0.25;\n}\n\nfunction calcRowCount(text, encodeHtml) {\n  var text = encodeHtml ? string_1.encodeHtml(text) : text,\n      words = text.split(' '),\n      i,\n      openSpan = '<span>',\n      closeSpan = ' </span>',\n      markup = '',\n      prevOffsetTop,\n      lineCount = 1,\n      clientRects;\n\n  for (i = 0; i < words.length; i++) {\n    markup += openSpan + words[i] + closeSpan;\n  }\n\n  hiddenContainer.html(openSpan + markup + closeSpan);\n  clientRects = hiddenContainer.children()[0].getClientRects();\n  prevOffsetTop = clientRects[0].top;\n\n  for (i = 1; i < clientRects.length; i++) {\n    if (clientRects[i].top !== prevOffsetTop) {\n      lineCount++;\n      prevOffsetTop = clientRects[i].top;\n    }\n  }\n\n  return lineCount;\n}\n\nvar CardItem = function (_super) {\n  __extends(CardItem, _super);\n\n  function CardItem(item, options) {\n    var _this = _super.call(this, CardItem.ensureOptions(options)) || this;\n\n    var getText = function (text) {\n      if (text) {\n        return options.encodeHtml ? $('<div>').text(text).html() : text;\n      }\n\n      return '';\n    },\n        defaultValues = {\n      type: 'none',\n      hasPositiveMeaning: false,\n      text: {\n        value: '',\n        useDefaultColor: false\n      }\n    };\n\n    item = item || {};\n    _this.data = item.data || {};\n    _this.title = getText(item.title);\n    _this.subTitle = getText(item.subTitle);\n    _this.sparklineOptions = item.sparklineOptions || {};\n    _this.variableValue1 = _jquery_helpers_1.deepExtend({}, defaultValues, item.variableValue1);\n    _this.variableValue2 = _jquery_helpers_1.deepExtend({}, defaultValues, item.variableValue2);\n    defaultValues.text.useDefaultColor = true;\n    _this.mainValue = _jquery_helpers_1.deepExtend({}, defaultValues, item.mainValue);\n    _this.indicator = {\n      hasPositiveMeaning: _this.mainValue.hasPositiveMeaning,\n      type: _this.mainValue.type\n    };\n\n    if (hiddenContainer.parent().length === 0) {\n      hiddenContainer.appendTo(document.body);\n    }\n\n    if (nowrapHiddenContainer.parent().length === 0) {\n      nowrapHiddenContainer.appendTo(document.body);\n    }\n\n    _this.subtitleDotsIndex = 0;\n    return _this;\n  }\n\n  CardItem.ensureOptions = function (options) {\n    options = options || {};\n    options.type = 'cardItem';\n    options.ignoreProportions = false;\n    return options;\n  };\n\n  CardItem.prototype.draw = function (widthCard, heightCard, cardIndex, commonItemsOptions) {\n    var that = this,\n        options = that._options,\n        paddings = commonItemsOptions.paddings,\n        sparklineHeight = commonItemsOptions.sparklineHeight,\n        imgDiv,\n        itemDiv,\n        sparklineContainer,\n        topContentOffset = parseFloat(paddings.top),\n        title,\n        subtitle,\n        variableValue1,\n        variableValue2,\n        mainValueDiv,\n        textSubtitle = options.encodeHtml ? that._getEllipsisText(that.subTitle, commonItemsOptions, _floor((widthCard - paddings.right - paddings.left) * 0.6)) : that.subTitle,\n        index = exports.cardValue1Counter++,\n        value1Text = that._getText('variableValue1'),\n        value2Text = that._getText('variableValue2'),\n        mainValueText = that._getText('mainValue'),\n        titleContainerId = TITLE_CONTAINER_PREFIX + index;\n\n    itemDiv = _super.prototype.draw.call(this, widthCard, heightCard, cardIndex);\n    title = ['<div id=\"' + titleContainerId + '\" class=\"', _css_class_names_1.cssClassNames.cardTitle + '\" style=\"padding:' + topContentOffset + 'px ' + paddings.left + 'px 0px ' + paddings.left + 'px;\">', that.title, '</div>'].join('');\n    subtitle = ['<div class=\"', _css_class_names_1.cssClassNames.cardSubtitle, '\" style=\"padding-left:' + paddings.left + 'px;\">', textSubtitle, '</div>'].join('');\n    variableValue1 = ['<span class=\"', _css_class_names_1.cssClassNames.cardVariableValue1, ' ', that._getValueClassName('variableValue1') + '\" style=\"padding-right:' + paddings.right + 'px;\">', value1Text, '</span>'].join('');\n    variableValue2 = ['<span class=\"', _css_class_names_1.cssClassNames.cardVariableValue2, ' ', that._getValueClassName('variableValue2'), '\" style=\"padding-right:' + paddings.right + 'px;\">', value2Text, '</span>'].join('');\n    imgDiv = ['<div class=\"', _css_class_names_1.cssClassNames.cardIndicator, '\" style=\"padding-left:' + paddings.left + 'px;\">', _simple_indicator_1.SimpleIndicator.getIndicator(that.indicator.type, that.indicator.hasPositiveMeaning), '</div>'].join('');\n    mainValueDiv = ['<span class=\"', _css_class_names_1.cssClassNames.cardMainValue, ' ', that._getValueClassName('mainValue'), '\" style=\"padding-right:' + paddings.right + 'px;\">', mainValueText, '</div>'].join('');\n    itemDiv.innerHTML = title + subtitle + variableValue1 + variableValue2 + imgDiv + mainValueDiv;\n\n    that._addTooltip(itemDiv, titleContainerId, TITLE_TOOLTIP_PREFIX, that.title, index);\n\n    if (options.hasSparkline) {\n      sparklineContainer = document.createElement('div');\n      sparklineContainer.classList.add(_css_class_names_1.cssClassNames.cardSparkline);\n      sparklineContainer.style.left = paddings.left;\n      sparklineContainer.style.left = paddings.right;\n      itemDiv.appendChild(sparklineContainer);\n      that.sparklineOptions.size = {\n        width: widthCard - paddings.left - paddings.right,\n        height: sparklineHeight\n      };\n      new sparkline_1.default(sparklineContainer, that.sparklineOptions);\n    }\n\n    return itemDiv;\n  };\n\n  CardItem.prototype.resize = function (width, height, index, commonItemsOptions) {\n    var that = this,\n        sparklineHeight = commonItemsOptions.sparklineHeight,\n        itemDiv = that._itemDiv,\n        imgDiv = itemDiv.querySelector('.' + _css_class_names_1.cssClassNames.cardIndicator),\n        subTitle = itemDiv.querySelector('.' + _css_class_names_1.cssClassNames.cardSubtitle),\n        sparklineContainer = itemDiv.querySelector('.' + _css_class_names_1.cssClassNames.cardSparkline),\n        paddings = that._options.padding,\n        widthWithoutpaddings = width - paddings.right - paddings.left;\n\n    if (!itemDiv.childElementCount) {\n      that.draw(width, height, index, commonItemsOptions);\n      return that._itemDiv;\n    }\n\n    if (that._options.encodeHtml) subTitle.innerText = that._getEllipsisText(subTitle.innerText, commonItemsOptions, _floor(widthWithoutpaddings * 0.6));\n\n    if (sparklineHeight) {\n      sparkline_1.default.getInstance(sparklineContainer).option('size', {\n        width: widthWithoutpaddings,\n        height: sparklineHeight\n      });\n    }\n\n    return itemDiv;\n  };\n\n  CardItem.prototype.getCssStyle = function (width, height, commonItemsOptions, prefix) {\n    var that = this,\n        paddings = commonItemsOptions.paddings,\n        sparklineHeight = commonItemsOptions.sparklineHeight,\n        widthWithoutpaddings = width - paddings.right - paddings.left,\n        fontSizes = commonItemsOptions.fontSizes,\n        baseStyle = _super.prototype.getCssStyle.call(this, width, height, commonItemsOptions, prefix),\n        titleStyle = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardTitle, {\n      'font-size': fontSizes.title,\n      'min-height': _ceil(fontSizes.title * 1.3),\n      'line-height': fontSizes.title\n    }),\n        subTitleStyle = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardSubtitle, {\n      'min-height': _ceil(fontSizes.subTitle * 1.3) * 2,\n      'font-size': fontSizes.subTitle\n    }),\n        indicatorContainerStyle = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardIndicator, {\n      height: _ceil(0.18 * (height - sparklineHeight)),\n      width: _ceil(0.24 * (height - sparklineHeight)),\n      bottom: paddings.bottom + sparklineHeight + 3\n    }),\n        variableValue1Style = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardVariableValue1, {\n      'font-size': fontSizes.variableValue1,\n      'line-height': fontSizes.variableValue1,\n      bottom: fontSizes.variableValue2 + fontSizes.mainValue\n    }),\n        variableValue2Style = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardVariableValue2, {\n      'font-size': fontSizes.variableValue2,\n      'line-height': fontSizes.variableValue2,\n      'bottom': fontSizes.mainValue\n    }),\n        mainValueStyle = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardMainValue, {\n      'font-size': fontSizes.mainValue,\n      'line-height': fontSizes.mainValue,\n      bottom: paddings.bottom + sparklineHeight\n    }),\n        sparklineContainerStyle = sparklineHeight ? prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardSparkline, {\n      height: sparklineHeight,\n      width: widthWithoutpaddings\n    }) : '';\n\n    return [baseStyle, titleStyle, subTitleStyle, indicatorContainerStyle, variableValue1Style, variableValue2Style, mainValueStyle, sparklineContainerStyle].join(' ');\n  };\n\n  CardItem.calcFonts = function (height) {\n    return {\n      title: ~~(height * 0.22),\n      subTitle: ~~(height * 0.14),\n      mainValue: ~~(height * 0.30),\n      variableValue1: ~~(height * 0.14),\n      variableValue2: ~~(height * 0.14)\n    };\n  };\n\n  CardItem.prototype.calcCommonItemSpecificOptions = function (width, height) {\n    var that = this,\n        options = that._options,\n        sparklineHeight = options.hasSparkline ? getSparklineHeight(height) : 0,\n        fontSizes = CardItem.calcFonts(height - sparklineHeight),\n        paddings = __assign({\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0\n    }, options.padding),\n        oneRowHeight;\n\n    hiddenContainer.width(_floor((width - paddings.right - paddings.left) * 0.6)).css('fontSize', fontSizes.subTitle);\n    nowrapHiddenContainer.css('fontSize', fontSizes.subTitle);\n    oneRowHeight = hiddenContainer.text('a').height();\n    hiddenContainer.empty();\n    return {\n      paddings: paddings,\n      sparklineHeight: sparklineHeight,\n      fontSizes: fontSizes,\n      oneRowHeight: oneRowHeight\n    };\n  };\n\n  CardItem.prototype.dispose = function () {\n    var that = this;\n\n    _base_widget_item_1.BaseWidgetItem.prototype.dispose.apply(that, arguments);\n\n    that.data = null;\n    that.sparklineOptions = null;\n    that.indicator = null;\n    that._options = null;\n  };\n\n  CardItem.prototype._addTooltip = function (itemDiv, containerId, tooltipPrefix, text, index) {\n    var container = itemDiv.querySelector('#' + containerId);\n    var div = document.createElement('div');\n    div.id = tooltipPrefix + index;\n    container.appendChild(div);\n    div.innerText = text;\n    new tooltip_1.default(div, {\n      target: '#' + containerId,\n      showEvent: {\n        name: 'mouseenter',\n        delay: 800\n      },\n      hideEvent: 'mouseleave'\n    });\n  };\n\n  CardItem.prototype._getDefaultOptions = function () {\n    var defaults = _base_widget_item_1.BaseWidgetItem.prototype._getDefaultOptions.apply(this, arguments),\n        options = {\n      padding: {\n        top: 3,\n        left: 12,\n        right: 12,\n        bottom: 10\n      },\n      font: {\n        family: 'Segoe UI, HelveticaNeue, Trebuchet MS, Verdana',\n        weight: 'normal'\n      },\n      title: {\n        color: 'black'\n      },\n      subTitle: {\n        color: '#B6B6B6'\n      }\n    };\n\n    return _jquery_helpers_1.deepExtend({}, defaults, options);\n  };\n\n  CardItem.prototype._getText = function (classText) {\n    var that = this;\n    var valueOptions = that[classText].text,\n        value = valueOptions.value,\n        format = valueOptions.format;\n\n    if (format) {\n      return _format_helper_1.formatHelper.format(parseFloat(value), format);\n    } else {\n      return that._options.encodeHtml ? string_1.encodeHtml(value) : value.toString();\n    }\n  };\n\n  CardItem.prototype._getClassFromIndicator = function (type, hasPositiveMeaning, useDefaultColor) {\n    return _delta_indicator_1.DeltaIndicator.getIndicatorColorType(type, hasPositiveMeaning, useDefaultColor);\n  };\n\n  CardItem.prototype._getCardStyle = function (isSelected) {\n    return isSelected ? this._options.selectionStyle : this._options.style;\n  };\n\n  CardItem.prototype._getValueClassName = function (classText) {\n    var that = this,\n        value = that[classText],\n        useDefaultColor = value.text.useDefaultColor,\n        hasPositiveMeaning = value.hasPositiveMeaning,\n        type = value.type;\n    return that._getClassFromIndicator(type, hasPositiveMeaning, useDefaultColor);\n  };\n\n  CardItem.prototype._setSubtitleDotsIndex = function (index) {\n    this._subtitleDotsIndex = index;\n  };\n\n  CardItem.prototype._getEllipsisText = function (inputText, commonItemsOptions, containerWidth) {\n    if (!inputText || inputText === '') {\n      return '';\n    }\n\n    var that = this,\n        subtitleRowsCount = calcRowCount(inputText, that._options.encodeHtml),\n        fullTextWidth,\n        proportionalTextLen,\n        updatedText,\n        movingDirection,\n        threeDots = '...',\n        i,\n        endIndex,\n        dotsIndex = this._subtitleDotsIndex;\n\n    if (subtitleRowsCount <= 2) {\n      return inputText;\n    }\n\n    fullTextWidth = nowrapHiddenContainer.text(inputText).width();\n    proportionalTextLen = _floor(2 * containerWidth * inputText.length / fullTextWidth);\n    updatedText = inputText.substring(0, proportionalTextLen - 3) + threeDots;\n    subtitleRowsCount = calcRowCount(updatedText, that._options.encodeHtml);\n\n    if (subtitleRowsCount > 2) {\n      movingDirection = -1;\n    } else {\n      movingDirection = 1;\n    }\n\n    for (i = 1; i < proportionalTextLen; i += 2) {\n      endIndex = dotsIndex ? dotsIndex + i * movingDirection : proportionalTextLen - 3 + i * movingDirection;\n      updatedText = inputText.substring(0, endIndex) + threeDots;\n      subtitleRowsCount = calcRowCount(updatedText, that._options.encodeHtml);\n\n      if (movingDirection === 1 && subtitleRowsCount === 3) {\n        updatedText = inputText.substring(0, endIndex - 3) + threeDots;\n\n        that._setSubtitleDotsIndex(updatedText.length - 3);\n\n        return updatedText;\n      }\n\n      if (movingDirection === -1 && subtitleRowsCount === 2) {\n        that._setSubtitleDotsIndex(updatedText.length - 3);\n\n        return updatedText;\n      }\n    }\n\n    return updatedText;\n  };\n\n  return CardItem;\n}(_base_widget_item_1.BaseWidgetItem);\n\nexports.CardItem = CardItem;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/viewer-parts/widgets/widgets-viewer/cards/_card-item.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","defineProperty","exports","value","CardItem","cardValue1Counter","string_1","require","tooltip_1","sparkline_1","$","_format_helper_1","_jquery_helpers_1","_delta_indicator_1","_simple_indicator_1","_base_widget_item_1","_css_class_names_1","hiddenContainer","id","cssClassNames","cardHiddenContainer","nowrapHiddenContainer","cardNowrapHiddenContainer","_ceil","Math","ceil","_floor","floor","TITLE_TOOLTIP_PREFIX","TITLE_CONTAINER_PREFIX","getSparklineHeight","cardHeight","calcRowCount","text","encodeHtml","words","split","openSpan","closeSpan","markup","prevOffsetTop","lineCount","clientRects","html","children","getClientRects","top","_super","item","options","_this","ensureOptions","getText","defaultValues","type","hasPositiveMeaning","useDefaultColor","data","title","subTitle","sparklineOptions","variableValue1","deepExtend","variableValue2","mainValue","indicator","parent","appendTo","document","body","subtitleDotsIndex","ignoreProportions","draw","widthCard","heightCard","cardIndex","commonItemsOptions","that","_options","paddings","sparklineHeight","imgDiv","itemDiv","sparklineContainer","topContentOffset","parseFloat","subtitle","mainValueDiv","textSubtitle","_getEllipsisText","right","left","index","value1Text","_getText","value2Text","mainValueText","titleContainerId","cardTitle","join","cardSubtitle","cardVariableValue1","_getValueClassName","cardVariableValue2","cardIndicator","SimpleIndicator","getIndicator","cardMainValue","innerHTML","_addTooltip","hasSparkline","createElement","classList","add","cardSparkline","style","appendChild","size","width","height","default","resize","_itemDiv","querySelector","padding","widthWithoutpaddings","childElementCount","innerText","getInstance","option","getCssStyle","prefix","fontSizes","baseStyle","titleStyle","_formStyle","subTitleStyle","indicatorContainerStyle","bottom","variableValue1Style","variableValue2Style","mainValueStyle","sparklineContainerStyle","calcFonts","calcCommonItemSpecificOptions","oneRowHeight","css","empty","dispose","BaseWidgetItem","containerId","tooltipPrefix","container","div","target","showEvent","name","delay","hideEvent","_getDefaultOptions","defaults","font","family","weight","color","classText","valueOptions","format","formatHelper","toString","_getClassFromIndicator","DeltaIndicator","getIndicatorColorType","_getCardStyle","isSelected","selectionStyle","_setSubtitleDotsIndex","_subtitleDotsIndex","inputText","containerWidth","subtitleRowsCount","fullTextWidth","proportionalTextLen","updatedText","movingDirection","threeDots","endIndex","dotsIndex","substring"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_card-item.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardItem = exports.cardValue1Counter = void 0;\nvar string_1 = require(\"devextreme/core/utils/string\");\nvar tooltip_1 = require(\"devextreme/ui/tooltip\");\nvar sparkline_1 = require(\"devextreme/viz/sparkline\");\nvar $ = require(\"jquery\");\nvar _format_helper_1 = require(\"../../../../data/_format-helper\");\nvar _jquery_helpers_1 = require(\"../../../../data/_jquery-helpers\");\nvar _delta_indicator_1 = require(\"../../indicators/_delta-indicator\");\nvar _simple_indicator_1 = require(\"../../indicators/_simple-indicator\");\nvar _base_widget_item_1 = require(\"../_base-widget-item\");\nvar _css_class_names_1 = require(\"../_css-class-names\");\nvar hiddenContainer = $('<div>', {\n    id: _css_class_names_1.cssClassNames.cardHiddenContainer\n}), nowrapHiddenContainer = $('<div>', {\n    id: _css_class_names_1.cssClassNames.cardNowrapHiddenContainer\n}), _ceil = Math.ceil, _floor = Math.floor, TITLE_TOOLTIP_PREFIX = 'titleTooltip', TITLE_CONTAINER_PREFIX = 'titleContainer';\nexports.cardValue1Counter = 0;\nfunction getSparklineHeight(cardHeight) {\n    return cardHeight * 0.25;\n}\nfunction calcRowCount(text, encodeHtml) {\n    var text = encodeHtml ? string_1.encodeHtml(text) : text, words = text.split(' '), i, openSpan = '<span>', closeSpan = ' </span>', markup = '', prevOffsetTop, lineCount = 1, clientRects;\n    for (i = 0; i < words.length; i++) {\n        markup += openSpan + words[i] + closeSpan;\n    }\n    hiddenContainer.html(openSpan + markup + closeSpan);\n    clientRects = hiddenContainer.children()[0].getClientRects();\n    prevOffsetTop = clientRects[0].top;\n    for (i = 1; i < clientRects.length; i++) {\n        if (clientRects[i].top !== prevOffsetTop) {\n            lineCount++;\n            prevOffsetTop = clientRects[i].top;\n        }\n    }\n    return lineCount;\n}\nvar CardItem = (function (_super) {\n    __extends(CardItem, _super);\n    function CardItem(item, options) {\n        var _this = _super.call(this, CardItem.ensureOptions(options)) || this;\n        var getText = function (text) {\n            if (text) {\n                return options.encodeHtml ? $('<div>').text(text).html() : text;\n            }\n            return '';\n        }, defaultValues = {\n            type: 'none',\n            hasPositiveMeaning: false,\n            text: {\n                value: '',\n                useDefaultColor: false\n            }\n        };\n        item = item || {};\n        _this.data = item.data || {};\n        _this.title = getText(item.title);\n        _this.subTitle = getText(item.subTitle);\n        _this.sparklineOptions = item.sparklineOptions || {};\n        _this.variableValue1 = _jquery_helpers_1.deepExtend({}, defaultValues, item.variableValue1);\n        _this.variableValue2 = _jquery_helpers_1.deepExtend({}, defaultValues, item.variableValue2);\n        defaultValues.text.useDefaultColor = true;\n        _this.mainValue = _jquery_helpers_1.deepExtend({}, defaultValues, item.mainValue);\n        _this.indicator = {\n            hasPositiveMeaning: _this.mainValue.hasPositiveMeaning,\n            type: _this.mainValue.type\n        };\n        if (hiddenContainer.parent().length === 0) {\n            hiddenContainer.appendTo(document.body);\n        }\n        if (nowrapHiddenContainer.parent().length === 0) {\n            nowrapHiddenContainer.appendTo(document.body);\n        }\n        _this.subtitleDotsIndex = 0;\n        return _this;\n    }\n    CardItem.ensureOptions = function (options) {\n        options = options || {};\n        options.type = 'cardItem';\n        options.ignoreProportions = false;\n        return options;\n    };\n    CardItem.prototype.draw = function (widthCard, heightCard, cardIndex, commonItemsOptions) {\n        var that = this, options = that._options, paddings = commonItemsOptions.paddings, sparklineHeight = commonItemsOptions.sparklineHeight, imgDiv, itemDiv, sparklineContainer, topContentOffset = parseFloat(paddings.top), title, subtitle, variableValue1, variableValue2, mainValueDiv, textSubtitle = options.encodeHtml ? that._getEllipsisText(that.subTitle, commonItemsOptions, _floor((widthCard - paddings.right - paddings.left) * 0.6)) : that.subTitle, index = exports.cardValue1Counter++, value1Text = that._getText('variableValue1'), value2Text = that._getText('variableValue2'), mainValueText = that._getText('mainValue'), titleContainerId = TITLE_CONTAINER_PREFIX + index;\n        itemDiv = _super.prototype.draw.call(this, widthCard, heightCard, cardIndex);\n        title = ['<div id=\"' + titleContainerId + '\" class=\"', _css_class_names_1.cssClassNames.cardTitle + '\" style=\"padding:' + topContentOffset + 'px ' + paddings.left + 'px 0px ' + paddings.left + 'px;\">', that.title, '</div>'].join('');\n        subtitle = ['<div class=\"', _css_class_names_1.cssClassNames.cardSubtitle, '\" style=\"padding-left:' + paddings.left + 'px;\">', textSubtitle, '</div>'].join('');\n        variableValue1 = ['<span class=\"', _css_class_names_1.cssClassNames.cardVariableValue1, ' ', that._getValueClassName('variableValue1') + '\" style=\"padding-right:' + paddings.right + 'px;\">', value1Text, '</span>'].join('');\n        variableValue2 = ['<span class=\"', _css_class_names_1.cssClassNames.cardVariableValue2, ' ', that._getValueClassName('variableValue2'), '\" style=\"padding-right:' + paddings.right + 'px;\">', value2Text, '</span>'].join('');\n        imgDiv = ['<div class=\"', _css_class_names_1.cssClassNames.cardIndicator, '\" style=\"padding-left:' + paddings.left + 'px;\">',\n            _simple_indicator_1.SimpleIndicator.getIndicator(that.indicator.type, that.indicator.hasPositiveMeaning), '</div>'].join('');\n        mainValueDiv = ['<span class=\"', _css_class_names_1.cssClassNames.cardMainValue, ' ', that._getValueClassName('mainValue'), '\" style=\"padding-right:' + paddings.right + 'px;\">', mainValueText, '</div>'].join('');\n        itemDiv.innerHTML = title + subtitle + variableValue1 + variableValue2 + imgDiv + mainValueDiv;\n        that._addTooltip(itemDiv, titleContainerId, TITLE_TOOLTIP_PREFIX, that.title, index);\n        if (options.hasSparkline) {\n            sparklineContainer = document.createElement('div');\n            sparklineContainer.classList.add(_css_class_names_1.cssClassNames.cardSparkline);\n            sparklineContainer.style.left = paddings.left;\n            sparklineContainer.style.left = paddings.right;\n            itemDiv.appendChild(sparklineContainer);\n            that.sparklineOptions.size = {\n                width: widthCard - paddings.left - paddings.right,\n                height: sparklineHeight\n            };\n            new sparkline_1.default(sparklineContainer, that.sparklineOptions);\n        }\n        return itemDiv;\n    };\n    CardItem.prototype.resize = function (width, height, index, commonItemsOptions) {\n        var that = this, sparklineHeight = commonItemsOptions.sparklineHeight, itemDiv = that._itemDiv, imgDiv = itemDiv.querySelector('.' + _css_class_names_1.cssClassNames.cardIndicator), subTitle = itemDiv.querySelector('.' + _css_class_names_1.cssClassNames.cardSubtitle), sparklineContainer = itemDiv.querySelector('.' + _css_class_names_1.cssClassNames.cardSparkline), paddings = that._options.padding, widthWithoutpaddings = width - paddings.right - paddings.left;\n        if (!itemDiv.childElementCount) {\n            that.draw(width, height, index, commonItemsOptions);\n            return that._itemDiv;\n        }\n        if (that._options.encodeHtml)\n            subTitle.innerText = that._getEllipsisText(subTitle.innerText, commonItemsOptions, _floor((widthWithoutpaddings) * 0.6));\n        if (sparklineHeight) {\n            sparkline_1.default.getInstance(sparklineContainer)\n                .option('size', { width: widthWithoutpaddings, height: sparklineHeight });\n        }\n        return itemDiv;\n    };\n    CardItem.prototype.getCssStyle = function (width, height, commonItemsOptions, prefix) {\n        var that = this, paddings = commonItemsOptions.paddings, sparklineHeight = commonItemsOptions.sparklineHeight, widthWithoutpaddings = width - paddings.right - paddings.left, fontSizes = commonItemsOptions.fontSizes, baseStyle = _super.prototype.getCssStyle.call(this, width, height, commonItemsOptions, prefix), titleStyle = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardTitle, {\n            'font-size': fontSizes.title,\n            'min-height': _ceil(fontSizes.title * 1.3),\n            'line-height': fontSizes.title\n        }), subTitleStyle = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardSubtitle, {\n            'min-height': _ceil(fontSizes.subTitle * 1.3) * 2,\n            'font-size': fontSizes.subTitle\n        }), indicatorContainerStyle = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardIndicator, {\n            height: _ceil(0.18 * (height - sparklineHeight)),\n            width: _ceil(0.24 * (height - sparklineHeight)),\n            bottom: paddings.bottom + sparklineHeight + 3\n        }), variableValue1Style = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardVariableValue1, {\n            'font-size': fontSizes.variableValue1,\n            'line-height': fontSizes.variableValue1,\n            bottom: fontSizes.variableValue2 + fontSizes.mainValue\n        }), variableValue2Style = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardVariableValue2, {\n            'font-size': fontSizes.variableValue2,\n            'line-height': fontSizes.variableValue2,\n            'bottom': fontSizes.mainValue\n        }), mainValueStyle = prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardMainValue, {\n            'font-size': fontSizes.mainValue,\n            'line-height': fontSizes.mainValue,\n            bottom: paddings.bottom + sparklineHeight\n        }), sparklineContainerStyle = sparklineHeight ?\n            prefix + ' ' + that._formStyle('.' + _css_class_names_1.cssClassNames.cardSparkline, {\n                height: sparklineHeight,\n                width: widthWithoutpaddings\n            }) : '';\n        return [baseStyle, titleStyle, subTitleStyle, indicatorContainerStyle, variableValue1Style, variableValue2Style, mainValueStyle, sparklineContainerStyle].join(' ');\n    };\n    CardItem.calcFonts = function (height) {\n        return {\n            title: (~~(height * 0.22)),\n            subTitle: (~~(height * 0.14)),\n            mainValue: (~~(height * 0.30)),\n            variableValue1: (~~(height * 0.14)),\n            variableValue2: (~~(height * 0.14))\n        };\n    };\n    CardItem.prototype.calcCommonItemSpecificOptions = function (width, height) {\n        var that = this, options = that._options, sparklineHeight = options.hasSparkline ? getSparklineHeight(height) : 0, fontSizes = CardItem.calcFonts(height - sparklineHeight), paddings = __assign({ top: 0, left: 0, right: 0, bottom: 0 }, options.padding), oneRowHeight;\n        hiddenContainer.width(_floor((width - paddings.right - paddings.left) * 0.6))\n            .css('fontSize', fontSizes.subTitle);\n        nowrapHiddenContainer.css('fontSize', fontSizes.subTitle);\n        oneRowHeight = hiddenContainer.text('a').height();\n        hiddenContainer.empty();\n        return {\n            paddings: paddings,\n            sparklineHeight: sparklineHeight,\n            fontSizes: fontSizes,\n            oneRowHeight: oneRowHeight\n        };\n    };\n    CardItem.prototype.dispose = function () {\n        var that = this;\n        _base_widget_item_1.BaseWidgetItem.prototype.dispose.apply(that, arguments);\n        that.data = null;\n        that.sparklineOptions = null;\n        that.indicator = null;\n        that._options = null;\n    };\n    CardItem.prototype._addTooltip = function (itemDiv, containerId, tooltipPrefix, text, index) {\n        var container = itemDiv.querySelector('#' + containerId);\n        var div = document.createElement('div');\n        div.id = tooltipPrefix + index;\n        container.appendChild(div);\n        div.innerText = text;\n        new tooltip_1.default(div, {\n            target: '#' + containerId,\n            showEvent: { name: 'mouseenter', delay: 800 },\n            hideEvent: 'mouseleave'\n        });\n    };\n    CardItem.prototype._getDefaultOptions = function () {\n        var defaults = _base_widget_item_1.BaseWidgetItem.prototype._getDefaultOptions.apply(this, arguments), options = {\n            padding: {\n                top: 3,\n                left: 12,\n                right: 12,\n                bottom: 10\n            },\n            font: {\n                family: 'Segoe UI, HelveticaNeue, Trebuchet MS, Verdana',\n                weight: 'normal'\n            },\n            title: {\n                color: 'black'\n            },\n            subTitle: {\n                color: '#B6B6B6'\n            }\n        };\n        return _jquery_helpers_1.deepExtend({}, defaults, options);\n    };\n    CardItem.prototype._getText = function (classText) {\n        var that = this;\n        var valueOptions = that[classText].text, value = valueOptions.value, format = valueOptions.format;\n        if (format) {\n            return _format_helper_1.formatHelper.format(parseFloat(value), format);\n        }\n        else {\n            return that._options.encodeHtml ? string_1.encodeHtml(value) : value.toString();\n        }\n    };\n    CardItem.prototype._getClassFromIndicator = function (type, hasPositiveMeaning, useDefaultColor) {\n        return _delta_indicator_1.DeltaIndicator.getIndicatorColorType(type, hasPositiveMeaning, useDefaultColor);\n    };\n    CardItem.prototype._getCardStyle = function (isSelected) {\n        return isSelected ? this._options.selectionStyle : this._options.style;\n    };\n    CardItem.prototype._getValueClassName = function (classText) {\n        var that = this, value = that[classText], useDefaultColor = value.text.useDefaultColor, hasPositiveMeaning = value.hasPositiveMeaning, type = value.type;\n        return that._getClassFromIndicator(type, hasPositiveMeaning, useDefaultColor);\n    };\n    CardItem.prototype._setSubtitleDotsIndex = function (index) {\n        this._subtitleDotsIndex = index;\n    };\n    CardItem.prototype._getEllipsisText = function (inputText, commonItemsOptions, containerWidth) {\n        if (!inputText || inputText === '') {\n            return '';\n        }\n        var that = this, subtitleRowsCount = calcRowCount(inputText, that._options.encodeHtml), fullTextWidth, proportionalTextLen, updatedText, movingDirection, threeDots = '...', i, endIndex, dotsIndex = this._subtitleDotsIndex;\n        if (subtitleRowsCount <= 2) {\n            return inputText;\n        }\n        fullTextWidth = nowrapHiddenContainer.text(inputText).width();\n        proportionalTextLen = _floor(2 * containerWidth * inputText.length / fullTextWidth);\n        updatedText = inputText.substring(0, proportionalTextLen - 3) + threeDots;\n        subtitleRowsCount = calcRowCount(updatedText, that._options.encodeHtml);\n        if (subtitleRowsCount > 2) {\n            movingDirection = -1;\n        }\n        else {\n            movingDirection = 1;\n        }\n        for (i = 1; i < proportionalTextLen; i += 2) {\n            endIndex = dotsIndex ? dotsIndex + i * movingDirection : proportionalTextLen - 3 + i * movingDirection;\n            updatedText = inputText.substring(0, endIndex) + threeDots;\n            subtitleRowsCount = calcRowCount(updatedText, that._options.encodeHtml);\n            if (movingDirection === 1 && subtitleRowsCount === 3) {\n                updatedText = inputText.substring(0, endIndex - 3) + threeDots;\n                that._setSubtitleDotsIndex(updatedText.length - 3);\n                return updatedText;\n            }\n            if (movingDirection === -1 && subtitleRowsCount === 2) {\n                that._setSubtitleDotsIndex(updatedText.length - 3);\n                return updatedText;\n            }\n        }\n        return updatedText;\n    };\n    return CardItem;\n}(_base_widget_item_1.BaseWidgetItem));\nexports.CardItem = CardItem;\n"]},"metadata":{},"sourceType":"script"}