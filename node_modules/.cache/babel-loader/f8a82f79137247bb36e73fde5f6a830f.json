{"ast":null,"code":"/**\n* DevExpress Analytics (query-builder\\wizard\\pages\\federationDataSourceWizard\\federatedQueryConfigurePage.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports._registerFederatedQueryConfigurePage = exports.FederatedQueryConfigurePage = void 0;\n\nvar $ = require(\"jquery\");\n\nvar ko = require(\"knockout\");\n\nvar _arrayutils_1 = require(\"../../../../core/utils/_arrayutils\");\n\nvar _fieldListProvider_1 = require(\"../../../../core/utils/_fieldListProvider\");\n\nvar localization_utils_1 = require(\"../../../../property-grid/localization/localization_utils\");\n\nvar serializer_1 = require(\"../../../../serializer/serializer\");\n\nvar federationDataSource_1 = require(\"../../../dataSource/federation/federationDataSource\");\n\nvar _federatedQueriesHelper_1 = require(\"../../../widgets/_federatedQueriesHelper\");\n\nvar _federationDataSourceItemsExtender_1 = require(\"../../internal/federationDataSource/_federationDataSourceItemsExtender\");\n\nvar _federationTreeNodeProvider_1 = require(\"../../internal/federationDataSource/_federationTreeNodeProvider\");\n\nvar _constants_1 = require(\"../../internal/_constants\");\n\nvar _dbSchemaTreeListController_1 = require(\"../../internal/_dbSchemaTreeListController\");\n\nvar _utils_1 = require(\"../../internal/_utils\");\n\nvar pageId_1 = require(\"../../pageId\");\n\nvar popupWizard_1 = require(\"../../popupWizard\");\n\nvar wizardPageBase_1 = require(\"../wizardPageBase\");\n\nvar FederatedQueryConfigurePage = function (_super) {\n  __extends(FederatedQueryConfigurePage, _super);\n\n  function FederatedQueryConfigurePage(_options) {\n    var _this = _super.call(this) || this;\n\n    _this._options = _options;\n    _this._selectedPath = ko.observable(null);\n    _this._itemsProvider = ko.observable();\n    _this._customQueries = ko.observableArray([]);\n\n    _this._setQueryChecked = function (query) {\n      var rootItems = _this._itemsProvider().getRootItems();\n\n      _this._selectedPath('queries.' + query.alias());\n\n      var queries = _arrayutils_1.findFirstItemMatchesCondition(rootItems, function (data) {\n        return data.name === 'queries';\n      });\n\n      var children = queries.children();\n      var child = children[children.length - 1];\n      child.setChecked(true);\n      child['_afterCheckToggled'] && child['_afterCheckToggled'](child);\n    };\n\n    _this._dataSources = ko.observableArray();\n    _this._scrollViewHeight = 'calc(100% - 37px)';\n    _this._isDataLoadingInProcess = ko.observable(false);\n    _this._customizeDBSchemaTreeListActions = null;\n\n    _this._dataSources(_this._options.dataSources());\n\n    _this._disposables.push(_this._fieldListProvider = new _fieldListProvider_1.FieldListProvider(_this._options.callbacks.fieldListsCallback, _this._dataSources, [new _federationDataSourceItemsExtender_1.FederationDataSourceItemsExtender(_this._dataSources)], true));\n\n    _this._disposables.push(_this._dataSource = new federationDataSource_1.FederationDataSource({}, _this._dataSources, _this._fieldListProvider, new serializer_1.ModelSerializer()));\n\n    _this._disposables.push(_this._queriesPopupHelper = new _federatedQueriesHelper_1.FederatedQueriesHelper(_this._dataSource, _this._customQueries, _this._setQueryChecked, _this._options.rtl));\n\n    _this._fieldListModel = ko.observable(null);\n\n    _this._getItemsAfterCheck = function (node) {\n      var pathParts = node.path.split('.');\n\n      if (node.specifics == 'query') {\n        var query = node['query'] || _arrayutils_1.findFirstItemMatchesCondition(_this._customQueries(), function (data) {\n          return (data.alias() || query.generateName()) === node.name;\n        });\n\n        query.alias(node.name);\n\n        if (node.checked.peek()) {\n          _this._dataSource.queries.indexOf(query) === -1 && _this._dataSource.queries.push(query);\n        } else {\n          _this._dataSource.queries.remove(query);\n        }\n      } else if (!node.isList || pathParts.length > 2) {\n        var columnName = pathParts.pop();\n        var queryName = pathParts.join('.');\n        node.checked.peek() ? _this._dataSource.addSelectQuery(queryName, columnName) : _this._dataSource.removeExpression(columnName, queryName);\n      } else {\n        node.children().forEach(function (x) {\n          return _this._getItemsAfterCheck(x);\n        });\n      }\n\n      _this._onChange();\n\n      _this[_constants_1.__loadingStateFunctionName] && _this[_constants_1.__loadingStateFunctionName](false);\n    };\n\n    return _this;\n  }\n\n  FederatedQueryConfigurePage.prototype.canNext = function () {\n    return this._dataSource.queries().length > 1;\n  };\n\n  FederatedQueryConfigurePage.prototype.canFinish = function () {\n    return this._dataSource.queries().length > 0;\n  };\n\n  FederatedQueryConfigurePage.prototype._createTreeListFactory = function () {\n    return new _utils_1.MultiQueryTreeListItemFactory();\n  };\n\n  FederatedQueryConfigurePage.prototype._loadPanelViewModel = function (element) {\n    return popupWizard_1.PopupWizard._getLoadPanelViewModel(element, this._isDataLoadingInProcess);\n  };\n\n  FederatedQueryConfigurePage.prototype.commit = function () {\n    return $.Deferred().resolve({\n      federationDataSourceJSON: JSON.stringify(new serializer_1.ModelSerializer().serialize(this._dataSource)),\n      federatedQueries: []\n    }).promise();\n  };\n\n  FederatedQueryConfigurePage.prototype.initialize = function (state) {\n    var deferred = $.Deferred();\n    var rootItems = ko.observableArray($.map(this._dataSources(), function (item) {\n      return {\n        name: item.id || item.ref,\n        displayName: item.name,\n        isList: true,\n        specifics: item.specifics || 'ListSource',\n        isListType: item.isListType,\n        dragData: {\n          noDragable: false\n        }\n      };\n    }));\n    var itemsProvider = new _federationTreeNodeProvider_1.FederationTreeNodeProvider(this._fieldListProvider, rootItems, this._queriesPopupHelper.callBacks, this._customQueries, this._getItemsAfterCheck);\n\n    this._disposables.push(itemsProvider);\n\n    this._itemsProvider(itemsProvider);\n\n    this._fieldListModel({\n      factory: this._createTreeListFactory(),\n      itemsProvider: this._itemsProvider(),\n      selectedPath: this._selectedPath,\n      treeListController: new _dbSchemaTreeListController_1.DBSchemaTreeListController(this._customizeDBSchemaTreeListActions),\n      templateName: 'dxrd-treelist-with-checkbox'\n    });\n\n    return deferred.resolve().promise();\n  };\n\n  return FederatedQueryConfigurePage;\n}(wizardPageBase_1.WizardPageBase);\n\nexports.FederatedQueryConfigurePage = FederatedQueryConfigurePage;\n\nfunction _registerFederatedQueryConfigurePage(factory, wizardOptions) {\n  factory.registerMetadata(pageId_1.FederationDataSourceWizardPageId.FederatedQueryConfigurePage, {\n    create: function () {\n      return new FederatedQueryConfigurePage(wizardOptions);\n    },\n    setState: function (data, state) {\n      state.federationDataSourceJSON = data.federationDataSourceJSON;\n      state.federatedQueries = data.federatedQueries;\n    },\n    getState: function (state) {\n      return state.federationDataSourceWizard;\n    },\n    resetState: function (state, defaultState) {\n      state.federationDataSourceJSON = defaultState.federationDataSourceJSON;\n      state.federatedQueries = defaultState.federatedQueries;\n    },\n    description: localization_utils_1.getLocalization('Columns selected from specific tables and/or views will be automatically included into a separate query.', 'AnalyticsCoreStringId.SqlDSWizard_PageConfigureMultiQuery'),\n    template: 'dxrd-wizard-add-federated-queries-page'\n  });\n}\n\nexports._registerFederatedQueryConfigurePage = _registerFederatedQueryConfigurePage;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/query-builder/wizard/pages/federationDataSourceWizard/federatedQueryConfigurePage.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","_registerFederatedQueryConfigurePage","FederatedQueryConfigurePage","$","require","ko","_arrayutils_1","_fieldListProvider_1","localization_utils_1","serializer_1","federationDataSource_1","_federatedQueriesHelper_1","_federationDataSourceItemsExtender_1","_federationTreeNodeProvider_1","_constants_1","_dbSchemaTreeListController_1","_utils_1","pageId_1","popupWizard_1","wizardPageBase_1","_super","_options","_this","_selectedPath","observable","_itemsProvider","_customQueries","observableArray","_setQueryChecked","query","rootItems","getRootItems","alias","queries","findFirstItemMatchesCondition","data","name","children","child","length","setChecked","_dataSources","_scrollViewHeight","_isDataLoadingInProcess","_customizeDBSchemaTreeListActions","dataSources","_disposables","push","_fieldListProvider","FieldListProvider","callbacks","fieldListsCallback","FederationDataSourceItemsExtender","_dataSource","FederationDataSource","ModelSerializer","_queriesPopupHelper","FederatedQueriesHelper","rtl","_fieldListModel","_getItemsAfterCheck","node","pathParts","path","split","specifics","generateName","checked","peek","indexOf","remove","isList","columnName","pop","queryName","join","addSelectQuery","removeExpression","forEach","x","_onChange","__loadingStateFunctionName","canNext","canFinish","_createTreeListFactory","MultiQueryTreeListItemFactory","_loadPanelViewModel","element","PopupWizard","_getLoadPanelViewModel","commit","Deferred","resolve","federationDataSourceJSON","JSON","stringify","serialize","federatedQueries","promise","initialize","state","deferred","map","item","id","ref","displayName","isListType","dragData","noDragable","itemsProvider","FederationTreeNodeProvider","callBacks","factory","selectedPath","treeListController","DBSchemaTreeListController","templateName","WizardPageBase","wizardOptions","registerMetadata","FederationDataSourceWizardPageId","setState","getState","federationDataSourceWizard","resetState","defaultState","description","getLocalization","template"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (query-builder\\wizard\\pages\\federationDataSourceWizard\\federatedQueryConfigurePage.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._registerFederatedQueryConfigurePage = exports.FederatedQueryConfigurePage = void 0;\nvar $ = require(\"jquery\");\nvar ko = require(\"knockout\");\nvar _arrayutils_1 = require(\"../../../../core/utils/_arrayutils\");\nvar _fieldListProvider_1 = require(\"../../../../core/utils/_fieldListProvider\");\nvar localization_utils_1 = require(\"../../../../property-grid/localization/localization_utils\");\nvar serializer_1 = require(\"../../../../serializer/serializer\");\nvar federationDataSource_1 = require(\"../../../dataSource/federation/federationDataSource\");\nvar _federatedQueriesHelper_1 = require(\"../../../widgets/_federatedQueriesHelper\");\nvar _federationDataSourceItemsExtender_1 = require(\"../../internal/federationDataSource/_federationDataSourceItemsExtender\");\nvar _federationTreeNodeProvider_1 = require(\"../../internal/federationDataSource/_federationTreeNodeProvider\");\nvar _constants_1 = require(\"../../internal/_constants\");\nvar _dbSchemaTreeListController_1 = require(\"../../internal/_dbSchemaTreeListController\");\nvar _utils_1 = require(\"../../internal/_utils\");\nvar pageId_1 = require(\"../../pageId\");\nvar popupWizard_1 = require(\"../../popupWizard\");\nvar wizardPageBase_1 = require(\"../wizardPageBase\");\nvar FederatedQueryConfigurePage = (function (_super) {\n    __extends(FederatedQueryConfigurePage, _super);\n    function FederatedQueryConfigurePage(_options) {\n        var _this = _super.call(this) || this;\n        _this._options = _options;\n        _this._selectedPath = ko.observable(null);\n        _this._itemsProvider = ko.observable();\n        _this._customQueries = ko.observableArray([]);\n        _this._setQueryChecked = function (query) {\n            var rootItems = _this._itemsProvider().getRootItems();\n            _this._selectedPath('queries.' + query.alias());\n            var queries = _arrayutils_1.findFirstItemMatchesCondition(rootItems, function (data) { return data.name === 'queries'; });\n            var children = queries.children();\n            var child = children[children.length - 1];\n            child.setChecked(true);\n            child['_afterCheckToggled'] && child['_afterCheckToggled'](child);\n        };\n        _this._dataSources = ko.observableArray();\n        _this._scrollViewHeight = 'calc(100% - 37px)';\n        _this._isDataLoadingInProcess = ko.observable(false);\n        _this._customizeDBSchemaTreeListActions = null;\n        _this._dataSources(_this._options.dataSources());\n        _this._disposables.push(_this._fieldListProvider = new _fieldListProvider_1.FieldListProvider(_this._options.callbacks.fieldListsCallback, _this._dataSources, [\n            new _federationDataSourceItemsExtender_1.FederationDataSourceItemsExtender(_this._dataSources)\n        ], true));\n        _this._disposables.push(_this._dataSource = new federationDataSource_1.FederationDataSource({}, _this._dataSources, _this._fieldListProvider, new serializer_1.ModelSerializer()));\n        _this._disposables.push(_this._queriesPopupHelper = new _federatedQueriesHelper_1.FederatedQueriesHelper(_this._dataSource, _this._customQueries, _this._setQueryChecked, _this._options.rtl));\n        _this._fieldListModel = ko.observable(null);\n        _this._getItemsAfterCheck = function (node) {\n            var pathParts = node.path.split('.');\n            if (node.specifics == 'query') {\n                var query = node['query'] || _arrayutils_1.findFirstItemMatchesCondition(_this._customQueries(), function (data) { return (data.alias() || query.generateName()) === node.name; });\n                query.alias(node.name);\n                if (node.checked.peek()) {\n                    _this._dataSource.queries.indexOf(query) === -1 && _this._dataSource.queries.push(query);\n                }\n                else {\n                    _this._dataSource.queries.remove(query);\n                }\n            }\n            else if (!node.isList || pathParts.length > 2) {\n                var columnName = pathParts.pop();\n                var queryName = pathParts.join('.');\n                node.checked.peek() ? _this._dataSource.addSelectQuery(queryName, columnName) : _this._dataSource.removeExpression(columnName, queryName);\n            }\n            else {\n                node.children().forEach(function (x) { return _this._getItemsAfterCheck(x); });\n            }\n            _this._onChange();\n            _this[_constants_1.__loadingStateFunctionName] && _this[_constants_1.__loadingStateFunctionName](false);\n        };\n        return _this;\n    }\n    FederatedQueryConfigurePage.prototype.canNext = function () {\n        return this._dataSource.queries().length > 1;\n    };\n    FederatedQueryConfigurePage.prototype.canFinish = function () {\n        return this._dataSource.queries().length > 0;\n    };\n    FederatedQueryConfigurePage.prototype._createTreeListFactory = function () {\n        return new _utils_1.MultiQueryTreeListItemFactory();\n    };\n    FederatedQueryConfigurePage.prototype._loadPanelViewModel = function (element) {\n        return popupWizard_1.PopupWizard._getLoadPanelViewModel(element, this._isDataLoadingInProcess);\n    };\n    FederatedQueryConfigurePage.prototype.commit = function () {\n        return $.Deferred().resolve({\n            federationDataSourceJSON: JSON.stringify(new serializer_1.ModelSerializer().serialize(this._dataSource)),\n            federatedQueries: []\n        }).promise();\n    };\n    FederatedQueryConfigurePage.prototype.initialize = function (state) {\n        var deferred = $.Deferred();\n        var rootItems = ko.observableArray($.map(this._dataSources(), function (item) {\n            return {\n                name: item.id || item.ref,\n                displayName: item.name,\n                isList: true,\n                specifics: item.specifics || 'ListSource',\n                isListType: item.isListType,\n                dragData: { noDragable: false }\n            };\n        }));\n        var itemsProvider = new _federationTreeNodeProvider_1.FederationTreeNodeProvider(this._fieldListProvider, rootItems, this._queriesPopupHelper.callBacks, this._customQueries, this._getItemsAfterCheck);\n        this._disposables.push(itemsProvider);\n        this._itemsProvider(itemsProvider);\n        this._fieldListModel({\n            factory: this._createTreeListFactory(),\n            itemsProvider: this._itemsProvider(),\n            selectedPath: this._selectedPath,\n            treeListController: new _dbSchemaTreeListController_1.DBSchemaTreeListController(this._customizeDBSchemaTreeListActions),\n            templateName: 'dxrd-treelist-with-checkbox'\n        });\n        return deferred.resolve().promise();\n    };\n    return FederatedQueryConfigurePage;\n}(wizardPageBase_1.WizardPageBase));\nexports.FederatedQueryConfigurePage = FederatedQueryConfigurePage;\nfunction _registerFederatedQueryConfigurePage(factory, wizardOptions) {\n    factory.registerMetadata(pageId_1.FederationDataSourceWizardPageId.FederatedQueryConfigurePage, {\n        create: function () {\n            return new FederatedQueryConfigurePage(wizardOptions);\n        },\n        setState: function (data, state) {\n            state.federationDataSourceJSON = data.federationDataSourceJSON;\n            state.federatedQueries = data.federatedQueries;\n        },\n        getState: function (state) {\n            return state.federationDataSourceWizard;\n        },\n        resetState: function (state, defaultState) {\n            state.federationDataSourceJSON = defaultState.federationDataSourceJSON;\n            state.federatedQueries = defaultState.federatedQueries;\n        },\n        description: localization_utils_1.getLocalization('Columns selected from specific tables and/or views will be automatically included into a separate query.', 'AnalyticsCoreStringId.SqlDSWizard_PageConfigureMultiQuery'),\n        template: 'dxrd-wizard-add-federated-queries-page'\n    });\n}\nexports._registerFederatedQueryConfigurePage = _registerFederatedQueryConfigurePage;\n"]},"metadata":{},"sourceType":"script"}