{"ast":null,"code":"/**\r\n* DevExpress Dashboard (date-filter-widget.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DateFilterWidget = void 0;\n\nvar fx_1 = require(\"devextreme/animation/fx\");\n\nvar string_1 = require(\"devextreme/core/utils/string\");\n\nvar button_1 = require(\"devextreme/ui/button\");\n\nvar button_group_1 = require(\"devextreme/ui/button_group\");\n\nvar calendar_1 = require(\"devextreme/ui/calendar\");\n\nvar date_box_1 = require(\"devextreme/ui/date_box\");\n\nvar ui_overlay_1 = require(\"devextreme/ui/overlay/ui.overlay\");\n\nvar _default_1 = require(\"../../../data/localization/_default\");\n\nvar _formatter_1 = require(\"../../../data/_formatter\");\n\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\n\nvar _render_helper_1 = require(\"../../widgets/_render-helper\");\n\nvar _utils_1 = require(\"../../_utils\");\n\nvar _date_filter_widget_options_1 = require(\"./_date-filter-widget-options\");\n\nvar _popup_calendar_widgets_1 = require(\"./_popup-calendar-widgets\");\n\nvar DateFilterWidget = function () {\n  function DateFilterWidget(element, viewerOptions, boundaryElementContainer) {\n    var _this = this;\n\n    this.boundaryElementContainer = boundaryElementContainer;\n    this._defaultButtonText = _default_1.getLocalizationById('DashboardStringId.DateFilterDatePickerButtonDefaultText');\n    this._overlayShown = false;\n    this._lockSelectionEvents = false;\n\n    this._updateScrollableContainer = function () {};\n\n    this._getBtnsContainerScrollWidth = function () {\n      return 0;\n    };\n\n    this._datePickerContent = new _date_filter_widget_options_1.DatePickerButtons();\n    this.quickButtons = [];\n    this._parent = document.createElement('div');\n    element.appendChild(this._parent);\n    this._scrollableContent = _render_helper_1.RenderHelper.wrapScrollable(this._parent, viewerOptions.overflow, 'both');\n\n    this._updateScrollableContainer = function () {\n      return _render_helper_1.RenderHelper.updateScrollable(_this._parent);\n    };\n  }\n\n  Object.defineProperty(DateFilterWidget.prototype, \"calendarFrom\", {\n    get: function () {\n      return this._calendarWidgetsFrom && this._calendarWidgetsFrom.calendarWidget || null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DateFilterWidget.prototype, \"calendarTo\", {\n    get: function () {\n      return this._calendarWidgetsTo && this._calendarWidgetsTo.calendarWidget || null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  DateFilterWidget.prototype.element = function () {\n    return _jquery_helpers_1.wrapPublicElement(this._scrollableContent);\n  };\n\n  DateFilterWidget.prototype._update = function (widgetOptions) {\n    var _this = this;\n\n    this._options = __assign(__assign({}, this._getDefaultOptions()), widgetOptions);\n\n    this._dispose();\n\n    this._startDate = this._options.startDate;\n    this._endDate = this._options.endDate;\n    var hasQuickFilters = this._options.buttonsInfo.length > 0;\n    var content = this._scrollableContent;\n    this._widgetDiv = this._createDiv(content, _date_filter_widget_options_1.dateFilterWidgetClassNames.widget);\n\n    var buttonsDiv = this._createButtonsDiv();\n\n    this._getBtnsContainerScrollWidth = function () {\n      return Math.ceil(buttonsDiv.scrollWidth);\n    };\n\n    if (this._options.datePickerLocation == 'Near') this._addDatePicker(buttonsDiv);\n\n    if (hasQuickFilters) {\n      this._options.buttonsInfo.forEach(function (info) {\n        var buttonDiv = _this._createDiv(buttonsDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.button);\n\n        var button = new button_group_1.default(buttonDiv, {\n          items: [{\n            text: info\n          }],\n          selectionMode: 'multiple',\n          focusStateEnabled: false,\n          onSelectionChanged: function (e) {\n            if (!_this._lockSelectionEvents) {\n              if (e.removedItems.length > 0) _this._options.clearAction();\n\n              if (e.addedItems.length > 0) {\n                _this._selectQuickButton(e.component);\n\n                _this._options.buttonClick(e.component.option('items')[0].text);\n              }\n            }\n          }\n        });\n\n        _this.quickButtons.push(button);\n      });\n    }\n\n    if (this._options.datePickerLocation == 'Far') this._addDatePicker(buttonsDiv);\n\n    var overlayDiv = this._createDiv(this._widgetDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayWrapper);\n\n    this._createDropDownContent();\n\n    this._overlay = new ui_overlay_1.default(overlayDiv, this._getOverlayOptions());\n\n    this._updateDropDownButtonText();\n  };\n\n  DateFilterWidget.prototype._getHeight = function () {\n    return this._widgetDiv.offsetHeight;\n  };\n\n  DateFilterWidget.prototype._updateSize = function (width, height) {\n    this._widgetDiv.style.height = 'auto';\n\n    if (this._options.arrangementMode === 'Vertical') {\n      this._widgetDiv.style.height = height + 'px';\n      this._widgetDiv.style.width = width + 'px';\n\n      var btnsContainerWidth = this._getBtnsContainerScrollWidth();\n\n      var negativeBtnsContainerMargin = this._options.hasOuterMargin ? 0 : 6;\n\n      if (btnsContainerWidth - Math.ceil(width) - negativeBtnsContainerMargin > 0) {\n        this._widgetDiv.style.width = btnsContainerWidth + \"px\";\n      }\n\n      this._updateScrollableContainer();\n    } else this._widgetDiv.style.width = width + 'px';\n  };\n\n  DateFilterWidget.prototype._setSelectedValues = function (values) {\n    if (!!values && values.length > 0 && (!!values[0] || !!values[1])) {\n      this._startDate = values[0];\n      this._endDate = values[1];\n\n      this._setDatePickerBtnState(true);\n    } else {\n      this._clearSelectedPeriods();\n\n      this._setDatePickerBtnState(false);\n    }\n\n    this._updateDropDownButtonText();\n  };\n\n  DateFilterWidget.prototype._setPeriod = function (periodIndex) {\n    var buttons = this.quickButtons;\n\n    if (periodIndex != null && periodIndex < buttons.length) {\n      this._setDatePickerBtnState(false);\n\n      var button = buttons[periodIndex];\n      button.option('selectedItems', button.option('items'));\n    }\n  };\n\n  DateFilterWidget.prototype._clearSelectedPeriods = function () {\n    var _this = this;\n\n    this._performWithLockedEvents(function () {\n      var buttons = _this.quickButtons;\n\n      for (var i = 0; i < buttons.length; i++) {\n        buttons[i].option('selectedItems', []);\n      }\n    });\n  };\n\n  DateFilterWidget.prototype._clearSelectedValues = function () {\n    this._setSelectedValues([]);\n\n    this._clearSelectedPeriods();\n  };\n\n  DateFilterWidget.prototype._submit = function () {\n    var filterType = this._options.filterType;\n\n    if (filterType === 'After') {\n      this._startDate = this._calendarWidgetsFrom.calendarWidget.option('value');\n      this._endDate = null;\n    }\n\n    if (filterType === 'Before') {\n      this._startDate = null;\n      this._endDate = this._calendarWidgetsTo.calendarWidget.option('value');\n    }\n\n    if (filterType === 'Exact') {\n      this._startDate = this._calendarWidgetsFrom.calendarWidget.option('value');\n      this._endDate = this._calendarWidgetsFrom.calendarWidget.option('value');\n    }\n\n    if (filterType === 'Between') {\n      this._startDate = this._calendarWidgetsFrom.calendarWidget.option('value');\n      this._endDate = this._calendarWidgetsTo.calendarWidget.option('value');\n    }\n\n    this._applyValues();\n\n    this._overlay.hide();\n\n    this._updateDropDownButtonText();\n  };\n\n  DateFilterWidget.prototype._applyValues = function () {\n    var _this = this;\n\n    this._processItemClick([this._startDate, this._endDate]);\n\n    this._performWithLockedEvents(function () {\n      for (var i = 0; i < _this.quickButtons.length; i++) {\n        _this.quickButtons[i].option('selectedItems', []);\n      }\n\n      _this._setDatePickerBtnState(true);\n    });\n  };\n\n  DateFilterWidget.prototype._addDatePicker = function (parentElement) {\n    var _this = this;\n\n    this._datePickerDiv = this._createDiv(parentElement, _date_filter_widget_options_1.dateFilterWidgetClassNames.button);\n    this.datePickerButton = new button_group_1.default(this._datePickerDiv, {\n      items: this._datePickerContent.getButtons(),\n      focusStateEnabled: false,\n      keyExpr: 'key',\n      selectionMode: 'multiple',\n      onSelectionChanged: function (e) {\n        if (!_this._lockSelectionEvents) {\n          if (e.removedItems.length > 0 && e.removedItems[0].key === 'Check') {\n            _this._onDatePickerUnchecked();\n          }\n\n          var clickedButton = e.addedItems[0];\n\n          if (clickedButton) {\n            if (clickedButton.key === 'DropDown') {\n              _this._showPopup();\n            }\n\n            if (clickedButton.key === 'Check') {\n              if (_this._startDate == null && _this._endDate == null) {\n                e.component.option('selectedItemKeys', []);\n\n                _this._showPopup();\n              } else {\n                _this._applyValues();\n              }\n            }\n\n            var selection = e.component.option('selectedItemKeys');\n            selection = selection.filter(function (key) {\n              return key !== 'DropDown';\n            });\n            e.component.option('selectedItemKeys', selection);\n          }\n        }\n      }\n    });\n  };\n\n  DateFilterWidget.prototype._getStartCalendarValue = function () {\n    return this._startDate || this._options.minimum;\n  };\n\n  DateFilterWidget.prototype._getEndCalendarValue = function () {\n    return this._endDate || this._options.maximum;\n  };\n\n  DateFilterWidget.prototype._createDiv = function (container) {\n    var _this = this;\n\n    var classes = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      classes[_i - 1] = arguments[_i];\n    }\n\n    var div = document.createElement('div');\n    if (container != null) container.appendChild(div);\n    classes.forEach(function (className) {\n      return _this._addClass(div, className);\n    });\n    return div;\n  };\n\n  DateFilterWidget.prototype._createButtonsDiv = function () {\n    var classNames = [_date_filter_widget_options_1.dateFilterWidgetClassNames.buttons];\n    if (this._options.arrangementMode === 'Vertical') classNames.push(_date_filter_widget_options_1.dateFilterWidgetClassNames.buttonsTopDown);else classNames.push(_date_filter_widget_options_1.dateFilterWidgetClassNames.buttonsLeftToRight);\n    if (!this._options.hasOuterMargin) classNames.push(_date_filter_widget_options_1.dateFilterWidgetClassNames.buttonsNoPaddings);\n    return this._createDiv.apply(this, __spreadArray([this._widgetDiv], classNames));\n  };\n\n  DateFilterWidget.prototype._createDropDownContent = function () {\n    var _this = this;\n\n    var filterType = this._options.filterType;\n    this._dropDownContentDiv = this._createDiv(null, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlay);\n    if (this._options.mobileLayout) this._addClass(this._dropDownContentDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.mobile);\n\n    var createCalendar1 = function (withButton) {\n      _this._calendarWidgetsFrom = _this._createDatePicker(_this._dropDownContentDiv, function (value) {\n        _this._startDate = value;\n      }, withButton);\n    };\n\n    var createCalendar2 = function (withButton) {\n      _this._calendarWidgetsTo = _this._createDatePicker(_this._dropDownContentDiv, function (value) {\n        _this._endDate = value;\n      }, withButton);\n    };\n\n    if (filterType === 'Between') {\n      createCalendar1(false);\n      createCalendar2(true);\n    } else if (filterType === 'Before') createCalendar2(true);else createCalendar1(true);\n  };\n\n  DateFilterWidget.prototype._createDatePicker = function (containerDiv, setDate, createButton) {\n    if (this._options.mobileLayout) return this._createMobileCalendar(containerDiv, setDate, createButton);\n    return this._createDesktopCalendar(containerDiv, createButton);\n  };\n\n  DateFilterWidget.prototype._createDesktopCalendar = function (containerDiv, createButton) {\n    var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayCalendarContainer);\n\n    var calendar = this._createCalendar(div, function (e) {\n      dateBox.option('value', e.value);\n    });\n\n    var textBoxValueChanged = function (value) {\n      calendar.option('value', value);\n    };\n\n    var dateBox = this._createTextBox(div, textBoxValueChanged);\n\n    var submitButton = createButton ? this._createSubmitButton(div) : null;\n    return new _popup_calendar_widgets_1.PopupCalendarWidgets(calendar, dateBox, submitButton);\n  };\n\n  DateFilterWidget.prototype._createMobileCalendar = function (containerDiv, setDate, createButton) {\n    var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayCalendarContainer);\n\n    var textBoxValueChanged = function (value) {\n      setDate(value);\n    };\n\n    var dateBox = this._createTextBox(div, textBoxValueChanged);\n\n    var submitButton = createButton ? this._createSubmitButton(div) : null;\n    return new _popup_calendar_widgets_1.PopupCalendarWidgets(dateBox, submitButton);\n  };\n\n  DateFilterWidget.prototype._createCalendar = function (containerDiv, valueChanged) {\n    var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayCalendar);\n\n    return new calendar_1.default(div, {\n      focusStateEnabled: false,\n      maxZoomLevel: _utils_1.CalendarHelper.getCalendarMaxZoomLevel(this._options.groupInterval),\n      onValueChanged: valueChanged\n    });\n  };\n\n  DateFilterWidget.prototype._createTextBox = function (containerDiv, textBoxValueChanged) {\n    var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayTextBox);\n\n    return new date_box_1.default(div, {\n      width: 'auto',\n      useMaskBehavior: true,\n      displayFormat: 'shortdate',\n      showDropDownButton: false,\n      type: 'date',\n      onValueChanged: function (e) {\n        textBoxValueChanged(e.value);\n      }\n    });\n  };\n\n  DateFilterWidget.prototype._createSubmitButton = function (containerDiv) {\n    var _this = this;\n\n    var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayButton);\n\n    return new button_1.default(div, {\n      text: _default_1.getLocalizationById('DashboardStringId.ButtonApply'),\n      onClick: function (e) {\n        _this._submit();\n      }\n    });\n  };\n\n  DateFilterWidget.prototype._processItemClick = function (values) {\n    this._options.valueChanged && this._options.valueChanged(values);\n  };\n\n  DateFilterWidget.prototype._updateDropDownButtonText = function () {\n    var start = this._startDate;\n    var end = this._endDate;\n\n    if (this.datePickerButton) {\n      if (start || end) {\n        var formatHandler = this._options.format;\n        var startText = start ? formatHandler(start) : null;\n        var endText = end ? formatHandler(end) : null;\n        var formatPatten = this._options.displayTextPattern;\n\n        if (!formatPatten) {\n          this._setDatePickerText(_formatter_1.constructIntervalFilterText({\n            left: startText,\n            right: endText\n          }), true);\n        } else this._setDatePickerText(string_1.format(formatPatten, startText, endText), true);\n      } else {\n        this._setDatePickerText(this._defaultButtonText, false);\n      }\n    }\n  };\n\n  DateFilterWidget.prototype._getDefaultOptions = function () {\n    return {\n      arrangementMode: 'AutoHeight',\n      filterType: 'Between',\n      datePickerLocation: 'Far',\n      buttonsInfo: [],\n      displayTextPattern: _default_1.getLocalizationById('DashboardStringId.FromToDatePeriodCaption'),\n      groupInterval: 'DayMonthYear',\n      format: function (value) {\n        return value.toString();\n      }\n    };\n  };\n\n  DateFilterWidget.prototype._addClass = function (el, className) {\n    el.classList.add(className);\n  };\n\n  DateFilterWidget.prototype._removeClass = function (el, className) {\n    el.classList.remove(className);\n  };\n\n  DateFilterWidget.prototype._dispose = function () {\n    if (this._calendarWidgetsFrom) {\n      this._calendarWidgetsFrom.dispose();\n\n      this._calendarWidgetsFrom = null;\n    }\n\n    if (this._calendarWidgetsTo) {\n      this._calendarWidgetsTo.dispose();\n\n      this._calendarWidgetsTo = null;\n    }\n\n    this._scrollableContent.innerHTML = '';\n\n    if (this.datePickerButton != null) {\n      this.datePickerButton.dispose();\n      this.datePickerButton = null;\n    }\n\n    for (var i = 0; i < this.quickButtons.length; i++) this.quickButtons[i].dispose();\n\n    this.quickButtons = [];\n\n    if (this._overlay) {\n      this._overlay.dispose();\n\n      this._overlay = null;\n    }\n  };\n\n  DateFilterWidget.prototype._disposeWithElement = function () {\n    this._dispose();\n\n    if (this._parent && this._parent.parentElement) this._parent.parentElement.removeChild(this._parent);\n    this._parent = null;\n  };\n\n  DateFilterWidget.prototype.dispose = function () {\n    this._disposeWithElement();\n  };\n\n  DateFilterWidget.prototype._getOverlayOptions = function () {\n    var _this = this;\n\n    var that = this;\n    return {\n      container: that.boundaryElementContainer,\n      animation: false,\n      width: this._getOverlayWidth(),\n      height: 'auto',\n      position: {\n        collision: 'flip',\n        my: 'top left',\n        at: 'bottom left',\n        of: that._datePickerDiv\n      },\n      onHidden: function (e) {\n        that._overlayShown = false;\n      },\n      contentTemplate: function (contentElement) {\n        _jquery_helpers_1.$unwrap(contentElement).appendChild(_this._dropDownContentDiv);\n      },\n      hideOnOutsideClick: true,\n      wrapperAttr: {\n        class: _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayWrapper\n      }\n    };\n  };\n\n  DateFilterWidget.prototype._getOverlayWidth = function () {\n    if (this._options.mobileLayout) return function () {\n      return _jquery_helpers_1.getWidth(window) * 0.9;\n    };\n    return 'auto';\n  };\n\n  DateFilterWidget.prototype._setDatePickerText = function (text, showDropDown) {\n    if (!showDropDown) this._addClass(this._datePickerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.datePickerButtonEmpty);else this._removeClass(this._datePickerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.datePickerButtonEmpty);\n    this._datePickerContent.showDropDown = showDropDown;\n    this._datePickerContent.text = text;\n    this.datePickerButton.option('items', this._datePickerContent.getButtons());\n  };\n\n  DateFilterWidget.prototype._selectQuickButton = function (button) {\n    var _this = this;\n\n    this._performWithLockedEvents(function () {\n      _this._setDatePickerBtnState(false);\n\n      for (var i = 0; i < _this.quickButtons.length; i++) {\n        if (button != _this.quickButtons[i]) _this.quickButtons[i].option('selectedItems', []);\n      }\n    });\n  };\n\n  DateFilterWidget.prototype._showPopup = function () {\n    this._overlayShown = !this._overlayShown;\n\n    this._overlay.toggle(this._overlayShown);\n\n    fx_1.default.off = true;\n    this._calendarWidgetsFrom && this._calendarWidgetsFrom.calendarWidget.option('value', this._getStartCalendarValue());\n    this._calendarWidgetsTo && this._calendarWidgetsTo.calendarWidget.option('value', this._getEndCalendarValue());\n    fx_1.default.off = false;\n  };\n\n  DateFilterWidget.prototype._setDatePickerBtnState = function (checked) {\n    if (this.datePickerButton) {\n      if (checked && this.datePickerButton.option('selectedItemKeys')[0] !== 'Check') {\n        this.datePickerButton.option('selectedItemKeys', ['Check']);\n      } else if (!checked && this.datePickerButton.option('selectedItemKeys').length !== 0) {\n        this.datePickerButton.option('selectedItemKeys', []);\n      }\n    }\n  };\n\n  DateFilterWidget.prototype._onDatePickerUnchecked = function () {\n    if (this.quickButtons.every(function (button) {\n      return button.option('selectedItemKeys').length === 0;\n    })) this._options.clearAction();\n  };\n\n  DateFilterWidget.prototype._performWithLockedEvents = function (action) {\n    this._lockSelectionEvents = true;\n\n    try {\n      action();\n    } finally {\n      this._lockSelectionEvents = false;\n    }\n  };\n\n  return DateFilterWidget;\n}();\n\nexports.DateFilterWidget = DateFilterWidget;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/viewer-parts/viewer-items/filter-items/date-filter-widget.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","il","j","defineProperty","exports","value","DateFilterWidget","fx_1","require","string_1","button_1","button_group_1","calendar_1","date_box_1","ui_overlay_1","_default_1","_formatter_1","_jquery_helpers_1","_render_helper_1","_utils_1","_date_filter_widget_options_1","_popup_calendar_widgets_1","element","viewerOptions","boundaryElementContainer","_this","_defaultButtonText","getLocalizationById","_overlayShown","_lockSelectionEvents","_updateScrollableContainer","_getBtnsContainerScrollWidth","_datePickerContent","DatePickerButtons","quickButtons","_parent","document","createElement","appendChild","_scrollableContent","RenderHelper","wrapScrollable","overflow","updateScrollable","get","_calendarWidgetsFrom","calendarWidget","enumerable","configurable","_calendarWidgetsTo","wrapPublicElement","_update","widgetOptions","_options","_getDefaultOptions","_dispose","_startDate","startDate","_endDate","endDate","hasQuickFilters","buttonsInfo","content","_widgetDiv","_createDiv","dateFilterWidgetClassNames","widget","buttonsDiv","_createButtonsDiv","Math","ceil","scrollWidth","datePickerLocation","_addDatePicker","forEach","info","buttonDiv","button","default","items","text","selectionMode","focusStateEnabled","onSelectionChanged","e","removedItems","clearAction","addedItems","_selectQuickButton","component","buttonClick","option","push","overlayDiv","overlayWrapper","_createDropDownContent","_overlay","_getOverlayOptions","_updateDropDownButtonText","_getHeight","offsetHeight","_updateSize","width","height","style","arrangementMode","btnsContainerWidth","negativeBtnsContainerMargin","hasOuterMargin","_setSelectedValues","values","_setDatePickerBtnState","_clearSelectedPeriods","_setPeriod","periodIndex","buttons","_performWithLockedEvents","_clearSelectedValues","_submit","filterType","_applyValues","hide","_processItemClick","parentElement","_datePickerDiv","datePickerButton","getButtons","keyExpr","key","_onDatePickerUnchecked","clickedButton","_showPopup","selection","filter","_getStartCalendarValue","minimum","_getEndCalendarValue","maximum","container","classes","_i","div","className","_addClass","classNames","buttonsTopDown","buttonsLeftToRight","buttonsNoPaddings","_dropDownContentDiv","overlay","mobileLayout","mobile","createCalendar1","withButton","_createDatePicker","createCalendar2","containerDiv","setDate","createButton","_createMobileCalendar","_createDesktopCalendar","overlayCalendarContainer","calendar","_createCalendar","dateBox","textBoxValueChanged","_createTextBox","submitButton","_createSubmitButton","PopupCalendarWidgets","valueChanged","overlayCalendar","maxZoomLevel","CalendarHelper","getCalendarMaxZoomLevel","groupInterval","onValueChanged","overlayTextBox","useMaskBehavior","displayFormat","showDropDownButton","type","overlayButton","onClick","start","end","formatHandler","format","startText","endText","formatPatten","displayTextPattern","_setDatePickerText","constructIntervalFilterText","left","right","toString","el","classList","add","_removeClass","remove","dispose","innerHTML","_disposeWithElement","removeChild","that","animation","_getOverlayWidth","position","collision","my","at","of","onHidden","contentTemplate","contentElement","$unwrap","hideOnOutsideClick","wrapperAttr","class","getWidth","window","showDropDown","datePickerButtonEmpty","toggle","off","checked","every","action"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (date-filter-widget.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DateFilterWidget = void 0;\nvar fx_1 = require(\"devextreme/animation/fx\");\nvar string_1 = require(\"devextreme/core/utils/string\");\nvar button_1 = require(\"devextreme/ui/button\");\nvar button_group_1 = require(\"devextreme/ui/button_group\");\nvar calendar_1 = require(\"devextreme/ui/calendar\");\nvar date_box_1 = require(\"devextreme/ui/date_box\");\nvar ui_overlay_1 = require(\"devextreme/ui/overlay/ui.overlay\");\nvar _default_1 = require(\"../../../data/localization/_default\");\nvar _formatter_1 = require(\"../../../data/_formatter\");\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\nvar _render_helper_1 = require(\"../../widgets/_render-helper\");\nvar _utils_1 = require(\"../../_utils\");\nvar _date_filter_widget_options_1 = require(\"./_date-filter-widget-options\");\nvar _popup_calendar_widgets_1 = require(\"./_popup-calendar-widgets\");\nvar DateFilterWidget = (function () {\n    function DateFilterWidget(element, viewerOptions, boundaryElementContainer) {\n        var _this = this;\n        this.boundaryElementContainer = boundaryElementContainer;\n        this._defaultButtonText = _default_1.getLocalizationById('DashboardStringId.DateFilterDatePickerButtonDefaultText');\n        this._overlayShown = false;\n        this._lockSelectionEvents = false;\n        this._updateScrollableContainer = function () { };\n        this._getBtnsContainerScrollWidth = function () { return 0; };\n        this._datePickerContent = new _date_filter_widget_options_1.DatePickerButtons();\n        this.quickButtons = [];\n        this._parent = document.createElement('div');\n        element.appendChild(this._parent);\n        this._scrollableContent = _render_helper_1.RenderHelper.wrapScrollable(this._parent, viewerOptions.overflow, 'both');\n        this._updateScrollableContainer = function () { return _render_helper_1.RenderHelper.updateScrollable(_this._parent); };\n    }\n    Object.defineProperty(DateFilterWidget.prototype, \"calendarFrom\", {\n        get: function () {\n            return (this._calendarWidgetsFrom && this._calendarWidgetsFrom.calendarWidget || null);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DateFilterWidget.prototype, \"calendarTo\", {\n        get: function () {\n            return (this._calendarWidgetsTo && this._calendarWidgetsTo.calendarWidget || null);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DateFilterWidget.prototype.element = function () {\n        return _jquery_helpers_1.wrapPublicElement(this._scrollableContent);\n    };\n    DateFilterWidget.prototype._update = function (widgetOptions) {\n        var _this = this;\n        this._options = __assign(__assign({}, this._getDefaultOptions()), widgetOptions);\n        this._dispose();\n        this._startDate = this._options.startDate;\n        this._endDate = this._options.endDate;\n        var hasQuickFilters = this._options.buttonsInfo.length > 0;\n        var content = this._scrollableContent;\n        this._widgetDiv = this._createDiv(content, _date_filter_widget_options_1.dateFilterWidgetClassNames.widget);\n        var buttonsDiv = this._createButtonsDiv();\n        this._getBtnsContainerScrollWidth = function () { return Math.ceil(buttonsDiv.scrollWidth); };\n        if (this._options.datePickerLocation == 'Near')\n            this._addDatePicker(buttonsDiv);\n        if (hasQuickFilters) {\n            this._options.buttonsInfo.forEach(function (info) {\n                var buttonDiv = _this._createDiv(buttonsDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.button);\n                var button = new button_group_1.default(buttonDiv, {\n                    items: [{ text: info }],\n                    selectionMode: 'multiple',\n                    focusStateEnabled: false,\n                    onSelectionChanged: function (e) {\n                        if (!_this._lockSelectionEvents) {\n                            if (e.removedItems.length > 0)\n                                _this._options.clearAction();\n                            if (e.addedItems.length > 0) {\n                                _this._selectQuickButton(e.component);\n                                _this._options.buttonClick(e.component.option('items')[0].text);\n                            }\n                        }\n                    }\n                });\n                _this.quickButtons.push(button);\n            });\n        }\n        if (this._options.datePickerLocation == 'Far')\n            this._addDatePicker(buttonsDiv);\n        var overlayDiv = this._createDiv(this._widgetDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayWrapper);\n        this._createDropDownContent();\n        this._overlay = new ui_overlay_1.default(overlayDiv, this._getOverlayOptions());\n        this._updateDropDownButtonText();\n    };\n    DateFilterWidget.prototype._getHeight = function () {\n        return this._widgetDiv.offsetHeight;\n    };\n    DateFilterWidget.prototype._updateSize = function (width, height) {\n        this._widgetDiv.style.height = 'auto';\n        if (this._options.arrangementMode === 'Vertical') {\n            this._widgetDiv.style.height = height + 'px';\n            this._widgetDiv.style.width = width + 'px';\n            var btnsContainerWidth = this._getBtnsContainerScrollWidth();\n            var negativeBtnsContainerMargin = this._options.hasOuterMargin ? 0 : 6;\n            if (btnsContainerWidth - Math.ceil(width) - negativeBtnsContainerMargin > 0) {\n                this._widgetDiv.style.width = btnsContainerWidth + \"px\";\n            }\n            this._updateScrollableContainer();\n        }\n        else\n            this._widgetDiv.style.width = width + 'px';\n    };\n    DateFilterWidget.prototype._setSelectedValues = function (values) {\n        if (!!values && values.length > 0 && (!!values[0] || !!values[1])) {\n            this._startDate = values[0];\n            this._endDate = values[1];\n            this._setDatePickerBtnState(true);\n        }\n        else {\n            this._clearSelectedPeriods();\n            this._setDatePickerBtnState(false);\n        }\n        this._updateDropDownButtonText();\n    };\n    DateFilterWidget.prototype._setPeriod = function (periodIndex) {\n        var buttons = this.quickButtons;\n        if (periodIndex != null && periodIndex < buttons.length) {\n            this._setDatePickerBtnState(false);\n            var button = buttons[periodIndex];\n            button.option('selectedItems', button.option('items'));\n        }\n    };\n    DateFilterWidget.prototype._clearSelectedPeriods = function () {\n        var _this = this;\n        this._performWithLockedEvents(function () {\n            var buttons = _this.quickButtons;\n            for (var i = 0; i < buttons.length; i++) {\n                buttons[i].option('selectedItems', []);\n            }\n        });\n    };\n    DateFilterWidget.prototype._clearSelectedValues = function () {\n        this._setSelectedValues([]);\n        this._clearSelectedPeriods();\n    };\n    DateFilterWidget.prototype._submit = function () {\n        var filterType = this._options.filterType;\n        if (filterType === 'After') {\n            this._startDate = this._calendarWidgetsFrom.calendarWidget.option('value');\n            this._endDate = null;\n        }\n        if (filterType === 'Before') {\n            this._startDate = null;\n            this._endDate = this._calendarWidgetsTo.calendarWidget.option('value');\n        }\n        if (filterType === 'Exact') {\n            this._startDate = this._calendarWidgetsFrom.calendarWidget.option('value');\n            this._endDate = this._calendarWidgetsFrom.calendarWidget.option('value');\n        }\n        if (filterType === 'Between') {\n            this._startDate = this._calendarWidgetsFrom.calendarWidget.option('value');\n            this._endDate = this._calendarWidgetsTo.calendarWidget.option('value');\n        }\n        this._applyValues();\n        this._overlay.hide();\n        this._updateDropDownButtonText();\n    };\n    DateFilterWidget.prototype._applyValues = function () {\n        var _this = this;\n        this._processItemClick([this._startDate, this._endDate]);\n        this._performWithLockedEvents(function () {\n            for (var i = 0; i < _this.quickButtons.length; i++) {\n                _this.quickButtons[i].option('selectedItems', []);\n            }\n            _this._setDatePickerBtnState(true);\n        });\n    };\n    DateFilterWidget.prototype._addDatePicker = function (parentElement) {\n        var _this = this;\n        this._datePickerDiv = this._createDiv(parentElement, _date_filter_widget_options_1.dateFilterWidgetClassNames.button);\n        this.datePickerButton = new button_group_1.default(this._datePickerDiv, {\n            items: this._datePickerContent.getButtons(),\n            focusStateEnabled: false,\n            keyExpr: 'key',\n            selectionMode: 'multiple',\n            onSelectionChanged: function (e) {\n                if (!_this._lockSelectionEvents) {\n                    if (e.removedItems.length > 0 && e.removedItems[0].key === 'Check') {\n                        _this._onDatePickerUnchecked();\n                    }\n                    var clickedButton = e.addedItems[0];\n                    if (clickedButton) {\n                        if (clickedButton.key === 'DropDown') {\n                            _this._showPopup();\n                        }\n                        if (clickedButton.key === 'Check') {\n                            if (_this._startDate == null && _this._endDate == null) {\n                                e.component.option('selectedItemKeys', []);\n                                _this._showPopup();\n                            }\n                            else {\n                                _this._applyValues();\n                            }\n                        }\n                        var selection = e.component.option('selectedItemKeys');\n                        selection = selection.filter(function (key) { return key !== 'DropDown'; });\n                        e.component.option('selectedItemKeys', selection);\n                    }\n                }\n            }\n        });\n    };\n    DateFilterWidget.prototype._getStartCalendarValue = function () {\n        return this._startDate || this._options.minimum;\n    };\n    DateFilterWidget.prototype._getEndCalendarValue = function () {\n        return this._endDate || this._options.maximum;\n    };\n    DateFilterWidget.prototype._createDiv = function (container) {\n        var _this = this;\n        var classes = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            classes[_i - 1] = arguments[_i];\n        }\n        var div = document.createElement('div');\n        if (container != null)\n            container.appendChild(div);\n        classes.forEach(function (className) { return _this._addClass(div, className); });\n        return div;\n    };\n    DateFilterWidget.prototype._createButtonsDiv = function () {\n        var classNames = [_date_filter_widget_options_1.dateFilterWidgetClassNames.buttons];\n        if (this._options.arrangementMode === 'Vertical')\n            classNames.push(_date_filter_widget_options_1.dateFilterWidgetClassNames.buttonsTopDown);\n        else\n            classNames.push(_date_filter_widget_options_1.dateFilterWidgetClassNames.buttonsLeftToRight);\n        if (!this._options.hasOuterMargin)\n            classNames.push(_date_filter_widget_options_1.dateFilterWidgetClassNames.buttonsNoPaddings);\n        return this._createDiv.apply(this, __spreadArray([this._widgetDiv], classNames));\n    };\n    DateFilterWidget.prototype._createDropDownContent = function () {\n        var _this = this;\n        var filterType = this._options.filterType;\n        this._dropDownContentDiv = this._createDiv(null, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlay);\n        if (this._options.mobileLayout)\n            this._addClass(this._dropDownContentDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.mobile);\n        var createCalendar1 = function (withButton) {\n            _this._calendarWidgetsFrom = _this._createDatePicker(_this._dropDownContentDiv, function (value) { _this._startDate = value; }, withButton);\n        };\n        var createCalendar2 = function (withButton) {\n            _this._calendarWidgetsTo = _this._createDatePicker(_this._dropDownContentDiv, function (value) { _this._endDate = value; }, withButton);\n        };\n        if (filterType === 'Between') {\n            createCalendar1(false);\n            createCalendar2(true);\n        }\n        else if (filterType === 'Before')\n            createCalendar2(true);\n        else\n            createCalendar1(true);\n    };\n    DateFilterWidget.prototype._createDatePicker = function (containerDiv, setDate, createButton) {\n        if (this._options.mobileLayout)\n            return this._createMobileCalendar(containerDiv, setDate, createButton);\n        return this._createDesktopCalendar(containerDiv, createButton);\n    };\n    DateFilterWidget.prototype._createDesktopCalendar = function (containerDiv, createButton) {\n        var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayCalendarContainer);\n        var calendar = this._createCalendar(div, function (e) {\n            dateBox.option('value', e.value);\n        });\n        var textBoxValueChanged = function (value) {\n            calendar.option('value', value);\n        };\n        var dateBox = this._createTextBox(div, textBoxValueChanged);\n        var submitButton = createButton ? this._createSubmitButton(div) : null;\n        return new _popup_calendar_widgets_1.PopupCalendarWidgets(calendar, dateBox, submitButton);\n    };\n    DateFilterWidget.prototype._createMobileCalendar = function (containerDiv, setDate, createButton) {\n        var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayCalendarContainer);\n        var textBoxValueChanged = function (value) {\n            setDate(value);\n        };\n        var dateBox = this._createTextBox(div, textBoxValueChanged);\n        var submitButton = createButton ? this._createSubmitButton(div) : null;\n        return new _popup_calendar_widgets_1.PopupCalendarWidgets(dateBox, submitButton);\n    };\n    DateFilterWidget.prototype._createCalendar = function (containerDiv, valueChanged) {\n        var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayCalendar);\n        return new calendar_1.default(div, {\n            focusStateEnabled: false,\n            maxZoomLevel: _utils_1.CalendarHelper.getCalendarMaxZoomLevel(this._options.groupInterval),\n            onValueChanged: valueChanged\n        });\n    };\n    DateFilterWidget.prototype._createTextBox = function (containerDiv, textBoxValueChanged) {\n        var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayTextBox);\n        return new date_box_1.default(div, {\n            width: 'auto',\n            useMaskBehavior: true,\n            displayFormat: 'shortdate',\n            showDropDownButton: false,\n            type: 'date',\n            onValueChanged: function (e) {\n                textBoxValueChanged(e.value);\n            }\n        });\n    };\n    DateFilterWidget.prototype._createSubmitButton = function (containerDiv) {\n        var _this = this;\n        var div = this._createDiv(containerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayButton);\n        return new button_1.default(div, {\n            text: _default_1.getLocalizationById('DashboardStringId.ButtonApply'),\n            onClick: function (e) {\n                _this._submit();\n            }\n        });\n    };\n    DateFilterWidget.prototype._processItemClick = function (values) {\n        this._options.valueChanged && this._options.valueChanged(values);\n    };\n    DateFilterWidget.prototype._updateDropDownButtonText = function () {\n        var start = this._startDate;\n        var end = this._endDate;\n        if (this.datePickerButton) {\n            if (start || end) {\n                var formatHandler = this._options.format;\n                var startText = start ? formatHandler(start) : null;\n                var endText = end ? formatHandler(end) : null;\n                var formatPatten = this._options.displayTextPattern;\n                if (!formatPatten) {\n                    this._setDatePickerText(_formatter_1.constructIntervalFilterText({ left: startText, right: endText }), true);\n                }\n                else\n                    this._setDatePickerText(string_1.format(formatPatten, startText, endText), true);\n            }\n            else {\n                this._setDatePickerText(this._defaultButtonText, false);\n            }\n        }\n    };\n    DateFilterWidget.prototype._getDefaultOptions = function () {\n        return {\n            arrangementMode: 'AutoHeight',\n            filterType: 'Between',\n            datePickerLocation: 'Far',\n            buttonsInfo: [],\n            displayTextPattern: _default_1.getLocalizationById('DashboardStringId.FromToDatePeriodCaption'),\n            groupInterval: 'DayMonthYear',\n            format: function (value) { return value.toString(); }\n        };\n    };\n    DateFilterWidget.prototype._addClass = function (el, className) {\n        el.classList.add(className);\n    };\n    DateFilterWidget.prototype._removeClass = function (el, className) {\n        el.classList.remove(className);\n    };\n    DateFilterWidget.prototype._dispose = function () {\n        if (this._calendarWidgetsFrom) {\n            this._calendarWidgetsFrom.dispose();\n            this._calendarWidgetsFrom = null;\n        }\n        if (this._calendarWidgetsTo) {\n            this._calendarWidgetsTo.dispose();\n            this._calendarWidgetsTo = null;\n        }\n        this._scrollableContent.innerHTML = '';\n        if (this.datePickerButton != null) {\n            this.datePickerButton.dispose();\n            this.datePickerButton = null;\n        }\n        for (var i = 0; i < this.quickButtons.length; i++)\n            this.quickButtons[i].dispose();\n        this.quickButtons = [];\n        if (this._overlay) {\n            this._overlay.dispose();\n            this._overlay = null;\n        }\n    };\n    DateFilterWidget.prototype._disposeWithElement = function () {\n        this._dispose();\n        if (this._parent && this._parent.parentElement)\n            this._parent.parentElement.removeChild(this._parent);\n        this._parent = null;\n    };\n    DateFilterWidget.prototype.dispose = function () {\n        this._disposeWithElement();\n    };\n    DateFilterWidget.prototype._getOverlayOptions = function () {\n        var _this = this;\n        var that = this;\n        return {\n            container: that.boundaryElementContainer,\n            animation: false,\n            width: this._getOverlayWidth(),\n            height: 'auto',\n            position: {\n                collision: 'flip',\n                my: 'top left',\n                at: 'bottom left',\n                of: that._datePickerDiv\n            },\n            onHidden: function (e) {\n                that._overlayShown = false;\n            },\n            contentTemplate: function (contentElement) {\n                _jquery_helpers_1.$unwrap(contentElement).appendChild(_this._dropDownContentDiv);\n            },\n            hideOnOutsideClick: true,\n            wrapperAttr: {\n                class: _date_filter_widget_options_1.dateFilterWidgetClassNames.overlayWrapper\n            }\n        };\n    };\n    DateFilterWidget.prototype._getOverlayWidth = function () {\n        if (this._options.mobileLayout)\n            return function () { return _jquery_helpers_1.getWidth(window) * 0.9; };\n        return 'auto';\n    };\n    DateFilterWidget.prototype._setDatePickerText = function (text, showDropDown) {\n        if (!showDropDown)\n            this._addClass(this._datePickerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.datePickerButtonEmpty);\n        else\n            this._removeClass(this._datePickerDiv, _date_filter_widget_options_1.dateFilterWidgetClassNames.datePickerButtonEmpty);\n        this._datePickerContent.showDropDown = showDropDown;\n        this._datePickerContent.text = text;\n        this.datePickerButton.option('items', this._datePickerContent.getButtons());\n    };\n    DateFilterWidget.prototype._selectQuickButton = function (button) {\n        var _this = this;\n        this._performWithLockedEvents(function () {\n            _this._setDatePickerBtnState(false);\n            for (var i = 0; i < _this.quickButtons.length; i++) {\n                if (button != _this.quickButtons[i])\n                    _this.quickButtons[i].option('selectedItems', []);\n            }\n        });\n    };\n    DateFilterWidget.prototype._showPopup = function () {\n        this._overlayShown = !this._overlayShown;\n        this._overlay.toggle(this._overlayShown);\n        fx_1.default.off = true;\n        this._calendarWidgetsFrom && this._calendarWidgetsFrom.calendarWidget.option('value', this._getStartCalendarValue());\n        this._calendarWidgetsTo && this._calendarWidgetsTo.calendarWidget.option('value', this._getEndCalendarValue());\n        fx_1.default.off = false;\n    };\n    DateFilterWidget.prototype._setDatePickerBtnState = function (checked) {\n        if (this.datePickerButton) {\n            if (checked && this.datePickerButton.option('selectedItemKeys')[0] !== 'Check') {\n                this.datePickerButton.option('selectedItemKeys', ['Check']);\n            }\n            else if (!checked && this.datePickerButton.option('selectedItemKeys').length !== 0) {\n                this.datePickerButton.option('selectedItemKeys', []);\n            }\n        }\n    };\n    DateFilterWidget.prototype._onDatePickerUnchecked = function () {\n        if (this.quickButtons.every(function (button) { return button.option('selectedItemKeys').length === 0; }))\n            this._options.clearAction();\n    };\n    DateFilterWidget.prototype._performWithLockedEvents = function (action) {\n        this._lockSelectionEvents = true;\n        try {\n            action();\n        }\n        finally {\n            this._lockSelectionEvents = false;\n        }\n    };\n    return DateFilterWidget;\n}());\nexports.DateFilterWidget = DateFilterWidget;\n"]},"metadata":{},"sourceType":"script"}