{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/html_editor/modules/resizing.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport { name as ClickEvent } from \"../../../events/click\";\nimport { addNamespace, normalizeKeyName } from \"../../../events/utils/index\";\nimport { move } from \"../../../animation/translator\";\nimport devices from \"../../../core/devices\";\nimport Resizable from \"../../resizable\";\nimport { getBoundingRect } from \"../../../core/utils/position\";\nimport Quill from \"devextreme-quill\";\nimport BaseModule from \"./base\";\nimport { getHeight, getOuterHeight, getOuterWidth, getWidth } from \"../../../core/utils/size\";\nvar DX_RESIZE_FRAME_CLASS = \"dx-resize-frame\";\nvar DX_TOUCH_DEVICE_CLASS = \"dx-touch-device\";\nvar MODULE_NAMESPACE = \"dxHtmlResizingModule\";\nvar KEYDOWN_EVENT = addNamespace(\"keydown\", MODULE_NAMESPACE);\nvar SCROLL_EVENT = addNamespace(\"scroll\", MODULE_NAMESPACE);\nvar MOUSEDOWN_EVENT = addNamespace(\"mousedown\", MODULE_NAMESPACE);\nvar FRAME_PADDING = 1;\nexport default class ResizingModule extends BaseModule {\n  constructor(quill, options) {\n    super(quill, options);\n    this.allowedTargets = options.allowedTargets || [\"image\"];\n    this.enabled = !!options.enabled;\n    this._hideFrameWithContext = this.hideFrame.bind(this);\n    this._framePositionChangedHandler = this._prepareFramePositionChangedHandler();\n\n    if (this.enabled) {\n      this._attachEvents();\n\n      this._createResizeFrame();\n    }\n  }\n\n  _attachEvents() {\n    eventsEngine.on(this.quill.root, addNamespace(ClickEvent, MODULE_NAMESPACE), this._clickHandler.bind(this));\n    eventsEngine.on(this.quill.root, SCROLL_EVENT, this._framePositionChangedHandler);\n    this.editorInstance.on(\"focusOut\", this._hideFrameWithContext);\n    this.quill.on(\"text-change\", this._framePositionChangedHandler);\n  }\n\n  _detachEvents() {\n    eventsEngine.off(this.quill.root, MODULE_NAMESPACE);\n    this.editorInstance.off(\"focusOut\", this._hideFrameWithContext);\n    this.quill.off(\"text-change\", this._framePositionChangedHandler);\n  }\n\n  _clickHandler(e) {\n    if (this._isAllowedTarget(e.target)) {\n      if (this._$target === e.target) {\n        return;\n      }\n\n      this._$target = e.target;\n      var $target = $(this._$target);\n      var minWidth = Math.max(getOuterWidth($target) - getWidth($target), this.resizable.option(\"minWidth\"));\n      var minHeight = Math.max(getOuterHeight($target) - getHeight($target), this.resizable.option(\"minHeight\"));\n      this.resizable.option({\n        minWidth: minWidth,\n        minHeight: minHeight\n      });\n      this.updateFramePosition();\n      this.showFrame();\n\n      this._adjustSelection();\n    } else if (this._$target) {\n      this.hideFrame();\n    }\n  }\n\n  _prepareFramePositionChangedHandler(e) {\n    return () => {\n      if (this._$target) {\n        this.updateFramePosition();\n      }\n    };\n  }\n\n  _adjustSelection() {\n    if (!this.quill.getSelection()) {\n      this.quill.setSelection(0, 0);\n    }\n  }\n\n  _isAllowedTarget(targetElement) {\n    return this._isImage(targetElement);\n  }\n\n  _isImage(targetElement) {\n    return -1 !== this.allowedTargets.indexOf(\"image\") && \"IMG\" === targetElement.tagName.toUpperCase();\n  }\n\n  showFrame() {\n    this._$resizeFrame.show();\n\n    eventsEngine.on(this.quill.root, KEYDOWN_EVENT, this._handleFrameKeyDown.bind(this));\n  }\n\n  _handleFrameKeyDown(e) {\n    var keyName = normalizeKeyName(e);\n\n    if (\"del\" === keyName || \"backspace\" === keyName) {\n      this._deleteImage();\n    }\n\n    this.hideFrame();\n  }\n\n  hideFrame() {\n    this._$target = null;\n\n    this._$resizeFrame.hide();\n\n    eventsEngine.off(this.quill.root, KEYDOWN_EVENT);\n  }\n\n  updateFramePosition() {\n    var {\n      height: height,\n      width: width,\n      top: targetTop,\n      left: targetLeft\n    } = getBoundingRect(this._$target);\n    var {\n      top: containerTop,\n      left: containerLeft\n    } = getBoundingRect(this.quill.root);\n\n    var borderWidth = this._getBorderWidth();\n\n    this._$resizeFrame.css({\n      height: height,\n      width: width,\n      padding: FRAME_PADDING,\n      top: targetTop - containerTop - borderWidth - FRAME_PADDING,\n      left: targetLeft - containerLeft - borderWidth - FRAME_PADDING\n    });\n\n    move(this._$resizeFrame, {\n      left: 0,\n      top: 0\n    });\n  }\n\n  _getBorderWidth() {\n    return parseInt(this._$resizeFrame.css(\"borderTopWidth\"));\n  }\n\n  _createResizeFrame() {\n    if (this._$resizeFrame) {\n      return;\n    }\n\n    var {\n      deviceType: deviceType\n    } = devices.current();\n    this._$resizeFrame = $(\"<div>\").addClass(DX_RESIZE_FRAME_CLASS).toggleClass(DX_TOUCH_DEVICE_CLASS, \"desktop\" !== deviceType).appendTo(this.editorInstance._getQuillContainer()).hide();\n    eventsEngine.on(this._$resizeFrame, MOUSEDOWN_EVENT, e => {\n      e.preventDefault();\n    });\n    this.resizable = this.editorInstance._createComponent(this._$resizeFrame, Resizable, {\n      onResize: e => {\n        if (!this._$target) {\n          return;\n        }\n\n        $(this._$target).attr({\n          height: e.height,\n          width: e.width\n        });\n        this.updateFramePosition();\n      }\n    });\n  }\n\n  _deleteImage() {\n    if (this._isAllowedTarget(this._$target)) {\n      var _Quill$find;\n\n      null === (_Quill$find = Quill.find(this._$target)) || void 0 === _Quill$find ? void 0 : _Quill$find.deleteAt(0);\n    }\n  }\n\n  option(option, value) {\n    if (\"mediaResizing\" === option) {\n      this.handleOptionChangeValue(value);\n      return;\n    }\n\n    if (\"enabled\" === option) {\n      this.enabled = value;\n      value ? this._attachEvents() : this._detachEvents();\n    } else if (\"allowedTargets\" === option && Array.isArray(value)) {\n      this.allowedTargets = value;\n    }\n  }\n\n  clean() {\n    this._detachEvents();\n\n    this._$resizeFrame.remove();\n\n    this._$resizeFrame = void 0;\n  }\n\n}","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/html_editor/modules/resizing.js"],"names":["$","eventsEngine","name","ClickEvent","addNamespace","normalizeKeyName","move","devices","Resizable","getBoundingRect","Quill","BaseModule","getHeight","getOuterHeight","getOuterWidth","getWidth","DX_RESIZE_FRAME_CLASS","DX_TOUCH_DEVICE_CLASS","MODULE_NAMESPACE","KEYDOWN_EVENT","SCROLL_EVENT","MOUSEDOWN_EVENT","FRAME_PADDING","ResizingModule","constructor","quill","options","allowedTargets","enabled","_hideFrameWithContext","hideFrame","bind","_framePositionChangedHandler","_prepareFramePositionChangedHandler","_attachEvents","_createResizeFrame","on","root","_clickHandler","editorInstance","_detachEvents","off","e","_isAllowedTarget","target","_$target","$target","minWidth","Math","max","resizable","option","minHeight","updateFramePosition","showFrame","_adjustSelection","getSelection","setSelection","targetElement","_isImage","indexOf","tagName","toUpperCase","_$resizeFrame","show","_handleFrameKeyDown","keyName","_deleteImage","hide","height","width","top","targetTop","left","targetLeft","containerTop","containerLeft","borderWidth","_getBorderWidth","css","padding","parseInt","deviceType","current","addClass","toggleClass","appendTo","_getQuillContainer","preventDefault","_createComponent","onResize","attr","_Quill$find","find","deleteAt","value","handleOptionChangeValue","Array","isArray","clean","remove"],"mappings":"AAAA;;;;;;;;AAQA,OAAOA,CAAP,MAAc,wBAAd;AACA,OAAOC,YAAP,MAAyB,oCAAzB;AACA,SACIC,IAAI,IAAIC,UADZ,QAEO,uBAFP;AAGA,SACIC,YADJ,EAEIC,gBAFJ,QAGO,6BAHP;AAIA,SACIC,IADJ,QAEO,+BAFP;AAGA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,SACIC,eADJ,QAEO,8BAFP;AAGA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,OAAOC,UAAP,MAAuB,QAAvB;AACA,SACIC,SADJ,EAEIC,cAFJ,EAGIC,aAHJ,EAIIC,QAJJ,QAKO,0BALP;AAMA,IAAIC,qBAAqB,GAAG,iBAA5B;AACA,IAAIC,qBAAqB,GAAG,iBAA5B;AACA,IAAIC,gBAAgB,GAAG,sBAAvB;AACA,IAAIC,aAAa,GAAGf,YAAY,CAAC,SAAD,EAAYc,gBAAZ,CAAhC;AACA,IAAIE,YAAY,GAAGhB,YAAY,CAAC,QAAD,EAAWc,gBAAX,CAA/B;AACA,IAAIG,eAAe,GAAGjB,YAAY,CAAC,WAAD,EAAcc,gBAAd,CAAlC;AACA,IAAII,aAAa,GAAG,CAApB;AACA,eAAe,MAAMC,cAAN,SAA6BZ,UAA7B,CAAwC;AACnDa,EAAAA,WAAW,CAACC,KAAD,EAAQC,OAAR,EAAiB;AACxB,UAAMD,KAAN,EAAaC,OAAb;AACA,SAAKC,cAAL,GAAsBD,OAAO,CAACC,cAAR,IAA0B,CAAC,OAAD,CAAhD;AACA,SAAKC,OAAL,GAAe,CAAC,CAACF,OAAO,CAACE,OAAzB;AACA,SAAKC,qBAAL,GAA6B,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAA7B;AACA,SAAKC,4BAAL,GAAoC,KAAKC,mCAAL,EAApC;;AACA,QAAI,KAAKL,OAAT,EAAkB;AACd,WAAKM,aAAL;;AACA,WAAKC,kBAAL;AACH;AACJ;;AACDD,EAAAA,aAAa,GAAG;AACZjC,IAAAA,YAAY,CAACmC,EAAb,CAAgB,KAAKX,KAAL,CAAWY,IAA3B,EAAiCjC,YAAY,CAACD,UAAD,EAAae,gBAAb,CAA7C,EAA6E,KAAKoB,aAAL,CAAmBP,IAAnB,CAAwB,IAAxB,CAA7E;AACA9B,IAAAA,YAAY,CAACmC,EAAb,CAAgB,KAAKX,KAAL,CAAWY,IAA3B,EAAiCjB,YAAjC,EAA+C,KAAKY,4BAApD;AACA,SAAKO,cAAL,CAAoBH,EAApB,CAAuB,UAAvB,EAAmC,KAAKP,qBAAxC;AACA,SAAKJ,KAAL,CAAWW,EAAX,CAAc,aAAd,EAA6B,KAAKJ,4BAAlC;AACH;;AACDQ,EAAAA,aAAa,GAAG;AACZvC,IAAAA,YAAY,CAACwC,GAAb,CAAiB,KAAKhB,KAAL,CAAWY,IAA5B,EAAkCnB,gBAAlC;AACA,SAAKqB,cAAL,CAAoBE,GAApB,CAAwB,UAAxB,EAAoC,KAAKZ,qBAAzC;AACA,SAAKJ,KAAL,CAAWgB,GAAX,CAAe,aAAf,EAA8B,KAAKT,4BAAnC;AACH;;AACDM,EAAAA,aAAa,CAACI,CAAD,EAAI;AACb,QAAI,KAAKC,gBAAL,CAAsBD,CAAC,CAACE,MAAxB,CAAJ,EAAqC;AACjC,UAAI,KAAKC,QAAL,KAAkBH,CAAC,CAACE,MAAxB,EAAgC;AAC5B;AACH;;AACD,WAAKC,QAAL,GAAgBH,CAAC,CAACE,MAAlB;AACA,UAAIE,OAAO,GAAG9C,CAAC,CAAC,KAAK6C,QAAN,CAAf;AACA,UAAIE,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAASnC,aAAa,CAACgC,OAAD,CAAb,GAAyB/B,QAAQ,CAAC+B,OAAD,CAA1C,EAAqD,KAAKI,SAAL,CAAeC,MAAf,CAAsB,UAAtB,CAArD,CAAf;AACA,UAAIC,SAAS,GAAGJ,IAAI,CAACC,GAAL,CAASpC,cAAc,CAACiC,OAAD,CAAd,GAA0BlC,SAAS,CAACkC,OAAD,CAA5C,EAAuD,KAAKI,SAAL,CAAeC,MAAf,CAAsB,WAAtB,CAAvD,CAAhB;AACA,WAAKD,SAAL,CAAeC,MAAf,CAAsB;AAClBJ,QAAAA,QAAQ,EAAEA,QADQ;AAElBK,QAAAA,SAAS,EAAEA;AAFO,OAAtB;AAIA,WAAKC,mBAAL;AACA,WAAKC,SAAL;;AACA,WAAKC,gBAAL;AACH,KAfD,MAeO,IAAI,KAAKV,QAAT,EAAmB;AACtB,WAAKf,SAAL;AACH;AACJ;;AACDG,EAAAA,mCAAmC,CAACS,CAAD,EAAI;AACnC,WAAO,MAAM;AACT,UAAI,KAAKG,QAAT,EAAmB;AACf,aAAKQ,mBAAL;AACH;AACJ,KAJD;AAKH;;AACDE,EAAAA,gBAAgB,GAAG;AACf,QAAI,CAAC,KAAK9B,KAAL,CAAW+B,YAAX,EAAL,EAAgC;AAC5B,WAAK/B,KAAL,CAAWgC,YAAX,CAAwB,CAAxB,EAA2B,CAA3B;AACH;AACJ;;AACDd,EAAAA,gBAAgB,CAACe,aAAD,EAAgB;AAC5B,WAAO,KAAKC,QAAL,CAAcD,aAAd,CAAP;AACH;;AACDC,EAAAA,QAAQ,CAACD,aAAD,EAAgB;AACpB,WAAO,CAAC,CAAD,KAAO,KAAK/B,cAAL,CAAoBiC,OAApB,CAA4B,OAA5B,CAAP,IAA+C,UAAUF,aAAa,CAACG,OAAd,CAAsBC,WAAtB,EAAhE;AACH;;AACDR,EAAAA,SAAS,GAAG;AACR,SAAKS,aAAL,CAAmBC,IAAnB;;AACA/D,IAAAA,YAAY,CAACmC,EAAb,CAAgB,KAAKX,KAAL,CAAWY,IAA3B,EAAiClB,aAAjC,EAAgD,KAAK8C,mBAAL,CAAyBlC,IAAzB,CAA8B,IAA9B,CAAhD;AACH;;AACDkC,EAAAA,mBAAmB,CAACvB,CAAD,EAAI;AACnB,QAAIwB,OAAO,GAAG7D,gBAAgB,CAACqC,CAAD,CAA9B;;AACA,QAAI,UAAUwB,OAAV,IAAqB,gBAAgBA,OAAzC,EAAkD;AAC9C,WAAKC,YAAL;AACH;;AACD,SAAKrC,SAAL;AACH;;AACDA,EAAAA,SAAS,GAAG;AACR,SAAKe,QAAL,GAAgB,IAAhB;;AACA,SAAKkB,aAAL,CAAmBK,IAAnB;;AACAnE,IAAAA,YAAY,CAACwC,GAAb,CAAiB,KAAKhB,KAAL,CAAWY,IAA5B,EAAkClB,aAAlC;AACH;;AACDkC,EAAAA,mBAAmB,GAAG;AAClB,QAAI;AACAgB,MAAAA,MAAM,EAAEA,MADR;AAEAC,MAAAA,KAAK,EAAEA,KAFP;AAGAC,MAAAA,GAAG,EAAEC,SAHL;AAIAC,MAAAA,IAAI,EAAEC;AAJN,QAKAjE,eAAe,CAAC,KAAKoC,QAAN,CALnB;AAMA,QAAI;AACA0B,MAAAA,GAAG,EAAEI,YADL;AAEAF,MAAAA,IAAI,EAAEG;AAFN,QAGAnE,eAAe,CAAC,KAAKgB,KAAL,CAAWY,IAAZ,CAHnB;;AAIA,QAAIwC,WAAW,GAAG,KAAKC,eAAL,EAAlB;;AACA,SAAKf,aAAL,CAAmBgB,GAAnB,CAAuB;AACnBV,MAAAA,MAAM,EAAEA,MADW;AAEnBC,MAAAA,KAAK,EAAEA,KAFY;AAGnBU,MAAAA,OAAO,EAAE1D,aAHU;AAInBiD,MAAAA,GAAG,EAAEC,SAAS,GAAGG,YAAZ,GAA2BE,WAA3B,GAAyCvD,aAJ3B;AAKnBmD,MAAAA,IAAI,EAAEC,UAAU,GAAGE,aAAb,GAA6BC,WAA7B,GAA2CvD;AAL9B,KAAvB;;AAOAhB,IAAAA,IAAI,CAAC,KAAKyD,aAAN,EAAqB;AACrBU,MAAAA,IAAI,EAAE,CADe;AAErBF,MAAAA,GAAG,EAAE;AAFgB,KAArB,CAAJ;AAIH;;AACDO,EAAAA,eAAe,GAAG;AACd,WAAOG,QAAQ,CAAC,KAAKlB,aAAL,CAAmBgB,GAAnB,CAAuB,gBAAvB,CAAD,CAAf;AACH;;AACD5C,EAAAA,kBAAkB,GAAG;AACjB,QAAI,KAAK4B,aAAT,EAAwB;AACpB;AACH;;AACD,QAAI;AACAmB,MAAAA,UAAU,EAAEA;AADZ,QAEA3E,OAAO,CAAC4E,OAAR,EAFJ;AAGA,SAAKpB,aAAL,GAAqB/D,CAAC,CAAC,OAAD,CAAD,CAAWoF,QAAX,CAAoBpE,qBAApB,EAA2CqE,WAA3C,CAAuDpE,qBAAvD,EAA8E,cAAciE,UAA5F,EAAwGI,QAAxG,CAAiH,KAAK/C,cAAL,CAAoBgD,kBAApB,EAAjH,EAA2JnB,IAA3J,EAArB;AACAnE,IAAAA,YAAY,CAACmC,EAAb,CAAgB,KAAK2B,aAArB,EAAoC1C,eAApC,EAAqDqB,CAAC,IAAI;AACtDA,MAAAA,CAAC,CAAC8C,cAAF;AACH,KAFD;AAGA,SAAKtC,SAAL,GAAiB,KAAKX,cAAL,CAAoBkD,gBAApB,CAAqC,KAAK1B,aAA1C,EAAyDvD,SAAzD,EAAoE;AACjFkF,MAAAA,QAAQ,EAAEhD,CAAC,IAAI;AACX,YAAI,CAAC,KAAKG,QAAV,EAAoB;AAChB;AACH;;AACD7C,QAAAA,CAAC,CAAC,KAAK6C,QAAN,CAAD,CAAiB8C,IAAjB,CAAsB;AAClBtB,UAAAA,MAAM,EAAE3B,CAAC,CAAC2B,MADQ;AAElBC,UAAAA,KAAK,EAAE5B,CAAC,CAAC4B;AAFS,SAAtB;AAIA,aAAKjB,mBAAL;AACH;AAVgF,KAApE,CAAjB;AAYH;;AACDc,EAAAA,YAAY,GAAG;AACX,QAAI,KAAKxB,gBAAL,CAAsB,KAAKE,QAA3B,CAAJ,EAA0C;AACtC,UAAI+C,WAAJ;;AACA,gBAAUA,WAAW,GAAGlF,KAAK,CAACmF,IAAN,CAAW,KAAKhD,QAAhB,CAAxB,KAAsD,KAAK,CAAL,KAAW+C,WAAjE,GAA+E,KAAK,CAApF,GAAwFA,WAAW,CAACE,QAAZ,CAAqB,CAArB,CAAxF;AACH;AACJ;;AACD3C,EAAAA,MAAM,CAACA,MAAD,EAAS4C,KAAT,EAAgB;AAClB,QAAI,oBAAoB5C,MAAxB,EAAgC;AAC5B,WAAK6C,uBAAL,CAA6BD,KAA7B;AACA;AACH;;AACD,QAAI,cAAc5C,MAAlB,EAA0B;AACtB,WAAKvB,OAAL,GAAemE,KAAf;AACAA,MAAAA,KAAK,GAAG,KAAK7D,aAAL,EAAH,GAA0B,KAAKM,aAAL,EAA/B;AACH,KAHD,MAGO,IAAI,qBAAqBW,MAArB,IAA+B8C,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAnC,EAAyD;AAC5D,WAAKpE,cAAL,GAAsBoE,KAAtB;AACH;AACJ;;AACDI,EAAAA,KAAK,GAAG;AACJ,SAAK3D,aAAL;;AACA,SAAKuB,aAAL,CAAmBqC,MAAnB;;AACA,SAAKrC,aAAL,GAAqB,KAAK,CAA1B;AACH;;AAtJkD","sourcesContent":["/**\r\n * DevExtreme (esm/ui/html_editor/modules/resizing.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../../core/renderer\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport {\r\n    name as ClickEvent\r\n} from \"../../../events/click\";\r\nimport {\r\n    addNamespace,\r\n    normalizeKeyName\r\n} from \"../../../events/utils/index\";\r\nimport {\r\n    move\r\n} from \"../../../animation/translator\";\r\nimport devices from \"../../../core/devices\";\r\nimport Resizable from \"../../resizable\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../../core/utils/position\";\r\nimport Quill from \"devextreme-quill\";\r\nimport BaseModule from \"./base\";\r\nimport {\r\n    getHeight,\r\n    getOuterHeight,\r\n    getOuterWidth,\r\n    getWidth\r\n} from \"../../../core/utils/size\";\r\nvar DX_RESIZE_FRAME_CLASS = \"dx-resize-frame\";\r\nvar DX_TOUCH_DEVICE_CLASS = \"dx-touch-device\";\r\nvar MODULE_NAMESPACE = \"dxHtmlResizingModule\";\r\nvar KEYDOWN_EVENT = addNamespace(\"keydown\", MODULE_NAMESPACE);\r\nvar SCROLL_EVENT = addNamespace(\"scroll\", MODULE_NAMESPACE);\r\nvar MOUSEDOWN_EVENT = addNamespace(\"mousedown\", MODULE_NAMESPACE);\r\nvar FRAME_PADDING = 1;\r\nexport default class ResizingModule extends BaseModule {\r\n    constructor(quill, options) {\r\n        super(quill, options);\r\n        this.allowedTargets = options.allowedTargets || [\"image\"];\r\n        this.enabled = !!options.enabled;\r\n        this._hideFrameWithContext = this.hideFrame.bind(this);\r\n        this._framePositionChangedHandler = this._prepareFramePositionChangedHandler();\r\n        if (this.enabled) {\r\n            this._attachEvents();\r\n            this._createResizeFrame()\r\n        }\r\n    }\r\n    _attachEvents() {\r\n        eventsEngine.on(this.quill.root, addNamespace(ClickEvent, MODULE_NAMESPACE), this._clickHandler.bind(this));\r\n        eventsEngine.on(this.quill.root, SCROLL_EVENT, this._framePositionChangedHandler);\r\n        this.editorInstance.on(\"focusOut\", this._hideFrameWithContext);\r\n        this.quill.on(\"text-change\", this._framePositionChangedHandler)\r\n    }\r\n    _detachEvents() {\r\n        eventsEngine.off(this.quill.root, MODULE_NAMESPACE);\r\n        this.editorInstance.off(\"focusOut\", this._hideFrameWithContext);\r\n        this.quill.off(\"text-change\", this._framePositionChangedHandler)\r\n    }\r\n    _clickHandler(e) {\r\n        if (this._isAllowedTarget(e.target)) {\r\n            if (this._$target === e.target) {\r\n                return\r\n            }\r\n            this._$target = e.target;\r\n            var $target = $(this._$target);\r\n            var minWidth = Math.max(getOuterWidth($target) - getWidth($target), this.resizable.option(\"minWidth\"));\r\n            var minHeight = Math.max(getOuterHeight($target) - getHeight($target), this.resizable.option(\"minHeight\"));\r\n            this.resizable.option({\r\n                minWidth: minWidth,\r\n                minHeight: minHeight\r\n            });\r\n            this.updateFramePosition();\r\n            this.showFrame();\r\n            this._adjustSelection()\r\n        } else if (this._$target) {\r\n            this.hideFrame()\r\n        }\r\n    }\r\n    _prepareFramePositionChangedHandler(e) {\r\n        return () => {\r\n            if (this._$target) {\r\n                this.updateFramePosition()\r\n            }\r\n        }\r\n    }\r\n    _adjustSelection() {\r\n        if (!this.quill.getSelection()) {\r\n            this.quill.setSelection(0, 0)\r\n        }\r\n    }\r\n    _isAllowedTarget(targetElement) {\r\n        return this._isImage(targetElement)\r\n    }\r\n    _isImage(targetElement) {\r\n        return -1 !== this.allowedTargets.indexOf(\"image\") && \"IMG\" === targetElement.tagName.toUpperCase()\r\n    }\r\n    showFrame() {\r\n        this._$resizeFrame.show();\r\n        eventsEngine.on(this.quill.root, KEYDOWN_EVENT, this._handleFrameKeyDown.bind(this))\r\n    }\r\n    _handleFrameKeyDown(e) {\r\n        var keyName = normalizeKeyName(e);\r\n        if (\"del\" === keyName || \"backspace\" === keyName) {\r\n            this._deleteImage()\r\n        }\r\n        this.hideFrame()\r\n    }\r\n    hideFrame() {\r\n        this._$target = null;\r\n        this._$resizeFrame.hide();\r\n        eventsEngine.off(this.quill.root, KEYDOWN_EVENT)\r\n    }\r\n    updateFramePosition() {\r\n        var {\r\n            height: height,\r\n            width: width,\r\n            top: targetTop,\r\n            left: targetLeft\r\n        } = getBoundingRect(this._$target);\r\n        var {\r\n            top: containerTop,\r\n            left: containerLeft\r\n        } = getBoundingRect(this.quill.root);\r\n        var borderWidth = this._getBorderWidth();\r\n        this._$resizeFrame.css({\r\n            height: height,\r\n            width: width,\r\n            padding: FRAME_PADDING,\r\n            top: targetTop - containerTop - borderWidth - FRAME_PADDING,\r\n            left: targetLeft - containerLeft - borderWidth - FRAME_PADDING\r\n        });\r\n        move(this._$resizeFrame, {\r\n            left: 0,\r\n            top: 0\r\n        })\r\n    }\r\n    _getBorderWidth() {\r\n        return parseInt(this._$resizeFrame.css(\"borderTopWidth\"))\r\n    }\r\n    _createResizeFrame() {\r\n        if (this._$resizeFrame) {\r\n            return\r\n        }\r\n        var {\r\n            deviceType: deviceType\r\n        } = devices.current();\r\n        this._$resizeFrame = $(\"<div>\").addClass(DX_RESIZE_FRAME_CLASS).toggleClass(DX_TOUCH_DEVICE_CLASS, \"desktop\" !== deviceType).appendTo(this.editorInstance._getQuillContainer()).hide();\r\n        eventsEngine.on(this._$resizeFrame, MOUSEDOWN_EVENT, e => {\r\n            e.preventDefault()\r\n        });\r\n        this.resizable = this.editorInstance._createComponent(this._$resizeFrame, Resizable, {\r\n            onResize: e => {\r\n                if (!this._$target) {\r\n                    return\r\n                }\r\n                $(this._$target).attr({\r\n                    height: e.height,\r\n                    width: e.width\r\n                });\r\n                this.updateFramePosition()\r\n            }\r\n        })\r\n    }\r\n    _deleteImage() {\r\n        if (this._isAllowedTarget(this._$target)) {\r\n            var _Quill$find;\r\n            null === (_Quill$find = Quill.find(this._$target)) || void 0 === _Quill$find ? void 0 : _Quill$find.deleteAt(0)\r\n        }\r\n    }\r\n    option(option, value) {\r\n        if (\"mediaResizing\" === option) {\r\n            this.handleOptionChangeValue(value);\r\n            return\r\n        }\r\n        if (\"enabled\" === option) {\r\n            this.enabled = value;\r\n            value ? this._attachEvents() : this._detachEvents()\r\n        } else if (\"allowedTargets\" === option && Array.isArray(value)) {\r\n            this.allowedTargets = value\r\n        }\r\n    }\r\n    clean() {\r\n        this._detachEvents();\r\n        this._$resizeFrame.remove();\r\n        this._$resizeFrame = void 0\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}