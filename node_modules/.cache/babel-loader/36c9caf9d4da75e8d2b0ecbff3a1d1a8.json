{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_pie-data-controller.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pieDataController = void 0;\n\nvar _formatter_1 = require(\"../_formatter\");\n\nvar _chart_data_controller_base_1 = require(\"./_chart-data-controller-base\");\n\nvar PieSettingsType = {\n  SeriesOnly: 'SeriesOnly',\n  ArgumentsOnly: 'ArgumentsOnly',\n  ArgumentsAndSeries: 'ArgumentsAndSeries',\n  ElementSelection: 'ElementSelection'\n};\n\nvar pieDataController = function (_super) {\n  __extends(pieDataController, _super);\n\n  function pieDataController(options) {\n    var _this = _super.call(this, options) || this;\n\n    if (_this.multiData && _this.viewModel) {\n      _this._measures = _this.multiData ? _this.multiData.getMeasures() : [];\n      _this._argumentAxisPoints = _this.getArgumentAxisPoints();\n\n      if (_this.viewModel.ProvideValuesAsArguments) {\n        _this.settingsType = PieSettingsType.SeriesOnly;\n      } else if (!_this.viewModel.SummarySeriesMember) {\n        _this.settingsType = PieSettingsType.ArgumentsOnly;\n      } else if (_this.viewModel.ContentDescription && _this.viewModel.ContentDescription.ElementSelectionEnabled) {\n        _this.settingsType = PieSettingsType.ElementSelection;\n      } else {\n        _this.settingsType = PieSettingsType.ArgumentsAndSeries;\n      }\n    }\n\n    return _this;\n  }\n\n  pieDataController.prototype.getPointDisplayTexts = function (pointTag, value, percent) {\n    var that = this,\n        valueDataMember = pointTag.dataMembers[0],\n        measure = this.multiData.getMeasureById(valueDataMember);\n    return {\n      argumentText: this.settingsType === PieSettingsType.SeriesOnly ? measure.name : that.getTitle(pointTag.axisPoint, '\\n'),\n      valueText: pointTag.valueText,\n      percentText: _formatter_1.formatNumeric(percent, this.viewModel.PercentFormatViewModel)\n    };\n  };\n\n  pieDataController.prototype.isDiscreteArgument = function () {\n    return true;\n  };\n\n  pieDataController.prototype.createDataSource = function (seriesAxisPoint, valueDataMember) {\n    var that = this,\n        viewModel = that.viewModel,\n        dataSource = [];\n\n    if (that.settingsType === PieSettingsType.SeriesOnly) {\n      var argumentAxisPoint = that._getArgumentAxis().getRootPoint();\n\n      that._measures.filter(function (measure) {\n        return viewModel.ValueDataMembers && viewModel.ValueDataMembers.indexOf(measure.id) !== -1;\n      }).forEach(function (measure, index) {\n        var dataMember = measure.id,\n            valueInfo = that._getCrossSlice(argumentAxisPoint, seriesAxisPoint).getMeasureValue(dataMember);\n\n        dataSource.push({\n          x: measure.name,\n          y: that._getCorrectZeroValue(valueInfo.getValue()),\n          tag: {\n            axisPoint: argumentAxisPoint,\n            dataMembers: [dataMember],\n            colorMeasureId: that._getColorDataMemberByIndex(index),\n            valueText: valueInfo.getDisplayText()\n          }\n        });\n      });\n    } else {\n      that._argumentAxisPoints.forEach(function (argumentAxisPoint) {\n        var valueInfo = that._getCrossSlice(argumentAxisPoint, seriesAxisPoint).getMeasureValue(valueDataMember);\n\n        dataSource.push({\n          x: that.getArgument(argumentAxisPoint),\n          y: that._getCorrectZeroValue(valueInfo.getValue()),\n          tag: {\n            axisPoint: argumentAxisPoint,\n            dataMembers: [valueDataMember],\n            colorMeasureId: that._getColorDataMemberByMeasureId(valueDataMember),\n            valueText: valueInfo.getDisplayText()\n          }\n        });\n      });\n    }\n\n    return dataSource;\n  };\n\n  pieDataController.prototype.getValueDataMembers = function () {\n    var viewModel = this.viewModel;\n\n    switch (this.settingsType) {\n      case PieSettingsType.SeriesOnly:\n        return ['SeriesOnlyInternalFakeValueDataMember'];\n\n      case PieSettingsType.ArgumentsOnly:\n      case PieSettingsType.ArgumentsAndSeries:\n        return viewModel.ValueDataMembers;\n\n      case PieSettingsType.ElementSelection:\n        return [viewModel.ValueDataMembers[viewModel.ContentDescription.SelectedElementIndex]];\n    }\n  };\n\n  pieDataController.prototype.getValueDisplayNames = function (seriesAxisPoint, valueDataMemberIndex) {\n    var viewModel = this.viewModel;\n\n    switch (this.settingsType) {\n      case PieSettingsType.ArgumentsOnly:\n        return viewModel.ValueDisplayNames[valueDataMemberIndex];\n\n      case PieSettingsType.SeriesOnly:\n      case PieSettingsType.ArgumentsAndSeries:\n      case PieSettingsType.ElementSelection:\n        return this.getTitle(seriesAxisPoint);\n    }\n  };\n\n  pieDataController.prototype._getCorrectZeroValue = function (value) {\n    return value === 0 || value == null ? null : Math.abs(value);\n  };\n\n  pieDataController.prototype._getColorDataMemberByMeasureId = function (valueDataMember) {\n    var viewModel = this.viewModel;\n\n    switch (this.settingsType) {\n      case PieSettingsType.ArgumentsOnly:\n        var index = viewModel.ValueDataMembers ? viewModel.ValueDataMembers.indexOf(valueDataMember) : -1;\n        return this._getColorDataMemberByIndex(index);\n\n      case PieSettingsType.ArgumentsAndSeries:\n        return this._getColorDataMemberByIndex(0);\n\n      case PieSettingsType.ElementSelection:\n        return this._getColorDataMemberByIndex(viewModel.ContentDescription.SelectedElementIndex);\n\n      default:\n        return undefined;\n    }\n  };\n\n  pieDataController.prototype._getColorDataMemberByIndex = function (index) {\n    var colorDataMembers = this.viewModel.ColorDataMembers;\n    return colorDataMembers.length == 1 ? colorDataMembers[0] : colorDataMembers[index];\n  };\n\n  return pieDataController;\n}(_chart_data_controller_base_1.chartDataControllerBase);\n\nexports.pieDataController = pieDataController;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/data/data-controllers/_pie-data-controller.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","pieDataController","_formatter_1","require","_chart_data_controller_base_1","PieSettingsType","SeriesOnly","ArgumentsOnly","ArgumentsAndSeries","ElementSelection","_super","options","_this","multiData","viewModel","_measures","getMeasures","_argumentAxisPoints","getArgumentAxisPoints","ProvideValuesAsArguments","settingsType","SummarySeriesMember","ContentDescription","ElementSelectionEnabled","getPointDisplayTexts","pointTag","percent","that","valueDataMember","dataMembers","measure","getMeasureById","argumentText","name","getTitle","axisPoint","valueText","percentText","formatNumeric","PercentFormatViewModel","isDiscreteArgument","createDataSource","seriesAxisPoint","dataSource","argumentAxisPoint","_getArgumentAxis","getRootPoint","filter","ValueDataMembers","indexOf","id","forEach","index","dataMember","valueInfo","_getCrossSlice","getMeasureValue","push","x","y","_getCorrectZeroValue","getValue","tag","colorMeasureId","_getColorDataMemberByIndex","getDisplayText","getArgument","_getColorDataMemberByMeasureId","getValueDataMembers","SelectedElementIndex","getValueDisplayNames","valueDataMemberIndex","ValueDisplayNames","Math","abs","undefined","colorDataMembers","ColorDataMembers","length","chartDataControllerBase"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_pie-data-controller.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pieDataController = void 0;\nvar _formatter_1 = require(\"../_formatter\");\nvar _chart_data_controller_base_1 = require(\"./_chart-data-controller-base\");\nvar PieSettingsType = {\n    SeriesOnly: 'SeriesOnly',\n    ArgumentsOnly: 'ArgumentsOnly',\n    ArgumentsAndSeries: 'ArgumentsAndSeries',\n    ElementSelection: 'ElementSelection'\n};\nvar pieDataController = (function (_super) {\n    __extends(pieDataController, _super);\n    function pieDataController(options) {\n        var _this = _super.call(this, options) || this;\n        if (_this.multiData && _this.viewModel) {\n            _this._measures = _this.multiData ? _this.multiData.getMeasures() : [];\n            _this._argumentAxisPoints = _this.getArgumentAxisPoints();\n            if (_this.viewModel.ProvideValuesAsArguments) {\n                _this.settingsType = PieSettingsType.SeriesOnly;\n            }\n            else if (!_this.viewModel.SummarySeriesMember) {\n                _this.settingsType = PieSettingsType.ArgumentsOnly;\n            }\n            else if (_this.viewModel.ContentDescription && _this.viewModel.ContentDescription.ElementSelectionEnabled) {\n                _this.settingsType = PieSettingsType.ElementSelection;\n            }\n            else {\n                _this.settingsType = PieSettingsType.ArgumentsAndSeries;\n            }\n        }\n        return _this;\n    }\n    pieDataController.prototype.getPointDisplayTexts = function (pointTag, value, percent) {\n        var that = this, valueDataMember = pointTag.dataMembers[0], measure = this.multiData.getMeasureById(valueDataMember);\n        return {\n            argumentText: (this.settingsType === PieSettingsType.SeriesOnly) ? measure.name : that.getTitle(pointTag.axisPoint, '\\n'),\n            valueText: pointTag.valueText,\n            percentText: _formatter_1.formatNumeric(percent, this.viewModel.PercentFormatViewModel)\n        };\n    };\n    pieDataController.prototype.isDiscreteArgument = function () {\n        return true;\n    };\n    pieDataController.prototype.createDataSource = function (seriesAxisPoint, valueDataMember) {\n        var that = this, viewModel = that.viewModel, dataSource = [];\n        if (that.settingsType === PieSettingsType.SeriesOnly) {\n            var argumentAxisPoint = that._getArgumentAxis().getRootPoint();\n            that._measures\n                .filter(function (measure) { return viewModel.ValueDataMembers && viewModel.ValueDataMembers.indexOf(measure.id) !== -1; })\n                .forEach(function (measure, index) {\n                var dataMember = measure.id, valueInfo = that._getCrossSlice(argumentAxisPoint, seriesAxisPoint).getMeasureValue(dataMember);\n                dataSource.push({\n                    x: measure.name,\n                    y: that._getCorrectZeroValue(valueInfo.getValue()),\n                    tag: {\n                        axisPoint: argumentAxisPoint,\n                        dataMembers: [dataMember],\n                        colorMeasureId: that._getColorDataMemberByIndex(index),\n                        valueText: valueInfo.getDisplayText()\n                    }\n                });\n            });\n        }\n        else {\n            that._argumentAxisPoints.forEach(function (argumentAxisPoint) {\n                var valueInfo = that._getCrossSlice(argumentAxisPoint, seriesAxisPoint).getMeasureValue(valueDataMember);\n                dataSource.push({\n                    x: that.getArgument(argumentAxisPoint),\n                    y: that._getCorrectZeroValue(valueInfo.getValue()),\n                    tag: {\n                        axisPoint: argumentAxisPoint,\n                        dataMembers: [valueDataMember],\n                        colorMeasureId: that._getColorDataMemberByMeasureId(valueDataMember),\n                        valueText: valueInfo.getDisplayText()\n                    }\n                });\n            });\n        }\n        return dataSource;\n    };\n    pieDataController.prototype.getValueDataMembers = function () {\n        var viewModel = this.viewModel;\n        switch (this.settingsType) {\n            case PieSettingsType.SeriesOnly:\n                return ['SeriesOnlyInternalFakeValueDataMember'];\n            case PieSettingsType.ArgumentsOnly:\n            case PieSettingsType.ArgumentsAndSeries:\n                return viewModel.ValueDataMembers;\n            case PieSettingsType.ElementSelection:\n                return [viewModel.ValueDataMembers[viewModel.ContentDescription.SelectedElementIndex]];\n        }\n    };\n    pieDataController.prototype.getValueDisplayNames = function (seriesAxisPoint, valueDataMemberIndex) {\n        var viewModel = this.viewModel;\n        switch (this.settingsType) {\n            case PieSettingsType.ArgumentsOnly:\n                return viewModel.ValueDisplayNames[valueDataMemberIndex];\n            case PieSettingsType.SeriesOnly:\n            case PieSettingsType.ArgumentsAndSeries:\n            case PieSettingsType.ElementSelection:\n                return this.getTitle(seriesAxisPoint);\n        }\n    };\n    pieDataController.prototype._getCorrectZeroValue = function (value) {\n        return value === 0 || value == null ? null : Math.abs(value);\n    };\n    pieDataController.prototype._getColorDataMemberByMeasureId = function (valueDataMember) {\n        var viewModel = this.viewModel;\n        switch (this.settingsType) {\n            case PieSettingsType.ArgumentsOnly:\n                var index = viewModel.ValueDataMembers ? viewModel.ValueDataMembers.indexOf(valueDataMember) : -1;\n                return this._getColorDataMemberByIndex(index);\n            case PieSettingsType.ArgumentsAndSeries:\n                return this._getColorDataMemberByIndex(0);\n            case PieSettingsType.ElementSelection:\n                return this._getColorDataMemberByIndex(viewModel.ContentDescription.SelectedElementIndex);\n            default:\n                return undefined;\n        }\n    };\n    pieDataController.prototype._getColorDataMemberByIndex = function (index) {\n        var colorDataMembers = this.viewModel.ColorDataMembers;\n        return (colorDataMembers.length == 1) ? colorDataMembers[0] : colorDataMembers[index];\n    };\n    return pieDataController;\n}(_chart_data_controller_base_1.chartDataControllerBase));\nexports.pieDataController = pieDataController;\n"]},"metadata":{},"sourceType":"script"}