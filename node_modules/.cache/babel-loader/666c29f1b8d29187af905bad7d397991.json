{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_bubble-map-item.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bubbleMapItem = void 0;\n\nvar color_1 = require(\"devextreme/color\");\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar _geo_point_map_item_base_1 = require(\"./_geo-point-map-item-base\");\n\nvar bubbleMapItem = function (_super) {\n  __extends(bubbleMapItem, _super);\n\n  function bubbleMapItem(container, options) {\n    return _super.call(this, container, options) || this;\n  }\n\n  Object.defineProperty(bubbleMapItem.prototype, \"dataController\", {\n    get: function () {\n      return this._dataController;\n    },\n    set: function (dataController) {\n      this._dataController = dataController;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  bubbleMapItem.prototype._getMarkerLayers = function () {\n    return [this.mapViewer.getLayerByName('bubble')];\n  };\n\n  bubbleMapItem.prototype._configureMarkerLayers = function (viewModel) {\n    var markerDataSource = this._getMarkerDataSource(),\n        markerSettings = markerDataSource.length > 0 ? this._getMarker(viewModel, markerDataSource) : null;\n\n    return [__assign({\n      name: 'bubble',\n      type: 'marker',\n      elementType: 'bubble',\n      dataField: 'value',\n      dataSource: markerDataSource\n    }, markerSettings)];\n  };\n\n  bubbleMapItem.prototype._getMarkerDataSource = function () {\n    var viewModel = this.options.ViewModel,\n        markerDataSource = [],\n        point;\n\n    for (var i = 0; i < this._dataController.getCount(); i++) {\n      point = this._dataController.getPoint(i);\n      markerDataSource.push({\n        coordinates: [point.lon, point.lat],\n        attributes: {\n          latSelection: point.latSel,\n          lonSelection: point.lonSel,\n          selected: this._isSelected([point.latSel, point.lonSel]),\n          value: point.weight || (point.pointsCount > 1 ? 1 : 0),\n          colorValue: point.color || 0,\n          tooltip: this._getBubbleTooltip(viewModel, point.weightText, point.colorText, point.pointsCount),\n          dimensionsTooltip: this._getDimensionsTooltipHtml(point.tooltipDimensions),\n          measuresTooltip: this._getMeasuresTooltipHtml(point.tooltipMeasures)\n        }\n      });\n    }\n\n    return markerDataSource;\n  };\n\n  bubbleMapItem.prototype._getMarker = function (viewModel, markerDataSource) {\n    var rangeStops = viewModel.ColorId ? this._getBubbleRangeStops(viewModel.Colorizer, markerDataSource) : [0, 1],\n        colors = this._getBubbleColors(viewModel.Colorizer.Colors, rangeStops.length - 1),\n        minSize,\n        maxSize,\n        options = {\n      palette: colors,\n      colorGroups: rangeStops,\n      colorGroupingField: 'colorValue',\n      sizeGroups: viewModel.WeightId ? this._getBubbleWeightRangeStops(markerDataSource) : null\n    },\n        baseMarkers = _super.prototype._getMarker.call(this, viewModel, markerDataSource);\n\n    if (viewModel.WeightId) {\n      minSize = 20;\n      maxSize = 60;\n    } else {\n      var res = this._getMinMaxValues(markerDataSource);\n\n      if (res.min !== res.max) {\n        minSize = 20;\n        maxSize = 40;\n      } else if (res.min === 1) {\n        minSize = 40;\n        maxSize = 40;\n      } else {\n        minSize = 20;\n        maxSize = 20;\n      }\n    }\n\n    options.minSize = minSize;\n    options.maxSize = maxSize;\n    return _jquery_helpers_1.deepExtend(baseMarkers, options);\n  };\n\n  bubbleMapItem.prototype._getColorLegend = function (viewModel) {\n    var that = this;\n\n    if (!viewModel.ColorId) {\n      return;\n    }\n\n    var legend = _super.prototype._getColorLegend.call(this, viewModel);\n\n    if (legend) {\n      legend.source.layer = 'bubble';\n\n      legend.customizeText = function (arg) {\n        return that._dataController.formatColor(arg.start);\n      };\n    }\n\n    return legend;\n  };\n\n  bubbleMapItem.prototype._getWeightLegend = function (viewModel) {\n    var that = this;\n\n    if (!viewModel.WeightId) {\n      return;\n    }\n\n    var legend = _super.prototype._getWeightLegend.call(this, viewModel);\n\n    if (legend) {\n      legend.source.layer = 'bubble';\n\n      legend.customizeText = function (arg) {\n        return that._dataController.formatWeight(arg.start);\n      };\n    }\n\n    return legend;\n  };\n\n  bubbleMapItem.prototype._getBubbleTooltip = function (viewModel, weight, color, pointsCount) {\n    var strs = [];\n\n    if (pointsCount && pointsCount > 1) {\n      strs.push(this._pointsCountTooltip(pointsCount));\n    }\n\n    if (weight) {\n      strs.push(this._getToolTip(viewModel.WeightName, weight));\n    }\n\n    if (color && viewModel.ColorName !== viewModel.WeightName) {\n      strs.push(this._getToolTip(viewModel.ColorName, color));\n    }\n\n    return strs.join('<br>');\n  };\n\n  bubbleMapItem.prototype._getBubbleRangeStops = function (colorizer, markerDataSource) {\n    var max = markerDataSource[0].attributes.colorValue,\n        min = markerDataSource[0].attributes.colorValue;\n\n    for (var i = 1; i < markerDataSource.length; i++) {\n      if (markerDataSource[i].attributes.colorValue > max) {\n        max = markerDataSource[i].attributes.colorValue;\n      }\n\n      if (markerDataSource[i].attributes.colorValue < min) {\n        min = markerDataSource[i].attributes.colorValue;\n      }\n    }\n\n    return this._updateRangeStops(colorizer.RangeStops, min, max, colorizer.UsePercentRangeStops);\n  };\n\n  bubbleMapItem.prototype._getBubbleWeightRangeStops = function (markerDataSource) {\n    var max = markerDataSource[0].attributes.value,\n        min = markerDataSource[0].attributes.value;\n\n    for (var i = 1; i < markerDataSource.length; i++) {\n      if (markerDataSource[i].attributes.value > max) {\n        max = markerDataSource[i].attributes.value;\n      }\n\n      if (markerDataSource[i].attributes.value < min) {\n        min = markerDataSource[i].attributes.value;\n      }\n    }\n\n    return this._updateRangeStops([0, 25, 50, 75], min, max, true);\n  };\n\n  bubbleMapItem.prototype._getBubbleColors = function (colorModels, defaultColorsCount) {\n    var colors = this._getColors(colorModels);\n\n    return colors ? colors : this._getDefaultBubbleColorizerColors(defaultColorsCount);\n  };\n\n  bubbleMapItem.prototype._getDefaultBubbleColorizerColors = function (count) {\n    var startColor = new color_1.default('rgb(54, 170, 206)'),\n        endColor = new color_1.default('rgb(255, 93, 106)'),\n        colors = [];\n\n    if (count === 1) {\n      return [startColor.toHex()];\n    }\n\n    for (var i = 0; i < count; i++) {\n      colors.push(startColor.blend(endColor, i / (count - 1)).toHex());\n    }\n\n    return colors;\n  };\n\n  bubbleMapItem.prototype._getDataPointMeasureIds = function () {\n    var viewModel = this.options.ViewModel,\n        measureIds = [];\n    measureIds.push(viewModel.WeightId);\n    measureIds.push(viewModel.ColorId);\n    return measureIds;\n  };\n\n  return bubbleMapItem;\n}(_geo_point_map_item_base_1.geoPointMapItemBase);\n\nexports.bubbleMapItem = bubbleMapItem;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/viewer-parts/viewer-items/_bubble-map-item.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","defineProperty","exports","value","bubbleMapItem","color_1","require","_jquery_helpers_1","_geo_point_map_item_base_1","_super","container","options","get","_dataController","set","dataController","enumerable","configurable","_getMarkerLayers","mapViewer","getLayerByName","_configureMarkerLayers","viewModel","markerDataSource","_getMarkerDataSource","markerSettings","_getMarker","name","type","elementType","dataField","dataSource","ViewModel","point","getCount","getPoint","push","coordinates","lon","lat","attributes","latSelection","latSel","lonSelection","lonSel","selected","_isSelected","weight","pointsCount","colorValue","color","tooltip","_getBubbleTooltip","weightText","colorText","dimensionsTooltip","_getDimensionsTooltipHtml","tooltipDimensions","measuresTooltip","_getMeasuresTooltipHtml","tooltipMeasures","rangeStops","ColorId","_getBubbleRangeStops","Colorizer","colors","_getBubbleColors","Colors","minSize","maxSize","palette","colorGroups","colorGroupingField","sizeGroups","WeightId","_getBubbleWeightRangeStops","baseMarkers","res","_getMinMaxValues","min","max","deepExtend","_getColorLegend","that","legend","source","layer","customizeText","arg","formatColor","start","_getWeightLegend","formatWeight","strs","_pointsCountTooltip","_getToolTip","WeightName","ColorName","join","colorizer","_updateRangeStops","RangeStops","UsePercentRangeStops","colorModels","defaultColorsCount","_getColors","_getDefaultBubbleColorizerColors","count","startColor","default","endColor","toHex","blend","_getDataPointMeasureIds","measureIds","geoPointMapItemBase"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_bubble-map-item.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bubbleMapItem = void 0;\nvar color_1 = require(\"devextreme/color\");\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar _geo_point_map_item_base_1 = require(\"./_geo-point-map-item-base\");\nvar bubbleMapItem = (function (_super) {\n    __extends(bubbleMapItem, _super);\n    function bubbleMapItem(container, options) {\n        return _super.call(this, container, options) || this;\n    }\n    Object.defineProperty(bubbleMapItem.prototype, \"dataController\", {\n        get: function () { return this._dataController; },\n        set: function (dataController) { this._dataController = dataController; },\n        enumerable: false,\n        configurable: true\n    });\n    bubbleMapItem.prototype._getMarkerLayers = function () {\n        return [this.mapViewer.getLayerByName('bubble')];\n    };\n    bubbleMapItem.prototype._configureMarkerLayers = function (viewModel) {\n        var markerDataSource = this._getMarkerDataSource(), markerSettings = markerDataSource.length > 0 ? this._getMarker(viewModel, markerDataSource) : null;\n        return [__assign({ name: 'bubble', type: 'marker', elementType: 'bubble', dataField: 'value', dataSource: markerDataSource }, markerSettings)];\n    };\n    bubbleMapItem.prototype._getMarkerDataSource = function () {\n        var viewModel = this.options.ViewModel, markerDataSource = [], point;\n        for (var i = 0; i < this._dataController.getCount(); i++) {\n            point = this._dataController.getPoint(i);\n            markerDataSource.push({\n                coordinates: [point.lon, point.lat],\n                attributes: {\n                    latSelection: point.latSel,\n                    lonSelection: point.lonSel,\n                    selected: this._isSelected([point.latSel, point.lonSel]),\n                    value: point.weight || (point.pointsCount > 1 ? 1 : 0),\n                    colorValue: point.color || 0,\n                    tooltip: this._getBubbleTooltip(viewModel, point.weightText, point.colorText, point.pointsCount),\n                    dimensionsTooltip: this._getDimensionsTooltipHtml(point.tooltipDimensions),\n                    measuresTooltip: this._getMeasuresTooltipHtml(point.tooltipMeasures)\n                }\n            });\n        }\n        return markerDataSource;\n    };\n    bubbleMapItem.prototype._getMarker = function (viewModel, markerDataSource) {\n        var rangeStops = viewModel.ColorId ? this._getBubbleRangeStops(viewModel.Colorizer, markerDataSource) : [0, 1], colors = this._getBubbleColors(viewModel.Colorizer.Colors, rangeStops.length - 1), minSize, maxSize, options = {\n            palette: colors,\n            colorGroups: rangeStops,\n            colorGroupingField: 'colorValue',\n            sizeGroups: viewModel.WeightId ? this._getBubbleWeightRangeStops(markerDataSource) : null\n        }, baseMarkers = _super.prototype._getMarker.call(this, viewModel, markerDataSource);\n        if (viewModel.WeightId) {\n            minSize = 20;\n            maxSize = 60;\n        }\n        else {\n            var res = this._getMinMaxValues(markerDataSource);\n            if (res.min !== res.max) {\n                minSize = 20;\n                maxSize = 40;\n            }\n            else if (res.min === 1) {\n                minSize = 40;\n                maxSize = 40;\n            }\n            else {\n                minSize = 20;\n                maxSize = 20;\n            }\n        }\n        options.minSize = minSize;\n        options.maxSize = maxSize;\n        return _jquery_helpers_1.deepExtend(baseMarkers, options);\n    };\n    bubbleMapItem.prototype._getColorLegend = function (viewModel) {\n        var that = this;\n        if (!viewModel.ColorId) {\n            return;\n        }\n        var legend = _super.prototype._getColorLegend.call(this, viewModel);\n        if (legend) {\n            legend.source.layer = 'bubble';\n            legend.customizeText = function (arg) {\n                return that._dataController.formatColor(arg.start);\n            };\n        }\n        return legend;\n    };\n    bubbleMapItem.prototype._getWeightLegend = function (viewModel) {\n        var that = this;\n        if (!viewModel.WeightId) {\n            return;\n        }\n        var legend = _super.prototype._getWeightLegend.call(this, viewModel);\n        if (legend) {\n            legend.source.layer = 'bubble';\n            legend.customizeText = function (arg) {\n                return that._dataController.formatWeight(arg.start);\n            };\n        }\n        return legend;\n    };\n    bubbleMapItem.prototype._getBubbleTooltip = function (viewModel, weight, color, pointsCount) {\n        var strs = [];\n        if (pointsCount && pointsCount > 1) {\n            strs.push(this._pointsCountTooltip(pointsCount));\n        }\n        if (weight) {\n            strs.push(this._getToolTip(viewModel.WeightName, weight));\n        }\n        if (color && viewModel.ColorName !== viewModel.WeightName) {\n            strs.push(this._getToolTip(viewModel.ColorName, color));\n        }\n        return strs.join('<br>');\n    };\n    bubbleMapItem.prototype._getBubbleRangeStops = function (colorizer, markerDataSource) {\n        var max = markerDataSource[0].attributes.colorValue, min = markerDataSource[0].attributes.colorValue;\n        for (var i = 1; i < markerDataSource.length; i++) {\n            if (markerDataSource[i].attributes.colorValue > max) {\n                max = markerDataSource[i].attributes.colorValue;\n            }\n            if (markerDataSource[i].attributes.colorValue < min) {\n                min = markerDataSource[i].attributes.colorValue;\n            }\n        }\n        return this._updateRangeStops(colorizer.RangeStops, min, max, colorizer.UsePercentRangeStops);\n    };\n    bubbleMapItem.prototype._getBubbleWeightRangeStops = function (markerDataSource) {\n        var max = markerDataSource[0].attributes.value, min = markerDataSource[0].attributes.value;\n        for (var i = 1; i < markerDataSource.length; i++) {\n            if (markerDataSource[i].attributes.value > max) {\n                max = markerDataSource[i].attributes.value;\n            }\n            if (markerDataSource[i].attributes.value < min) {\n                min = markerDataSource[i].attributes.value;\n            }\n        }\n        return this._updateRangeStops([0, 25, 50, 75], min, max, true);\n    };\n    bubbleMapItem.prototype._getBubbleColors = function (colorModels, defaultColorsCount) {\n        var colors = this._getColors(colorModels);\n        return colors ? colors : this._getDefaultBubbleColorizerColors(defaultColorsCount);\n    };\n    bubbleMapItem.prototype._getDefaultBubbleColorizerColors = function (count) {\n        var startColor = new color_1.default('rgb(54, 170, 206)'), endColor = new color_1.default('rgb(255, 93, 106)'), colors = [];\n        if (count === 1) {\n            return [startColor.toHex()];\n        }\n        for (var i = 0; i < count; i++) {\n            colors.push(startColor.blend(endColor, i / (count - 1)).toHex());\n        }\n        return colors;\n    };\n    bubbleMapItem.prototype._getDataPointMeasureIds = function () {\n        var viewModel = this.options.ViewModel, measureIds = [];\n        measureIds.push(viewModel.WeightId);\n        measureIds.push(viewModel.ColorId);\n        return measureIds;\n    };\n    return bubbleMapItem;\n}(_geo_point_map_item_base_1.geoPointMapItemBase));\nexports.bubbleMapItem = bubbleMapItem;\n"]},"metadata":{},"sourceType":"script"}