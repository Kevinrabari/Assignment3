{"ast":null,"code":"/**\n* DevExpress Analytics (widgets\\criteria\\operators\\aggregate.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AggregateOperand = void 0;\n\nvar criteriaOperator_1 = require(\"./criteriaOperator\");\n\nvar unary_1 = require(\"./unary\");\n\nvar binary_1 = require(\"./options/binary\");\n\nvar unary_2 = require(\"./options/unary\");\n\nvar group_1 = require(\"./options/group\");\n\nvar criteriaOperatorPreprocessor_1 = require(\"../utils/criteriaOperatorPreprocessor\");\n\nvar AggregateOperand = function (_super) {\n  __extends(AggregateOperand, _super);\n\n  function AggregateOperand(property, aggregatedExpression, aggregateType, condition) {\n    var _this = _super.call(this) || this;\n\n    _this.change = function (operationType, item) {\n      var operator = null;\n\n      if (operationType.type === group_1.GroupOperatorType) {\n        operator = criteriaOperatorPreprocessor_1.criteriaCreator.changeByType(operationType);\n\n        if (operationType.type !== operator.enumType) {\n          operator.leftPart.assignFrom(item);\n        } else {\n          operator.assignFrom(item);\n        }\n\n        _this.condition = operator;\n      }\n\n      return operator;\n    };\n\n    _this.assignLeftPart = function (criteriaOperator) {\n      if (criteriaOperator.leftPart instanceof AggregateOperand) {\n        _this.assignFrom(criteriaOperator.leftPart);\n      } else {\n        if (criteriaOperator instanceof AggregateOperand) {\n          _this.property = criteriaOperator.property;\n\n          if (_this.aggregatedExpression && criteriaOperator.aggregatedExpression) {\n            _this.aggregatedExpression = criteriaOperator.aggregatedExpression;\n          }\n\n          _this.condition = criteriaOperator.condition;\n        } else {\n          _this.property = criteriaOperator.leftPart;\n        }\n      }\n    };\n\n    _this.type = 'aggregate';\n    _this.property = property;\n\n    if (!!condition && condition.type === 'group') {\n      _this.condition = condition;\n    } else {\n      if (condition instanceof unary_1.UnaryOperator && condition.operatorType === unary_2.UnaryOperatorType.Not) {\n        if (condition.operand.type === 'group') {\n          _this.condition = criteriaOperatorPreprocessor_1.criteriaCreator.process('unary', {\n            operator: condition.operand,\n            operatorType: unary_2.UnaryOperatorType.Not\n          });\n        } else {\n          _this.condition = criteriaOperatorPreprocessor_1.criteriaCreator.process('unary', {\n            operator: criteriaOperatorPreprocessor_1.criteriaCreator.process('group', {\n              operation: group_1.GroupOperatorType.And,\n              operands: condition.operand ? [condition.operand] : []\n            }),\n            operatorType: unary_2.UnaryOperatorType.Not\n          });\n        }\n      } else {\n        _this.condition = criteriaOperatorPreprocessor_1.criteriaCreator.process('group', {\n          operation: group_1.GroupOperatorType.And,\n          operands: condition ? [condition] : []\n        });\n      }\n    }\n\n    _this.operatorType = aggregateType;\n    _this.aggregatedExpression = aggregatedExpression;\n    return _this;\n  }\n\n  Object.defineProperty(AggregateOperand.prototype, \"displayType\", {\n    get: function () {\n      return this.operatorType;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AggregateOperand.prototype, \"enumType\", {\n    get: function () {\n      return AggregateOperand;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AggregateOperand.prototype, \"leftPart\", {\n    get: function () {\n      return this.property;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AggregateOperand.prototype.children = function () {\n    var operands = [];\n    this.condition && operands.push(this.condition);\n    this.aggregatedExpression && operands.push(this.aggregatedExpression);\n    return operands;\n  };\n\n  AggregateOperand.prototype.accept = function (visitor) {\n    return visitor.visitAggregateOperand ? visitor.visitAggregateOperand(this) : criteriaOperatorPreprocessor_1.criteriaCreator.process('aggregate', {\n      aggregateType: this.operatorType,\n      aggregatedExpression: this.aggregatedExpression && this.aggregatedExpression.accept(visitor),\n      condition: this.condition && this.condition.accept(visitor),\n      property: this.property && this.property.accept(visitor)\n    });\n  };\n\n  return AggregateOperand;\n}(criteriaOperator_1.CriteriaOperator);\n\nexports.AggregateOperand = AggregateOperand;\ncriteriaOperatorPreprocessor_1.criteriaCreator.register('aggregate', function (options) {\n  return new AggregateOperand(options.property, options.aggregatedExpression, options.aggregateType, options.condition);\n}, function (operatorType) {\n  var options = {\n    property: criteriaOperatorPreprocessor_1.criteriaCreator.process('property'),\n    aggregateType: operatorType.value,\n    aggregatedExpression: null,\n    condition: criteriaOperatorPreprocessor_1.criteriaCreator.process('group', {\n      operation: group_1.GroupOperatorType.And,\n      operands: []\n    })\n  };\n\n  if (operatorType.value === 'Exists') {\n    return criteriaOperatorPreprocessor_1.criteriaCreator.process('aggregate', options);\n  } else {\n    if (operatorType.value !== 'Count') {\n      options.aggregatedExpression = criteriaOperatorPreprocessor_1.criteriaCreator.process('property');\n    }\n\n    return criteriaOperatorPreprocessor_1.criteriaCreator.process('binary', {\n      left: criteriaOperatorPreprocessor_1.criteriaCreator.process('aggregate', options),\n      right: criteriaOperatorPreprocessor_1.criteriaCreator.process('value', {\n        value: undefined\n      }),\n      operatorType: binary_1.BinaryOperatorType.Equal\n    });\n  }\n});","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/widgets/criteria/operators/aggregate.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","AggregateOperand","criteriaOperator_1","require","unary_1","binary_1","unary_2","group_1","criteriaOperatorPreprocessor_1","_super","property","aggregatedExpression","aggregateType","condition","_this","change","operationType","item","operator","type","GroupOperatorType","criteriaCreator","changeByType","enumType","leftPart","assignFrom","assignLeftPart","criteriaOperator","UnaryOperator","operatorType","UnaryOperatorType","Not","operand","process","operation","And","operands","get","enumerable","configurable","children","push","accept","visitor","visitAggregateOperand","CriteriaOperator","register","options","left","right","undefined","BinaryOperatorType","Equal"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (widgets\\criteria\\operators\\aggregate.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AggregateOperand = void 0;\nvar criteriaOperator_1 = require(\"./criteriaOperator\");\nvar unary_1 = require(\"./unary\");\nvar binary_1 = require(\"./options/binary\");\nvar unary_2 = require(\"./options/unary\");\nvar group_1 = require(\"./options/group\");\nvar criteriaOperatorPreprocessor_1 = require(\"../utils/criteriaOperatorPreprocessor\");\nvar AggregateOperand = (function (_super) {\n    __extends(AggregateOperand, _super);\n    function AggregateOperand(property, aggregatedExpression, aggregateType, condition) {\n        var _this = _super.call(this) || this;\n        _this.change = function (operationType, item) {\n            var operator = null;\n            if (operationType.type === group_1.GroupOperatorType) {\n                operator = criteriaOperatorPreprocessor_1.criteriaCreator.changeByType(operationType);\n                if (operationType.type !== operator.enumType) {\n                    operator.leftPart.assignFrom(item);\n                }\n                else {\n                    operator.assignFrom(item);\n                }\n                _this.condition = operator;\n            }\n            return operator;\n        };\n        _this.assignLeftPart = function (criteriaOperator) {\n            if (criteriaOperator.leftPart instanceof AggregateOperand) {\n                _this.assignFrom(criteriaOperator.leftPart);\n            }\n            else {\n                if (criteriaOperator instanceof AggregateOperand) {\n                    _this.property = criteriaOperator.property;\n                    if (_this.aggregatedExpression && criteriaOperator.aggregatedExpression) {\n                        _this.aggregatedExpression = criteriaOperator.aggregatedExpression;\n                    }\n                    _this.condition = criteriaOperator.condition;\n                }\n                else {\n                    _this.property = criteriaOperator.leftPart;\n                }\n            }\n        };\n        _this.type = 'aggregate';\n        _this.property = property;\n        if (!!condition && condition.type === 'group') {\n            _this.condition = condition;\n        }\n        else {\n            if (condition instanceof unary_1.UnaryOperator && condition.operatorType === unary_2.UnaryOperatorType.Not) {\n                if (condition.operand.type === 'group') {\n                    _this.condition = criteriaOperatorPreprocessor_1.criteriaCreator.process('unary', { operator: condition.operand, operatorType: unary_2.UnaryOperatorType.Not });\n                }\n                else {\n                    _this.condition = criteriaOperatorPreprocessor_1.criteriaCreator.process('unary', {\n                        operator: criteriaOperatorPreprocessor_1.criteriaCreator.process('group', {\n                            operation: group_1.GroupOperatorType.And,\n                            operands: condition.operand ? [condition.operand] : []\n                        }),\n                        operatorType: unary_2.UnaryOperatorType.Not\n                    });\n                }\n            }\n            else {\n                _this.condition = criteriaOperatorPreprocessor_1.criteriaCreator.process('group', {\n                    operation: group_1.GroupOperatorType.And,\n                    operands: condition ? [condition] : []\n                });\n            }\n        }\n        _this.operatorType = aggregateType;\n        _this.aggregatedExpression = aggregatedExpression;\n        return _this;\n    }\n    Object.defineProperty(AggregateOperand.prototype, \"displayType\", {\n        get: function () {\n            return this.operatorType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AggregateOperand.prototype, \"enumType\", {\n        get: function () {\n            return AggregateOperand;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AggregateOperand.prototype, \"leftPart\", {\n        get: function () {\n            return this.property;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AggregateOperand.prototype.children = function () {\n        var operands = [];\n        this.condition && operands.push(this.condition);\n        this.aggregatedExpression && operands.push(this.aggregatedExpression);\n        return operands;\n    };\n    AggregateOperand.prototype.accept = function (visitor) {\n        return visitor.visitAggregateOperand\n            ? visitor.visitAggregateOperand(this)\n            : criteriaOperatorPreprocessor_1.criteriaCreator.process('aggregate', {\n                aggregateType: this.operatorType,\n                aggregatedExpression: this.aggregatedExpression && this.aggregatedExpression.accept(visitor),\n                condition: this.condition && this.condition.accept(visitor),\n                property: this.property && this.property.accept(visitor)\n            });\n    };\n    return AggregateOperand;\n}(criteriaOperator_1.CriteriaOperator));\nexports.AggregateOperand = AggregateOperand;\ncriteriaOperatorPreprocessor_1.criteriaCreator.register('aggregate', function (options) {\n    return new AggregateOperand(options.property, options.aggregatedExpression, options.aggregateType, options.condition);\n}, function (operatorType) {\n    var options = {\n        property: criteriaOperatorPreprocessor_1.criteriaCreator.process('property'),\n        aggregateType: operatorType.value,\n        aggregatedExpression: null,\n        condition: criteriaOperatorPreprocessor_1.criteriaCreator.process('group', { operation: group_1.GroupOperatorType.And, operands: [] })\n    };\n    if (operatorType.value === 'Exists') {\n        return criteriaOperatorPreprocessor_1.criteriaCreator.process('aggregate', options);\n    }\n    else {\n        if (operatorType.value !== 'Count') {\n            options.aggregatedExpression = criteriaOperatorPreprocessor_1.criteriaCreator.process('property');\n        }\n        return criteriaOperatorPreprocessor_1.criteriaCreator.process('binary', {\n            left: criteriaOperatorPreprocessor_1.criteriaCreator.process('aggregate', options),\n            right: criteriaOperatorPreprocessor_1.criteriaCreator.process('value', { value: undefined }),\n            operatorType: binary_1.BinaryOperatorType.Equal\n        });\n    }\n});\n"]},"metadata":{},"sourceType":"script"}