{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_filter-element-data-controller.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.treeViewDataController = exports.listViewDataController = exports.filterElementDataController = exports.KEY_EXPR = exports.VALUE_EXPR = void 0;\n\nvar legacy_settings_1 = require(\"../../viewer-parts/legacy-settings\");\n\nvar item_data_axis_names_1 = require(\"../item-data/item-data-axis-names\");\n\nvar special_values_1 = require(\"../special-values\");\n\nvar _hashset_wrapper_1 = require(\"../_hashset-wrapper\");\n\nvar _localizer_1 = require(\"../_localizer\");\n\nvar _utils_1 = require(\"../_utils\");\n\nvar _data_controller_base_1 = require(\"./_data-controller-base\");\n\nexports.VALUE_EXPR = 'value';\nexports.KEY_EXPR = 'key';\n\nvar filterElementDataController = function (_super) {\n  __extends(filterElementDataController, _super);\n\n  function filterElementDataController(options) {\n    var _this = _super.call(this, options) || this;\n\n    _this._reset();\n\n    return _this;\n  }\n\n  filterElementDataController.prototype.getAllItemIndex = function () {\n    return this.dataSource ? this.dataSource.indexOf(_localizer_1.ALL_ELEMENT) : -1;\n  };\n\n  filterElementDataController.prototype.getDataSourceItemKey = function (item) {\n    return item[exports.KEY_EXPR];\n  };\n\n  filterElementDataController.prototype.getDataSourceItemByKey = function (key) {\n    return this.dataSource.filter(function (item) {\n      return item[exports.KEY_EXPR] === key;\n    })[0];\n  };\n\n  filterElementDataController.prototype.isAllSelected = function () {\n    return this.dataSource && this.selection ? this.dataSource.length === this.selection.length : false;\n  };\n\n  filterElementDataController.prototype.update = function (selectedValues, encodeHtml, selectionOnly) {\n    var _this = this;\n\n    if (selectionOnly === void 0) {\n      selectionOnly = false;\n    }\n\n    this._reset(selectionOnly);\n\n    var hashset = new _hashset_wrapper_1.HashsetWrapper(selectedValues || []);\n\n    var key = 0,\n        applySelection = function (dataItem) {\n      if (hashset.contains(dataItem[exports.VALUE_EXPR])) {\n        _this.selection.push(dataItem);\n      }\n\n      _this.fullSelection.push(dataItem);\n    },\n        hasAllElement = this.viewModel && this.viewModel.ShowAllValue && !this.isMultiselectable() && !this.useNeutralFilterMode,\n        points = this.multiData ? this.multiData.getAxis(item_data_axis_names_1.itemDataAxisNames.defaultAxis).getPoints(true) : [];\n\n    if (selectionOnly) {\n      this.dataSource.forEach(function (dataItem) {\n        return applySelection(dataItem);\n      });\n    } else {\n      if (hasAllElement && points.length > 0) {\n        this.dataSource.push(_localizer_1.ALL_ELEMENT);\n      }\n\n      points.forEach(function (point) {\n        var _a;\n\n        var dataItem = (_a = {}, _a[exports.KEY_EXPR] = key++, _a[exports.VALUE_EXPR] = point.getUniquePath(), _a);\n\n        if (encodeHtml) {\n          dataItem.text = _this.getTitle(point, ', ', true);\n        } else {\n          dataItem.html = _this.getTitle(point, ', ', true);\n        }\n\n        _this.dataSource.push(dataItem);\n\n        applySelection(dataItem);\n      });\n    }\n\n    if (hasAllElement && (!this.useNeutralFilterMode && this.dataSource.length - 1 === this.selection.length || !!this.useNeutralFilterMode && !this.selection.length)) {\n      this.selection.splice(0, 0, _localizer_1.ALL_ELEMENT);\n      this.fullSelection.splice(0, 0, _localizer_1.ALL_ELEMENT);\n    }\n  };\n\n  filterElementDataController.prototype.getInteractionValues = function (elements, selectedValues) {\n    var _this = this;\n\n    var hasAll = !this.isMultiselectable() && elements && elements.indexOf(_localizer_1.ALL_ELEMENT) !== -1;\n    if (!!this.useNeutralFilterMode && hasAll) return null;\n    var values = [],\n        items = hasAll ? this.dataSource : elements;\n    items.forEach(function (item) {\n      if (item !== _localizer_1.ALL_ELEMENT) {\n        values.push(_this._getDataValue(item));\n      }\n    });\n    return values;\n  };\n\n  filterElementDataController.prototype._getDataValue = function (wrappedValue) {\n    var itemData = wrappedValue && wrappedValue.itemData || wrappedValue;\n    if (itemData[exports.VALUE_EXPR] != null) return itemData[exports.VALUE_EXPR];\n    return null;\n  };\n\n  filterElementDataController.prototype._reset = function (selectionOnly) {\n    if (selectionOnly === void 0) {\n      selectionOnly = false;\n    }\n\n    if (!selectionOnly) {\n      this.dataSource = [];\n    }\n\n    this.selection = [];\n    this.fullSelection = [];\n  };\n\n  return filterElementDataController;\n}(_data_controller_base_1.dataControllerBase);\n\nexports.filterElementDataController = filterElementDataController;\n\nvar listViewDataController = function (_super) {\n  __extends(listViewDataController, _super);\n\n  function listViewDataController(options) {\n    var _this = _super.call(this, options) || this;\n\n    _this.ListBoxType = {\n      Checked: 'Checked',\n      Radio: 'Radio'\n    };\n    _this.ComboBoxType = {\n      Standard: 'Standard',\n      Checked: 'Checked'\n    };\n    return _this;\n  }\n\n  listViewDataController.prototype.isMultiselectable = function () {\n    return !this.viewModel || this.viewModel.ListBoxType == this.ListBoxType.Checked || this.viewModel.ComboBoxType == this.ListBoxType.Checked;\n  };\n\n  return listViewDataController;\n}(filterElementDataController);\n\nexports.listViewDataController = listViewDataController;\n\nvar treeViewDataController = function (_super) {\n  __extends(treeViewDataController, _super);\n\n  function treeViewDataController(options) {\n    return _super.call(this, options) || this;\n  }\n\n  treeViewDataController.prototype.isMultiselectable = function () {\n    return true;\n  };\n\n  treeViewDataController.prototype.getAllItemIndex = function () {\n    return -1;\n  };\n\n  treeViewDataController.prototype.isAllSelected = function () {\n    return false;\n  };\n\n  treeViewDataController.prototype.update = function (selectedValues, encodeHtml, selectionOnly) {\n    var _this = this;\n\n    if (selectionOnly === void 0) {\n      selectionOnly = false;\n    }\n\n    this._reset(selectionOnly);\n\n    if (selectionOnly) return this._updateSelection(selectedValues);\n\n    var hash = _utils_1.wrapHash(selectedValues),\n        sourceItems = this.multiData ? this.multiData.getAxis('Default').getRootPoint().getChildren() : [],\n        key = 1,\n        createDestNode = function (sourceNode) {\n      var dataItem = {};\n      dataItem[exports.KEY_EXPR] = key++;\n      dataItem[exports.VALUE_EXPR] = sourceNode.getUniqueValue();\n      dataItem[encodeHtml || !legacy_settings_1.LegacySettings.useLegacyTreeView ? 'text' : 'html'] = sourceNode.getDisplayText();\n\n      if (legacy_settings_1.LegacySettings.useLegacyTreeView) {\n        dataItem['expanded'] = _this.viewModel.AutoExpandNodes;\n      }\n\n      return dataItem;\n    },\n        walkTree = function (sourceNode, destNodeItems, branch, nullChildCount) {\n      var children = sourceNode.getChildren();\n      var nextNull = 0;\n\n      while (children.length == 1 && children[0].getUniqueValue() === special_values_1.specialValues.olapNullValueGuid) {\n        children = children[0].getChildren();\n        nextNull++;\n      }\n\n      var hasChildren = children && children.length !== 0,\n          subDestNode = createDestNode(sourceNode),\n          currentBranch = branch.slice();\n      subDestNode.nullChildCount = nextNull;\n\n      for (var a = 0; a < nullChildCount; a++) currentBranch.push(special_values_1.specialValues.olapNullValueGuid);\n\n      currentBranch.push(subDestNode.value);\n      destNodeItems.push(subDestNode);\n\n      if (hasChildren) {\n        subDestNode.items = [];\n        children.forEach(function (node) {\n          walkTree(node, subDestNode.items, currentBranch, nextNull);\n        });\n      } else {\n        for (var a = 0; a < nextNull; a++) currentBranch.push(special_values_1.specialValues.olapNullValueGuid);\n\n        if (legacy_settings_1.LegacySettings.useLegacyTreeView) {\n          subDestNode.selected = !!hash[currentBranch];\n        } else {\n          if (!!hash[currentBranch]) {\n            _this.selection.push(subDestNode[exports.KEY_EXPR]);\n          }\n        }\n      }\n    };\n\n    sourceItems.forEach(function (sourceItem) {\n      walkTree(sourceItem, _this.dataSource, [], 0);\n    });\n  };\n\n  treeViewDataController.prototype.getInteractionValues = function (elements, selectedValues) {\n    var _this = this;\n\n    if (!legacy_settings_1.LegacySettings.useLegacyTreeView) return elements;\n\n    var hash = _utils_1.wrapHash(selectedValues),\n        parent = elements.length ? elements[0].parent : undefined,\n        rootBranch = [],\n        resultSelection = [],\n        prepareSelectionItems = function (items, parentBranch) {\n      items.forEach(function (item) {\n        var itemBranch = parentBranch.slice(),\n            value = _this._getDataValue(item),\n            nullChildCount = _this._getDataNullChildCount(item);\n\n        itemBranch.push(value);\n\n        for (var a = 0; a < nullChildCount; a++) itemBranch.push(special_values_1.specialValues.olapNullValueGuid);\n\n        if (!!item.items && item.items.length) {\n          prepareSelectionItems(item.items, itemBranch);\n        } else {\n          var isSelected = !!hash[itemBranch];\n\n          if (!legacy_settings_1.LegacySettings.useLegacyTreeView && !isSelected || legacy_settings_1.LegacySettings.useLegacyTreeView && (item.selected && !isSelected || !item.selected && isSelected)) {\n            resultSelection.push(itemBranch);\n          }\n        }\n      });\n    };\n\n    while (parent) {\n      rootBranch.splice(0, 0, this._getDataValue(parent));\n      parent = parent.parent;\n    }\n\n    prepareSelectionItems(elements, rootBranch);\n    return resultSelection;\n  };\n\n  treeViewDataController.prototype._updateSelection = function (selectedValues) {\n    var _this = this;\n\n    var hash = _utils_1.wrapHash(selectedValues);\n\n    var updateItemsSelectedState = function (items, parentBranch) {\n      items.forEach(function (item) {\n        var itemBranch = parentBranch.slice(),\n            value = _this._getDataValue(item),\n            nullChildCount = _this._getDataNullChildCount(item);\n\n        itemBranch.push(value);\n\n        for (var a = 0; a < nullChildCount; a++) itemBranch.push(special_values_1.specialValues.olapNullValueGuid);\n\n        if (item.items && item.items.length) {\n          updateItemsSelectedState(item.items, itemBranch);\n        } else {\n          if (legacy_settings_1.LegacySettings.useLegacyTreeView) {\n            item.selected = !!hash[itemBranch];\n          } else {\n            if (!!hash[itemBranch]) {\n              _this.selection.push(item[exports.KEY_EXPR]);\n            }\n          }\n        }\n      });\n    };\n\n    updateItemsSelectedState(this.dataSource, []);\n  };\n\n  treeViewDataController.prototype._getDataNullChildCount = function (wrappedValue) {\n    var itemData = wrappedValue && wrappedValue.itemData || wrappedValue;\n    if (itemData['nullChildCount'] != null) return itemData['nullChildCount'];\n    return 0;\n  };\n\n  return treeViewDataController;\n}(filterElementDataController);\n\nexports.treeViewDataController = treeViewDataController;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/data/data-controllers/_filter-element-data-controller.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","treeViewDataController","listViewDataController","filterElementDataController","KEY_EXPR","VALUE_EXPR","legacy_settings_1","require","item_data_axis_names_1","special_values_1","_hashset_wrapper_1","_localizer_1","_utils_1","_data_controller_base_1","_super","options","_this","_reset","getAllItemIndex","dataSource","indexOf","ALL_ELEMENT","getDataSourceItemKey","item","getDataSourceItemByKey","key","filter","isAllSelected","selection","length","update","selectedValues","encodeHtml","selectionOnly","hashset","HashsetWrapper","applySelection","dataItem","contains","push","fullSelection","hasAllElement","viewModel","ShowAllValue","isMultiselectable","useNeutralFilterMode","points","multiData","getAxis","itemDataAxisNames","defaultAxis","getPoints","forEach","point","_a","getUniquePath","text","getTitle","html","splice","getInteractionValues","elements","hasAll","values","items","_getDataValue","wrappedValue","itemData","dataControllerBase","ListBoxType","Checked","Radio","ComboBoxType","Standard","_updateSelection","hash","wrapHash","sourceItems","getRootPoint","getChildren","createDestNode","sourceNode","getUniqueValue","LegacySettings","useLegacyTreeView","getDisplayText","AutoExpandNodes","walkTree","destNodeItems","branch","nullChildCount","children","nextNull","specialValues","olapNullValueGuid","hasChildren","subDestNode","currentBranch","slice","a","node","selected","sourceItem","parent","undefined","rootBranch","resultSelection","prepareSelectionItems","parentBranch","itemBranch","_getDataNullChildCount","isSelected","updateItemsSelectedState"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_filter-element-data-controller.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.treeViewDataController = exports.listViewDataController = exports.filterElementDataController = exports.KEY_EXPR = exports.VALUE_EXPR = void 0;\nvar legacy_settings_1 = require(\"../../viewer-parts/legacy-settings\");\nvar item_data_axis_names_1 = require(\"../item-data/item-data-axis-names\");\nvar special_values_1 = require(\"../special-values\");\nvar _hashset_wrapper_1 = require(\"../_hashset-wrapper\");\nvar _localizer_1 = require(\"../_localizer\");\nvar _utils_1 = require(\"../_utils\");\nvar _data_controller_base_1 = require(\"./_data-controller-base\");\nexports.VALUE_EXPR = 'value';\nexports.KEY_EXPR = 'key';\nvar filterElementDataController = (function (_super) {\n    __extends(filterElementDataController, _super);\n    function filterElementDataController(options) {\n        var _this = _super.call(this, options) || this;\n        _this._reset();\n        return _this;\n    }\n    filterElementDataController.prototype.getAllItemIndex = function () {\n        return this.dataSource ? this.dataSource.indexOf(_localizer_1.ALL_ELEMENT) : -1;\n    };\n    filterElementDataController.prototype.getDataSourceItemKey = function (item) {\n        return item[exports.KEY_EXPR];\n    };\n    filterElementDataController.prototype.getDataSourceItemByKey = function (key) {\n        return this.dataSource.filter(function (item) { return item[exports.KEY_EXPR] === key; })[0];\n    };\n    filterElementDataController.prototype.isAllSelected = function () {\n        return this.dataSource && this.selection ? (this.dataSource.length === this.selection.length) : false;\n    };\n    filterElementDataController.prototype.update = function (selectedValues, encodeHtml, selectionOnly) {\n        var _this = this;\n        if (selectionOnly === void 0) { selectionOnly = false; }\n        this._reset(selectionOnly);\n        var hashset = new _hashset_wrapper_1.HashsetWrapper(selectedValues || []);\n        var key = 0, applySelection = function (dataItem) {\n            if (hashset.contains(dataItem[exports.VALUE_EXPR])) {\n                _this.selection.push(dataItem);\n            }\n            _this.fullSelection.push(dataItem);\n        }, hasAllElement = this.viewModel && this.viewModel.ShowAllValue && !this.isMultiselectable() && !this.useNeutralFilterMode, points = this.multiData ? this.multiData.getAxis(item_data_axis_names_1.itemDataAxisNames.defaultAxis).getPoints(true) : [];\n        if (selectionOnly) {\n            this.dataSource.forEach(function (dataItem) { return applySelection(dataItem); });\n        }\n        else {\n            if (hasAllElement && points.length > 0) {\n                this.dataSource.push(_localizer_1.ALL_ELEMENT);\n            }\n            points.forEach(function (point) {\n                var _a;\n                var dataItem = (_a = {},\n                    _a[exports.KEY_EXPR] = key++,\n                    _a[exports.VALUE_EXPR] = point.getUniquePath(),\n                    _a);\n                if (encodeHtml) {\n                    dataItem.text = _this.getTitle(point, ', ', true);\n                }\n                else {\n                    dataItem.html = _this.getTitle(point, ', ', true);\n                }\n                _this.dataSource.push(dataItem);\n                applySelection(dataItem);\n            });\n        }\n        if (hasAllElement && ((!this.useNeutralFilterMode && this.dataSource.length - 1 === this.selection.length) || (!!this.useNeutralFilterMode && !this.selection.length))) {\n            this.selection.splice(0, 0, _localizer_1.ALL_ELEMENT);\n            this.fullSelection.splice(0, 0, _localizer_1.ALL_ELEMENT);\n        }\n    };\n    filterElementDataController.prototype.getInteractionValues = function (elements, selectedValues) {\n        var _this = this;\n        var hasAll = !this.isMultiselectable() && elements && elements.indexOf(_localizer_1.ALL_ELEMENT) !== -1;\n        if (!!this.useNeutralFilterMode && hasAll)\n            return null;\n        var values = [], items = hasAll ? this.dataSource : elements;\n        items.forEach(function (item) {\n            if (item !== _localizer_1.ALL_ELEMENT) {\n                values.push(_this._getDataValue(item));\n            }\n        });\n        return values;\n    };\n    filterElementDataController.prototype._getDataValue = function (wrappedValue) {\n        var itemData = (wrappedValue && wrappedValue.itemData) || wrappedValue;\n        if (itemData[exports.VALUE_EXPR] != null)\n            return itemData[exports.VALUE_EXPR];\n        return null;\n    };\n    filterElementDataController.prototype._reset = function (selectionOnly) {\n        if (selectionOnly === void 0) { selectionOnly = false; }\n        if (!selectionOnly) {\n            this.dataSource = [];\n        }\n        this.selection = [];\n        this.fullSelection = [];\n    };\n    return filterElementDataController;\n}(_data_controller_base_1.dataControllerBase));\nexports.filterElementDataController = filterElementDataController;\nvar listViewDataController = (function (_super) {\n    __extends(listViewDataController, _super);\n    function listViewDataController(options) {\n        var _this = _super.call(this, options) || this;\n        _this.ListBoxType = {\n            Checked: 'Checked',\n            Radio: 'Radio'\n        };\n        _this.ComboBoxType = {\n            Standard: 'Standard',\n            Checked: 'Checked'\n        };\n        return _this;\n    }\n    listViewDataController.prototype.isMultiselectable = function () {\n        return !this.viewModel || (this.viewModel.ListBoxType == this.ListBoxType.Checked) || (this.viewModel.ComboBoxType == this.ListBoxType.Checked);\n    };\n    return listViewDataController;\n}(filterElementDataController));\nexports.listViewDataController = listViewDataController;\nvar treeViewDataController = (function (_super) {\n    __extends(treeViewDataController, _super);\n    function treeViewDataController(options) {\n        return _super.call(this, options) || this;\n    }\n    treeViewDataController.prototype.isMultiselectable = function () {\n        return true;\n    };\n    treeViewDataController.prototype.getAllItemIndex = function () {\n        return -1;\n    };\n    treeViewDataController.prototype.isAllSelected = function () {\n        return false;\n    };\n    treeViewDataController.prototype.update = function (selectedValues, encodeHtml, selectionOnly) {\n        var _this = this;\n        if (selectionOnly === void 0) { selectionOnly = false; }\n        this._reset(selectionOnly);\n        if (selectionOnly)\n            return this._updateSelection(selectedValues);\n        var hash = _utils_1.wrapHash(selectedValues), sourceItems = this.multiData ? this.multiData.getAxis('Default').getRootPoint().getChildren() : [], key = 1, createDestNode = function (sourceNode) {\n            var dataItem = {};\n            dataItem[exports.KEY_EXPR] = key++;\n            dataItem[exports.VALUE_EXPR] = sourceNode.getUniqueValue();\n            dataItem[encodeHtml || !legacy_settings_1.LegacySettings.useLegacyTreeView ? 'text' : 'html'] = sourceNode.getDisplayText();\n            if (legacy_settings_1.LegacySettings.useLegacyTreeView) {\n                dataItem['expanded'] = _this.viewModel.AutoExpandNodes;\n            }\n            return dataItem;\n        }, walkTree = function (sourceNode, destNodeItems, branch, nullChildCount) {\n            var children = sourceNode.getChildren();\n            var nextNull = 0;\n            while (children.length == 1 && children[0].getUniqueValue() === special_values_1.specialValues.olapNullValueGuid) {\n                children = children[0].getChildren();\n                nextNull++;\n            }\n            var hasChildren = (children && children.length !== 0), subDestNode = createDestNode(sourceNode), currentBranch = branch.slice();\n            subDestNode.nullChildCount = nextNull;\n            for (var a = 0; a < nullChildCount; a++)\n                currentBranch.push(special_values_1.specialValues.olapNullValueGuid);\n            currentBranch.push(subDestNode.value);\n            destNodeItems.push(subDestNode);\n            if (hasChildren) {\n                subDestNode.items = [];\n                children.forEach(function (node) {\n                    walkTree(node, subDestNode.items, currentBranch, nextNull);\n                });\n            }\n            else {\n                for (var a = 0; a < nextNull; a++)\n                    currentBranch.push(special_values_1.specialValues.olapNullValueGuid);\n                if (legacy_settings_1.LegacySettings.useLegacyTreeView) {\n                    subDestNode.selected = !!hash[currentBranch];\n                }\n                else {\n                    if (!!hash[currentBranch]) {\n                        _this.selection.push(subDestNode[exports.KEY_EXPR]);\n                    }\n                }\n            }\n        };\n        sourceItems.forEach(function (sourceItem) {\n            walkTree(sourceItem, _this.dataSource, [], 0);\n        });\n    };\n    treeViewDataController.prototype.getInteractionValues = function (elements, selectedValues) {\n        var _this = this;\n        if (!legacy_settings_1.LegacySettings.useLegacyTreeView)\n            return elements;\n        var hash = _utils_1.wrapHash(selectedValues), parent = elements.length ? elements[0].parent : undefined, rootBranch = [], resultSelection = [], prepareSelectionItems = function (items, parentBranch) {\n            items.forEach(function (item) {\n                var itemBranch = parentBranch.slice(), value = _this._getDataValue(item), nullChildCount = _this._getDataNullChildCount(item);\n                itemBranch.push(value);\n                for (var a = 0; a < nullChildCount; a++)\n                    itemBranch.push(special_values_1.specialValues.olapNullValueGuid);\n                if (!!item.items && item.items.length) {\n                    prepareSelectionItems(item.items, itemBranch);\n                }\n                else {\n                    var isSelected = !!hash[itemBranch];\n                    if ((!legacy_settings_1.LegacySettings.useLegacyTreeView && !isSelected) ||\n                        (legacy_settings_1.LegacySettings.useLegacyTreeView && ((item.selected && !isSelected) || (!item.selected && isSelected)))) {\n                        resultSelection.push(itemBranch);\n                    }\n                }\n            });\n        };\n        while (parent) {\n            rootBranch.splice(0, 0, this._getDataValue(parent));\n            parent = parent.parent;\n        }\n        prepareSelectionItems(elements, rootBranch);\n        return resultSelection;\n    };\n    treeViewDataController.prototype._updateSelection = function (selectedValues) {\n        var _this = this;\n        var hash = _utils_1.wrapHash(selectedValues);\n        var updateItemsSelectedState = function (items, parentBranch) {\n            items.forEach(function (item) {\n                var itemBranch = parentBranch.slice(), value = _this._getDataValue(item), nullChildCount = _this._getDataNullChildCount(item);\n                itemBranch.push(value);\n                for (var a = 0; a < nullChildCount; a++)\n                    itemBranch.push(special_values_1.specialValues.olapNullValueGuid);\n                if (item.items && item.items.length) {\n                    updateItemsSelectedState(item.items, itemBranch);\n                }\n                else {\n                    if (legacy_settings_1.LegacySettings.useLegacyTreeView) {\n                        item.selected = !!hash[itemBranch];\n                    }\n                    else {\n                        if (!!hash[itemBranch]) {\n                            _this.selection.push(item[exports.KEY_EXPR]);\n                        }\n                    }\n                }\n            });\n        };\n        updateItemsSelectedState(this.dataSource, []);\n    };\n    treeViewDataController.prototype._getDataNullChildCount = function (wrappedValue) {\n        var itemData = (wrappedValue && wrappedValue.itemData) || wrappedValue;\n        if (itemData['nullChildCount'] != null)\n            return itemData['nullChildCount'];\n        return 0;\n    };\n    return treeViewDataController;\n}(filterElementDataController));\nexports.treeViewDataController = treeViewDataController;\n"]},"metadata":{},"sourceType":"script"}