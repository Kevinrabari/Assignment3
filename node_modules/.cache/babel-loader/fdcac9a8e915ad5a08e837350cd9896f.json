{"ast":null,"code":"/**\r\n* DevExpress Dashboard (dashboard.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dashboard = void 0;\n\nvar analytics_utils_1 = require(\"@devexpress/analytics-core/analytics-utils\");\n\nvar ko = require(\"knockout\");\n\nvar _default_1 = require(\"../data/localization/_default\");\n\nvar color_scheme_entry_1 = require(\"./colorization/color-scheme-entry\");\n\nvar _custom_properties_utils_1 = require(\"./custom-properties/_custom-properties-utils\");\n\nvar dashboard_state_1 = require(\"./dashboard-state\");\n\nvar ef_data_source_1 = require(\"./data-sources/ef-data-source\");\n\nvar federation_data_source_1 = require(\"./data-sources/federation-data-source\");\n\nvar mongodb_data_source_1 = require(\"./data-sources/mongodb-data-source\");\n\nvar sql_data_source_1 = require(\"./data-sources/sql-data-source\");\n\nvar _data_source_factory_base_1 = require(\"./data-sources/_data-source-factory-base\");\n\nvar _array_utils_1 = require(\"./internal/_array-utils\");\n\nvar _dashboard_component_name_generator_1 = require(\"./internal/_dashboard-component-name-generator\");\n\nvar _dashboard_item_helper_1 = require(\"./internal/_dashboard-item_helper\");\n\nvar _date_utils_1 = require(\"./internal/_date-utils\");\n\nvar _helper_classes_1 = require(\"./internal/_helper-classes\");\n\nvar _knockout_utils_1 = require(\"./internal/_knockout-utils\");\n\nvar _undo_engine_helper_1 = require(\"./internal/_undo-engine-helper\");\n\nvar data_dashboard_item_1 = require(\"./items/data-dashboard-item\");\n\nvar group_item_1 = require(\"./items/group/group-item\");\n\nvar tab_container_item_1 = require(\"./items/tab-container-item/tab-container-item\");\n\nvar _dashboard_item_factory_1 = require(\"./items/_dashboard-item-factory\");\n\nvar dashboard_layout_group_1 = require(\"./layout/dashboard-layout-group\");\n\nvar dashboard_layout_item_1 = require(\"./layout/dashboard-layout-item\");\n\nvar _dashboard_layout_creator_1 = require(\"./layout/_dashboard-layout-creator\");\n\nvar _layout_utils_1 = require(\"./layout/_layout-utils\");\n\nvar _dashboard_1 = require(\"./metadata/_dashboard\");\n\nvar parameter_1 = require(\"./parameters/parameter\");\n\nvar serializable_model_1 = require(\"./serializable-model\");\n\nvar Dashboard = function (_super) {\n  __extends(Dashboard, _super);\n\n  function Dashboard(dashboardJSON, serializer) {\n    if (dashboardJSON === void 0) {\n      dashboardJSON = {};\n    }\n\n    if (serializer === void 0) {\n      serializer = new analytics_utils_1.ModelSerializer();\n    }\n\n    var _this = _super.call(this, dashboardJSON, serializer) || this;\n\n    _this.dashboardJSON = dashboardJSON;\n    _this._disposables = [];\n    _this.dataSources = analytics_utils_1.deserializeArray(dashboardJSON.DataSources, function (item) {\n      return Dashboard._createDataSource(item, serializer);\n    });\n    _this.groups = analytics_utils_1.deserializeArray(dashboardJSON.Groups, function (group) {\n      return _dashboard_item_factory_1.createDashboardItem(group, serializer);\n    });\n    _this.items = analytics_utils_1.deserializeArray(dashboardJSON.Items, function (item) {\n      return _dashboard_item_factory_1.createDashboardItem(item, serializer);\n    });\n    _this._tabPages = ko.observableArray();\n    _this._componentNameGenerator = new _dashboard_component_name_generator_1.DashboardUniqueNameGenerator('componentName', 1, _this.dataSources, _this.items, _this.groups, _this._tabPages);\n    _this._allItems = ko.pureComputed(function () {\n      return __spreadArray(__spreadArray(__spreadArray([], _this.items()), _this.groups()), _this._tabPages());\n    });\n\n    _knockout_utils_1.subscribeArrayChange(_this.dataSources, {\n      added: function (newDataSource) {\n        if (newDataSource instanceof federation_data_source_1.FederationDataSource) {\n          newDataSource.context().forEach(function (contextItem) {\n            var dataSourceToAdd = contextItem.source();\n\n            if (dataSourceToAdd) {\n              if (!_this.dataSources().includes(dataSourceToAdd)) {\n                if (!dataSourceToAdd.componentName() || _this.dataSources().find(function (ds) {\n                  return ds.componentName() === dataSourceToAdd.componentName();\n                }) === undefined) _this.dataSources.push(dataSourceToAdd);else {}\n              }\n\n              newDataSource.sources().filter(function (source) {\n                return source.dataSource() === contextItem.id();\n              }).forEach(function (source) {\n                return source.dataSource(dataSourceToAdd.componentName());\n              });\n            }\n          });\n          newDataSource.context.removeAll();\n        }\n\n        if (!newDataSource.name()) {\n          newDataSource.name(_helper_classes_1.NameGenerator.generateName(_default_1.getLocalizationById('DashboardStringId.DefaultDataSourceName') + ' ', ko.unwrap(_this.dataSources), 'name', 1));\n        }\n      }\n    });\n\n    _this._disposables.push(ko.computed(function () {\n      var newTabPagesList = _this.items().filter(function (item) {\n        return item instanceof tab_container_item_1.TabContainerItem;\n      }).reduce(function (acc, tabPage) {\n        return acc.concat(tabPage.tabPages());\n      }, []);\n\n      _this._tabPages().filter(function (removedTabPage) {\n        return newTabPagesList.indexOf(removedTabPage) === -1;\n      }).forEach(function (removedTabPage) {\n        return _this._tabPages.remove(removedTabPage);\n      });\n\n      newTabPagesList.filter(function (newTabPage) {\n        return _this._tabPages().indexOf(newTabPage) === -1;\n      }).forEach(function (newTabPage) {\n        return _this._tabPages.push(newTabPage);\n      });\n    }));\n\n    _this._disposables.push(_this._componentNameGenerator);\n\n    _this.parameters = ko.observableArray();\n\n    _this.parameters(analytics_utils_1.deserializeArray(dashboardJSON.Parameters, function (item) {\n      return new parameter_1.Parameter(item, serializer);\n    })());\n\n    _this.colorScheme = analytics_utils_1.deserializeArray(dashboardJSON.ColorScheme, function (item) {\n      return new color_scheme_entry_1.ColorSchemeEntry(item, serializer);\n    });\n\n    _this._disposables.push(_knockout_utils_1.subscribeArrayChange(_this.dataSources, {\n      deleted: _this._processDeleteDataSource.bind(_this)\n    }));\n\n    _this._queryParameters = ko.computed(function () {\n      return parameter_1._getParametersQuery(_this.parameters());\n    });\n    _this._dataDashboardItems = ko.computed(function () {\n      return _this.items().filter(function (item) {\n        return item instanceof data_dashboard_item_1.DataDashboardItem;\n      });\n    });\n    _this._masterFilterItems = ko.computed(function () {\n      return _this._dataDashboardItems().filter(function (item) {\n        return item._isMasterFilter() && _this._interactivityGroupPathToRoot(item).every(function (containerItem) {\n          return containerItem.interactivityOptions.isMasterFilter();\n        });\n      });\n    });\n\n    _this._disposables.push(ko.computed(function () {\n      _this._dataDashboardItems().forEach(function (detailItem) {\n        var masterItems = _this._dataDashboardItems().filter(function (item) {\n          return item !== detailItem && item._isMasterFilter();\n        }).filter(function (item) {\n          if (item.isMasterFilterCrossDataSource()) return true;\n          return item.dataSource() == detailItem.dataSource() && item.dataMember() == detailItem.dataMember();\n        }).filter(function (item) {\n          var masterGroups = _this._interactivityGroupPathToRoot(item).reverse();\n\n          var detailGroups = _this._interactivityGroupPathToRoot(detailItem).reverse();\n\n          while (masterGroups.length && detailGroups.length && masterGroups[0] === detailGroups[0]) {\n            masterGroups.shift();\n            detailGroups.shift();\n          }\n\n          if (masterGroups.some(function (masterGroup) {\n            return !masterGroup.interactivityOptions.isMasterFilter();\n          })) {\n            return false;\n          }\n\n          if (detailGroups.length === 0) {\n            return !detailItem._isIgnoreMasterFilter();\n          } else {\n            return !detailGroups[0].interactivityOptions.ignoreMasterFilters();\n          }\n        });\n\n        if (!_array_utils_1.arrayEquals(detailItem._masterFilterItems.peek(), masterItems)) {\n          detailItem._masterFilterItems(masterItems);\n        }\n      });\n    }));\n\n    _this._state = ko.computed({\n      read: function () {\n        var state = new dashboard_state_1.DashboardState();\n\n        if (_this.parameters().length > 0) {\n          var parametersState = {};\n\n          _this.parameters().forEach(function (param) {\n            parametersState[param.name()] = _date_utils_1.toStringArray(param._actualValue());\n          });\n\n          if (Object.keys(parametersState).length) {\n            state.Parameters = parametersState;\n          }\n        }\n\n        if (_this.items().length > 0) {\n          var itemsState = {};\n\n          _this.items().forEach(function (item) {\n            var itemState = item._state();\n\n            if (itemState && Object.keys(itemState).length) {\n              itemsState[item.componentName()] = itemState;\n            }\n          });\n\n          if (Object.keys(itemsState).length) {\n            state.Items = itemsState;\n          }\n        }\n\n        return state;\n      },\n      write: function (dashboardState) {\n        var obsoleteDashboardState = dashboardState;\n        var parametersState = dashboardState.Parameters || obsoleteDashboardState.parameters;\n\n        if (parametersState) {\n          _this.parameters().forEach(function (parameter) {\n            if (parametersState[parameter.name()] !== undefined) {\n              var parameterValue = parametersState[parameter.name()];\n\n              if (Array.isArray(parameterValue)) {\n                parameterValue = parameterValue.map(_date_utils_1.tryConvertToDateTime);\n              } else {\n                parameterValue = _date_utils_1.tryConvertToDateTime(parameterValue);\n              }\n\n              parameter._value(parameterValue);\n            }\n          });\n        }\n\n        var itemsState = dashboardState.Items || obsoleteDashboardState.items;\n\n        if (itemsState) {\n          Object.keys(itemsState).forEach(function (name) {\n            var dashboardItemModel = _this.findItem(name);\n\n            if (dashboardItemModel) {\n              dashboardItemModel._setState(itemsState[name]);\n            }\n          });\n        }\n      }\n    });\n    var item = new dashboard_layout_group_1.DashboardLayoutRootGroup(_this, dashboardJSON.LayoutTree || {}, serializer);\n\n    _this.layout(item);\n\n    _this._colorableItems = ko.pureComputed(function () {\n      return _this._dataDashboardItems().filter(function (dataDashboardItem) {\n        return dataDashboardItem._isGloballyColored;\n      });\n    });\n    return _this;\n  }\n\n  Dashboard._createDataSource = function (dataSourceJSON, serializer) {\n    var itemTypeName = dataSourceJSON['@ItemType'];\n    var itemType = Dashboard._dataSourceTypesMap[itemTypeName];\n    return new itemType(dataSourceJSON, serializer);\n  };\n\n  Object.defineProperty(Dashboard.prototype, \"stateString\", {\n    get: function () {\n      var state = this._state();\n\n      return Object.keys(state).length ? JSON.stringify(state) : '';\n    },\n    set: function (stateVal) {\n      if (!stateVal) return;\n\n      this._state(JSON.parse(stateVal));\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Dashboard.prototype.dispose = function () {\n    this._disposables.map(function (disposable) {\n      return disposable.dispose();\n    });\n  };\n\n  Dashboard.prototype.getInfo = function () {\n    return _dashboard_1.dashboardSerializationsInfo.concat(_custom_properties_utils_1.getCustomPropertiesSerializationInfo(this));\n  };\n\n  Dashboard.prototype.getJSON = function () {\n    return new analytics_utils_1.ModelSerializer({\n      useRefs: false,\n      serializeDate: _date_utils_1.serializeDate\n    }).serialize(this, this.getInfo());\n  };\n\n  Dashboard.prototype.findItem = function (itemId) {\n    var item = this.items().filter(function (filterItem) {\n      return filterItem.componentName() === itemId;\n    })[0];\n\n    if (!item) {\n      item = this.groups().filter(function (filterItem) {\n        return filterItem.componentName() === itemId;\n      })[0];\n    }\n\n    if (!item) {\n      item = this._tabPages().filter(function (filterItem) {\n        return filterItem.componentName() === itemId;\n      })[0];\n    }\n\n    return item;\n  };\n\n  Dashboard.prototype.rebuildLayout = function (clientWidth, clientHeight) {\n    if (clientWidth === void 0) {\n      clientWidth = 1;\n    }\n\n    if (clientHeight === void 0) {\n      clientHeight = 1;\n    }\n\n    new _dashboard_layout_creator_1.DashboardLayoutCreator(clientWidth, clientHeight, this).rebuildLayout();\n  };\n\n  Dashboard.prototype._getDisplayDashboardItem = function (tabPage) {\n    if (!tabPage || !tabPage.showItemAsTabPage()) return tabPage;\n    var itemsOnTabPage = this.items().concat(this.groups()).filter(function (item) {\n      return item.parentContainer() === tabPage.componentName();\n    });\n    return itemsOnTabPage.length === 1 && !(itemsOnTabPage[0] instanceof group_item_1.GroupItem) ? itemsOnTabPage[0] : tabPage;\n  };\n\n  Dashboard.prototype._changeItem = function (oldItem, newItem) {\n    var dashboardLayoutItem = this.layout().findLayoutItem(oldItem);\n    this.items.replace(oldItem, newItem);\n\n    if (dashboardLayoutItem) {\n      dashboardLayoutItem.item = newItem;\n    }\n  };\n\n  Dashboard.prototype._duplicateItem = function (item) {\n    var dashboardLayoutItem = this.layout().findLayoutItem(item);\n    var serializer = new analytics_utils_1.ModelSerializer({\n      useRefs: false\n    });\n    var itemJSON = serializer.serialize(item);\n\n    var itemCopy = _dashboard_item_factory_1.createDashboardItem(itemJSON, serializer);\n\n    itemCopy.componentName(undefined);\n    this.items.push(itemCopy);\n    var newDashboardLayoutItem = new dashboard_layout_item_1.DashboardLayoutItem();\n    newDashboardLayoutItem.item = itemCopy;\n    newDashboardLayoutItem.weight(dashboardLayoutItem.weight());\n    dashboardLayoutItem.insert(newDashboardLayoutItem, 'left');\n  };\n\n  Dashboard.prototype._createDashboardLayoutItem = function (modelItemJson) {\n    if (!!modelItemJson) {\n      var newItemModel = _dashboard_item_factory_1.createDashboardItem(modelItemJson);\n\n      newItemModel.name(_helper_classes_1.NameGenerator.generateName(_dashboard_item_helper_1.getItemTitle(newItemModel) + ' ', this.items().concat(this.groups()), 'name', 1));\n\n      if (this.dataSources().length > 0 && newItemModel instanceof data_dashboard_item_1.DataDashboardItem) {\n        newItemModel.dataSource(this.dataSources()[0].componentName());\n\n        if (this.dataSources()[0] instanceof sql_data_source_1.SqlDataSource) {\n          var sqlDataSource = this.dataSources()[0];\n          sqlDataSource.queries().length > 0 && newItemModel.dataMember(sqlDataSource.queries()[0].name());\n        }\n\n        if (this.dataSources()[0] instanceof ef_data_source_1.EFDataSource) {\n          var efDataSource = this.dataSources()[0];\n\n          if (!efDataSource._tables().length) {\n            var subscription = efDataSource._tables.subscribe(function (tables) {\n              var dataDashboardItem = newItemModel;\n\n              if (dataDashboardItem.dataSource() === efDataSource.componentName() && !dataDashboardItem.dataMember.peek()) {\n                newItemModel.dataMember(tables[0].dataMember());\n              }\n\n              subscription.dispose();\n            });\n          } else {\n            newItemModel.dataMember(efDataSource._tables()[0].dataMember());\n          }\n        }\n\n        if (this.dataSources()[0] instanceof federation_data_source_1.FederationDataSource) {\n          var feredationDataSource = this.dataSources()[0];\n          feredationDataSource.queries().length > 0 && newItemModel.dataMember(feredationDataSource.queries()[0].alias());\n        }\n\n        if (this.dataSources()[0] instanceof mongodb_data_source_1.MongoDBDataSource) {\n          var mongoDBDataSource = this.dataSources()[0];\n          mongoDBDataSource.queries().length > 0 && newItemModel.dataMember(mongoDBDataSource.queries()[0]._actualName());\n        }\n      }\n\n      if (newItemModel instanceof group_item_1.GroupItem) {\n        this.groups.push(newItemModel);\n      } else {\n        this.items.push(newItemModel);\n      }\n\n      return this._createDashboardLayoutNode(newItemModel);\n    }\n\n    return new dashboard_layout_group_1.DashboardLayoutGroup();\n  };\n\n  Dashboard.prototype._createDashboardLayoutNode = function (dashboardItem) {\n    var itemType = null;\n\n    if (dashboardItem instanceof group_item_1.GroupItem) {\n      itemType = 'LayoutGroup';\n    } else if (dashboardItem instanceof tab_container_item_1.TabContainerItem) {\n      itemType = 'LayoutTabContainer';\n    } else {\n      itemType = 'LayoutItem';\n    }\n\n    var newLayoutItemModel = _layout_utils_1.deserializeDashboardLayoutNode({\n      '@ItemType': itemType\n    });\n\n    newLayoutItemModel.item = dashboardItem;\n    return newLayoutItemModel;\n  };\n\n  Dashboard.prototype._findDataItem = function (itemId) {\n    return this._dataDashboardItems().filter(function (item) {\n      return item.componentName() == itemId;\n    })[0];\n  };\n\n  Dashboard.prototype._interactivityGroupPathToRoot = function (dashboardItem) {\n    var _this = this;\n\n    var getParentContainerItem = function (item) {\n      return !!item.parentContainer() && _this.findItem(item.parentContainer()) || undefined;\n    };\n\n    var parentContainers = [];\n    var parentContainerItem = dashboardItem;\n\n    do {\n      parentContainerItem = getParentContainerItem(parentContainerItem);\n\n      if (parentContainerItem) {\n        parentContainers.push(parentContainerItem);\n      }\n    } while (parentContainerItem);\n\n    return parentContainers;\n  };\n\n  Dashboard.prototype._processDeleteDataSource = function (dataSource) {\n    this._dataDashboardItems().filter(function (item) {\n      return item.dataSource() == dataSource.componentName();\n    }).forEach(function (item) {\n      return item._clearBindings();\n    });\n  };\n\n  Dashboard._dataSourceTypesMap = __assign({\n    'FederationDataSource': federation_data_source_1.FederationDataSource\n  }, _data_source_factory_base_1._baseDataSourceTypesMap);\n\n  __decorate([_undo_engine_helper_1.wrapWithUndoRedo], Dashboard.prototype, \"_changeItem\", null);\n\n  __decorate([_undo_engine_helper_1.wrapWithUndoRedo], Dashboard.prototype, \"_duplicateItem\", null);\n\n  __decorate([_undo_engine_helper_1.wrapWithUndoRedo], Dashboard.prototype, \"_processDeleteDataSource\", null);\n\n  return Dashboard;\n}(serializable_model_1.SerializableModel);\n\nexports.Dashboard = Dashboard;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/model/dashboard.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__spreadArray","to","from","il","j","exports","value","Dashboard","analytics_utils_1","require","ko","_default_1","color_scheme_entry_1","_custom_properties_utils_1","dashboard_state_1","ef_data_source_1","federation_data_source_1","mongodb_data_source_1","sql_data_source_1","_data_source_factory_base_1","_array_utils_1","_dashboard_component_name_generator_1","_dashboard_item_helper_1","_date_utils_1","_helper_classes_1","_knockout_utils_1","_undo_engine_helper_1","data_dashboard_item_1","group_item_1","tab_container_item_1","_dashboard_item_factory_1","dashboard_layout_group_1","dashboard_layout_item_1","_dashboard_layout_creator_1","_layout_utils_1","_dashboard_1","parameter_1","serializable_model_1","_super","dashboardJSON","serializer","ModelSerializer","_this","_disposables","dataSources","deserializeArray","DataSources","item","_createDataSource","groups","Groups","group","createDashboardItem","items","Items","_tabPages","observableArray","_componentNameGenerator","DashboardUniqueNameGenerator","_allItems","pureComputed","subscribeArrayChange","added","newDataSource","FederationDataSource","context","forEach","contextItem","dataSourceToAdd","source","includes","componentName","find","ds","undefined","push","sources","filter","dataSource","id","removeAll","name","NameGenerator","generateName","getLocalizationById","unwrap","computed","newTabPagesList","TabContainerItem","reduce","acc","tabPage","concat","tabPages","removedTabPage","indexOf","remove","newTabPage","parameters","Parameters","Parameter","colorScheme","ColorScheme","ColorSchemeEntry","deleted","_processDeleteDataSource","bind","_queryParameters","_getParametersQuery","_dataDashboardItems","DataDashboardItem","_masterFilterItems","_isMasterFilter","_interactivityGroupPathToRoot","every","containerItem","interactivityOptions","isMasterFilter","detailItem","masterItems","isMasterFilterCrossDataSource","dataMember","masterGroups","reverse","detailGroups","shift","some","masterGroup","_isIgnoreMasterFilter","ignoreMasterFilters","arrayEquals","peek","_state","read","state","DashboardState","parametersState","param","toStringArray","_actualValue","keys","itemsState","itemState","write","dashboardState","obsoleteDashboardState","parameter","parameterValue","isArray","map","tryConvertToDateTime","_value","dashboardItemModel","findItem","_setState","DashboardLayoutRootGroup","LayoutTree","layout","_colorableItems","dataDashboardItem","_isGloballyColored","dataSourceJSON","itemTypeName","itemType","_dataSourceTypesMap","get","JSON","stringify","set","stateVal","parse","enumerable","configurable","dispose","disposable","getInfo","dashboardSerializationsInfo","getCustomPropertiesSerializationInfo","getJSON","useRefs","serializeDate","serialize","itemId","filterItem","rebuildLayout","clientWidth","clientHeight","DashboardLayoutCreator","_getDisplayDashboardItem","showItemAsTabPage","itemsOnTabPage","parentContainer","GroupItem","_changeItem","oldItem","newItem","dashboardLayoutItem","findLayoutItem","replace","_duplicateItem","itemJSON","itemCopy","newDashboardLayoutItem","DashboardLayoutItem","weight","insert","_createDashboardLayoutItem","modelItemJson","newItemModel","getItemTitle","SqlDataSource","sqlDataSource","queries","EFDataSource","efDataSource","_tables","subscription","subscribe","tables","feredationDataSource","alias","MongoDBDataSource","mongoDBDataSource","_actualName","_createDashboardLayoutNode","DashboardLayoutGroup","dashboardItem","newLayoutItemModel","deserializeDashboardLayoutNode","_findDataItem","getParentContainerItem","parentContainers","parentContainerItem","_clearBindings","_baseDataSourceTypesMap","wrapWithUndoRedo","SerializableModel"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (dashboard.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Dashboard = void 0;\nvar analytics_utils_1 = require(\"@devexpress/analytics-core/analytics-utils\");\nvar ko = require(\"knockout\");\nvar _default_1 = require(\"../data/localization/_default\");\nvar color_scheme_entry_1 = require(\"./colorization/color-scheme-entry\");\nvar _custom_properties_utils_1 = require(\"./custom-properties/_custom-properties-utils\");\nvar dashboard_state_1 = require(\"./dashboard-state\");\nvar ef_data_source_1 = require(\"./data-sources/ef-data-source\");\nvar federation_data_source_1 = require(\"./data-sources/federation-data-source\");\nvar mongodb_data_source_1 = require(\"./data-sources/mongodb-data-source\");\nvar sql_data_source_1 = require(\"./data-sources/sql-data-source\");\nvar _data_source_factory_base_1 = require(\"./data-sources/_data-source-factory-base\");\nvar _array_utils_1 = require(\"./internal/_array-utils\");\nvar _dashboard_component_name_generator_1 = require(\"./internal/_dashboard-component-name-generator\");\nvar _dashboard_item_helper_1 = require(\"./internal/_dashboard-item_helper\");\nvar _date_utils_1 = require(\"./internal/_date-utils\");\nvar _helper_classes_1 = require(\"./internal/_helper-classes\");\nvar _knockout_utils_1 = require(\"./internal/_knockout-utils\");\nvar _undo_engine_helper_1 = require(\"./internal/_undo-engine-helper\");\nvar data_dashboard_item_1 = require(\"./items/data-dashboard-item\");\nvar group_item_1 = require(\"./items/group/group-item\");\nvar tab_container_item_1 = require(\"./items/tab-container-item/tab-container-item\");\nvar _dashboard_item_factory_1 = require(\"./items/_dashboard-item-factory\");\nvar dashboard_layout_group_1 = require(\"./layout/dashboard-layout-group\");\nvar dashboard_layout_item_1 = require(\"./layout/dashboard-layout-item\");\nvar _dashboard_layout_creator_1 = require(\"./layout/_dashboard-layout-creator\");\nvar _layout_utils_1 = require(\"./layout/_layout-utils\");\nvar _dashboard_1 = require(\"./metadata/_dashboard\");\nvar parameter_1 = require(\"./parameters/parameter\");\nvar serializable_model_1 = require(\"./serializable-model\");\nvar Dashboard = (function (_super) {\n    __extends(Dashboard, _super);\n    function Dashboard(dashboardJSON, serializer) {\n        if (dashboardJSON === void 0) { dashboardJSON = {}; }\n        if (serializer === void 0) { serializer = new analytics_utils_1.ModelSerializer(); }\n        var _this = _super.call(this, dashboardJSON, serializer) || this;\n        _this.dashboardJSON = dashboardJSON;\n        _this._disposables = [];\n        _this.dataSources = analytics_utils_1.deserializeArray(dashboardJSON.DataSources, function (item) { return Dashboard._createDataSource(item, serializer); });\n        _this.groups = analytics_utils_1.deserializeArray(dashboardJSON.Groups, function (group) { return _dashboard_item_factory_1.createDashboardItem(group, serializer); });\n        _this.items = analytics_utils_1.deserializeArray(dashboardJSON.Items, function (item) { return _dashboard_item_factory_1.createDashboardItem(item, serializer); });\n        _this._tabPages = ko.observableArray();\n        _this._componentNameGenerator = new _dashboard_component_name_generator_1.DashboardUniqueNameGenerator('componentName', 1, _this.dataSources, _this.items, _this.groups, _this._tabPages);\n        _this._allItems = ko.pureComputed(function () { return __spreadArray(__spreadArray(__spreadArray([], _this.items()), _this.groups()), _this._tabPages()); });\n        _knockout_utils_1.subscribeArrayChange(_this.dataSources, {\n            added: function (newDataSource) {\n                if (newDataSource instanceof federation_data_source_1.FederationDataSource) {\n                    newDataSource.context()\n                        .forEach(function (contextItem) {\n                        var dataSourceToAdd = contextItem.source();\n                        if (dataSourceToAdd) {\n                            if (!_this.dataSources().includes(dataSourceToAdd)) {\n                                if (!dataSourceToAdd.componentName() || _this.dataSources().find(function (ds) { return ds.componentName() === dataSourceToAdd.componentName(); }) === undefined)\n                                    _this.dataSources.push(dataSourceToAdd);\n                                else {\n                                }\n                            }\n                            newDataSource.sources()\n                                .filter(function (source) { return source.dataSource() === contextItem.id(); })\n                                .forEach(function (source) { return source.dataSource(dataSourceToAdd.componentName()); });\n                        }\n                    });\n                    newDataSource.context.removeAll();\n                }\n                if (!newDataSource.name()) {\n                    newDataSource.name(_helper_classes_1.NameGenerator.generateName(_default_1.getLocalizationById('DashboardStringId.DefaultDataSourceName') + ' ', ko.unwrap(_this.dataSources), 'name', 1));\n                }\n            }\n        });\n        _this._disposables.push(ko.computed(function () {\n            var newTabPagesList = _this.items()\n                .filter(function (item) { return item instanceof tab_container_item_1.TabContainerItem; })\n                .reduce(function (acc, tabPage) { return acc.concat(tabPage.tabPages()); }, []);\n            _this._tabPages()\n                .filter(function (removedTabPage) { return newTabPagesList.indexOf(removedTabPage) === -1; })\n                .forEach(function (removedTabPage) { return _this._tabPages.remove(removedTabPage); });\n            newTabPagesList\n                .filter(function (newTabPage) { return _this._tabPages().indexOf(newTabPage) === -1; })\n                .forEach(function (newTabPage) { return _this._tabPages.push(newTabPage); });\n        }));\n        _this._disposables.push(_this._componentNameGenerator);\n        _this.parameters = ko.observableArray();\n        _this.parameters(analytics_utils_1.deserializeArray(dashboardJSON.Parameters, function (item) { return new parameter_1.Parameter(item, serializer); })());\n        _this.colorScheme = analytics_utils_1.deserializeArray(dashboardJSON.ColorScheme, function (item) { return new color_scheme_entry_1.ColorSchemeEntry(item, serializer); });\n        _this._disposables.push(_knockout_utils_1.subscribeArrayChange(_this.dataSources, {\n            deleted: _this._processDeleteDataSource.bind(_this)\n        }));\n        _this._queryParameters = ko.computed(function () {\n            return parameter_1._getParametersQuery(_this.parameters());\n        });\n        _this._dataDashboardItems = ko.computed(function () {\n            return _this.items().filter(function (item) { return item instanceof data_dashboard_item_1.DataDashboardItem; });\n        });\n        _this._masterFilterItems = ko.computed(function () {\n            return _this._dataDashboardItems()\n                .filter(function (item) { return item._isMasterFilter() && _this._interactivityGroupPathToRoot(item).every(function (containerItem) { return containerItem.interactivityOptions.isMasterFilter(); }); });\n        });\n        _this._disposables.push(ko.computed(function () {\n            _this._dataDashboardItems().forEach(function (detailItem) {\n                var masterItems = _this._dataDashboardItems()\n                    .filter(function (item) { return item !== detailItem && item._isMasterFilter(); })\n                    .filter(function (item) {\n                    if (item.isMasterFilterCrossDataSource())\n                        return true;\n                    return item.dataSource() == detailItem.dataSource() && item.dataMember() == detailItem.dataMember();\n                })\n                    .filter(function (item) {\n                    var masterGroups = _this._interactivityGroupPathToRoot(item).reverse();\n                    var detailGroups = _this._interactivityGroupPathToRoot(detailItem).reverse();\n                    while (masterGroups.length && detailGroups.length && masterGroups[0] === detailGroups[0]) {\n                        masterGroups.shift();\n                        detailGroups.shift();\n                    }\n                    if (masterGroups.some(function (masterGroup) { return !masterGroup.interactivityOptions.isMasterFilter(); })) {\n                        return false;\n                    }\n                    if (detailGroups.length === 0) {\n                        return !detailItem._isIgnoreMasterFilter();\n                    }\n                    else {\n                        return !detailGroups[0].interactivityOptions.ignoreMasterFilters();\n                    }\n                });\n                if (!_array_utils_1.arrayEquals(detailItem._masterFilterItems.peek(), masterItems)) {\n                    detailItem._masterFilterItems(masterItems);\n                }\n            });\n        }));\n        _this._state = ko.computed({\n            read: function () {\n                var state = new dashboard_state_1.DashboardState();\n                if (_this.parameters().length > 0) {\n                    var parametersState = {};\n                    _this.parameters().forEach(function (param) {\n                        parametersState[param.name()] = _date_utils_1.toStringArray(param._actualValue());\n                    });\n                    if (Object.keys(parametersState).length) {\n                        state.Parameters = parametersState;\n                    }\n                }\n                if (_this.items().length > 0) {\n                    var itemsState = {};\n                    _this.items().forEach(function (item) {\n                        var itemState = item._state();\n                        if (itemState && Object.keys(itemState).length) {\n                            itemsState[item.componentName()] = itemState;\n                        }\n                    });\n                    if (Object.keys(itemsState).length) {\n                        state.Items = itemsState;\n                    }\n                }\n                return state;\n            },\n            write: function (dashboardState) {\n                var obsoleteDashboardState = dashboardState;\n                var parametersState = dashboardState.Parameters || obsoleteDashboardState.parameters;\n                if (parametersState) {\n                    _this.parameters().forEach(function (parameter) {\n                        if (parametersState[parameter.name()] !== undefined) {\n                            var parameterValue = parametersState[parameter.name()];\n                            if (Array.isArray(parameterValue)) {\n                                parameterValue = parameterValue.map(_date_utils_1.tryConvertToDateTime);\n                            }\n                            else {\n                                parameterValue = _date_utils_1.tryConvertToDateTime(parameterValue);\n                            }\n                            parameter._value(parameterValue);\n                        }\n                    });\n                }\n                var itemsState = dashboardState.Items || obsoleteDashboardState.items;\n                if (itemsState) {\n                    Object.keys(itemsState).forEach(function (name) {\n                        var dashboardItemModel = _this.findItem(name);\n                        if (dashboardItemModel) {\n                            dashboardItemModel._setState(itemsState[name]);\n                        }\n                    });\n                }\n            }\n        });\n        var item = new dashboard_layout_group_1.DashboardLayoutRootGroup(_this, dashboardJSON.LayoutTree || {}, serializer);\n        _this.layout(item);\n        _this._colorableItems = ko.pureComputed(function () { return _this._dataDashboardItems().filter(function (dataDashboardItem) { return dataDashboardItem._isGloballyColored; }); });\n        return _this;\n    }\n    Dashboard._createDataSource = function (dataSourceJSON, serializer) {\n        var itemTypeName = dataSourceJSON['@ItemType'];\n        var itemType = Dashboard._dataSourceTypesMap[itemTypeName];\n        return new itemType(dataSourceJSON, serializer);\n    };\n    Object.defineProperty(Dashboard.prototype, \"stateString\", {\n        get: function () {\n            var state = this._state();\n            return Object.keys(state).length ? JSON.stringify(state) : '';\n        },\n        set: function (stateVal) {\n            if (!stateVal)\n                return;\n            this._state(JSON.parse(stateVal));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Dashboard.prototype.dispose = function () {\n        this._disposables.map(function (disposable) { return disposable.dispose(); });\n    };\n    Dashboard.prototype.getInfo = function () {\n        return _dashboard_1.dashboardSerializationsInfo.concat(_custom_properties_utils_1.getCustomPropertiesSerializationInfo(this));\n    };\n    Dashboard.prototype.getJSON = function () {\n        return new analytics_utils_1.ModelSerializer({ useRefs: false, serializeDate: _date_utils_1.serializeDate }).serialize(this, this.getInfo());\n    };\n    Dashboard.prototype.findItem = function (itemId) {\n        var item = this.items().filter(function (filterItem) { return filterItem.componentName() === itemId; })[0];\n        if (!item) {\n            item = this.groups().filter(function (filterItem) { return filterItem.componentName() === itemId; })[0];\n        }\n        if (!item) {\n            item = this._tabPages().filter(function (filterItem) { return filterItem.componentName() === itemId; })[0];\n        }\n        return item;\n    };\n    Dashboard.prototype.rebuildLayout = function (clientWidth, clientHeight) {\n        if (clientWidth === void 0) { clientWidth = 1; }\n        if (clientHeight === void 0) { clientHeight = 1; }\n        new _dashboard_layout_creator_1.DashboardLayoutCreator(clientWidth, clientHeight, this).rebuildLayout();\n    };\n    Dashboard.prototype._getDisplayDashboardItem = function (tabPage) {\n        if (!tabPage || !tabPage.showItemAsTabPage())\n            return tabPage;\n        var itemsOnTabPage = this.items().concat(this.groups()).filter(function (item) { return item.parentContainer() === tabPage.componentName(); });\n        return itemsOnTabPage.length === 1 && !(itemsOnTabPage[0] instanceof group_item_1.GroupItem) ? itemsOnTabPage[0] : tabPage;\n    };\n    Dashboard.prototype._changeItem = function (oldItem, newItem) {\n        var dashboardLayoutItem = this.layout().findLayoutItem(oldItem);\n        this.items.replace(oldItem, newItem);\n        if (dashboardLayoutItem) {\n            dashboardLayoutItem.item = newItem;\n        }\n    };\n    Dashboard.prototype._duplicateItem = function (item) {\n        var dashboardLayoutItem = this.layout().findLayoutItem(item);\n        var serializer = new analytics_utils_1.ModelSerializer({ useRefs: false });\n        var itemJSON = serializer.serialize(item);\n        var itemCopy = _dashboard_item_factory_1.createDashboardItem(itemJSON, serializer);\n        itemCopy.componentName(undefined);\n        this.items.push(itemCopy);\n        var newDashboardLayoutItem = new dashboard_layout_item_1.DashboardLayoutItem();\n        newDashboardLayoutItem.item = itemCopy;\n        newDashboardLayoutItem.weight(dashboardLayoutItem.weight());\n        dashboardLayoutItem.insert(newDashboardLayoutItem, 'left');\n    };\n    Dashboard.prototype._createDashboardLayoutItem = function (modelItemJson) {\n        if (!!modelItemJson) {\n            var newItemModel = _dashboard_item_factory_1.createDashboardItem(modelItemJson);\n            newItemModel.name(_helper_classes_1.NameGenerator.generateName(_dashboard_item_helper_1.getItemTitle(newItemModel) + ' ', this.items().concat(this.groups()), 'name', 1));\n            if (this.dataSources().length > 0 && newItemModel instanceof data_dashboard_item_1.DataDashboardItem) {\n                newItemModel.dataSource(this.dataSources()[0].componentName());\n                if (this.dataSources()[0] instanceof sql_data_source_1.SqlDataSource) {\n                    var sqlDataSource = (this.dataSources()[0]);\n                    sqlDataSource.queries().length > 0 && newItemModel.dataMember(sqlDataSource.queries()[0].name());\n                }\n                if (this.dataSources()[0] instanceof ef_data_source_1.EFDataSource) {\n                    var efDataSource = (this.dataSources()[0]);\n                    if (!efDataSource._tables().length) {\n                        var subscription = efDataSource._tables.subscribe(function (tables) {\n                            var dataDashboardItem = newItemModel;\n                            if (dataDashboardItem.dataSource() === efDataSource.componentName() && !dataDashboardItem.dataMember.peek()) {\n                                newItemModel.dataMember(tables[0].dataMember());\n                            }\n                            subscription.dispose();\n                        });\n                    }\n                    else {\n                        newItemModel.dataMember(efDataSource._tables()[0].dataMember());\n                    }\n                }\n                if (this.dataSources()[0] instanceof federation_data_source_1.FederationDataSource) {\n                    var feredationDataSource = (this.dataSources()[0]);\n                    feredationDataSource.queries().length > 0 && newItemModel.dataMember(feredationDataSource.queries()[0].alias());\n                }\n                if (this.dataSources()[0] instanceof mongodb_data_source_1.MongoDBDataSource) {\n                    var mongoDBDataSource = (this.dataSources()[0]);\n                    mongoDBDataSource.queries().length > 0 && newItemModel.dataMember(mongoDBDataSource.queries()[0]._actualName());\n                }\n            }\n            if (newItemModel instanceof group_item_1.GroupItem) {\n                this.groups.push(newItemModel);\n            }\n            else {\n                this.items.push(newItemModel);\n            }\n            return this._createDashboardLayoutNode(newItemModel);\n        }\n        return new dashboard_layout_group_1.DashboardLayoutGroup();\n    };\n    Dashboard.prototype._createDashboardLayoutNode = function (dashboardItem) {\n        var itemType = null;\n        if (dashboardItem instanceof group_item_1.GroupItem) {\n            itemType = 'LayoutGroup';\n        }\n        else if (dashboardItem instanceof tab_container_item_1.TabContainerItem) {\n            itemType = 'LayoutTabContainer';\n        }\n        else {\n            itemType = 'LayoutItem';\n        }\n        var newLayoutItemModel = _layout_utils_1.deserializeDashboardLayoutNode({ '@ItemType': itemType });\n        newLayoutItemModel.item = dashboardItem;\n        return newLayoutItemModel;\n    };\n    Dashboard.prototype._findDataItem = function (itemId) {\n        return this._dataDashboardItems().filter(function (item) { return item.componentName() == itemId; })[0];\n    };\n    Dashboard.prototype._interactivityGroupPathToRoot = function (dashboardItem) {\n        var _this = this;\n        var getParentContainerItem = function (item) {\n            return (!!item.parentContainer() && _this.findItem(item.parentContainer()) || undefined);\n        };\n        var parentContainers = [];\n        var parentContainerItem = dashboardItem;\n        do {\n            parentContainerItem = getParentContainerItem(parentContainerItem);\n            if (parentContainerItem) {\n                parentContainers.push(parentContainerItem);\n            }\n        } while (parentContainerItem);\n        return parentContainers;\n    };\n    Dashboard.prototype._processDeleteDataSource = function (dataSource) {\n        this._dataDashboardItems()\n            .filter(function (item) { return item.dataSource() == dataSource.componentName(); })\n            .forEach(function (item) { return item._clearBindings(); });\n    };\n    Dashboard._dataSourceTypesMap = __assign({ 'FederationDataSource': federation_data_source_1.FederationDataSource }, _data_source_factory_base_1._baseDataSourceTypesMap);\n    __decorate([\n        _undo_engine_helper_1.wrapWithUndoRedo\n    ], Dashboard.prototype, \"_changeItem\", null);\n    __decorate([\n        _undo_engine_helper_1.wrapWithUndoRedo\n    ], Dashboard.prototype, \"_duplicateItem\", null);\n    __decorate([\n        _undo_engine_helper_1.wrapWithUndoRedo\n    ], Dashboard.prototype, \"_processDeleteDataSource\", null);\n    return Dashboard;\n}(serializable_model_1.SerializableModel));\nexports.Dashboard = Dashboard;\n"]},"metadata":{},"sourceType":"script"}