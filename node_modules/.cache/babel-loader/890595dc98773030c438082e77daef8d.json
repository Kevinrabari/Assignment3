{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_data-item-draggable.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DragProcessor = void 0;\n\nvar events_1 = require(\"devextreme/events\");\n\nvar $ = require(\"jquery\");\n\nvar ko = require(\"knockout\");\n\nvar _undo_engine_helper_1 = require(\"../../model/internal/_undo-engine-helper\");\n\nvar DragProcessor = function () {\n  function DragProcessor(rootElement) {\n    var _this = this;\n\n    this.rootElement = rootElement;\n    this.CSS_DRAG_IN_PROGRESS = 'dx-dashboard-collection-drag';\n    this.CSS_HIGHLIGHT_PLACEHOLDER = 'dx-state-hovered';\n    this.COLLECTION_SELECTOR = '.dx-dashboard-collection';\n    this.TARGET_SELECTOR = '.dx-dashboard-drop-target';\n    this.EVENT_NAMESPACE = '.dragInGroup';\n    this.currentDrag = null;\n    this.state = 'pending';\n\n    this.setDataItemsPositions = function (sourceCollectionRoot) {\n      var elementData = ko.dataFor(sourceCollectionRoot);\n      $(sourceCollectionRoot).find('.dx-dashboard-data-item').each(function (index, item) {\n        if (elementData.supportGroups) {\n          var groupHolder = ko.contextFor(item).$parents[1],\n              groupSize = groupHolder.items === undefined ? 1 : groupHolder.items.length,\n              firstItemInGroup = groupHolder.items ? groupHolder.items[0] : ko.dataFor(item);\n          item.setAttribute('data-position', (groupHolder.position === undefined ? elementData['groups'] ? elementData['groups']().length : 0 : groupHolder.position).toString());\n          item.setAttribute('data-array-position', elementData.items().indexOf(firstItemInGroup).toString());\n          item.setAttribute('data-group-size', groupSize.toString());\n        } else {\n          item.setAttribute('data-position', '0');\n          item.setAttribute('data-array-position', '0');\n          item.setAttribute('data-group-size', '0');\n        }\n      });\n      _this.currentDrag.itemPosition = Number(_this.currentDrag.itemElement.getAttribute('data-position'));\n\n      var isOlap = _this.currentDrag.sourceCollection.isOlap();\n\n      $(_this.rootElement).find(_this.COLLECTION_SELECTOR).each(function (_, collectionElement) {\n        var isOtherCollection = ko.dataFor(collectionElement) !== ko.dataFor(sourceCollectionRoot);\n        var arrayPosition = 0;\n        $(collectionElement).find(_this.TARGET_SELECTOR).each(function (index, dragTargetElement) {\n          var elementData = ko.dataFor(dragTargetElement),\n              elementContext = ko.contextFor(dragTargetElement),\n              groupSize = elementData.items && elementData.items.length || 0;\n          dragTargetElement.setAttribute('data-position', index.toString());\n          dragTargetElement.setAttribute('data-array-position', arrayPosition.toString());\n          arrayPosition += groupSize;\n          var result = isOtherCollection ? !isOlap : _this.checkItemIsDraggableToPosition(_this.currentDrag.itemPosition, index);\n          $(dragTargetElement).toggleClass('dx-state-active', result);\n        });\n      });\n    };\n\n    this.processHtmlDragEvent = function () {\n      _this.currentDrag.originalEvent.dataTransfer.effectAllowed = 'move';\n\n      _this.currentDrag.originalEvent.dataTransfer.setData('text', _this.currentDrag.itemPosition.toString());\n\n      var itemElement = _this.currentDrag.itemElement;\n      var groupElement = $(itemElement).parents('.dx-dashboard-hierarchical-group')[0],\n          uiFeedbackElement = groupElement || itemElement;\n      var crt = uiFeedbackElement.cloneNode(true);\n      crt.style.position = 'absolute';\n      crt.style.top = '-100000px';\n      crt.style.right = '-100000px';\n      crt.className = crt.className + ' dx-dashboard-cloned-copy';\n      crt.style.width = $(itemElement).width() + 'px';\n      _this.currentDrag.clonedElement = crt;\n      var container = $(uiFeedbackElement).parents('.dx-dashboard-property-grid')[0];\n      if (container) container.appendChild(crt);\n      var event = _this.currentDrag.originalEvent;\n\n      if (event.dataTransfer['setDragImage']) {\n        event.dataTransfer.setDragImage(crt, event.offsetX === undefined ? event.layerX : event.offsetX, event.offsetY === undefined ? event.layerY : event.offsetY);\n      }\n    };\n\n    this.finishDrag = function () {\n      events_1.off(_this.rootElement, _this.EVENT_NAMESPACE);\n      $(document).off(_this.EVENT_NAMESPACE);\n\n      _this.rootElement.classList.remove(_this.CSS_DRAG_IN_PROGRESS);\n\n      $(_this.rootElement).parents('.dx-overlay-content').removeClass(_this.CSS_DRAG_IN_PROGRESS).addClass('dx-state-hover');\n      $(_this.rootElement).find(_this.TARGET_SELECTOR).removeClass(_this.CSS_HIGHLIGHT_PLACEHOLDER);\n\n      _this.currentDrag.itemElement.classList.remove('dx-dashboard-drag-in-progress');\n\n      var clonedElement = _this.currentDrag.clonedElement;\n\n      if (clonedElement && clonedElement.parentNode) {\n        clonedElement.parentNode.removeChild(clonedElement);\n      }\n\n      _this.currentDrag.clonedElement = null;\n      _this.state = 'pending';\n    };\n  }\n\n  DragProcessor.prototype.startDrag = function (ev) {\n    var _this = this;\n\n    this.currentDrag = {\n      originalEvent: ev.originalEvent,\n      itemPosition: -1,\n      clonedElement: null,\n      itemElement: ev.originalEvent.target,\n      sourceCollection: ko.dataFor($(ev.target).parents(this.COLLECTION_SELECTOR)[0])\n    };\n    var sourceCollectionElement = $(this.currentDrag.originalEvent.target).parents(this.COLLECTION_SELECTOR).get(0);\n    this.state = 'dragging';\n    this.rootElement.classList.add(this.CSS_DRAG_IN_PROGRESS);\n    $(this.rootElement).parents('.dx-overlay-content').addClass(this.CSS_DRAG_IN_PROGRESS);\n    this.setDataItemsPositions(sourceCollectionElement);\n    this.processHtmlDragEvent();\n    this.currentDrag.itemElement.classList.add('dx-dashboard-drag-in-progress');\n    events_1.on(this.rootElement, 'dragover' + this.EVENT_NAMESPACE, this.TARGET_SELECTOR, {}, function (ev) {\n      var originalEvent = ev.originalEvent,\n          targetItem = ko.dataFor(originalEvent.target),\n          position = Number(ev.currentTarget.getAttribute('data-position'));\n\n      if (originalEvent.target.parentNode['className'].indexOf('dx-state-active') !== -1) {\n        ev.currentTarget.classList.add(_this.CSS_HIGHLIGHT_PLACEHOLDER);\n        originalEvent.dataTransfer.dropEffect = 'move';\n      } else {\n        originalEvent.dataTransfer.dropEffect = 'none';\n      }\n\n      return false;\n    });\n    events_1.on(this.rootElement, 'dragleave' + this.EVENT_NAMESPACE, this.TARGET_SELECTOR, {}, function (ev) {\n      ev.currentTarget.classList.remove(_this.CSS_HIGHLIGHT_PLACEHOLDER);\n    });\n    events_1.on(this.rootElement, 'drop' + this.EVENT_NAMESPACE, this.TARGET_SELECTOR, {}, function (ev) {\n      var sourceCollection = _this.currentDrag.sourceCollection,\n          targetCollection = ko.dataFor($(ev.target).parents(_this.COLLECTION_SELECTOR)[0]),\n          originalPosition = Number(_this.currentDrag.itemElement.getAttribute('data-array-position')),\n          newPosition = Number(ev.currentTarget.getAttribute('data-array-position')),\n          groupSize = Number(_this.currentDrag.itemElement.getAttribute('data-group-size'));\n\n      _this.interchange(sourceCollection.items, targetCollection !== sourceCollection ? targetCollection : null, originalPosition, newPosition, groupSize);\n\n      _this.finishDrag();\n\n      return false;\n    });\n    events_1.on(document, 'dragend' + this.EVENT_NAMESPACE, function () {\n      _this.finishDrag();\n    });\n    return true;\n  };\n\n  DragProcessor.prototype.checkItemIsDraggableToPosition = function (itemIndex, placeholderIndex) {\n    return placeholderIndex < itemIndex || placeholderIndex > itemIndex + 1;\n  };\n\n  DragProcessor.prototype.interchange = function (items, newOwner, sourceIndex, placeholderIndex, groupSize) {\n    if (!groupSize) {\n      groupSize = 1;\n    }\n\n    if (null === newOwner) {\n      if (placeholderIndex > sourceIndex) {\n        placeholderIndex--;\n\n        for (var i = 0; i < groupSize; i++) {\n          var item = items()[sourceIndex];\n          items.remove(item);\n          items.splice(placeholderIndex, 0, item);\n        }\n      } else {\n        for (var i = 0; i < groupSize; i++) {\n          var item = items()[sourceIndex + i];\n          items.remove(item);\n          items.splice(placeholderIndex + i, 0, item);\n        }\n      }\n    } else {\n      for (var i = 0; i < groupSize; i++) {\n        item = items()[sourceIndex];\n        newOwner.relocateItem(item, placeholderIndex + i);\n        items.remove(item);\n      }\n    }\n  };\n\n  __decorate([_undo_engine_helper_1.wrapWithUndoRedo], DragProcessor.prototype, \"interchange\", null);\n\n  return DragProcessor;\n}();\n\nexports.DragProcessor = DragProcessor;\nko.bindingHandlers['dx-dashboard-container-draggable'] = {\n  init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var processor = new DragProcessor(element);\n    events_1.on(element, 'dragstart', function (ev) {\n      processor.startDrag(ev);\n    });\n  }\n};","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/items/_data-item-draggable.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","exports","value","DragProcessor","events_1","require","$","ko","_undo_engine_helper_1","rootElement","_this","CSS_DRAG_IN_PROGRESS","CSS_HIGHLIGHT_PLACEHOLDER","COLLECTION_SELECTOR","TARGET_SELECTOR","EVENT_NAMESPACE","currentDrag","state","setDataItemsPositions","sourceCollectionRoot","elementData","dataFor","find","each","index","item","supportGroups","groupHolder","contextFor","$parents","groupSize","items","undefined","firstItemInGroup","setAttribute","position","toString","indexOf","itemPosition","Number","itemElement","getAttribute","isOlap","sourceCollection","_","collectionElement","isOtherCollection","arrayPosition","dragTargetElement","elementContext","result","checkItemIsDraggableToPosition","toggleClass","processHtmlDragEvent","originalEvent","dataTransfer","effectAllowed","setData","groupElement","parents","uiFeedbackElement","crt","cloneNode","style","top","right","className","width","clonedElement","container","appendChild","event","setDragImage","offsetX","layerX","offsetY","layerY","finishDrag","off","document","classList","remove","removeClass","addClass","parentNode","removeChild","prototype","startDrag","ev","sourceCollectionElement","get","add","on","targetItem","currentTarget","dropEffect","targetCollection","originalPosition","newPosition","interchange","itemIndex","placeholderIndex","newOwner","sourceIndex","splice","relocateItem","wrapWithUndoRedo","bindingHandlers","init","element","valueAccessor","allBindings","viewModel","bindingContext","processor"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_data-item-draggable.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DragProcessor = void 0;\nvar events_1 = require(\"devextreme/events\");\nvar $ = require(\"jquery\");\nvar ko = require(\"knockout\");\nvar _undo_engine_helper_1 = require(\"../../model/internal/_undo-engine-helper\");\nvar DragProcessor = (function () {\n    function DragProcessor(rootElement) {\n        var _this = this;\n        this.rootElement = rootElement;\n        this.CSS_DRAG_IN_PROGRESS = 'dx-dashboard-collection-drag';\n        this.CSS_HIGHLIGHT_PLACEHOLDER = 'dx-state-hovered';\n        this.COLLECTION_SELECTOR = '.dx-dashboard-collection';\n        this.TARGET_SELECTOR = '.dx-dashboard-drop-target';\n        this.EVENT_NAMESPACE = '.dragInGroup';\n        this.currentDrag = null;\n        this.state = 'pending';\n        this.setDataItemsPositions = function (sourceCollectionRoot) {\n            var elementData = ko.dataFor(sourceCollectionRoot);\n            $(sourceCollectionRoot).find('.dx-dashboard-data-item').each(function (index, item) {\n                if (elementData.supportGroups) {\n                    var groupHolder = ko.contextFor(item).$parents[1], groupSize = groupHolder.items === undefined\n                        ? 1\n                        : groupHolder.items.length, firstItemInGroup = groupHolder.items ? groupHolder.items[0] : ko.dataFor(item);\n                    item.setAttribute('data-position', (groupHolder.position === undefined\n                        ? elementData['groups'] ? elementData['groups']().length : 0\n                        : groupHolder.position).toString());\n                    item.setAttribute('data-array-position', elementData.items().indexOf(firstItemInGroup).toString());\n                    item.setAttribute('data-group-size', groupSize.toString());\n                }\n                else {\n                    item.setAttribute('data-position', '0');\n                    item.setAttribute('data-array-position', '0');\n                    item.setAttribute('data-group-size', '0');\n                }\n            });\n            _this.currentDrag.itemPosition = Number(_this.currentDrag.itemElement.getAttribute('data-position'));\n            var isOlap = _this.currentDrag.sourceCollection.isOlap();\n            $(_this.rootElement).find(_this.COLLECTION_SELECTOR).each(function (_, collectionElement) {\n                var isOtherCollection = ko.dataFor(collectionElement) !== ko.dataFor(sourceCollectionRoot);\n                var arrayPosition = 0;\n                $(collectionElement).find(_this.TARGET_SELECTOR).each(function (index, dragTargetElement) {\n                    var elementData = ko.dataFor(dragTargetElement), elementContext = ko.contextFor(dragTargetElement), groupSize = (elementData.items && elementData.items.length) || 0;\n                    dragTargetElement.setAttribute('data-position', index.toString());\n                    dragTargetElement.setAttribute('data-array-position', arrayPosition.toString());\n                    arrayPosition += groupSize;\n                    var result = isOtherCollection\n                        ? !isOlap\n                        : _this.checkItemIsDraggableToPosition(_this.currentDrag.itemPosition, index);\n                    $(dragTargetElement).toggleClass('dx-state-active', result);\n                });\n            });\n        };\n        this.processHtmlDragEvent = function () {\n            _this.currentDrag.originalEvent.dataTransfer.effectAllowed = 'move';\n            _this.currentDrag.originalEvent.dataTransfer.setData('text', _this.currentDrag.itemPosition.toString());\n            var itemElement = _this.currentDrag.itemElement;\n            var groupElement = $(itemElement).parents('.dx-dashboard-hierarchical-group')[0], uiFeedbackElement = groupElement || itemElement;\n            var crt = uiFeedbackElement.cloneNode(true);\n            crt.style.position = 'absolute';\n            crt.style.top = '-100000px';\n            crt.style.right = '-100000px';\n            crt.className = crt.className + ' dx-dashboard-cloned-copy';\n            crt.style.width = $(itemElement).width() + 'px';\n            _this.currentDrag.clonedElement = crt;\n            var container = $(uiFeedbackElement).parents('.dx-dashboard-property-grid')[0];\n            if (container)\n                container.appendChild(crt);\n            var event = _this.currentDrag.originalEvent;\n            if (event.dataTransfer['setDragImage']) {\n                event.dataTransfer.setDragImage(crt, event.offsetX === undefined ? event.layerX : event.offsetX, event.offsetY === undefined ? event.layerY : event.offsetY);\n            }\n        };\n        this.finishDrag = function () {\n            events_1.off(_this.rootElement, _this.EVENT_NAMESPACE);\n            $(document).off(_this.EVENT_NAMESPACE);\n            _this.rootElement.classList.remove(_this.CSS_DRAG_IN_PROGRESS);\n            $(_this.rootElement).parents('.dx-overlay-content').removeClass(_this.CSS_DRAG_IN_PROGRESS).addClass('dx-state-hover');\n            $(_this.rootElement).find(_this.TARGET_SELECTOR).removeClass(_this.CSS_HIGHLIGHT_PLACEHOLDER);\n            _this.currentDrag.itemElement.classList.remove('dx-dashboard-drag-in-progress');\n            var clonedElement = _this.currentDrag.clonedElement;\n            if (clonedElement && clonedElement.parentNode) {\n                clonedElement.parentNode.removeChild(clonedElement);\n            }\n            _this.currentDrag.clonedElement = null;\n            _this.state = 'pending';\n        };\n    }\n    DragProcessor.prototype.startDrag = function (ev) {\n        var _this = this;\n        this.currentDrag = {\n            originalEvent: ev.originalEvent,\n            itemPosition: -1,\n            clonedElement: null,\n            itemElement: ev.originalEvent.target,\n            sourceCollection: ko.dataFor($(ev.target).parents(this.COLLECTION_SELECTOR)[0])\n        };\n        var sourceCollectionElement = $(this.currentDrag.originalEvent.target).parents(this.COLLECTION_SELECTOR).get(0);\n        this.state = 'dragging';\n        this.rootElement.classList.add(this.CSS_DRAG_IN_PROGRESS);\n        $(this.rootElement).parents('.dx-overlay-content').addClass(this.CSS_DRAG_IN_PROGRESS);\n        this.setDataItemsPositions(sourceCollectionElement);\n        this.processHtmlDragEvent();\n        this.currentDrag.itemElement.classList.add('dx-dashboard-drag-in-progress');\n        events_1.on(this.rootElement, 'dragover' + this.EVENT_NAMESPACE, this.TARGET_SELECTOR, {}, function (ev) {\n            var originalEvent = ev.originalEvent, targetItem = ko.dataFor(originalEvent.target), position = Number(ev.currentTarget.getAttribute('data-position'));\n            if (originalEvent.target.parentNode['className'].indexOf('dx-state-active') !== -1) {\n                ev.currentTarget.classList.add(_this.CSS_HIGHLIGHT_PLACEHOLDER);\n                originalEvent.dataTransfer.dropEffect = 'move';\n            }\n            else {\n                originalEvent.dataTransfer.dropEffect = 'none';\n            }\n            return false;\n        });\n        events_1.on(this.rootElement, 'dragleave' + this.EVENT_NAMESPACE, this.TARGET_SELECTOR, {}, function (ev) {\n            ev.currentTarget.classList.remove(_this.CSS_HIGHLIGHT_PLACEHOLDER);\n        });\n        events_1.on(this.rootElement, 'drop' + this.EVENT_NAMESPACE, this.TARGET_SELECTOR, {}, function (ev) {\n            var sourceCollection = _this.currentDrag.sourceCollection, targetCollection = ko.dataFor($(ev.target).parents(_this.COLLECTION_SELECTOR)[0]), originalPosition = Number(_this.currentDrag.itemElement.getAttribute('data-array-position')), newPosition = Number(ev.currentTarget.getAttribute('data-array-position')), groupSize = Number(_this.currentDrag.itemElement.getAttribute('data-group-size'));\n            _this.interchange(sourceCollection.items, targetCollection !== sourceCollection ? targetCollection : null, originalPosition, newPosition, groupSize);\n            _this.finishDrag();\n            return false;\n        });\n        events_1.on(document, 'dragend' + this.EVENT_NAMESPACE, function () {\n            _this.finishDrag();\n        });\n        return true;\n    };\n    DragProcessor.prototype.checkItemIsDraggableToPosition = function (itemIndex, placeholderIndex) {\n        return (placeholderIndex < itemIndex) || (placeholderIndex > itemIndex + 1);\n    };\n    DragProcessor.prototype.interchange = function (items, newOwner, sourceIndex, placeholderIndex, groupSize) {\n        if (!groupSize) {\n            groupSize = 1;\n        }\n        if (null === newOwner) {\n            if (placeholderIndex > sourceIndex) {\n                placeholderIndex--;\n                for (var i = 0; i < groupSize; i++) {\n                    var item = items()[sourceIndex];\n                    items.remove(item);\n                    items.splice(placeholderIndex, 0, item);\n                }\n            }\n            else {\n                for (var i = 0; i < groupSize; i++) {\n                    var item = items()[sourceIndex + i];\n                    items.remove(item);\n                    items.splice(placeholderIndex + i, 0, item);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < groupSize; i++) {\n                item = items()[sourceIndex];\n                newOwner.relocateItem(item, placeholderIndex + i);\n                items.remove(item);\n            }\n        }\n    };\n    __decorate([\n        _undo_engine_helper_1.wrapWithUndoRedo\n    ], DragProcessor.prototype, \"interchange\", null);\n    return DragProcessor;\n}());\nexports.DragProcessor = DragProcessor;\nko.bindingHandlers['dx-dashboard-container-draggable'] = {\n    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n        var processor = new DragProcessor(element);\n        events_1.on(element, 'dragstart', function (ev) {\n            processor.startDrag(ev);\n        });\n    }\n};\n"]},"metadata":{},"sourceType":"script"}