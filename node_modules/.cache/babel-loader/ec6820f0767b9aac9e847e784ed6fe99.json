{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/html_editor/ui.html_editor.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { extend } from \"../../core/utils/extend\";\nimport { isDefined, isFunction } from \"../../core/utils/type\";\nimport { getPublicElement } from \"../../core/element\";\nimport { executeAsync, noop, ensureDefined, deferRender } from \"../../core/utils/common\";\nimport registerComponent from \"../../core/component_registrator\";\nimport { EmptyTemplate } from \"../../core/templates/empty_template\";\nimport Editor from \"../editor/editor\";\nimport Errors from \"../widget/ui.errors\";\nimport Callbacks from \"../../core/utils/callbacks\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport { Event as dxEvent } from \"../../events/index\";\nimport scrollEvents from \"../../events/gesture/emitter.gesture.scroll\";\nimport { prepareScrollData } from \"../text_box/utils.scroll\";\nimport pointerEvents from \"../../events/pointer\";\nimport devices from \"../../core/devices\";\nimport QuillRegistrator from \"./quill_registrator\";\nimport \"./converters/delta\";\nimport ConverterController from \"./converterController\";\nimport getWordMatcher from \"./matchers/wordLists\";\nimport FormDialog from \"./ui/formDialog\";\nvar HTML_EDITOR_CLASS = \"dx-htmleditor\";\nvar QUILL_CONTAINER_CLASS = \"dx-quill-container\";\nvar QUILL_CLIPBOARD_CLASS = \"ql-clipboard\";\nvar HTML_EDITOR_SUBMIT_ELEMENT_CLASS = \"dx-htmleditor-submit-element\";\nvar HTML_EDITOR_CONTENT_CLASS = \"dx-htmleditor-content\";\nvar MARKDOWN_VALUE_TYPE = \"markdown\";\nvar ANONYMOUS_TEMPLATE_NAME = \"htmlContent\";\nvar isIos = \"ios\" === devices.current().platform;\nvar HtmlEditor = Editor.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      focusStateEnabled: true,\n      valueType: \"html\",\n      placeholder: \"\",\n      toolbar: null,\n      variables: null,\n      mediaResizing: null,\n      tableResizing: null,\n      mentions: null,\n      customizeModules: null,\n      tableContextMenu: null,\n      allowSoftLineBreak: false,\n      formDialogOptions: null,\n      imageUpload: null,\n      stylingMode: \"outlined\"\n    });\n  },\n  _init: function () {\n    this.callBase();\n    this._cleanCallback = Callbacks();\n    this._contentInitializedCallback = Callbacks();\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initTemplates: function () {\n    this._templateManager.addDefaultTemplates({\n      [ANONYMOUS_TEMPLATE_NAME]: new EmptyTemplate()\n    });\n\n    this.callBase();\n  },\n  _focusTarget: function () {\n    return this._getContent();\n  },\n  _getContent: function () {\n    return this.$element().find(\".\".concat(HTML_EDITOR_CONTENT_CLASS));\n  },\n  _focusInHandler: function (_ref) {\n    var {\n      relatedTarget: relatedTarget\n    } = _ref;\n\n    if (this._shouldSkipFocusEvent(relatedTarget)) {\n      return;\n    }\n\n    this._toggleFocusClass(true, this.$element());\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function (_ref2) {\n    var {\n      relatedTarget: relatedTarget\n    } = _ref2;\n\n    if (this._shouldSkipFocusEvent(relatedTarget)) {\n      return;\n    }\n\n    this._toggleFocusClass(false, this.$element());\n\n    this.callBase.apply(this, arguments);\n  },\n  _shouldSkipFocusEvent: function (relatedTarget) {\n    return $(relatedTarget).hasClass(QUILL_CLIPBOARD_CLASS);\n  },\n  _initMarkup: function () {\n    this._$htmlContainer = $(\"<div>\").addClass(QUILL_CONTAINER_CLASS);\n    this.$element().attr(\"role\", \"application\").addClass(HTML_EDITOR_CLASS).wrapInner(this._$htmlContainer);\n\n    this._renderStylingMode();\n\n    var template = this._getTemplate(ANONYMOUS_TEMPLATE_NAME);\n\n    this._$templateResult = template && template.render({\n      container: getPublicElement(this._$htmlContainer),\n      noModel: true,\n      transclude: true\n    });\n\n    this._renderSubmitElement();\n\n    this.callBase();\n\n    this._updateContainerMarkup();\n  },\n  _renderSubmitElement: function () {\n    this._$submitElement = $(\"<textarea>\").addClass(HTML_EDITOR_SUBMIT_ELEMENT_CLASS).attr(\"hidden\", true).appendTo(this.$element());\n\n    this._setSubmitValue(this.option(\"value\"));\n  },\n  _setSubmitValue: function (value) {\n    this._getSubmitElement().val(value);\n  },\n  _getSubmitElement: function () {\n    return this._$submitElement;\n  },\n  _updateContainerMarkup: function () {\n    var markup = this.option(\"value\");\n\n    if (this._isMarkdownValue()) {\n      this._prepareMarkdownConverter();\n\n      markup = this._markdownConverter.toHtml(markup);\n    }\n\n    if (markup) {\n      this._$htmlContainer.html(markup);\n    }\n  },\n  _prepareMarkdownConverter: function () {\n    var MarkdownConverter = ConverterController.getConverter(\"markdown\");\n\n    if (MarkdownConverter) {\n      this._markdownConverter = new MarkdownConverter();\n    } else {\n      throw Errors.Error(\"E1051\", \"markdown\");\n    }\n  },\n  _render: function () {\n    this._prepareConverters();\n\n    this.callBase();\n  },\n  _prepareQuillRegistrator: function () {\n    if (!this._quillRegistrator) {\n      this._quillRegistrator = new QuillRegistrator();\n    }\n  },\n  _getRegistrator: function () {\n    this._prepareQuillRegistrator();\n\n    return this._quillRegistrator;\n  },\n  _prepareConverters: function () {\n    if (!this._deltaConverter) {\n      var DeltaConverter = ConverterController.getConverter(\"delta\");\n\n      if (DeltaConverter) {\n        this._deltaConverter = new DeltaConverter();\n      }\n    }\n\n    if (this.option(\"valueType\") === MARKDOWN_VALUE_TYPE && !this._markdownConverter) {\n      this._prepareMarkdownConverter();\n    }\n  },\n  _renderContentImpl: function () {\n    this._contentRenderedDeferred = new Deferred();\n\n    var renderContentPromise = this._contentRenderedDeferred.promise();\n\n    this.callBase();\n\n    this._renderHtmlEditor();\n\n    this._renderFormDialog();\n\n    this._addKeyPressHandler();\n\n    return renderContentPromise;\n  },\n  _pointerMoveHandler: function (e) {\n    if (isIos) {\n      e.stopPropagation();\n    }\n  },\n  _attachFocusEvents: function () {\n    deferRender(this.callBase.bind(this));\n  },\n  _addKeyPressHandler: function () {\n    var keyDownEvent = addNamespace(\"keydown\", \"\".concat(this.NAME, \"TextChange\"));\n    eventsEngine.on(this._$htmlContainer, keyDownEvent, this._keyDownHandler.bind(this));\n  },\n  _keyDownHandler: function (e) {\n    this._saveValueChangeEvent(e);\n  },\n  _renderHtmlEditor: function () {\n    var customizeModules = this.option(\"customizeModules\");\n\n    var modulesConfig = this._getModulesConfig();\n\n    if (isFunction(customizeModules)) {\n      customizeModules(modulesConfig);\n    }\n\n    this._quillInstance = this._getRegistrator().createEditor(this._$htmlContainer[0], {\n      placeholder: this.option(\"placeholder\"),\n      readOnly: this.option(\"readOnly\") || this.option(\"disabled\"),\n      modules: modulesConfig,\n      theme: \"basic\"\n    });\n\n    this._deltaConverter.setQuillInstance(this._quillInstance);\n\n    this._textChangeHandlerWithContext = this._textChangeHandler.bind(this);\n\n    this._quillInstance.on(\"text-change\", this._textChangeHandlerWithContext);\n\n    this._renderScrollHandler();\n\n    if (this._hasTranscludedContent()) {\n      this._updateContentTask = executeAsync(() => {\n        this._applyTranscludedContent();\n      });\n    } else {\n      this._finalizeContentRendering();\n    }\n  },\n  _renderScrollHandler: function () {\n    var $scrollContainer = this._getContent();\n\n    var initScrollData = prepareScrollData($scrollContainer);\n    eventsEngine.on($scrollContainer, addNamespace(scrollEvents.init, this.NAME), initScrollData, noop);\n    eventsEngine.on($scrollContainer, addNamespace(pointerEvents.move, this.NAME), this._pointerMoveHandler.bind(this));\n  },\n  _applyTranscludedContent: function () {\n    var valueOption = this.option(\"value\");\n\n    if (!isDefined(valueOption)) {\n      var html = this._deltaConverter.toHtml();\n\n      var newDelta = this._quillInstance.clipboard.convert({\n        html: html\n      });\n\n      if (newDelta.ops.length) {\n        this._quillInstance.setContents(newDelta);\n\n        return;\n      }\n    }\n\n    this._finalizeContentRendering();\n  },\n  _hasTranscludedContent: function () {\n    return this._$templateResult && this._$templateResult.length;\n  },\n  _getModulesConfig: function () {\n    var quill = this._getRegistrator().getQuill();\n\n    var wordListMatcher = getWordMatcher(quill);\n    var modulesConfig = extend({}, {\n      table: true,\n      toolbar: this._getModuleConfigByOption(\"toolbar\"),\n      variables: this._getModuleConfigByOption(\"variables\"),\n      resizing: this._getModuleConfigByOption(\"mediaResizing\"),\n      tableResizing: this._getModuleConfigByOption(\"tableResizing\"),\n      tableContextMenu: this._getModuleConfigByOption(\"tableContextMenu\"),\n      imageUpload: this._getModuleConfigByOption(\"imageUpload\"),\n      imageCursor: this._getBaseModuleConfig(),\n      mentions: this._getModuleConfigByOption(\"mentions\"),\n      uploader: {\n        onDrop: e => this._saveValueChangeEvent(dxEvent(e)),\n        imageBlot: \"extendedImage\"\n      },\n      keyboard: {\n        onKeydown: e => this._saveValueChangeEvent(dxEvent(e))\n      },\n      clipboard: {\n        onPaste: e => this._saveValueChangeEvent(dxEvent(e)),\n        onCut: e => this._saveValueChangeEvent(dxEvent(e)),\n        matchers: [[\"p.MsoListParagraphCxSpFirst\", wordListMatcher], [\"p.MsoListParagraphCxSpMiddle\", wordListMatcher], [\"p.MsoListParagraphCxSpLast\", wordListMatcher]]\n      },\n      multiline: Boolean(this.option(\"allowSoftLineBreak\"))\n    }, this._getCustomModules());\n    return modulesConfig;\n  },\n  _getModuleConfigByOption: function (userOptionName) {\n    var optionValue = this.option(userOptionName);\n    var config = {};\n\n    if (!isDefined(optionValue)) {\n      return;\n    }\n\n    if (Array.isArray(optionValue)) {\n      config[userOptionName] = optionValue;\n    } else {\n      config = optionValue;\n    }\n\n    return extend(this._getBaseModuleConfig(), config);\n  },\n  _getBaseModuleConfig: function () {\n    return {\n      editorInstance: this\n    };\n  },\n  _getCustomModules: function () {\n    var modules = {};\n\n    var moduleNames = this._getRegistrator().getRegisteredModuleNames();\n\n    moduleNames.forEach(modulePath => {\n      modules[modulePath] = this._getBaseModuleConfig();\n    });\n    return modules;\n  },\n  _textChangeHandler: function (newDelta, oldDelta, source) {\n    var htmlMarkup = this._deltaConverter.toHtml();\n\n    var convertedValue = this._isMarkdownValue() ? this._updateValueByType(MARKDOWN_VALUE_TYPE, htmlMarkup) : htmlMarkup;\n    var currentValue = this.option(\"value\");\n\n    if (currentValue !== convertedValue && !this._isNullValueConverted(currentValue, convertedValue)) {\n      this._isEditorUpdating = true;\n      this.option(\"value\", convertedValue);\n    }\n\n    this._finalizeContentRendering();\n  },\n  _isNullValueConverted: function (currentValue, convertedValue) {\n    return null === currentValue && \"\" === convertedValue;\n  },\n  _finalizeContentRendering: function () {\n    if (this._contentRenderedDeferred) {\n      this.clearHistory();\n\n      this._contentInitializedCallback.fire();\n\n      this._contentRenderedDeferred.resolve();\n\n      this._contentRenderedDeferred = void 0;\n    }\n  },\n  _updateValueByType: function (valueType, value) {\n    var converter = this._markdownConverter;\n\n    if (!isDefined(converter)) {\n      return;\n    }\n\n    var currentValue = ensureDefined(value, this.option(\"value\"));\n    return valueType === MARKDOWN_VALUE_TYPE ? converter.toMarkdown(currentValue) : converter.toHtml(currentValue);\n  },\n  _isMarkdownValue: function () {\n    return this.option(\"valueType\") === MARKDOWN_VALUE_TYPE;\n  },\n  _resetEnabledState: function () {\n    if (this._quillInstance) {\n      var isEnabled = !(this.option(\"readOnly\") || this.option(\"disabled\"));\n\n      this._quillInstance.enable(isEnabled);\n    }\n  },\n  _renderFormDialog: function () {\n    var userOptions = extend(true, {\n      width: \"auto\",\n      height: \"auto\",\n      hideOnOutsideClick: true\n    }, this.option(\"formDialogOptions\"));\n    this._formDialog = new FormDialog(this, userOptions);\n  },\n  _getStylingModePrefix: function () {\n    return \"dx-htmleditor-\";\n  },\n  _getQuillContainer: function () {\n    return this._$htmlContainer;\n  },\n\n  _prepareModuleOptions(args) {\n    var _args$fullName;\n\n    var optionData = null === (_args$fullName = args.fullName) || void 0 === _args$fullName ? void 0 : _args$fullName.split(\".\");\n    var value = args.value;\n    var optionName = optionData.length >= 2 ? optionData[1] : args.name;\n\n    if (3 === optionData.length) {\n      value = {\n        [optionData[2]]: value\n      };\n    }\n\n    return [optionName, value];\n  },\n\n  _moduleOptionChanged: function (moduleName, args) {\n    var _this$_quillInstance;\n\n    var moduleInstance = null === (_this$_quillInstance = this._quillInstance) || void 0 === _this$_quillInstance ? void 0 : _this$_quillInstance.getModule(moduleName);\n    var shouldPassOptionsToModule = Boolean(moduleInstance);\n\n    if (shouldPassOptionsToModule) {\n      moduleInstance.option(...this._prepareModuleOptions(args));\n    } else {\n      this._invalidate();\n    }\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"value\":\n        if (this._quillInstance) {\n          if (this._isEditorUpdating) {\n            this._isEditorUpdating = false;\n          } else {\n            var updatedValue = this._isMarkdownValue() ? this._updateValueByType(\"HTML\", args.value) : args.value;\n\n            this._updateHtmlContent(updatedValue);\n          }\n        } else {\n          this._$htmlContainer.html(args.value);\n        }\n\n        this._setSubmitValue(args.value);\n\n        this.callBase(args);\n        break;\n\n      case \"placeholder\":\n      case \"variables\":\n      case \"toolbar\":\n      case \"mentions\":\n      case \"customizeModules\":\n      case \"allowSoftLineBreak\":\n        this._invalidate();\n\n        break;\n\n      case \"tableResizing\":\n        this._moduleOptionChanged(\"tableResizing\", args);\n\n        break;\n\n      case \"valueType\":\n        this._prepareConverters();\n\n        var newValue = this._updateValueByType(args.value);\n\n        if (\"html\" === args.value && this._quillInstance) {\n          this._updateHtmlContent(newValue);\n        } else {\n          this.option(\"value\", newValue);\n        }\n\n        break;\n\n      case \"stylingMode\":\n        this._renderStylingMode();\n\n        break;\n\n      case \"readOnly\":\n      case \"disabled\":\n        this.callBase(args);\n\n        this._resetEnabledState();\n\n        break;\n\n      case \"formDialogOptions\":\n        this._renderFormDialog();\n\n        break;\n\n      case \"tableContextMenu\":\n        this._moduleOptionChanged(\"tableContextMenu\", args);\n\n        break;\n\n      case \"mediaResizing\":\n        if (!args.previousValue || !args.value) {\n          this._invalidate();\n        } else {\n          this._quillInstance.getModule(\"resizing\").option(args.name, args.value);\n        }\n\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._repaintToolbar();\n\n        break;\n\n      case \"imageUpload\":\n        this._moduleOptionChanged(\"imageUpload\", args);\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _repaintToolbar: function () {\n    var toolbar = this._quillInstance.getModule(\"toolbar\");\n\n    toolbar && toolbar.repaint();\n  },\n  _updateHtmlContent: function (html) {\n    var newDelta = this._quillInstance.clipboard.convert({\n      html: html\n    });\n\n    this._quillInstance.setContents(newDelta);\n  },\n  _clean: function () {\n    if (this._quillInstance) {\n      eventsEngine.off(this._getContent(), \".\".concat(this.NAME));\n\n      this._quillInstance.off(\"text-change\", this._textChangeHandlerWithContext);\n\n      this._cleanCallback.fire();\n    }\n\n    this._abortUpdateContentTask();\n\n    this._cleanCallback.empty();\n\n    this._contentInitializedCallback.empty();\n\n    this.callBase();\n  },\n  _abortUpdateContentTask: function () {\n    if (this._updateContentTask) {\n      this._updateContentTask.abort();\n\n      this._updateContentTask = void 0;\n    }\n  },\n\n  _applyQuillMethod(methodName, args) {\n    if (this._quillInstance) {\n      return this._quillInstance[methodName].apply(this._quillInstance, args);\n    }\n  },\n\n  _applyQuillHistoryMethod(methodName) {\n    if (this._quillInstance && this._quillInstance.history) {\n      this._quillInstance.history[methodName]();\n    }\n  },\n\n  addCleanCallback(callback) {\n    this._cleanCallback.add(callback);\n  },\n\n  addContentInitializedCallback(callback) {\n    this._contentInitializedCallback.add(callback);\n  },\n\n  register: function (components) {\n    this._getRegistrator().registerModules(components);\n\n    if (this._quillInstance) {\n      this.repaint();\n    }\n  },\n  get: function (modulePath) {\n    return this._getRegistrator().getQuill().import(modulePath);\n  },\n  getModule: function (moduleName) {\n    return this._applyQuillMethod(\"getModule\", arguments);\n  },\n  getQuillInstance: function () {\n    return this._quillInstance;\n  },\n  getSelection: function (focus) {\n    return this._applyQuillMethod(\"getSelection\", arguments);\n  },\n  setSelection: function (index, length) {\n    this._applyQuillMethod(\"setSelection\", arguments);\n  },\n  getText: function (index, length) {\n    return this._applyQuillMethod(\"getText\", arguments);\n  },\n  format: function (formatName, formatValue) {\n    this._applyQuillMethod(\"format\", arguments);\n  },\n  formatText: function (index, length, formatName, formatValue) {\n    this._applyQuillMethod(\"formatText\", arguments);\n  },\n  formatLine: function (index, length, formatName, formatValue) {\n    this._applyQuillMethod(\"formatLine\", arguments);\n  },\n  getFormat: function (index, length) {\n    return this._applyQuillMethod(\"getFormat\", arguments);\n  },\n  removeFormat: function (index, length) {\n    return this._applyQuillMethod(\"removeFormat\", arguments);\n  },\n  clearHistory: function () {\n    this._applyQuillHistoryMethod(\"clear\");\n  },\n  undo: function () {\n    this._applyQuillHistoryMethod(\"undo\");\n  },\n  redo: function () {\n    this._applyQuillHistoryMethod(\"redo\");\n  },\n  getLength: function () {\n    return this._applyQuillMethod(\"getLength\");\n  },\n  getBounds: function (index, length) {\n    return this._applyQuillMethod(\"getBounds\", arguments);\n  },\n  delete: function (index, length) {\n    this._applyQuillMethod(\"deleteText\", arguments);\n  },\n  insertText: function (index, text, formats) {\n    this._applyQuillMethod(\"insertText\", arguments);\n  },\n  insertEmbed: function (index, type, config) {\n    this._applyQuillMethod(\"insertEmbed\", arguments);\n  },\n  showFormDialog: function (formConfig) {\n    return this._formDialog.show(formConfig);\n  },\n  formDialogOption: function (optionName, optionValue) {\n    return this._formDialog.popupOption.apply(this._formDialog, arguments);\n  },\n  focus: function () {\n    this.callBase();\n\n    this._applyQuillMethod(\"focus\");\n  },\n  blur: function () {\n    this._applyQuillMethod(\"blur\");\n  }\n});\nregisterComponent(\"dxHtmlEditor\", HtmlEditor);\nexport default HtmlEditor;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/html_editor/ui.html_editor.js"],"names":["$","extend","isDefined","isFunction","getPublicElement","executeAsync","noop","ensureDefined","deferRender","registerComponent","EmptyTemplate","Editor","Errors","Callbacks","Deferred","eventsEngine","addNamespace","Event","dxEvent","scrollEvents","prepareScrollData","pointerEvents","devices","QuillRegistrator","ConverterController","getWordMatcher","FormDialog","HTML_EDITOR_CLASS","QUILL_CONTAINER_CLASS","QUILL_CLIPBOARD_CLASS","HTML_EDITOR_SUBMIT_ELEMENT_CLASS","HTML_EDITOR_CONTENT_CLASS","MARKDOWN_VALUE_TYPE","ANONYMOUS_TEMPLATE_NAME","isIos","current","platform","HtmlEditor","inherit","_getDefaultOptions","callBase","focusStateEnabled","valueType","placeholder","toolbar","variables","mediaResizing","tableResizing","mentions","customizeModules","tableContextMenu","allowSoftLineBreak","formDialogOptions","imageUpload","stylingMode","_init","_cleanCallback","_contentInitializedCallback","_getAnonymousTemplateName","_initTemplates","_templateManager","addDefaultTemplates","_focusTarget","_getContent","$element","find","concat","_focusInHandler","_ref","relatedTarget","_shouldSkipFocusEvent","_toggleFocusClass","apply","arguments","_focusOutHandler","_ref2","hasClass","_initMarkup","_$htmlContainer","addClass","attr","wrapInner","_renderStylingMode","template","_getTemplate","_$templateResult","render","container","noModel","transclude","_renderSubmitElement","_updateContainerMarkup","_$submitElement","appendTo","_setSubmitValue","option","value","_getSubmitElement","val","markup","_isMarkdownValue","_prepareMarkdownConverter","_markdownConverter","toHtml","html","MarkdownConverter","getConverter","Error","_render","_prepareConverters","_prepareQuillRegistrator","_quillRegistrator","_getRegistrator","_deltaConverter","DeltaConverter","_renderContentImpl","_contentRenderedDeferred","renderContentPromise","promise","_renderHtmlEditor","_renderFormDialog","_addKeyPressHandler","_pointerMoveHandler","e","stopPropagation","_attachFocusEvents","bind","keyDownEvent","NAME","on","_keyDownHandler","_saveValueChangeEvent","modulesConfig","_getModulesConfig","_quillInstance","createEditor","readOnly","modules","theme","setQuillInstance","_textChangeHandlerWithContext","_textChangeHandler","_renderScrollHandler","_hasTranscludedContent","_updateContentTask","_applyTranscludedContent","_finalizeContentRendering","$scrollContainer","initScrollData","init","move","valueOption","newDelta","clipboard","convert","ops","length","setContents","quill","getQuill","wordListMatcher","table","_getModuleConfigByOption","resizing","imageCursor","_getBaseModuleConfig","uploader","onDrop","imageBlot","keyboard","onKeydown","onPaste","onCut","matchers","multiline","Boolean","_getCustomModules","userOptionName","optionValue","config","Array","isArray","editorInstance","moduleNames","getRegisteredModuleNames","forEach","modulePath","oldDelta","source","htmlMarkup","convertedValue","_updateValueByType","currentValue","_isNullValueConverted","_isEditorUpdating","clearHistory","fire","resolve","converter","toMarkdown","_resetEnabledState","isEnabled","enable","userOptions","width","height","hideOnOutsideClick","_formDialog","_getStylingModePrefix","_getQuillContainer","_prepareModuleOptions","args","_args$fullName","optionData","fullName","split","optionName","name","_moduleOptionChanged","moduleName","_this$_quillInstance","moduleInstance","getModule","shouldPassOptionsToModule","_invalidate","_optionChanged","updatedValue","_updateHtmlContent","newValue","previousValue","_repaintToolbar","repaint","_clean","off","_abortUpdateContentTask","empty","abort","_applyQuillMethod","methodName","_applyQuillHistoryMethod","history","addCleanCallback","callback","add","addContentInitializedCallback","register","components","registerModules","get","import","getQuillInstance","getSelection","focus","setSelection","index","getText","format","formatName","formatValue","formatText","formatLine","getFormat","removeFormat","undo","redo","getLength","getBounds","delete","insertText","text","formats","insertEmbed","type","showFormDialog","formConfig","show","formDialogOption","popupOption","blur"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/html_editor/ui.html_editor.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    isDefined,\r\n    isFunction\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport {\r\n    executeAsync,\r\n    noop,\r\n    ensureDefined,\r\n    deferRender\r\n} from \"../../core/utils/common\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport {\r\n    EmptyTemplate\r\n} from \"../../core/templates/empty_template\";\r\nimport Editor from \"../editor/editor\";\r\nimport Errors from \"../widget/ui.errors\";\r\nimport Callbacks from \"../../core/utils/callbacks\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    Event as dxEvent\r\n} from \"../../events/index\";\r\nimport scrollEvents from \"../../events/gesture/emitter.gesture.scroll\";\r\nimport {\r\n    prepareScrollData\r\n} from \"../text_box/utils.scroll\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport devices from \"../../core/devices\";\r\nimport QuillRegistrator from \"./quill_registrator\";\r\nimport \"./converters/delta\";\r\nimport ConverterController from \"./converterController\";\r\nimport getWordMatcher from \"./matchers/wordLists\";\r\nimport FormDialog from \"./ui/formDialog\";\r\nvar HTML_EDITOR_CLASS = \"dx-htmleditor\";\r\nvar QUILL_CONTAINER_CLASS = \"dx-quill-container\";\r\nvar QUILL_CLIPBOARD_CLASS = \"ql-clipboard\";\r\nvar HTML_EDITOR_SUBMIT_ELEMENT_CLASS = \"dx-htmleditor-submit-element\";\r\nvar HTML_EDITOR_CONTENT_CLASS = \"dx-htmleditor-content\";\r\nvar MARKDOWN_VALUE_TYPE = \"markdown\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"htmlContent\";\r\nvar isIos = \"ios\" === devices.current().platform;\r\nvar HtmlEditor = Editor.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            focusStateEnabled: true,\r\n            valueType: \"html\",\r\n            placeholder: \"\",\r\n            toolbar: null,\r\n            variables: null,\r\n            mediaResizing: null,\r\n            tableResizing: null,\r\n            mentions: null,\r\n            customizeModules: null,\r\n            tableContextMenu: null,\r\n            allowSoftLineBreak: false,\r\n            formDialogOptions: null,\r\n            imageUpload: null,\r\n            stylingMode: \"outlined\"\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._cleanCallback = Callbacks();\r\n        this._contentInitializedCallback = Callbacks()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initTemplates: function() {\r\n        this._templateManager.addDefaultTemplates({\r\n            [ANONYMOUS_TEMPLATE_NAME]: new EmptyTemplate\r\n        });\r\n        this.callBase()\r\n    },\r\n    _focusTarget: function() {\r\n        return this._getContent()\r\n    },\r\n    _getContent: function() {\r\n        return this.$element().find(\".\".concat(HTML_EDITOR_CONTENT_CLASS))\r\n    },\r\n    _focusInHandler: function(_ref) {\r\n        var {\r\n            relatedTarget: relatedTarget\r\n        } = _ref;\r\n        if (this._shouldSkipFocusEvent(relatedTarget)) {\r\n            return\r\n        }\r\n        this._toggleFocusClass(true, this.$element());\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _focusOutHandler: function(_ref2) {\r\n        var {\r\n            relatedTarget: relatedTarget\r\n        } = _ref2;\r\n        if (this._shouldSkipFocusEvent(relatedTarget)) {\r\n            return\r\n        }\r\n        this._toggleFocusClass(false, this.$element());\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _shouldSkipFocusEvent: function(relatedTarget) {\r\n        return $(relatedTarget).hasClass(QUILL_CLIPBOARD_CLASS)\r\n    },\r\n    _initMarkup: function() {\r\n        this._$htmlContainer = $(\"<div>\").addClass(QUILL_CONTAINER_CLASS);\r\n        this.$element().attr(\"role\", \"application\").addClass(HTML_EDITOR_CLASS).wrapInner(this._$htmlContainer);\r\n        this._renderStylingMode();\r\n        var template = this._getTemplate(ANONYMOUS_TEMPLATE_NAME);\r\n        this._$templateResult = template && template.render({\r\n            container: getPublicElement(this._$htmlContainer),\r\n            noModel: true,\r\n            transclude: true\r\n        });\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        this._updateContainerMarkup()\r\n    },\r\n    _renderSubmitElement: function() {\r\n        this._$submitElement = $(\"<textarea>\").addClass(HTML_EDITOR_SUBMIT_ELEMENT_CLASS).attr(\"hidden\", true).appendTo(this.$element());\r\n        this._setSubmitValue(this.option(\"value\"))\r\n    },\r\n    _setSubmitValue: function(value) {\r\n        this._getSubmitElement().val(value)\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._$submitElement\r\n    },\r\n    _updateContainerMarkup: function() {\r\n        var markup = this.option(\"value\");\r\n        if (this._isMarkdownValue()) {\r\n            this._prepareMarkdownConverter();\r\n            markup = this._markdownConverter.toHtml(markup)\r\n        }\r\n        if (markup) {\r\n            this._$htmlContainer.html(markup)\r\n        }\r\n    },\r\n    _prepareMarkdownConverter: function() {\r\n        var MarkdownConverter = ConverterController.getConverter(\"markdown\");\r\n        if (MarkdownConverter) {\r\n            this._markdownConverter = new MarkdownConverter\r\n        } else {\r\n            throw Errors.Error(\"E1051\", \"markdown\")\r\n        }\r\n    },\r\n    _render: function() {\r\n        this._prepareConverters();\r\n        this.callBase()\r\n    },\r\n    _prepareQuillRegistrator: function() {\r\n        if (!this._quillRegistrator) {\r\n            this._quillRegistrator = new QuillRegistrator\r\n        }\r\n    },\r\n    _getRegistrator: function() {\r\n        this._prepareQuillRegistrator();\r\n        return this._quillRegistrator\r\n    },\r\n    _prepareConverters: function() {\r\n        if (!this._deltaConverter) {\r\n            var DeltaConverter = ConverterController.getConverter(\"delta\");\r\n            if (DeltaConverter) {\r\n                this._deltaConverter = new DeltaConverter\r\n            }\r\n        }\r\n        if (this.option(\"valueType\") === MARKDOWN_VALUE_TYPE && !this._markdownConverter) {\r\n            this._prepareMarkdownConverter()\r\n        }\r\n    },\r\n    _renderContentImpl: function() {\r\n        this._contentRenderedDeferred = new Deferred;\r\n        var renderContentPromise = this._contentRenderedDeferred.promise();\r\n        this.callBase();\r\n        this._renderHtmlEditor();\r\n        this._renderFormDialog();\r\n        this._addKeyPressHandler();\r\n        return renderContentPromise\r\n    },\r\n    _pointerMoveHandler: function(e) {\r\n        if (isIos) {\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _attachFocusEvents: function() {\r\n        deferRender(this.callBase.bind(this))\r\n    },\r\n    _addKeyPressHandler: function() {\r\n        var keyDownEvent = addNamespace(\"keydown\", \"\".concat(this.NAME, \"TextChange\"));\r\n        eventsEngine.on(this._$htmlContainer, keyDownEvent, this._keyDownHandler.bind(this))\r\n    },\r\n    _keyDownHandler: function(e) {\r\n        this._saveValueChangeEvent(e)\r\n    },\r\n    _renderHtmlEditor: function() {\r\n        var customizeModules = this.option(\"customizeModules\");\r\n        var modulesConfig = this._getModulesConfig();\r\n        if (isFunction(customizeModules)) {\r\n            customizeModules(modulesConfig)\r\n        }\r\n        this._quillInstance = this._getRegistrator().createEditor(this._$htmlContainer[0], {\r\n            placeholder: this.option(\"placeholder\"),\r\n            readOnly: this.option(\"readOnly\") || this.option(\"disabled\"),\r\n            modules: modulesConfig,\r\n            theme: \"basic\"\r\n        });\r\n        this._deltaConverter.setQuillInstance(this._quillInstance);\r\n        this._textChangeHandlerWithContext = this._textChangeHandler.bind(this);\r\n        this._quillInstance.on(\"text-change\", this._textChangeHandlerWithContext);\r\n        this._renderScrollHandler();\r\n        if (this._hasTranscludedContent()) {\r\n            this._updateContentTask = executeAsync(() => {\r\n                this._applyTranscludedContent()\r\n            })\r\n        } else {\r\n            this._finalizeContentRendering()\r\n        }\r\n    },\r\n    _renderScrollHandler: function() {\r\n        var $scrollContainer = this._getContent();\r\n        var initScrollData = prepareScrollData($scrollContainer);\r\n        eventsEngine.on($scrollContainer, addNamespace(scrollEvents.init, this.NAME), initScrollData, noop);\r\n        eventsEngine.on($scrollContainer, addNamespace(pointerEvents.move, this.NAME), this._pointerMoveHandler.bind(this))\r\n    },\r\n    _applyTranscludedContent: function() {\r\n        var valueOption = this.option(\"value\");\r\n        if (!isDefined(valueOption)) {\r\n            var html = this._deltaConverter.toHtml();\r\n            var newDelta = this._quillInstance.clipboard.convert({\r\n                html: html\r\n            });\r\n            if (newDelta.ops.length) {\r\n                this._quillInstance.setContents(newDelta);\r\n                return\r\n            }\r\n        }\r\n        this._finalizeContentRendering()\r\n    },\r\n    _hasTranscludedContent: function() {\r\n        return this._$templateResult && this._$templateResult.length\r\n    },\r\n    _getModulesConfig: function() {\r\n        var quill = this._getRegistrator().getQuill();\r\n        var wordListMatcher = getWordMatcher(quill);\r\n        var modulesConfig = extend({}, {\r\n            table: true,\r\n            toolbar: this._getModuleConfigByOption(\"toolbar\"),\r\n            variables: this._getModuleConfigByOption(\"variables\"),\r\n            resizing: this._getModuleConfigByOption(\"mediaResizing\"),\r\n            tableResizing: this._getModuleConfigByOption(\"tableResizing\"),\r\n            tableContextMenu: this._getModuleConfigByOption(\"tableContextMenu\"),\r\n            imageUpload: this._getModuleConfigByOption(\"imageUpload\"),\r\n            imageCursor: this._getBaseModuleConfig(),\r\n            mentions: this._getModuleConfigByOption(\"mentions\"),\r\n            uploader: {\r\n                onDrop: e => this._saveValueChangeEvent(dxEvent(e)),\r\n                imageBlot: \"extendedImage\"\r\n            },\r\n            keyboard: {\r\n                onKeydown: e => this._saveValueChangeEvent(dxEvent(e))\r\n            },\r\n            clipboard: {\r\n                onPaste: e => this._saveValueChangeEvent(dxEvent(e)),\r\n                onCut: e => this._saveValueChangeEvent(dxEvent(e)),\r\n                matchers: [\r\n                    [\"p.MsoListParagraphCxSpFirst\", wordListMatcher],\r\n                    [\"p.MsoListParagraphCxSpMiddle\", wordListMatcher],\r\n                    [\"p.MsoListParagraphCxSpLast\", wordListMatcher]\r\n                ]\r\n            },\r\n            multiline: Boolean(this.option(\"allowSoftLineBreak\"))\r\n        }, this._getCustomModules());\r\n        return modulesConfig\r\n    },\r\n    _getModuleConfigByOption: function(userOptionName) {\r\n        var optionValue = this.option(userOptionName);\r\n        var config = {};\r\n        if (!isDefined(optionValue)) {\r\n            return\r\n        }\r\n        if (Array.isArray(optionValue)) {\r\n            config[userOptionName] = optionValue\r\n        } else {\r\n            config = optionValue\r\n        }\r\n        return extend(this._getBaseModuleConfig(), config)\r\n    },\r\n    _getBaseModuleConfig: function() {\r\n        return {\r\n            editorInstance: this\r\n        }\r\n    },\r\n    _getCustomModules: function() {\r\n        var modules = {};\r\n        var moduleNames = this._getRegistrator().getRegisteredModuleNames();\r\n        moduleNames.forEach(modulePath => {\r\n            modules[modulePath] = this._getBaseModuleConfig()\r\n        });\r\n        return modules\r\n    },\r\n    _textChangeHandler: function(newDelta, oldDelta, source) {\r\n        var htmlMarkup = this._deltaConverter.toHtml();\r\n        var convertedValue = this._isMarkdownValue() ? this._updateValueByType(MARKDOWN_VALUE_TYPE, htmlMarkup) : htmlMarkup;\r\n        var currentValue = this.option(\"value\");\r\n        if (currentValue !== convertedValue && !this._isNullValueConverted(currentValue, convertedValue)) {\r\n            this._isEditorUpdating = true;\r\n            this.option(\"value\", convertedValue)\r\n        }\r\n        this._finalizeContentRendering()\r\n    },\r\n    _isNullValueConverted: function(currentValue, convertedValue) {\r\n        return null === currentValue && \"\" === convertedValue\r\n    },\r\n    _finalizeContentRendering: function() {\r\n        if (this._contentRenderedDeferred) {\r\n            this.clearHistory();\r\n            this._contentInitializedCallback.fire();\r\n            this._contentRenderedDeferred.resolve();\r\n            this._contentRenderedDeferred = void 0\r\n        }\r\n    },\r\n    _updateValueByType: function(valueType, value) {\r\n        var converter = this._markdownConverter;\r\n        if (!isDefined(converter)) {\r\n            return\r\n        }\r\n        var currentValue = ensureDefined(value, this.option(\"value\"));\r\n        return valueType === MARKDOWN_VALUE_TYPE ? converter.toMarkdown(currentValue) : converter.toHtml(currentValue)\r\n    },\r\n    _isMarkdownValue: function() {\r\n        return this.option(\"valueType\") === MARKDOWN_VALUE_TYPE\r\n    },\r\n    _resetEnabledState: function() {\r\n        if (this._quillInstance) {\r\n            var isEnabled = !(this.option(\"readOnly\") || this.option(\"disabled\"));\r\n            this._quillInstance.enable(isEnabled)\r\n        }\r\n    },\r\n    _renderFormDialog: function() {\r\n        var userOptions = extend(true, {\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            hideOnOutsideClick: true\r\n        }, this.option(\"formDialogOptions\"));\r\n        this._formDialog = new FormDialog(this, userOptions)\r\n    },\r\n    _getStylingModePrefix: function() {\r\n        return \"dx-htmleditor-\"\r\n    },\r\n    _getQuillContainer: function() {\r\n        return this._$htmlContainer\r\n    },\r\n    _prepareModuleOptions(args) {\r\n        var _args$fullName;\r\n        var optionData = null === (_args$fullName = args.fullName) || void 0 === _args$fullName ? void 0 : _args$fullName.split(\".\");\r\n        var value = args.value;\r\n        var optionName = optionData.length >= 2 ? optionData[1] : args.name;\r\n        if (3 === optionData.length) {\r\n            value = {\r\n                [optionData[2]]: value\r\n            }\r\n        }\r\n        return [optionName, value]\r\n    },\r\n    _moduleOptionChanged: function(moduleName, args) {\r\n        var _this$_quillInstance;\r\n        var moduleInstance = null === (_this$_quillInstance = this._quillInstance) || void 0 === _this$_quillInstance ? void 0 : _this$_quillInstance.getModule(moduleName);\r\n        var shouldPassOptionsToModule = Boolean(moduleInstance);\r\n        if (shouldPassOptionsToModule) {\r\n            moduleInstance.option(...this._prepareModuleOptions(args))\r\n        } else {\r\n            this._invalidate()\r\n        }\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"value\":\r\n                if (this._quillInstance) {\r\n                    if (this._isEditorUpdating) {\r\n                        this._isEditorUpdating = false\r\n                    } else {\r\n                        var updatedValue = this._isMarkdownValue() ? this._updateValueByType(\"HTML\", args.value) : args.value;\r\n                        this._updateHtmlContent(updatedValue)\r\n                    }\r\n                } else {\r\n                    this._$htmlContainer.html(args.value)\r\n                }\r\n                this._setSubmitValue(args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"placeholder\":\r\n            case \"variables\":\r\n            case \"toolbar\":\r\n            case \"mentions\":\r\n            case \"customizeModules\":\r\n            case \"allowSoftLineBreak\":\r\n                this._invalidate();\r\n                break;\r\n            case \"tableResizing\":\r\n                this._moduleOptionChanged(\"tableResizing\", args);\r\n                break;\r\n            case \"valueType\":\r\n                this._prepareConverters();\r\n                var newValue = this._updateValueByType(args.value);\r\n                if (\"html\" === args.value && this._quillInstance) {\r\n                    this._updateHtmlContent(newValue)\r\n                } else {\r\n                    this.option(\"value\", newValue)\r\n                }\r\n                break;\r\n            case \"stylingMode\":\r\n                this._renderStylingMode();\r\n                break;\r\n            case \"readOnly\":\r\n            case \"disabled\":\r\n                this.callBase(args);\r\n                this._resetEnabledState();\r\n                break;\r\n            case \"formDialogOptions\":\r\n                this._renderFormDialog();\r\n                break;\r\n            case \"tableContextMenu\":\r\n                this._moduleOptionChanged(\"tableContextMenu\", args);\r\n                break;\r\n            case \"mediaResizing\":\r\n                if (!args.previousValue || !args.value) {\r\n                    this._invalidate()\r\n                } else {\r\n                    this._quillInstance.getModule(\"resizing\").option(args.name, args.value)\r\n                }\r\n                break;\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._repaintToolbar();\r\n                break;\r\n            case \"imageUpload\":\r\n                this._moduleOptionChanged(\"imageUpload\", args);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _repaintToolbar: function() {\r\n        var toolbar = this._quillInstance.getModule(\"toolbar\");\r\n        toolbar && toolbar.repaint()\r\n    },\r\n    _updateHtmlContent: function(html) {\r\n        var newDelta = this._quillInstance.clipboard.convert({\r\n            html: html\r\n        });\r\n        this._quillInstance.setContents(newDelta)\r\n    },\r\n    _clean: function() {\r\n        if (this._quillInstance) {\r\n            eventsEngine.off(this._getContent(), \".\".concat(this.NAME));\r\n            this._quillInstance.off(\"text-change\", this._textChangeHandlerWithContext);\r\n            this._cleanCallback.fire()\r\n        }\r\n        this._abortUpdateContentTask();\r\n        this._cleanCallback.empty();\r\n        this._contentInitializedCallback.empty();\r\n        this.callBase()\r\n    },\r\n    _abortUpdateContentTask: function() {\r\n        if (this._updateContentTask) {\r\n            this._updateContentTask.abort();\r\n            this._updateContentTask = void 0\r\n        }\r\n    },\r\n    _applyQuillMethod(methodName, args) {\r\n        if (this._quillInstance) {\r\n            return this._quillInstance[methodName].apply(this._quillInstance, args)\r\n        }\r\n    },\r\n    _applyQuillHistoryMethod(methodName) {\r\n        if (this._quillInstance && this._quillInstance.history) {\r\n            this._quillInstance.history[methodName]()\r\n        }\r\n    },\r\n    addCleanCallback(callback) {\r\n        this._cleanCallback.add(callback)\r\n    },\r\n    addContentInitializedCallback(callback) {\r\n        this._contentInitializedCallback.add(callback)\r\n    },\r\n    register: function(components) {\r\n        this._getRegistrator().registerModules(components);\r\n        if (this._quillInstance) {\r\n            this.repaint()\r\n        }\r\n    },\r\n    get: function(modulePath) {\r\n        return this._getRegistrator().getQuill().import(modulePath)\r\n    },\r\n    getModule: function(moduleName) {\r\n        return this._applyQuillMethod(\"getModule\", arguments)\r\n    },\r\n    getQuillInstance: function() {\r\n        return this._quillInstance\r\n    },\r\n    getSelection: function(focus) {\r\n        return this._applyQuillMethod(\"getSelection\", arguments)\r\n    },\r\n    setSelection: function(index, length) {\r\n        this._applyQuillMethod(\"setSelection\", arguments)\r\n    },\r\n    getText: function(index, length) {\r\n        return this._applyQuillMethod(\"getText\", arguments)\r\n    },\r\n    format: function(formatName, formatValue) {\r\n        this._applyQuillMethod(\"format\", arguments)\r\n    },\r\n    formatText: function(index, length, formatName, formatValue) {\r\n        this._applyQuillMethod(\"formatText\", arguments)\r\n    },\r\n    formatLine: function(index, length, formatName, formatValue) {\r\n        this._applyQuillMethod(\"formatLine\", arguments)\r\n    },\r\n    getFormat: function(index, length) {\r\n        return this._applyQuillMethod(\"getFormat\", arguments)\r\n    },\r\n    removeFormat: function(index, length) {\r\n        return this._applyQuillMethod(\"removeFormat\", arguments)\r\n    },\r\n    clearHistory: function() {\r\n        this._applyQuillHistoryMethod(\"clear\")\r\n    },\r\n    undo: function() {\r\n        this._applyQuillHistoryMethod(\"undo\")\r\n    },\r\n    redo: function() {\r\n        this._applyQuillHistoryMethod(\"redo\")\r\n    },\r\n    getLength: function() {\r\n        return this._applyQuillMethod(\"getLength\")\r\n    },\r\n    getBounds: function(index, length) {\r\n        return this._applyQuillMethod(\"getBounds\", arguments)\r\n    },\r\n    delete: function(index, length) {\r\n        this._applyQuillMethod(\"deleteText\", arguments)\r\n    },\r\n    insertText: function(index, text, formats) {\r\n        this._applyQuillMethod(\"insertText\", arguments)\r\n    },\r\n    insertEmbed: function(index, type, config) {\r\n        this._applyQuillMethod(\"insertEmbed\", arguments)\r\n    },\r\n    showFormDialog: function(formConfig) {\r\n        return this._formDialog.show(formConfig)\r\n    },\r\n    formDialogOption: function(optionName, optionValue) {\r\n        return this._formDialog.popupOption.apply(this._formDialog, arguments)\r\n    },\r\n    focus: function() {\r\n        this.callBase();\r\n        this._applyQuillMethod(\"focus\")\r\n    },\r\n    blur: function() {\r\n        this._applyQuillMethod(\"blur\")\r\n    }\r\n});\r\nregisterComponent(\"dxHtmlEditor\", HtmlEditor);\r\nexport default HtmlEditor;\r\n"]},"metadata":{},"sourceType":"module"}