{"ast":null,"code":"/**\n* DevExpress Analytics (query-builder\\wizard\\pages\\multiQueryWizard\\multiQueryConfigureParametersPage.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports._registerMultiQueryConfigureParametersPage = exports.MultiQueryConfigureParametersPage = exports._canEditQueryParameters = void 0;\n\nvar $ = require(\"jquery\");\n\nvar ko = require(\"knockout\");\n\nvar utils_1 = require(\"../../../dataSource/utils\");\n\nvar dataSourceWizardState_1 = require(\"../../dataSourceWizardState\");\n\nvar _sqlDataSourceWrapper_1 = require(\"../sqlDataSourceWizard/_sqlDataSourceWrapper\");\n\nvar _configureParametersUtils_1 = require(\"../../internal/_configureParametersUtils\");\n\nvar dataSourceParameter_1 = require(\"../../../dataSource/dataSourceParameter\");\n\nvar _getNameHelpers_1 = require(\"../../../../core/internal/_getNameHelpers\");\n\nvar _utils_1 = require(\"../../internal/_utils\");\n\nvar editorsInfo_1 = require(\"../../../../property-grid/widgets/editorsInfo\");\n\nvar _arrayutils_1 = require(\"../../../../core/utils/_arrayutils\");\n\nvar localization_utils_1 = require(\"../../../../property-grid/localization/localization_utils\");\n\nvar pageId_1 = require(\"../../pageId\");\n\nvar wizardPageBase_1 = require(\"../wizardPageBase\");\n\nfunction _canEditQueryParameters(query, customQueries) {\n  if (query.type() === utils_1.SqlQueryType.tableQuery || query.type() === utils_1.SqlQueryType.customSqlQuery) {\n    return customQueries.indexOf(query) > -1;\n  }\n\n  return query.type() === utils_1.SqlQueryType.storedProcQuery && query.parameters().length > 0;\n}\n\nexports._canEditQueryParameters = _canEditQueryParameters;\n\nvar MultiQueryConfigureParametersPage = function (_super) {\n  __extends(MultiQueryConfigureParametersPage, _super);\n\n  function MultiQueryConfigureParametersPage(parametersConverter, _requestWrapper) {\n    if (parametersConverter === void 0) {\n      parametersConverter = {\n        createParameterViewModel: function (parameter) {\n          return parameter;\n        },\n        getParameterFromViewModel: function (parameterViewModel) {\n          return parameterViewModel;\n        }\n      };\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.parametersConverter = parametersConverter;\n    _this._requestWrapper = _requestWrapper;\n    _this._sqlDataSourceWrapper = new _sqlDataSourceWrapper_1._SqlDataSourceWrapper(undefined, undefined, _this._requestWrapper);\n    _this._selectedPath = ko.observable(null);\n    _this._rootItems = ko.observableArray();\n\n    _this._createNewParameter = function (queryName, parameters) {\n      var newParameter = new dataSourceParameter_1.DataSourceParameter({\n        '@Name': _getNameHelpers_1.getUniqueNameForNamedObjectsArray(parameters, 'parameter'),\n        '@Type': 'System.Int32'\n      });\n\n      _this._selectedPath(queryName + '.' + newParameter.name());\n\n      return _this.parametersConverter.createParameterViewModel(newParameter);\n    };\n\n    _this._scrollViewHeight = '100%';\n    _this._fieldListModel = ko.observable(null);\n    _this._removeButtonTitle = localization_utils_1.getLocalization('Remove', 'DataAccessUIStringId.Button_Remove');\n\n    var callback = function () {\n      return _this._onChange();\n    };\n\n    _this._disposables.push(_utils_1.subscribeArray(_this._rootItems, function (item) {\n      _this._disposables.push(_utils_1.subscribeArray(item.parameters, function (parameter) {\n        _this._disposables.push(_utils_1.subscribeObject(parameter.dataSourceParameter, function (value) {\n          var _a;\n\n          (_a = _this._disposables).push.apply(_a, _utils_1.subscribeProperties([value.name, value['value'], value['type']], callback));\n        }, callback));\n      }, callback));\n    }, callback));\n\n    _this._parametersEditorOptions = {\n      addHandler: function () {\n        return _this.parametersConverter.createParameterViewModel(new dataSourceParameter_1.DataSourceParameter({\n          '@Name': _getNameHelpers_1.getUniqueNameForNamedObjectsArray(_this._parametersEditorOptions.values.peek().peek(), 'param'),\n          '@Type': 'System.Int32'\n        }));\n      },\n      values: ko.observable(ko.observableArray([])),\n      displayName: 'Parameters',\n      level: 0,\n      info: ko.observable({\n        displayName: 'Parameters',\n        localizationId: 'DevExpress.DataAccess.Sql.SqlQuery.Parameters',\n        propertyName: 'parameters',\n        modelName: 'Parameter',\n        array: true,\n        editor: editorsInfo_1.editorTemplates.getEditor('commonCollection'),\n        template: '#dxrd-parameter-collection-item'\n      }),\n      editorTemplate: '#dxrd-wizard-datasource-parameters',\n      hideButtons: ko.observable(false),\n      collapsed: false\n    };\n    return _this;\n  }\n\n  MultiQueryConfigureParametersPage.prototype._isParametersValid = function () {\n    return this._getParameters().every(function (x) {\n      return x.isValid();\n    });\n  };\n\n  MultiQueryConfigureParametersPage.prototype.canNext = function () {\n    return this._isParametersValid() && this._sqlDataSourceWrapper.sqlDataSource.queries().length > 1;\n  };\n\n  MultiQueryConfigureParametersPage.prototype.canFinish = function () {\n    return this._isParametersValid() && this._sqlDataSourceWrapper.sqlDataSource.queries().length >= 1;\n  };\n\n  MultiQueryConfigureParametersPage.prototype._getParameters = function () {\n    return [].concat.apply([], (this._rootItems() || []).map(function (x) {\n      return x.parameters().map(function (param) {\n        return param.dataSourceParameter();\n      });\n    }));\n  };\n\n  MultiQueryConfigureParametersPage.prototype.initialize = function (state) {\n    var _this = this;\n\n    var newRootItemsWithParameters = [];\n\n    var rootItems = this._rootItems();\n\n    this._sqlDataSourceWrapper = dataSourceWizardState_1._restoreSqlDataSourceFromState(state, this._requestWrapper);\n\n    this._sqlDataSourceWrapper.sqlDataSource.queries().forEach(function (query) {\n      if (_canEditQueryParameters(query, _this._sqlDataSourceWrapper.customQueries)) {\n        var parent = new _configureParametersUtils_1.ParametersTreeListRootItem(query);\n        parent.parameters(query.parameters().map(function (parameterModel) {\n          return new _configureParametersUtils_1.ParametersTreeListItem(_this.parametersConverter.createParameterViewModel(parameterModel), parent);\n        }));\n        newRootItemsWithParameters.push(parent);\n      }\n    });\n\n    rootItems.filter(function (x) {\n      return newRootItemsWithParameters.every(function (newItem) {\n        return newItem.name !== x.name;\n      });\n    }).forEach(function (removedItem) {\n      rootItems.splice(_this._rootItems().indexOf(removedItem), 1);\n    });\n    newRootItemsWithParameters.forEach(function (newItem) {\n      var currentItem = rootItems.filter(function (x) {\n        return x.name === newItem.name;\n      })[0];\n\n      if (currentItem) {\n        newItem.parameters().filter(function (newParam) {\n          return currentItem.parameters().every(function (x) {\n            return x.name !== newParam.name;\n          });\n        }).forEach(function (param) {\n          currentItem.parameters.push(param);\n        });\n      } else {\n        rootItems.push(newItem);\n      }\n    });\n\n    this._rootItems.valueHasMutated();\n\n    this._fieldListModel({\n      itemsProvider: {\n        getItems: function (pathRequest) {\n          var result = $.Deferred();\n\n          if (!pathRequest.fullPath) {\n            result.resolve(_this._rootItems());\n          } else {\n            var parent = _arrayutils_1.findFirstItemMatchesCondition(_this._rootItems(), function (item) {\n              return item.name === pathRequest.ref;\n            });\n\n            result.resolve(parent.parameters());\n          }\n\n          return result.promise();\n        }\n      },\n      templateName: 'dx-treelist-item-with-hover',\n      selectedPath: this._selectedPath,\n      treeListController: new _configureParametersUtils_1.ParametersTreeListController(this._rootItems(), this._createNewParameter)\n    });\n\n    return $.Deferred().resolve().promise();\n  };\n\n  MultiQueryConfigureParametersPage.prototype.commit = function () {\n    var _this = this;\n\n    this._rootItems().forEach(function (item) {\n      item.query().parameters(item.parameters().map(function (parameterViewModel) {\n        return _this.parametersConverter.getParameterFromViewModel(parameterViewModel.dataSourceParameter());\n      }));\n    });\n\n    return $.Deferred().resolve({\n      sqlDataSourceJSON: this._sqlDataSourceWrapper.sqlDataSourceJSON,\n      customQueries: this._sqlDataSourceWrapper.saveCustomQueries()\n    }).promise();\n  };\n\n  return MultiQueryConfigureParametersPage;\n}(wizardPageBase_1.WizardPageBase);\n\nexports.MultiQueryConfigureParametersPage = MultiQueryConfigureParametersPage;\n\nfunction _registerMultiQueryConfigureParametersPage(factory, requestWrapper, parametersConverter) {\n  factory.registerMetadata(pageId_1.SqlDataSourceWizardPageId.MultiQueryConfigureParametersPage, {\n    create: function () {\n      return new MultiQueryConfigureParametersPage(parametersConverter, requestWrapper);\n    },\n    getState: function (state) {\n      return state.sqlDataSourceWizard;\n    },\n    setState: function (result, state) {\n      return state.customQueries = result.customQueries;\n    },\n    resetState: function () {\n      return void 0;\n    },\n    description: localization_utils_1.getLocalization('Configure query parameters.', 'AnalyticsCoreStringId.SqlDSWizard_PageConfigureParameters'),\n    template: 'dxrd-configure-query-parameters-page'\n  });\n}\n\nexports._registerMultiQueryConfigureParametersPage = _registerMultiQueryConfigureParametersPage;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/query-builder/wizard/pages/multiQueryWizard/multiQueryConfigureParametersPage.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","_registerMultiQueryConfigureParametersPage","MultiQueryConfigureParametersPage","_canEditQueryParameters","$","require","ko","utils_1","dataSourceWizardState_1","_sqlDataSourceWrapper_1","_configureParametersUtils_1","dataSourceParameter_1","_getNameHelpers_1","_utils_1","editorsInfo_1","_arrayutils_1","localization_utils_1","pageId_1","wizardPageBase_1","query","customQueries","type","SqlQueryType","tableQuery","customSqlQuery","indexOf","storedProcQuery","parameters","length","_super","parametersConverter","_requestWrapper","createParameterViewModel","parameter","getParameterFromViewModel","parameterViewModel","_this","_sqlDataSourceWrapper","_SqlDataSourceWrapper","undefined","_selectedPath","observable","_rootItems","observableArray","_createNewParameter","queryName","newParameter","DataSourceParameter","getUniqueNameForNamedObjectsArray","name","_scrollViewHeight","_fieldListModel","_removeButtonTitle","getLocalization","callback","_onChange","_disposables","push","subscribeArray","item","subscribeObject","dataSourceParameter","_a","apply","subscribeProperties","_parametersEditorOptions","addHandler","values","peek","displayName","level","info","localizationId","propertyName","modelName","array","editor","editorTemplates","getEditor","template","editorTemplate","hideButtons","collapsed","_isParametersValid","_getParameters","every","x","isValid","canNext","sqlDataSource","queries","canFinish","concat","map","param","initialize","state","newRootItemsWithParameters","rootItems","_restoreSqlDataSourceFromState","forEach","parent","ParametersTreeListRootItem","parameterModel","ParametersTreeListItem","filter","newItem","removedItem","splice","currentItem","newParam","valueHasMutated","itemsProvider","getItems","pathRequest","result","Deferred","fullPath","resolve","findFirstItemMatchesCondition","ref","promise","templateName","selectedPath","treeListController","ParametersTreeListController","commit","sqlDataSourceJSON","saveCustomQueries","WizardPageBase","factory","requestWrapper","registerMetadata","SqlDataSourceWizardPageId","getState","sqlDataSourceWizard","setState","resetState","description"],"mappings":"AAAA;;;;;;;AAOA;;AACA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIC,MAAM,CAACK,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EAAgDN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAFrG;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnB,QAAI,OAAOA,CAAP,KAAa,UAAb,IAA2BA,CAAC,KAAK,IAArC,EACI,MAAM,IAAIS,SAAJ,CAAc,yBAAyBC,MAAM,CAACV,CAAD,CAA/B,GAAqC,+BAAnD,CAAN;AACJF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASW,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBb,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACO,SAAF,GAAcN,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACY,MAAP,CAAcb,CAAd,CAAb,IAAiCW,EAAE,CAACL,SAAH,GAAeN,CAAC,CAACM,SAAjB,EAA4B,IAAIK,EAAJ,EAA7D,CAAd;AACH,GAND;AAOH,CAd2C,EAA5C;;AAeAV,MAAM,CAACa,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,0CAAR,GAAqDF,OAAO,CAACG,iCAAR,GAA4CH,OAAO,CAACI,uBAAR,GAAkC,KAAK,CAAxI;;AACA,IAAIC,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAf;;AACA,IAAIC,EAAE,GAAGD,OAAO,CAAC,UAAD,CAAhB;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,2BAAD,CAArB;;AACA,IAAIG,uBAAuB,GAAGH,OAAO,CAAC,6BAAD,CAArC;;AACA,IAAII,uBAAuB,GAAGJ,OAAO,CAAC,8CAAD,CAArC;;AACA,IAAIK,2BAA2B,GAAGL,OAAO,CAAC,0CAAD,CAAzC;;AACA,IAAIM,qBAAqB,GAAGN,OAAO,CAAC,yCAAD,CAAnC;;AACA,IAAIO,iBAAiB,GAAGP,OAAO,CAAC,2CAAD,CAA/B;;AACA,IAAIQ,QAAQ,GAAGR,OAAO,CAAC,uBAAD,CAAtB;;AACA,IAAIS,aAAa,GAAGT,OAAO,CAAC,+CAAD,CAA3B;;AACA,IAAIU,aAAa,GAAGV,OAAO,CAAC,oCAAD,CAA3B;;AACA,IAAIW,oBAAoB,GAAGX,OAAO,CAAC,2DAAD,CAAlC;;AACA,IAAIY,QAAQ,GAAGZ,OAAO,CAAC,cAAD,CAAtB;;AACA,IAAIa,gBAAgB,GAAGb,OAAO,CAAC,mBAAD,CAA9B;;AACA,SAASF,uBAAT,CAAiCgB,KAAjC,EAAwCC,aAAxC,EAAuD;AACnD,MAAID,KAAK,CAACE,IAAN,OAAiBd,OAAO,CAACe,YAAR,CAAqBC,UAAtC,IAAoDJ,KAAK,CAACE,IAAN,OAAiBd,OAAO,CAACe,YAAR,CAAqBE,cAA9F,EAA8G;AAC1G,WAAOJ,aAAa,CAACK,OAAd,CAAsBN,KAAtB,IAA+B,CAAC,CAAvC;AACH;;AACD,SAAOA,KAAK,CAACE,IAAN,OAAiBd,OAAO,CAACe,YAAR,CAAqBI,eAAtC,IAAyDP,KAAK,CAACQ,UAAN,GAAmBC,MAAnB,GAA4B,CAA5F;AACH;;AACD7B,OAAO,CAACI,uBAAR,GAAkCA,uBAAlC;;AACA,IAAID,iCAAiC,GAAI,UAAU2B,MAAV,EAAkB;AACvDhD,EAAAA,SAAS,CAACqB,iCAAD,EAAoC2B,MAApC,CAAT;;AACA,WAAS3B,iCAAT,CAA2C4B,mBAA3C,EAAgEC,eAAhE,EAAiF;AAC7E,QAAID,mBAAmB,KAAK,KAAK,CAAjC,EAAoC;AAAEA,MAAAA,mBAAmB,GAAG;AACxDE,QAAAA,wBAAwB,EAAE,UAAUC,SAAV,EAAqB;AAAE,iBAAOA,SAAP;AAAmB,SADZ;AAExDC,QAAAA,yBAAyB,EAAE,UAAUC,kBAAV,EAA8B;AAAE,iBAAOA,kBAAP;AAA4B;AAF/B,OAAtB;AAGlC;;AACJ,QAAIC,KAAK,GAAGP,MAAM,CAACrC,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACA4C,IAAAA,KAAK,CAACN,mBAAN,GAA4BA,mBAA5B;AACAM,IAAAA,KAAK,CAACL,eAAN,GAAwBA,eAAxB;AACAK,IAAAA,KAAK,CAACC,qBAAN,GAA8B,IAAI5B,uBAAuB,CAAC6B,qBAA5B,CAAkDC,SAAlD,EAA6DA,SAA7D,EAAwEH,KAAK,CAACL,eAA9E,CAA9B;AACAK,IAAAA,KAAK,CAACI,aAAN,GAAsBlC,EAAE,CAACmC,UAAH,CAAc,IAAd,CAAtB;AACAL,IAAAA,KAAK,CAACM,UAAN,GAAmBpC,EAAE,CAACqC,eAAH,EAAnB;;AACAP,IAAAA,KAAK,CAACQ,mBAAN,GAA4B,UAAUC,SAAV,EAAqBlB,UAArB,EAAiC;AACzD,UAAImB,YAAY,GAAG,IAAInC,qBAAqB,CAACoC,mBAA1B,CAA8C;AAC7D,iBAASnC,iBAAiB,CAACoC,iCAAlB,CAAoDrB,UAApD,EAAgE,WAAhE,CADoD;AAE7D,iBAAS;AAFoD,OAA9C,CAAnB;;AAIAS,MAAAA,KAAK,CAACI,aAAN,CAAoBK,SAAS,GAAG,GAAZ,GAAkBC,YAAY,CAACG,IAAb,EAAtC;;AACA,aAAOb,KAAK,CAACN,mBAAN,CAA0BE,wBAA1B,CAAmDc,YAAnD,CAAP;AACH,KAPD;;AAQAV,IAAAA,KAAK,CAACc,iBAAN,GAA0B,MAA1B;AACAd,IAAAA,KAAK,CAACe,eAAN,GAAwB7C,EAAE,CAACmC,UAAH,CAAc,IAAd,CAAxB;AACAL,IAAAA,KAAK,CAACgB,kBAAN,GAA2BpC,oBAAoB,CAACqC,eAArB,CAAqC,QAArC,EAA+C,oCAA/C,CAA3B;;AACA,QAAIC,QAAQ,GAAG,YAAY;AAAE,aAAOlB,KAAK,CAACmB,SAAN,EAAP;AAA2B,KAAxD;;AACAnB,IAAAA,KAAK,CAACoB,YAAN,CAAmBC,IAAnB,CAAwB5C,QAAQ,CAAC6C,cAAT,CAAwBtB,KAAK,CAACM,UAA9B,EAA0C,UAAUiB,IAAV,EAAgB;AAC9EvB,MAAAA,KAAK,CAACoB,YAAN,CAAmBC,IAAnB,CAAwB5C,QAAQ,CAAC6C,cAAT,CAAwBC,IAAI,CAAChC,UAA7B,EAAyC,UAAUM,SAAV,EAAqB;AAClFG,QAAAA,KAAK,CAACoB,YAAN,CAAmBC,IAAnB,CAAwB5C,QAAQ,CAAC+C,eAAT,CAAyB3B,SAAS,CAAC4B,mBAAnC,EAAwD,UAAU7D,KAAV,EAAiB;AAC7F,cAAI8D,EAAJ;;AACA,WAACA,EAAE,GAAG1B,KAAK,CAACoB,YAAZ,EAA0BC,IAA1B,CAA+BM,KAA/B,CAAqCD,EAArC,EAAyCjD,QAAQ,CAACmD,mBAAT,CAA6B,CAAChE,KAAK,CAACiD,IAAP,EAAajD,KAAK,CAAC,OAAD,CAAlB,EAA6BA,KAAK,CAAC,MAAD,CAAlC,CAA7B,EAA0EsD,QAA1E,CAAzC;AACH,SAHuB,EAGrBA,QAHqB,CAAxB;AAIH,OALuB,EAKrBA,QALqB,CAAxB;AAMH,KAPuB,EAOrBA,QAPqB,CAAxB;;AAQAlB,IAAAA,KAAK,CAAC6B,wBAAN,GAAiC;AAC7BC,MAAAA,UAAU,EAAE,YAAY;AACpB,eAAO9B,KAAK,CAACN,mBAAN,CAA0BE,wBAA1B,CAAmD,IAAIrB,qBAAqB,CAACoC,mBAA1B,CAA8C;AACpG,mBAASnC,iBAAiB,CAACoC,iCAAlB,CAAoDZ,KAAK,CAAC6B,wBAAN,CAA+BE,MAA/B,CAAsCC,IAAtC,GAA6CA,IAA7C,EAApD,EAAyG,OAAzG,CAD2F;AAEpG,mBAAS;AAF2F,SAA9C,CAAnD,CAAP;AAIH,OAN4B;AAO7BD,MAAAA,MAAM,EAAE7D,EAAE,CAACmC,UAAH,CAAcnC,EAAE,CAACqC,eAAH,CAAmB,EAAnB,CAAd,CAPqB;AAQ7B0B,MAAAA,WAAW,EAAE,YARgB;AAS7BC,MAAAA,KAAK,EAAE,CATsB;AAU7BC,MAAAA,IAAI,EAAEjE,EAAE,CAACmC,UAAH,CAAc;AAChB4B,QAAAA,WAAW,EAAE,YADG;AACWG,QAAAA,cAAc,EAAE,+CAD3B;AAEhBC,QAAAA,YAAY,EAAE,YAFE;AAGhBC,QAAAA,SAAS,EAAE,WAHK;AAIhBC,QAAAA,KAAK,EAAE,IAJS;AAKhBC,QAAAA,MAAM,EAAE9D,aAAa,CAAC+D,eAAd,CAA8BC,SAA9B,CAAwC,kBAAxC,CALQ;AAMhBC,QAAAA,QAAQ,EAAE;AANM,OAAd,CAVuB;AAkB7BC,MAAAA,cAAc,EAAE,oCAlBa;AAmB7BC,MAAAA,WAAW,EAAE3E,EAAE,CAACmC,UAAH,CAAc,KAAd,CAnBgB;AAoB7ByC,MAAAA,SAAS,EAAE;AApBkB,KAAjC;AAsBA,WAAO9C,KAAP;AACH;;AACDlC,EAAAA,iCAAiC,CAACZ,SAAlC,CAA4C6F,kBAA5C,GAAiE,YAAY;AACzE,WAAO,KAAKC,cAAL,GAAsBC,KAAtB,CAA4B,UAAUC,CAAV,EAAa;AAAE,aAAOA,CAAC,CAACC,OAAF,EAAP;AAAqB,KAAhE,CAAP;AACH,GAFD;;AAGArF,EAAAA,iCAAiC,CAACZ,SAAlC,CAA4CkG,OAA5C,GAAsD,YAAY;AAC9D,WAAO,KAAKL,kBAAL,MAA6B,KAAK9C,qBAAL,CAA2BoD,aAA3B,CAAyCC,OAAzC,GAAmD9D,MAAnD,GAA4D,CAAhG;AACH,GAFD;;AAGA1B,EAAAA,iCAAiC,CAACZ,SAAlC,CAA4CqG,SAA5C,GAAwD,YAAY;AAChE,WAAO,KAAKR,kBAAL,MAA6B,KAAK9C,qBAAL,CAA2BoD,aAA3B,CAAyCC,OAAzC,GAAmD9D,MAAnD,IAA6D,CAAjG;AACH,GAFD;;AAGA1B,EAAAA,iCAAiC,CAACZ,SAAlC,CAA4C8F,cAA5C,GAA6D,YAAY;AACrE,WAAO,GAAGQ,MAAH,CAAU7B,KAAV,CAAgB,EAAhB,EAAoB,CAAC,KAAKrB,UAAL,MAAqB,EAAtB,EAA0BmD,GAA1B,CAA8B,UAAUP,CAAV,EAAa;AAClE,aAAOA,CAAC,CAAC3D,UAAF,GAAekE,GAAf,CAAmB,UAAUC,KAAV,EAAiB;AACvC,eAAOA,KAAK,CAACjC,mBAAN,EAAP;AACH,OAFM,CAAP;AAGH,KAJ0B,CAApB,CAAP;AAKH,GAND;;AAOA3D,EAAAA,iCAAiC,CAACZ,SAAlC,CAA4CyG,UAA5C,GAAyD,UAAUC,KAAV,EAAiB;AACtE,QAAI5D,KAAK,GAAG,IAAZ;;AACA,QAAI6D,0BAA0B,GAAG,EAAjC;;AACA,QAAIC,SAAS,GAAG,KAAKxD,UAAL,EAAhB;;AACA,SAAKL,qBAAL,GAA6B7B,uBAAuB,CAAC2F,8BAAxB,CAAuDH,KAAvD,EAA8D,KAAKjE,eAAnE,CAA7B;;AACA,SAAKM,qBAAL,CAA2BoD,aAA3B,CAAyCC,OAAzC,GAAmDU,OAAnD,CAA2D,UAAUjF,KAAV,EAAiB;AACxE,UAAIhB,uBAAuB,CAACgB,KAAD,EAAQiB,KAAK,CAACC,qBAAN,CAA4BjB,aAApC,CAA3B,EAA+E;AAC3E,YAAIiF,MAAM,GAAG,IAAI3F,2BAA2B,CAAC4F,0BAAhC,CAA2DnF,KAA3D,CAAb;AACAkF,QAAAA,MAAM,CAAC1E,UAAP,CAAkBR,KAAK,CAACQ,UAAN,GAAmBkE,GAAnB,CAAuB,UAAUU,cAAV,EAA0B;AAC/D,iBAAO,IAAI7F,2BAA2B,CAAC8F,sBAAhC,CAAuDpE,KAAK,CAACN,mBAAN,CAA0BE,wBAA1B,CAAmDuE,cAAnD,CAAvD,EAA2HF,MAA3H,CAAP;AACH,SAFiB,CAAlB;AAGAJ,QAAAA,0BAA0B,CAACxC,IAA3B,CAAgC4C,MAAhC;AACH;AACJ,KARD;;AASAH,IAAAA,SAAS,CAACO,MAAV,CAAiB,UAAUnB,CAAV,EAAa;AAAE,aAAOW,0BAA0B,CAACZ,KAA3B,CAAiC,UAAUqB,OAAV,EAAmB;AAAE,eAAOA,OAAO,CAACzD,IAAR,KAAiBqC,CAAC,CAACrC,IAA1B;AAAiC,OAAvF,CAAP;AAAkG,KAAlI,EAAoImD,OAApI,CAA4I,UAAUO,WAAV,EAAuB;AAC/JT,MAAAA,SAAS,CAACU,MAAV,CAAiBxE,KAAK,CAACM,UAAN,GAAmBjB,OAAnB,CAA2BkF,WAA3B,CAAjB,EAA0D,CAA1D;AACH,KAFD;AAGAV,IAAAA,0BAA0B,CAACG,OAA3B,CAAmC,UAAUM,OAAV,EAAmB;AAClD,UAAIG,WAAW,GAAGX,SAAS,CAACO,MAAV,CAAiB,UAAUnB,CAAV,EAAa;AAAE,eAAOA,CAAC,CAACrC,IAAF,KAAWyD,OAAO,CAACzD,IAA1B;AAAiC,OAAjE,EAAmE,CAAnE,CAAlB;;AACA,UAAI4D,WAAJ,EAAiB;AACbH,QAAAA,OAAO,CAAC/E,UAAR,GAAqB8E,MAArB,CAA4B,UAAUK,QAAV,EAAoB;AAAE,iBAAOD,WAAW,CAAClF,UAAZ,GAAyB0D,KAAzB,CAA+B,UAAUC,CAAV,EAAa;AAAE,mBAAOA,CAAC,CAACrC,IAAF,KAAW6D,QAAQ,CAAC7D,IAA3B;AAAkC,WAAhF,CAAP;AAA2F,SAA7I,EAA+ImD,OAA/I,CAAuJ,UAAUN,KAAV,EAAiB;AACpKe,UAAAA,WAAW,CAAClF,UAAZ,CAAuB8B,IAAvB,CAA4BqC,KAA5B;AACH,SAFD;AAGH,OAJD,MAKK;AACDI,QAAAA,SAAS,CAACzC,IAAV,CAAeiD,OAAf;AACH;AACJ,KAVD;;AAWA,SAAKhE,UAAL,CAAgBqE,eAAhB;;AACA,SAAK5D,eAAL,CAAqB;AACjB6D,MAAAA,aAAa,EAAE;AACXC,QAAAA,QAAQ,EAAE,UAAUC,WAAV,EAAuB;AAC7B,cAAIC,MAAM,GAAG/G,CAAC,CAACgH,QAAF,EAAb;;AACA,cAAI,CAACF,WAAW,CAACG,QAAjB,EAA2B;AACvBF,YAAAA,MAAM,CAACG,OAAP,CAAelF,KAAK,CAACM,UAAN,EAAf;AACH,WAFD,MAGK;AACD,gBAAI2D,MAAM,GAAGtF,aAAa,CAACwG,6BAAd,CAA4CnF,KAAK,CAACM,UAAN,EAA5C,EAAgE,UAAUiB,IAAV,EAAgB;AAAE,qBAAOA,IAAI,CAACV,IAAL,KAAciE,WAAW,CAACM,GAAjC;AAAuC,aAAzH,CAAb;;AACAL,YAAAA,MAAM,CAACG,OAAP,CAAejB,MAAM,CAAC1E,UAAP,EAAf;AACH;;AACD,iBAAOwF,MAAM,CAACM,OAAP,EAAP;AACH;AAXU,OADE;AAcjBC,MAAAA,YAAY,EAAE,6BAdG;AAejBC,MAAAA,YAAY,EAAE,KAAKnF,aAfF;AAgBjBoF,MAAAA,kBAAkB,EAAE,IAAIlH,2BAA2B,CAACmH,4BAAhC,CAA6D,KAAKnF,UAAL,EAA7D,EAAgF,KAAKE,mBAArF;AAhBH,KAArB;;AAkBA,WAAOxC,CAAC,CAACgH,QAAF,GAAaE,OAAb,GAAuBG,OAAvB,EAAP;AACH,GAhDD;;AAiDAvH,EAAAA,iCAAiC,CAACZ,SAAlC,CAA4CwI,MAA5C,GAAqD,YAAY;AAC7D,QAAI1F,KAAK,GAAG,IAAZ;;AACA,SAAKM,UAAL,GAAkB0D,OAAlB,CAA0B,UAAUzC,IAAV,EAAgB;AACtCA,MAAAA,IAAI,CAACxC,KAAL,GAAaQ,UAAb,CAAwBgC,IAAI,CAAChC,UAAL,GAAkBkE,GAAlB,CAAsB,UAAU1D,kBAAV,EAA8B;AACxE,eAAOC,KAAK,CAACN,mBAAN,CAA0BI,yBAA1B,CAAoDC,kBAAkB,CAAC0B,mBAAnB,EAApD,CAAP;AACH,OAFuB,CAAxB;AAGH,KAJD;;AAKA,WAAOzD,CAAC,CAACgH,QAAF,GAAaE,OAAb,CAAqB;AACxBS,MAAAA,iBAAiB,EAAE,KAAK1F,qBAAL,CAA2B0F,iBADtB;AAExB3G,MAAAA,aAAa,EAAE,KAAKiB,qBAAL,CAA2B2F,iBAA3B;AAFS,KAArB,EAGJP,OAHI,EAAP;AAIH,GAXD;;AAYA,SAAOvH,iCAAP;AACH,CAvIwC,CAuIvCgB,gBAAgB,CAAC+G,cAvIsB,CAAzC;;AAwIAlI,OAAO,CAACG,iCAAR,GAA4CA,iCAA5C;;AACA,SAASD,0CAAT,CAAoDiI,OAApD,EAA6DC,cAA7D,EAA6ErG,mBAA7E,EAAkG;AAC9FoG,EAAAA,OAAO,CAACE,gBAAR,CAAyBnH,QAAQ,CAACoH,yBAAT,CAAmCnI,iCAA5D,EAA+F;AAC3FL,IAAAA,MAAM,EAAE,YAAY;AAAE,aAAO,IAAIK,iCAAJ,CAAsC4B,mBAAtC,EAA2DqG,cAA3D,CAAP;AAAoF,KADf;AAE3FG,IAAAA,QAAQ,EAAE,UAAUtC,KAAV,EAAiB;AAAE,aAAOA,KAAK,CAACuC,mBAAb;AAAmC,KAF2B;AAG3FC,IAAAA,QAAQ,EAAE,UAAUrB,MAAV,EAAkBnB,KAAlB,EAAyB;AAAE,aAAOA,KAAK,CAAC5E,aAAN,GAAsB+F,MAAM,CAAC/F,aAApC;AAAoD,KAHE;AAI3FqH,IAAAA,UAAU,EAAE,YAAY;AAAE,aAAO,KAAK,CAAZ;AAAgB,KAJiD;AAK3FC,IAAAA,WAAW,EAAE1H,oBAAoB,CAACqC,eAArB,CAAqC,6BAArC,EAAoE,2DAApE,CAL8E;AAM3F0B,IAAAA,QAAQ,EAAE;AANiF,GAA/F;AAQH;;AACDhF,OAAO,CAACE,0CAAR,GAAqDA,0CAArD","sourcesContent":["/**\n* DevExpress Analytics (query-builder\\wizard\\pages\\multiQueryWizard\\multiQueryConfigureParametersPage.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._registerMultiQueryConfigureParametersPage = exports.MultiQueryConfigureParametersPage = exports._canEditQueryParameters = void 0;\nvar $ = require(\"jquery\");\nvar ko = require(\"knockout\");\nvar utils_1 = require(\"../../../dataSource/utils\");\nvar dataSourceWizardState_1 = require(\"../../dataSourceWizardState\");\nvar _sqlDataSourceWrapper_1 = require(\"../sqlDataSourceWizard/_sqlDataSourceWrapper\");\nvar _configureParametersUtils_1 = require(\"../../internal/_configureParametersUtils\");\nvar dataSourceParameter_1 = require(\"../../../dataSource/dataSourceParameter\");\nvar _getNameHelpers_1 = require(\"../../../../core/internal/_getNameHelpers\");\nvar _utils_1 = require(\"../../internal/_utils\");\nvar editorsInfo_1 = require(\"../../../../property-grid/widgets/editorsInfo\");\nvar _arrayutils_1 = require(\"../../../../core/utils/_arrayutils\");\nvar localization_utils_1 = require(\"../../../../property-grid/localization/localization_utils\");\nvar pageId_1 = require(\"../../pageId\");\nvar wizardPageBase_1 = require(\"../wizardPageBase\");\nfunction _canEditQueryParameters(query, customQueries) {\n    if (query.type() === utils_1.SqlQueryType.tableQuery || query.type() === utils_1.SqlQueryType.customSqlQuery) {\n        return customQueries.indexOf(query) > -1;\n    }\n    return query.type() === utils_1.SqlQueryType.storedProcQuery && query.parameters().length > 0;\n}\nexports._canEditQueryParameters = _canEditQueryParameters;\nvar MultiQueryConfigureParametersPage = (function (_super) {\n    __extends(MultiQueryConfigureParametersPage, _super);\n    function MultiQueryConfigureParametersPage(parametersConverter, _requestWrapper) {\n        if (parametersConverter === void 0) { parametersConverter = {\n            createParameterViewModel: function (parameter) { return parameter; },\n            getParameterFromViewModel: function (parameterViewModel) { return parameterViewModel; }\n        }; }\n        var _this = _super.call(this) || this;\n        _this.parametersConverter = parametersConverter;\n        _this._requestWrapper = _requestWrapper;\n        _this._sqlDataSourceWrapper = new _sqlDataSourceWrapper_1._SqlDataSourceWrapper(undefined, undefined, _this._requestWrapper);\n        _this._selectedPath = ko.observable(null);\n        _this._rootItems = ko.observableArray();\n        _this._createNewParameter = function (queryName, parameters) {\n            var newParameter = new dataSourceParameter_1.DataSourceParameter({\n                '@Name': _getNameHelpers_1.getUniqueNameForNamedObjectsArray(parameters, 'parameter'),\n                '@Type': 'System.Int32'\n            });\n            _this._selectedPath(queryName + '.' + newParameter.name());\n            return _this.parametersConverter.createParameterViewModel(newParameter);\n        };\n        _this._scrollViewHeight = '100%';\n        _this._fieldListModel = ko.observable(null);\n        _this._removeButtonTitle = localization_utils_1.getLocalization('Remove', 'DataAccessUIStringId.Button_Remove');\n        var callback = function () { return _this._onChange(); };\n        _this._disposables.push(_utils_1.subscribeArray(_this._rootItems, function (item) {\n            _this._disposables.push(_utils_1.subscribeArray(item.parameters, function (parameter) {\n                _this._disposables.push(_utils_1.subscribeObject(parameter.dataSourceParameter, function (value) {\n                    var _a;\n                    (_a = _this._disposables).push.apply(_a, _utils_1.subscribeProperties([value.name, value['value'], value['type']], callback));\n                }, callback));\n            }, callback));\n        }, callback));\n        _this._parametersEditorOptions = {\n            addHandler: function () {\n                return _this.parametersConverter.createParameterViewModel(new dataSourceParameter_1.DataSourceParameter({\n                    '@Name': _getNameHelpers_1.getUniqueNameForNamedObjectsArray(_this._parametersEditorOptions.values.peek().peek(), 'param'),\n                    '@Type': 'System.Int32'\n                }));\n            },\n            values: ko.observable(ko.observableArray([])),\n            displayName: 'Parameters',\n            level: 0,\n            info: ko.observable({\n                displayName: 'Parameters', localizationId: 'DevExpress.DataAccess.Sql.SqlQuery.Parameters',\n                propertyName: 'parameters',\n                modelName: 'Parameter',\n                array: true,\n                editor: editorsInfo_1.editorTemplates.getEditor('commonCollection'),\n                template: '#dxrd-parameter-collection-item'\n            }),\n            editorTemplate: '#dxrd-wizard-datasource-parameters',\n            hideButtons: ko.observable(false),\n            collapsed: false\n        };\n        return _this;\n    }\n    MultiQueryConfigureParametersPage.prototype._isParametersValid = function () {\n        return this._getParameters().every(function (x) { return x.isValid(); });\n    };\n    MultiQueryConfigureParametersPage.prototype.canNext = function () {\n        return this._isParametersValid() && this._sqlDataSourceWrapper.sqlDataSource.queries().length > 1;\n    };\n    MultiQueryConfigureParametersPage.prototype.canFinish = function () {\n        return this._isParametersValid() && this._sqlDataSourceWrapper.sqlDataSource.queries().length >= 1;\n    };\n    MultiQueryConfigureParametersPage.prototype._getParameters = function () {\n        return [].concat.apply([], (this._rootItems() || []).map(function (x) {\n            return x.parameters().map(function (param) {\n                return param.dataSourceParameter();\n            });\n        }));\n    };\n    MultiQueryConfigureParametersPage.prototype.initialize = function (state) {\n        var _this = this;\n        var newRootItemsWithParameters = [];\n        var rootItems = this._rootItems();\n        this._sqlDataSourceWrapper = dataSourceWizardState_1._restoreSqlDataSourceFromState(state, this._requestWrapper);\n        this._sqlDataSourceWrapper.sqlDataSource.queries().forEach(function (query) {\n            if (_canEditQueryParameters(query, _this._sqlDataSourceWrapper.customQueries)) {\n                var parent = new _configureParametersUtils_1.ParametersTreeListRootItem(query);\n                parent.parameters(query.parameters().map(function (parameterModel) {\n                    return new _configureParametersUtils_1.ParametersTreeListItem(_this.parametersConverter.createParameterViewModel(parameterModel), parent);\n                }));\n                newRootItemsWithParameters.push(parent);\n            }\n        });\n        rootItems.filter(function (x) { return newRootItemsWithParameters.every(function (newItem) { return newItem.name !== x.name; }); }).forEach(function (removedItem) {\n            rootItems.splice(_this._rootItems().indexOf(removedItem), 1);\n        });\n        newRootItemsWithParameters.forEach(function (newItem) {\n            var currentItem = rootItems.filter(function (x) { return x.name === newItem.name; })[0];\n            if (currentItem) {\n                newItem.parameters().filter(function (newParam) { return currentItem.parameters().every(function (x) { return x.name !== newParam.name; }); }).forEach(function (param) {\n                    currentItem.parameters.push(param);\n                });\n            }\n            else {\n                rootItems.push(newItem);\n            }\n        });\n        this._rootItems.valueHasMutated();\n        this._fieldListModel({\n            itemsProvider: {\n                getItems: function (pathRequest) {\n                    var result = $.Deferred();\n                    if (!pathRequest.fullPath) {\n                        result.resolve(_this._rootItems());\n                    }\n                    else {\n                        var parent = _arrayutils_1.findFirstItemMatchesCondition(_this._rootItems(), function (item) { return item.name === pathRequest.ref; });\n                        result.resolve(parent.parameters());\n                    }\n                    return result.promise();\n                }\n            },\n            templateName: 'dx-treelist-item-with-hover',\n            selectedPath: this._selectedPath,\n            treeListController: new _configureParametersUtils_1.ParametersTreeListController(this._rootItems(), this._createNewParameter),\n        });\n        return $.Deferred().resolve().promise();\n    };\n    MultiQueryConfigureParametersPage.prototype.commit = function () {\n        var _this = this;\n        this._rootItems().forEach(function (item) {\n            item.query().parameters(item.parameters().map(function (parameterViewModel) {\n                return _this.parametersConverter.getParameterFromViewModel(parameterViewModel.dataSourceParameter());\n            }));\n        });\n        return $.Deferred().resolve({\n            sqlDataSourceJSON: this._sqlDataSourceWrapper.sqlDataSourceJSON,\n            customQueries: this._sqlDataSourceWrapper.saveCustomQueries()\n        }).promise();\n    };\n    return MultiQueryConfigureParametersPage;\n}(wizardPageBase_1.WizardPageBase));\nexports.MultiQueryConfigureParametersPage = MultiQueryConfigureParametersPage;\nfunction _registerMultiQueryConfigureParametersPage(factory, requestWrapper, parametersConverter) {\n    factory.registerMetadata(pageId_1.SqlDataSourceWizardPageId.MultiQueryConfigureParametersPage, {\n        create: function () { return new MultiQueryConfigureParametersPage(parametersConverter, requestWrapper); },\n        getState: function (state) { return state.sqlDataSourceWizard; },\n        setState: function (result, state) { return state.customQueries = result.customQueries; },\n        resetState: function () { return void 0; },\n        description: localization_utils_1.getLocalization('Configure query parameters.', 'AnalyticsCoreStringId.SqlDSWizard_PageConfigureParameters'),\n        template: 'dxrd-configure-query-parameters-page'\n    });\n}\nexports._registerMultiQueryConfigureParametersPage = _registerMultiQueryConfigureParametersPage;\n"]},"metadata":{},"sourceType":"script"}