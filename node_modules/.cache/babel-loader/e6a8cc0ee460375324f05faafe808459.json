{"ast":null,"code":"/**\n* DevExpress Analytics (core\\tools\\_keyboardHelper.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KeyDownHandlersManager = exports.KeyboardHelper = exports.KeyboardHelperBase = void 0;\n\nvar $ = require(\"jquery\");\n\nvar _internal_1 = require(\"../../serializer/_internal\");\n\nvar utils_1 = require(\"../../serializer/utils\");\n\nvar _utils_1 = require(\"../../property-grid/widgets/internal/_utils\");\n\nvar KeyboardHelperBase = function (_super) {\n  __extends(KeyboardHelperBase, _super);\n\n  function KeyboardHelperBase() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  KeyboardHelperBase.prototype._processShortcut = function (map, e, index) {\n    var method = map[_utils_1.KeyboardCodesEnum[e.keyCode]];\n\n    if (method) {\n      return method(e, index);\n    }\n\n    return false;\n  };\n\n  KeyboardHelperBase.prototype.processShortcut = function (e, index) {\n    return this._processShortcut(this.shortcutMap, e, index);\n  };\n\n  KeyboardHelperBase.prototype.processChildrenShortcut = function (e, index) {\n    return this._processShortcut(this.childrenShortcutMap, e, index);\n  };\n\n  return KeyboardHelperBase;\n}(utils_1.Disposable);\n\nexports.KeyboardHelperBase = KeyboardHelperBase;\n\nvar KeyboardHelper = function (_super) {\n  __extends(KeyboardHelper, _super);\n\n  function KeyboardHelper(selection, undoEngine) {\n    var _this = _super.call(this) || this;\n\n    _this._selection = selection;\n    _this._undoEngine = undoEngine;\n    _this.shortcutMap = {\n      Esc: function (e) {\n        _this.processEsc();\n\n        return true;\n      },\n      Left: function (e) {\n        _this.moveSelectedControls(true, true, -1);\n\n        return true;\n      },\n      Up: function (e) {\n        _this.moveSelectedControls(true, false, -1);\n\n        return true;\n      },\n      Right: function (e) {\n        _this.moveSelectedControls(false, true, 1);\n\n        return true;\n      },\n      Down: function (e) {\n        _this.moveSelectedControls(false, false, 1);\n\n        return true;\n      }\n    };\n    return _this;\n  }\n\n  KeyboardHelper.prototype.processEsc = function () {\n    var parent = this._selection.focused() && this._selection.focused().parent;\n\n    parent && this._selection.focused(parent);\n  };\n\n  KeyboardHelper.prototype.moveSelectedControls = function (leftUp, isHoriz, sign) {\n    var focusedControl = this._selection.focused();\n\n    if (!focusedControl || focusedControl && focusedControl.getControlModel().getMetaData().isCopyDeny) {\n      return;\n    }\n\n    this._undoEngine && this._undoEngine().start();\n    var distance = 1,\n        axisProperty = isHoriz ? 'left' : 'top',\n        lengthProperty = isHoriz ? 'width' : 'height',\n        minAxis,\n        maxSide,\n        newAxis;\n\n    if (focusedControl.rect) {\n      minAxis = focusedControl.rect()[axisProperty];\n      maxSide = focusedControl.rect()[axisProperty] + focusedControl.rect()[lengthProperty];\n    } else {\n      return;\n    }\n\n    this._selection.selectedItems.filter(function (item) {\n      return !item.locked;\n    }).forEach(function (item) {\n      var axis = item.rect()[axisProperty];\n\n      if (axis < minAxis) {\n        minAxis = axis;\n      }\n    });\n\n    this._selection.selectedItems.filter(function (item) {\n      return !item.locked;\n    }).forEach(function (item) {\n      var side = item.rect()[axisProperty] + item.rect()[lengthProperty];\n\n      if (side > maxSide) {\n        maxSide = side;\n      }\n    });\n\n    if (leftUp && minAxis <= 0 || !focusedControl.parent.rect || !leftUp && maxSide.toFixed(5) >= focusedControl.parent.rect()[lengthProperty]) {\n      return;\n    } else {\n      this._selection.selectedItems.filter(function (item) {\n        return !item.locked;\n      }).filter(function (item) {\n        return !!item.rect;\n      }).forEach(function (item) {\n        var newVal = {},\n            itemAxisProperty = item.rect()[axisProperty],\n            itemLengthProperty = item.rect()[lengthProperty],\n            parentLengthProperty = item.parent.rect()[lengthProperty];\n        newAxis = itemAxisProperty + sign * distance;\n\n        if (leftUp && newAxis >= 0 || !leftUp && newAxis + itemLengthProperty <= parentLengthProperty) {\n          newVal[axisProperty] = newAxis;\n        }\n\n        if (!leftUp && newAxis + itemLengthProperty > parentLengthProperty) {\n          newVal[axisProperty] = parentLengthProperty - itemLengthProperty;\n        }\n\n        if (leftUp && newAxis < 0 && itemAxisProperty > 0) {\n          newVal[axisProperty] = 0;\n        }\n\n        item.rect(newVal);\n      });\n    }\n\n    this._undoEngine && this._undoEngine().end();\n  };\n\n  return KeyboardHelper;\n}(KeyboardHelperBase);\n\nexports.KeyboardHelper = KeyboardHelper;\n\nvar KeyDownHandlersManager = function () {\n  function KeyDownHandlersManager(targetElement) {\n    this._handlers = [];\n    this._targetElement = targetElement;\n  }\n\n  Object.defineProperty(KeyDownHandlersManager.prototype, \"_activeHandler\", {\n    get: function () {\n      return this._handlers.length > 0 ? this._handlers[this._handlers.length - 1] : null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  KeyDownHandlersManager.prototype._removeHandler = function (handler, eventName) {\n    var index = this._handlers.indexOf(handler);\n\n    if (index < 0) return;\n\n    this._handlers.splice(index, 1);\n\n    if (index === this._handlers.length) {\n      this._targetElement.removeEventListener(eventName, handler);\n\n      if (this._activeHandler) this._targetElement.addEventListener(eventName, this._activeHandler);\n    }\n  };\n\n  KeyDownHandlersManager.prototype.bindHandler = function (element, handler, eventName) {\n    var _this = this;\n\n    if (eventName === void 0) {\n      eventName = 'keydown';\n    }\n\n    if (this._activeHandler) this._targetElement.removeEventListener(eventName, this._activeHandler);\n\n    var _handler = function (e) {\n      if ($(_this._targetElement).closest('.dx-designer').length > 0 || $(e.target).closest('.dx-designer').length > 0 || e.target === document.body) handler(e);\n    };\n\n    this._handlers.push(_handler);\n\n    this._targetElement.addEventListener(eventName, _handler);\n\n    _internal_1.addDisposeCallback(element, function () {\n      _this._removeHandler(_handler, eventName);\n    });\n  };\n\n  return KeyDownHandlersManager;\n}();\n\nexports.KeyDownHandlersManager = KeyDownHandlersManager;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/core/tools/_keyboardHelper.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","KeyDownHandlersManager","KeyboardHelper","KeyboardHelperBase","$","require","_internal_1","utils_1","_utils_1","_super","apply","arguments","_processShortcut","map","e","index","method","KeyboardCodesEnum","keyCode","processShortcut","shortcutMap","processChildrenShortcut","childrenShortcutMap","Disposable","selection","undoEngine","_this","_selection","_undoEngine","Esc","processEsc","Left","moveSelectedControls","Up","Right","Down","parent","focused","leftUp","isHoriz","sign","focusedControl","getControlModel","getMetaData","isCopyDeny","start","distance","axisProperty","lengthProperty","minAxis","maxSide","newAxis","rect","selectedItems","filter","item","locked","forEach","axis","side","toFixed","newVal","itemAxisProperty","itemLengthProperty","parentLengthProperty","end","targetElement","_handlers","_targetElement","get","length","enumerable","configurable","_removeHandler","handler","eventName","indexOf","splice","removeEventListener","_activeHandler","addEventListener","bindHandler","element","_handler","closest","target","document","body","push","addDisposeCallback"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (core\\tools\\_keyboardHelper.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeyDownHandlersManager = exports.KeyboardHelper = exports.KeyboardHelperBase = void 0;\nvar $ = require(\"jquery\");\nvar _internal_1 = require(\"../../serializer/_internal\");\nvar utils_1 = require(\"../../serializer/utils\");\nvar _utils_1 = require(\"../../property-grid/widgets/internal/_utils\");\nvar KeyboardHelperBase = (function (_super) {\n    __extends(KeyboardHelperBase, _super);\n    function KeyboardHelperBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    KeyboardHelperBase.prototype._processShortcut = function (map, e, index) {\n        var method = map[_utils_1.KeyboardCodesEnum[e.keyCode]];\n        if (method) {\n            return method(e, index);\n        }\n        return false;\n    };\n    KeyboardHelperBase.prototype.processShortcut = function (e, index) {\n        return this._processShortcut(this.shortcutMap, e, index);\n    };\n    KeyboardHelperBase.prototype.processChildrenShortcut = function (e, index) {\n        return this._processShortcut(this.childrenShortcutMap, e, index);\n    };\n    return KeyboardHelperBase;\n}(utils_1.Disposable));\nexports.KeyboardHelperBase = KeyboardHelperBase;\nvar KeyboardHelper = (function (_super) {\n    __extends(KeyboardHelper, _super);\n    function KeyboardHelper(selection, undoEngine) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._undoEngine = undoEngine;\n        _this.shortcutMap = {\n            Esc: function (e) { _this.processEsc(); return true; },\n            Left: function (e) { _this.moveSelectedControls(true, true, -1); return true; },\n            Up: function (e) { _this.moveSelectedControls(true, false, -1); return true; },\n            Right: function (e) { _this.moveSelectedControls(false, true, 1); return true; },\n            Down: function (e) { _this.moveSelectedControls(false, false, 1); return true; }\n        };\n        return _this;\n    }\n    KeyboardHelper.prototype.processEsc = function () {\n        var parent = this._selection.focused() && this._selection.focused().parent;\n        parent && this._selection.focused(parent);\n    };\n    KeyboardHelper.prototype.moveSelectedControls = function (leftUp, isHoriz, sign) {\n        var focusedControl = this._selection.focused();\n        if (!focusedControl || focusedControl && focusedControl.getControlModel().getMetaData().isCopyDeny) {\n            return;\n        }\n        this._undoEngine && this._undoEngine().start();\n        var distance = 1, axisProperty = isHoriz ? 'left' : 'top', lengthProperty = isHoriz ? 'width' : 'height', minAxis, maxSide, newAxis;\n        if (focusedControl.rect) {\n            minAxis = focusedControl.rect()[axisProperty];\n            maxSide = focusedControl.rect()[axisProperty] + focusedControl.rect()[lengthProperty];\n        }\n        else {\n            return;\n        }\n        this._selection.selectedItems.filter(function (item) { return !item.locked; }).forEach(function (item) {\n            var axis = item.rect()[axisProperty];\n            if (axis < minAxis) {\n                minAxis = axis;\n            }\n        });\n        this._selection.selectedItems.filter(function (item) { return !item.locked; }).forEach(function (item) {\n            var side = item.rect()[axisProperty] + item.rect()[lengthProperty];\n            if (side > maxSide) {\n                maxSide = side;\n            }\n        });\n        if ((leftUp && minAxis <= 0) || (!focusedControl.parent.rect || (!leftUp && maxSide.toFixed(5) >= focusedControl.parent.rect()[lengthProperty]))) {\n            return;\n        }\n        else {\n            this._selection.selectedItems.filter(function (item) { return !item.locked; })\n                .filter(function (item) { return !!item.rect; })\n                .forEach(function (item) {\n                var newVal = {}, itemAxisProperty = item.rect()[axisProperty], itemLengthProperty = item.rect()[lengthProperty], parentLengthProperty = item.parent.rect()[lengthProperty];\n                newAxis = itemAxisProperty + sign * distance;\n                if ((leftUp && newAxis >= 0) || (!leftUp && (newAxis + itemLengthProperty) <= parentLengthProperty)) {\n                    newVal[axisProperty] = newAxis;\n                }\n                if (!leftUp && (newAxis + itemLengthProperty) > parentLengthProperty) {\n                    newVal[axisProperty] = parentLengthProperty - itemLengthProperty;\n                }\n                if (leftUp && newAxis < 0 && itemAxisProperty > 0) {\n                    newVal[axisProperty] = 0;\n                }\n                item.rect(newVal);\n            });\n        }\n        this._undoEngine && this._undoEngine().end();\n    };\n    return KeyboardHelper;\n}(KeyboardHelperBase));\nexports.KeyboardHelper = KeyboardHelper;\nvar KeyDownHandlersManager = (function () {\n    function KeyDownHandlersManager(targetElement) {\n        this._handlers = [];\n        this._targetElement = targetElement;\n    }\n    Object.defineProperty(KeyDownHandlersManager.prototype, \"_activeHandler\", {\n        get: function () {\n            return this._handlers.length > 0 ? this._handlers[this._handlers.length - 1] : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KeyDownHandlersManager.prototype._removeHandler = function (handler, eventName) {\n        var index = this._handlers.indexOf(handler);\n        if (index < 0)\n            return;\n        this._handlers.splice(index, 1);\n        if (index === this._handlers.length) {\n            this._targetElement.removeEventListener(eventName, handler);\n            if (this._activeHandler)\n                this._targetElement.addEventListener(eventName, this._activeHandler);\n        }\n    };\n    KeyDownHandlersManager.prototype.bindHandler = function (element, handler, eventName) {\n        var _this = this;\n        if (eventName === void 0) { eventName = 'keydown'; }\n        if (this._activeHandler)\n            this._targetElement.removeEventListener(eventName, this._activeHandler);\n        var _handler = function (e) {\n            if ($(_this._targetElement).closest('.dx-designer').length > 0 ||\n                $(e.target).closest('.dx-designer').length > 0 ||\n                e.target === document.body)\n                handler(e);\n        };\n        this._handlers.push(_handler);\n        this._targetElement.addEventListener(eventName, _handler);\n        _internal_1.addDisposeCallback(element, function () { _this._removeHandler(_handler, eventName); });\n    };\n    return KeyDownHandlersManager;\n}());\nexports.KeyDownHandlersManager = KeyDownHandlersManager;\n"]},"metadata":{},"sourceType":"script"}