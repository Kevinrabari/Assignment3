{"ast":null,"code":"/**\n* DevExpress Analytics (widgets\\ace\\_binding.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ko = require(\"knockout\");\n\nvar $ = require(\"jquery\");\n\nvar _utils_1 = require(\"../_utils\");\n\nvar _internal_1 = require(\"../../serializer/_internal\");\n\nvar ace_1 = require(\"ace-builds/src-noconflict/ace\");\n\nvar _ace_available_1 = require(\"./_ace-available\");\n\nvar ext_language_tools_1 = require(\"ace-builds/src-noconflict/ext-language_tools\");\n\nvar mode_sql_1 = require(\"ace-builds/src-noconflict/mode-sql\");\n\nvar mode_text_1 = require(\"ace-builds/src-noconflict/mode-text\");\n\nvar mode_json_1 = require(\"ace-builds/src-noconflict/mode-json\");\n\nvar theme_ambiance_1 = require(\"ace-builds/src-noconflict/theme-ambiance\");\n\nvar theme_dreamweaver_1 = require(\"ace-builds/src-noconflict/theme-dreamweaver\");\n\n_ace_available_1.aceAvailable(!!ace_1.default);\n\nif (!window['ace'] && _ace_available_1.aceAvailable()) {\n  ace_1.default.config.setModuleUrl('ace/ext/language_tools', ext_language_tools_1.default);\n  ace_1.default.config.setModuleUrl('ace/mode/sql', mode_sql_1.default);\n  ace_1.default.config.setModuleUrl('ace/mode/text', mode_text_1.default);\n  ace_1.default.config.setModuleUrl('ace/mode/json', mode_json_1.default);\n  ace_1.default.config.setModuleUrl('ace/theme/ambiance', theme_ambiance_1.default);\n  ace_1.default.config.setModuleUrl('ace/theme/dreamweaver', theme_dreamweaver_1.default);\n}\n\nrequire(\"./_ace-mode-doc-comment\");\n\nrequire(\"./_ace-mode-criteria\");\n\nko.bindingHandlers['dxAceEditor'] = {\n  init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var values = valueAccessor(),\n        text = values.value,\n        editorContainer = values.editorContainer,\n        editor,\n        shouldProcessOnChangeEvent = true,\n        _setEditorText = function (editorInstance, text) {\n      shouldProcessOnChangeEvent = false;\n      editorInstance.getSession().setValue(text && text.toString() || '');\n      editorInstance.clearSelection();\n      editorInstance.getSession().getUndoManager().reset();\n      shouldProcessOnChangeEvent = true;\n    };\n\n    if (ace_1.default) {\n      var showGutter = values.options.showGutter != undefined ? values.options.showGutter : true;\n      var additionalOptions = values.additionalOptions;\n\n      var langTools = ace_1.default.require('ace/ext/language_tools');\n\n      editor = ace_1.default.edit(element);\n      var guid = ko.observable(null);\n      var theme = values.theme;\n      if (!theme) theme = _utils_1.isDarkTheme() ? 'ace/theme/ambiance' : 'ace/theme/dreamweaver';\n      editor.setTheme(theme);\n      editor.$blockScrolling = Infinity;\n      var languageMode = viewModel.languageHelper.getLanguageMode();\n      var session = editor.getSession();\n      session.gutterRenderer = {\n        getWidth: function (session, lastLineNumber, config) {\n          return lastLineNumber.toString().length * config.characterWidth;\n        },\n        getText: function (session, row) {\n          return row + 1;\n        }\n      };\n      session.setMode(languageMode);\n\n      var onBlur = function () {\n        editor.completer && editor.completer.popup && editor.completer.popup.hide();\n      },\n          onChange,\n          onFocus,\n          onChangeAnnotation;\n\n      if (additionalOptions) {\n        if (additionalOptions.onChange) {\n          var timer = null;\n\n          onChange = function (e) {\n            if (timer !== null) clearTimeout(timer);\n\n            if (shouldProcessOnChangeEvent) {\n              timer = setTimeout(function () {\n                if (text() !== session.getValue() || (session.getAnnotations() || []).some(function (x) {\n                  return x.type === 'error';\n                })) {\n                  additionalOptions.onChange(session);\n                }\n              }, additionalOptions && additionalOptions.changeTimeout || 1000);\n            }\n          };\n\n          session.on('change', onChange);\n        }\n\n        if (additionalOptions.overrideEditorFocus) {\n          editor.focus = function (a, e) {\n            editor.textInput.getElement().focus();\n          };\n        }\n\n        if (additionalOptions.onFocus) {\n          onFocus = function () {\n            additionalOptions.onFocus(session);\n          };\n\n          editor.on('focus', onFocus);\n        }\n\n        if (additionalOptions.onBlur) {\n          onBlur = function () {\n            editor.completer && editor.completer.popup && editor.completer.popup.hide();\n            return additionalOptions.onBlur(session);\n          };\n        }\n\n        if (additionalOptions.onChangeAnnotation) {\n          onChangeAnnotation = function (a, e) {\n            additionalOptions.onChangeAnnotation(e);\n          };\n\n          session.on('changeAnnotation', onChangeAnnotation);\n        }\n      }\n\n      editor.on('blur', onBlur);\n      var completers = viewModel.languageHelper.createCompleters(editor, bindingContext, viewModel);\n      langTools.setCompleters(completers);\n      editor.setOptions(values.options);\n\n      if (additionalOptions && 'setUseWrapMode' in additionalOptions) {\n        editor.getSession().setUseWrapMode(additionalOptions.setUseWrapMode);\n      }\n\n      if (!showGutter) {\n        editor.renderer.setShowGutter(showGutter);\n      }\n\n      if (editor.renderer.$gutter) {\n        var gutterClassName = editor.renderer.$gutter.className + ' dxd-border-primary dxd-text-primary dxd-back-primary';\n        editor.renderer.$gutter.className = gutterClassName;\n      }\n\n      var oldMouseMove = editor._defaultHandlers.guttermousemove;\n\n      editor._defaultHandlers.guttermousemove = function (e) {\n        var rect = element.getBoundingClientRect();\n        e.x = e.x - rect.left;\n        e.y = e.y - rect.top;\n        oldMouseMove(e);\n      };\n\n      if (ko.isSubscribable(text)) {\n        var subscription = text.subscribe(function (newText) {\n          if (newText !== session.getValue()) {\n            _setEditorText(editor, newText);\n          }\n\n          if (additionalOptions && additionalOptions.onValueChange) additionalOptions.onValueChange(editor);\n        });\n      }\n\n      _setEditorText(editor, ko.unwrap(text));\n\n      if (values.callbacks) values.callbacks.focus = function () {\n        setTimeout(function () {\n          editor.textInput.getElement().focus();\n        }, 10);\n      };\n\n      _internal_1.addDisposeCallback(element, function () {\n        editor.completers && editor.completers.splice(0);\n        editor._defaultHandlers.guttermousemove = oldMouseMove;\n        subscription.dispose();\n        if (values.callbacks) values.callbacks.focus = $.noop;\n        completers.forEach(function (x) {\n          return x.dispose && x.dispose();\n        });\n        onBlur && editor.off('blur', onBlur);\n        onFocus && editor.off('focus', onFocus);\n        onChange && session.off('change', onChange);\n        onChangeAnnotation && session.off('changeAnnotation', onChangeAnnotation);\n        editor.destroy();\n      });\n    }\n\n    if (ko.isObservable(editorContainer)) {\n      editorContainer(editor);\n    }\n  }\n};","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/widgets/ace/_binding.js"],"names":["Object","defineProperty","exports","value","ko","require","$","_utils_1","_internal_1","ace_1","_ace_available_1","ext_language_tools_1","mode_sql_1","mode_text_1","mode_json_1","theme_ambiance_1","theme_dreamweaver_1","aceAvailable","default","window","config","setModuleUrl","bindingHandlers","init","element","valueAccessor","allBindings","viewModel","bindingContext","values","text","editorContainer","editor","shouldProcessOnChangeEvent","_setEditorText","editorInstance","getSession","setValue","toString","clearSelection","getUndoManager","reset","showGutter","options","undefined","additionalOptions","langTools","edit","guid","observable","theme","isDarkTheme","setTheme","$blockScrolling","Infinity","languageMode","languageHelper","getLanguageMode","session","gutterRenderer","getWidth","lastLineNumber","length","characterWidth","getText","row","setMode","onBlur","completer","popup","hide","onChange","onFocus","onChangeAnnotation","timer","e","clearTimeout","setTimeout","getValue","getAnnotations","some","x","type","changeTimeout","on","overrideEditorFocus","focus","a","textInput","getElement","completers","createCompleters","setCompleters","setOptions","setUseWrapMode","renderer","setShowGutter","$gutter","gutterClassName","className","oldMouseMove","_defaultHandlers","guttermousemove","rect","getBoundingClientRect","left","y","top","isSubscribable","subscription","subscribe","newText","onValueChange","unwrap","callbacks","addDisposeCallback","splice","dispose","noop","forEach","off","destroy","isObservable"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (widgets\\ace\\_binding.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ko = require(\"knockout\");\nvar $ = require(\"jquery\");\nvar _utils_1 = require(\"../_utils\");\nvar _internal_1 = require(\"../../serializer/_internal\");\nvar ace_1 = require(\"ace-builds/src-noconflict/ace\");\nvar _ace_available_1 = require(\"./_ace-available\");\nvar ext_language_tools_1 = require(\"ace-builds/src-noconflict/ext-language_tools\");\nvar mode_sql_1 = require(\"ace-builds/src-noconflict/mode-sql\");\nvar mode_text_1 = require(\"ace-builds/src-noconflict/mode-text\");\nvar mode_json_1 = require(\"ace-builds/src-noconflict/mode-json\");\nvar theme_ambiance_1 = require(\"ace-builds/src-noconflict/theme-ambiance\");\nvar theme_dreamweaver_1 = require(\"ace-builds/src-noconflict/theme-dreamweaver\");\n_ace_available_1.aceAvailable(!!ace_1.default);\nif (!window['ace'] && _ace_available_1.aceAvailable()) {\n    ace_1.default.config.setModuleUrl('ace/ext/language_tools', ext_language_tools_1.default);\n    ace_1.default.config.setModuleUrl('ace/mode/sql', mode_sql_1.default);\n    ace_1.default.config.setModuleUrl('ace/mode/text', mode_text_1.default);\n    ace_1.default.config.setModuleUrl('ace/mode/json', mode_json_1.default);\n    ace_1.default.config.setModuleUrl('ace/theme/ambiance', theme_ambiance_1.default);\n    ace_1.default.config.setModuleUrl('ace/theme/dreamweaver', theme_dreamweaver_1.default);\n}\nrequire(\"./_ace-mode-doc-comment\");\nrequire(\"./_ace-mode-criteria\");\nko.bindingHandlers['dxAceEditor'] = {\n    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n        var values = valueAccessor(), text = values.value, editorContainer = values.editorContainer, editor, shouldProcessOnChangeEvent = true, _setEditorText = function (editorInstance, text) {\n            shouldProcessOnChangeEvent = false;\n            editorInstance.getSession().setValue((text && text.toString()) || '');\n            editorInstance.clearSelection();\n            editorInstance.getSession().getUndoManager().reset();\n            shouldProcessOnChangeEvent = true;\n        };\n        if (ace_1.default) {\n            var showGutter = values.options.showGutter != undefined ? values.options.showGutter : true;\n            var additionalOptions = values.additionalOptions;\n            var langTools = ace_1.default.require('ace/ext/language_tools');\n            editor = ace_1.default.edit(element);\n            var guid = ko.observable(null);\n            var theme = values.theme;\n            if (!theme)\n                theme = _utils_1.isDarkTheme() ? 'ace/theme/ambiance' : 'ace/theme/dreamweaver';\n            editor.setTheme(theme);\n            editor.$blockScrolling = Infinity;\n            var languageMode = viewModel.languageHelper.getLanguageMode();\n            var session = editor.getSession();\n            session.gutterRenderer = {\n                getWidth: function (session, lastLineNumber, config) {\n                    return lastLineNumber.toString().length * config.characterWidth;\n                },\n                getText: function (session, row) {\n                    return row + 1;\n                }\n            };\n            session.setMode(languageMode);\n            var onBlur = function () { editor.completer && editor.completer.popup && editor.completer.popup.hide(); }, onChange, onFocus, onChangeAnnotation;\n            if (additionalOptions) {\n                if (additionalOptions.onChange) {\n                    var timer = null;\n                    onChange = function (e) {\n                        if (timer !== null)\n                            clearTimeout(timer);\n                        if (shouldProcessOnChangeEvent) {\n                            timer = setTimeout(function () {\n                                if (text() !== session.getValue() || (session.getAnnotations() || []).some(function (x) { return x.type === 'error'; })) {\n                                    additionalOptions.onChange(session);\n                                }\n                            }, additionalOptions && additionalOptions.changeTimeout || 1000);\n                        }\n                    };\n                    session.on('change', onChange);\n                }\n                if (additionalOptions.overrideEditorFocus) {\n                    editor.focus = function (a, e) {\n                        editor.textInput.getElement().focus();\n                    };\n                }\n                if (additionalOptions.onFocus) {\n                    onFocus = function () { additionalOptions.onFocus(session); };\n                    editor.on('focus', onFocus);\n                }\n                if (additionalOptions.onBlur) {\n                    onBlur = function () {\n                        editor.completer && editor.completer.popup && editor.completer.popup.hide();\n                        return additionalOptions.onBlur(session);\n                    };\n                }\n                if (additionalOptions.onChangeAnnotation) {\n                    onChangeAnnotation = function (a, e) {\n                        additionalOptions.onChangeAnnotation(e);\n                    };\n                    session.on('changeAnnotation', onChangeAnnotation);\n                }\n            }\n            editor.on('blur', onBlur);\n            var completers = viewModel.languageHelper.createCompleters(editor, bindingContext, viewModel);\n            langTools.setCompleters(completers);\n            editor.setOptions(values.options);\n            if (additionalOptions && 'setUseWrapMode' in additionalOptions) {\n                editor.getSession().setUseWrapMode(additionalOptions.setUseWrapMode);\n            }\n            if (!showGutter) {\n                editor.renderer.setShowGutter(showGutter);\n            }\n            if (editor.renderer.$gutter) {\n                var gutterClassName = editor.renderer.$gutter.className + ' dxd-border-primary dxd-text-primary dxd-back-primary';\n                editor.renderer.$gutter.className = gutterClassName;\n            }\n            var oldMouseMove = editor._defaultHandlers.guttermousemove;\n            editor._defaultHandlers.guttermousemove = function (e) {\n                var rect = element.getBoundingClientRect();\n                e.x = e.x - rect.left;\n                e.y = e.y - rect.top;\n                oldMouseMove(e);\n            };\n            if (ko.isSubscribable(text)) {\n                var subscription = text.subscribe(function (newText) {\n                    if (newText !== session.getValue()) {\n                        _setEditorText(editor, newText);\n                    }\n                    if (additionalOptions && additionalOptions.onValueChange)\n                        additionalOptions.onValueChange(editor);\n                });\n            }\n            _setEditorText(editor, ko.unwrap(text));\n            if (values.callbacks)\n                values.callbacks.focus = function () {\n                    setTimeout(function () {\n                        editor.textInput.getElement().focus();\n                    }, 10);\n                };\n            _internal_1.addDisposeCallback(element, function () {\n                editor.completers && editor.completers.splice(0);\n                editor._defaultHandlers.guttermousemove = oldMouseMove;\n                subscription.dispose();\n                if (values.callbacks)\n                    values.callbacks.focus = $.noop;\n                completers.forEach(function (x) { return x.dispose && x.dispose(); });\n                onBlur && editor.off('blur', onBlur);\n                onFocus && editor.off('focus', onFocus);\n                onChange && session.off('change', onChange);\n                onChangeAnnotation && session.off('changeAnnotation', onChangeAnnotation);\n                editor.destroy();\n            });\n        }\n        if (ko.isObservable(editorContainer)) {\n            editorContainer(editor);\n        }\n    }\n};\n"]},"metadata":{},"sourceType":"script"}