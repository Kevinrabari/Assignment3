{"ast":null,"code":"/**\n* DevExpress Analytics (query-builder\\dataSource\\dataSourceParameter.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DataSourceParameter = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _utils_1 = require(\"../../widgets/_utils\");\n\nvar _utils_2 = require(\"../../property-grid/widgets/internal/_utils\");\n\nvar dbColumn_1 = require(\"./dbColumn\");\n\nvar _localization_1 = require(\"../../property-grid/localization/_localization\");\n\nvar utils_1 = require(\"../../serializer/utils\");\n\nvar _editorTypeMapper_1 = require(\"../../core/internal/_editorTypeMapper\");\n\nvar dataSourceParameterMeta_1 = require(\"./dataSourceParameterMeta\");\n\nvar expressionFunctions_1 = require(\"../widgets/expressionFunctions\");\n\nvar serializer_1 = require(\"../../serializer/serializer\");\n\nvar _utils_3 = require(\"../../serializer/_utils\");\n\nfunction integerValueConverter(val, defaultVal, type) {\n  return _utils_1.integerValueConverter(val, defaultVal, type);\n}\n\nfunction floatValueConverter(val, defaultVal, type) {\n  return _utils_1.floatValueConverter(val, defaultVal, type);\n}\n\nfunction expressionValueConverter(val) {\n  if (val instanceof Date) {\n    var prependZero = function (x) {\n      return (x < 10 ? '0' : '') + x;\n    };\n\n    return _utils_2.formatUnicorn('#{0}/{1}/{2} {3}:{4}#', prependZero(val.getMonth() + 1), prependZero(val.getDate()), val.getFullYear(), prependZero(val.getHours()), prependZero(val.getMinutes()));\n  }\n\n  return (val || '').toString();\n}\n\nvar DataSourceParameterTypeValue = function () {\n  function DataSourceParameterTypeValue(name, defaultValue, _valueConverter, realTypeName) {\n    var _this = this;\n\n    this.name = name;\n    this.defaultValue = defaultValue;\n    this.realTypeName = realTypeName;\n    if (_valueConverter) this.valueConverter = function (val) {\n      return _valueConverter(val, defaultValue, _this.name);\n    };\n  }\n\n  Object.defineProperty(DataSourceParameterTypeValue.prototype, \"specifics\", {\n    get: function () {\n      return dbColumn_1.DBColumn.GetSpecific(this.realTypeName || this.name);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return DataSourceParameterTypeValue;\n}();\n\nvar tryParseDate = function (val) {\n  var date;\n\n  try {\n    date = _localization_1.parseDate(val);\n  } catch (e) {\n    date = dateDefaultValue();\n  }\n\n  return date;\n};\n\nvar dateDefaultValue = function () {\n  var date = new Date();\n  date.setHours(0, 0, 0, 0);\n  return date;\n};\n\nvar DataSourceParameter = function (_super) {\n  __extends(DataSourceParameter, _super);\n\n  function DataSourceParameter(model, serializer, _serializationsInfo) {\n    if (_serializationsInfo === void 0) {\n      _serializationsInfo = dataSourceParameterMeta_1.dsParameterSerializationInfo;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._serializationsInfo = _serializationsInfo;\n    _this._valueInfo = ko.observable(dataSourceParameterMeta_1.parameterValueSerializationsInfo);\n    _this._parametersFunctions = expressionFunctions_1.expressionFunctions;\n    _this.isValid = ko.observable(true);\n    serializer = serializer || new serializer_1.ModelSerializer();\n    serializer.deserialize(_this, _utils_3.extend(model, {\n      '@ItemType': 'Parameter'\n    }));\n\n    _this._disposables.push(_this.name = ko.pureComputed({\n      read: function () {\n        return _this._name();\n      },\n      write: function (value) {\n        if (dataSourceParameterMeta_1.validateName(value)) _this._name(value);\n      }\n    }));\n\n    _this._expressionValue = ko.observable({\n      value: _this._value,\n      functions: _this._parametersFunctions\n    });\n\n    _this._disposables.push(_this.type.subscribe(function (val) {\n      if (_editorTypeMapper_1.IsDataAccessExpression(val)) {\n        _this.resultType(_this._previousResultType);\n      } else {\n        _this.resultType(null);\n\n        _this._previousResultType = val;\n      }\n\n      _this._updateValueInfo(val);\n    }));\n\n    _this._previousResultType = _editorTypeMapper_1.IsDataAccessExpression(_this.type.peek()) ? _this.resultType() : _this.type();\n    _this.value = ko.pureComputed({\n      read: function () {\n        return _editorTypeMapper_1.IsDataAccessExpression(_this.type()) ? _this._expressionValue() : _this._value();\n      },\n      write: function (val) {\n        _this._value(val);\n      }\n    });\n\n    _this._updateValueInfo(_this.type.peek());\n\n    return _this;\n  }\n\n  DataSourceParameter._getTypeValue = function (typeName, resultType) {\n    if (resultType === void 0) {\n      resultType = null;\n    }\n\n    var result = DataSourceParameter._typeValues.filter(function (type) {\n      return type.name === typeName;\n    });\n\n    if (result.length > 0) {\n      if (resultType && _editorTypeMapper_1.IsDataAccessExpression(typeName)) result[0].realTypeName = resultType;\n      return result[0];\n    }\n\n    return {\n      name: typeName,\n      defaultValue: null,\n      specifics: 'String',\n      disableEditor: true\n    };\n  };\n\n  DataSourceParameter.prototype._getTypeValue = function (typeName) {\n    return DataSourceParameter._getTypeValue(typeName, this.resultType());\n  };\n\n  DataSourceParameter.prototype._tryConvertValue = function (value, typeValue) {\n    if (!DataSourceParameter._isValueValid(value)) return typeValue.defaultValue;\n\n    var converter = typeValue.valueConverter || function (val) {\n      return val;\n    },\n        newValue = converter(value);\n\n    return DataSourceParameter._isValueValid(newValue) ? newValue : typeValue.defaultValue;\n  };\n\n  DataSourceParameter._isValueValid = function (value) {\n    return value !== void 0 && value !== null && !isNaN(typeof value === 'string' ? '' : value);\n  };\n\n  DataSourceParameter.prototype.getEditorType = function (type) {\n    return _editorTypeMapper_1.getEditorType(type);\n  };\n\n  DataSourceParameter.prototype._updateValueInfo = function (newType) {\n    var _this = this;\n\n    var typeValue = this._getTypeValue(newType);\n\n    var newValue = this._tryConvertValue(this._value(), typeValue);\n\n    var expressionOptions = this._expressionValue.peek();\n\n    this._expressionValue(null);\n\n    this._value(null);\n\n    this._valueInfo(_utils_3.extend({}, dataSourceParameterMeta_1.parameterValueSerializationsInfo, {\n      editor: this.getEditorType(typeValue.name),\n      disabled: typeValue.disableEditor === true,\n      editorOptions: {\n        onFocusOut: function (params) {\n          _this.isValid(params.component.option('isValid'));\n        }\n      }\n    }));\n\n    this._expressionValue(expressionOptions);\n\n    this._value(newValue);\n  };\n\n  Object.defineProperty(DataSourceParameter.prototype, \"specifics\", {\n    get: function () {\n      var realTypeName = _editorTypeMapper_1.IsDataAccessExpression(this.type.peek()) ? this.resultType() : this.type();\n\n      var result = DataSourceParameter._typeValues.filter(function (type) {\n        return type.name === realTypeName;\n      });\n\n      if (result.length > 0) return result[0].specifics;\n      return 'string';\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  DataSourceParameter.prototype.getInfo = function () {\n    if (this.type) {\n      var info = _utils_3.extend(true, [], this._serializationsInfo);\n\n      info.splice(info.indexOf(info.filter(function (prop) {\n        return prop.propertyName === 'value';\n      })[0]), 1, this._valueInfo());\n      return info;\n    }\n\n    return this._serializationsInfo;\n  };\n\n  DataSourceParameter.prototype.isPropertyVisible = function (propName) {\n    if (propName === 'resultType') return _editorTypeMapper_1.IsDataAccessExpression(this.type());\n    return true;\n  };\n\n  DataSourceParameter._typeValues = [new DataSourceParameterTypeValue('System.DateTime', dateDefaultValue(), tryParseDate), new DataSourceParameterTypeValue('System.String', ''), new DataSourceParameterTypeValue('System.SByte', '0', integerValueConverter), new DataSourceParameterTypeValue('System.Int16', '0', integerValueConverter), new DataSourceParameterTypeValue('System.Int32', '0', integerValueConverter), new DataSourceParameterTypeValue('System.Int64', '0', integerValueConverter), new DataSourceParameterTypeValue('System.Byte', '0', integerValueConverter), new DataSourceParameterTypeValue('System.UInt16', '0', integerValueConverter), new DataSourceParameterTypeValue('System.UInt32', '0', integerValueConverter), new DataSourceParameterTypeValue('System.UInt64', '0', integerValueConverter), new DataSourceParameterTypeValue('System.Decimal', '0', floatValueConverter), new DataSourceParameterTypeValue('System.Double', '0', floatValueConverter), new DataSourceParameterTypeValue('System.Single', '0', floatValueConverter), new DataSourceParameterTypeValue('System.Boolean', false, function (val) {\n    return val !== void 0 ? String(val).toLowerCase() === 'true' : val;\n  }), new DataSourceParameterTypeValue('System.Guid', '00000000-0000-0000-0000-000000000000'), new DataSourceParameterTypeValue(_editorTypeMapper_1.ExpressionType, '', expressionValueConverter), new DataSourceParameterTypeValue('System.Char', '')];\n  return DataSourceParameter;\n}(utils_1.Disposable);\n\nexports.DataSourceParameter = DataSourceParameter;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/query-builder/dataSource/dataSourceParameter.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","DataSourceParameter","ko","require","_utils_1","_utils_2","dbColumn_1","_localization_1","utils_1","_editorTypeMapper_1","dataSourceParameterMeta_1","expressionFunctions_1","serializer_1","_utils_3","integerValueConverter","val","defaultVal","type","floatValueConverter","expressionValueConverter","Date","prependZero","x","formatUnicorn","getMonth","getDate","getFullYear","getHours","getMinutes","toString","DataSourceParameterTypeValue","name","defaultValue","_valueConverter","realTypeName","_this","valueConverter","get","DBColumn","GetSpecific","enumerable","configurable","tryParseDate","date","parseDate","e","dateDefaultValue","setHours","_super","model","serializer","_serializationsInfo","dsParameterSerializationInfo","_valueInfo","observable","parameterValueSerializationsInfo","_parametersFunctions","expressionFunctions","isValid","ModelSerializer","deserialize","extend","_disposables","push","pureComputed","read","_name","write","validateName","_expressionValue","_value","functions","subscribe","IsDataAccessExpression","resultType","_previousResultType","_updateValueInfo","peek","_getTypeValue","typeName","result","_typeValues","filter","length","specifics","disableEditor","_tryConvertValue","typeValue","_isValueValid","converter","newValue","isNaN","getEditorType","newType","expressionOptions","editor","disabled","editorOptions","onFocusOut","params","component","option","getInfo","info","splice","indexOf","prop","propertyName","isPropertyVisible","propName","toLowerCase","ExpressionType","Disposable"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (query-builder\\dataSource\\dataSourceParameter.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataSourceParameter = void 0;\nvar ko = require(\"knockout\");\nvar _utils_1 = require(\"../../widgets/_utils\");\nvar _utils_2 = require(\"../../property-grid/widgets/internal/_utils\");\nvar dbColumn_1 = require(\"./dbColumn\");\nvar _localization_1 = require(\"../../property-grid/localization/_localization\");\nvar utils_1 = require(\"../../serializer/utils\");\nvar _editorTypeMapper_1 = require(\"../../core/internal/_editorTypeMapper\");\nvar dataSourceParameterMeta_1 = require(\"./dataSourceParameterMeta\");\nvar expressionFunctions_1 = require(\"../widgets/expressionFunctions\");\nvar serializer_1 = require(\"../../serializer/serializer\");\nvar _utils_3 = require(\"../../serializer/_utils\");\nfunction integerValueConverter(val, defaultVal, type) {\n    return _utils_1.integerValueConverter(val, defaultVal, type);\n}\nfunction floatValueConverter(val, defaultVal, type) {\n    return _utils_1.floatValueConverter(val, defaultVal, type);\n}\nfunction expressionValueConverter(val) {\n    if (val instanceof Date) {\n        var prependZero = function (x) { return (x < 10 ? '0' : '') + x; };\n        return _utils_2.formatUnicorn('#{0}/{1}/{2} {3}:{4}#', prependZero(val.getMonth() + 1), prependZero(val.getDate()), val.getFullYear(), prependZero(val.getHours()), prependZero(val.getMinutes()));\n    }\n    return (val || '').toString();\n}\nvar DataSourceParameterTypeValue = (function () {\n    function DataSourceParameterTypeValue(name, defaultValue, _valueConverter, realTypeName) {\n        var _this = this;\n        this.name = name;\n        this.defaultValue = defaultValue;\n        this.realTypeName = realTypeName;\n        if (_valueConverter)\n            this.valueConverter = function (val) { return _valueConverter(val, defaultValue, _this.name); };\n    }\n    Object.defineProperty(DataSourceParameterTypeValue.prototype, \"specifics\", {\n        get: function () {\n            return dbColumn_1.DBColumn.GetSpecific(this.realTypeName || this.name);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DataSourceParameterTypeValue;\n}());\nvar tryParseDate = function (val) {\n    var date;\n    try {\n        date = _localization_1.parseDate(val);\n    }\n    catch (e) {\n        date = dateDefaultValue();\n    }\n    return date;\n};\nvar dateDefaultValue = function () {\n    var date = new Date();\n    date.setHours(0, 0, 0, 0);\n    return date;\n};\nvar DataSourceParameter = (function (_super) {\n    __extends(DataSourceParameter, _super);\n    function DataSourceParameter(model, serializer, _serializationsInfo) {\n        if (_serializationsInfo === void 0) { _serializationsInfo = dataSourceParameterMeta_1.dsParameterSerializationInfo; }\n        var _this = _super.call(this) || this;\n        _this._serializationsInfo = _serializationsInfo;\n        _this._valueInfo = ko.observable(dataSourceParameterMeta_1.parameterValueSerializationsInfo);\n        _this._parametersFunctions = expressionFunctions_1.expressionFunctions;\n        _this.isValid = ko.observable(true);\n        serializer = serializer || new serializer_1.ModelSerializer();\n        serializer.deserialize(_this, _utils_3.extend(model, { '@ItemType': 'Parameter' }));\n        _this._disposables.push(_this.name = ko.pureComputed({\n            read: function () { return _this._name(); },\n            write: function (value) { if (dataSourceParameterMeta_1.validateName(value))\n                _this._name(value); }\n        }));\n        _this._expressionValue = ko.observable({\n            value: _this._value,\n            functions: _this._parametersFunctions\n        });\n        _this._disposables.push(_this.type.subscribe(function (val) {\n            if (_editorTypeMapper_1.IsDataAccessExpression(val)) {\n                _this.resultType(_this._previousResultType);\n            }\n            else {\n                _this.resultType(null);\n                _this._previousResultType = val;\n            }\n            _this._updateValueInfo(val);\n        }));\n        _this._previousResultType = (_editorTypeMapper_1.IsDataAccessExpression(_this.type.peek()))\n            ? _this.resultType()\n            : _this.type();\n        _this.value = ko.pureComputed({\n            read: function () {\n                return _editorTypeMapper_1.IsDataAccessExpression(_this.type()) ? _this._expressionValue() : _this._value();\n            },\n            write: function (val) {\n                _this._value(val);\n            }\n        });\n        _this._updateValueInfo(_this.type.peek());\n        return _this;\n    }\n    DataSourceParameter._getTypeValue = function (typeName, resultType) {\n        if (resultType === void 0) { resultType = null; }\n        var result = DataSourceParameter._typeValues.filter(function (type) { return type.name === typeName; });\n        if (result.length > 0) {\n            if (resultType && _editorTypeMapper_1.IsDataAccessExpression(typeName))\n                result[0].realTypeName = resultType;\n            return result[0];\n        }\n        return { name: typeName, defaultValue: null, specifics: 'String', disableEditor: true };\n    };\n    DataSourceParameter.prototype._getTypeValue = function (typeName) {\n        return DataSourceParameter._getTypeValue(typeName, this.resultType());\n    };\n    DataSourceParameter.prototype._tryConvertValue = function (value, typeValue) {\n        if (!DataSourceParameter._isValueValid(value))\n            return typeValue.defaultValue;\n        var converter = typeValue.valueConverter || (function (val) { return val; }), newValue = converter(value);\n        return DataSourceParameter._isValueValid(newValue) ? newValue : typeValue.defaultValue;\n    };\n    DataSourceParameter._isValueValid = function (value) {\n        return value !== void 0 && value !== null && !isNaN(typeof value === 'string' ? '' : value);\n    };\n    DataSourceParameter.prototype.getEditorType = function (type) {\n        return _editorTypeMapper_1.getEditorType(type);\n    };\n    DataSourceParameter.prototype._updateValueInfo = function (newType) {\n        var _this = this;\n        var typeValue = this._getTypeValue(newType);\n        var newValue = this._tryConvertValue(this._value(), typeValue);\n        var expressionOptions = this._expressionValue.peek();\n        this._expressionValue(null);\n        this._value(null);\n        this._valueInfo(_utils_3.extend({}, dataSourceParameterMeta_1.parameterValueSerializationsInfo, {\n            editor: this.getEditorType(typeValue.name),\n            disabled: typeValue.disableEditor === true,\n            editorOptions: {\n                onFocusOut: function (params) {\n                    _this.isValid(params.component.option('isValid'));\n                }\n            }\n        }));\n        this._expressionValue(expressionOptions);\n        this._value(newValue);\n    };\n    Object.defineProperty(DataSourceParameter.prototype, \"specifics\", {\n        get: function () {\n            var realTypeName = (_editorTypeMapper_1.IsDataAccessExpression(this.type.peek()))\n                ? this.resultType()\n                : this.type();\n            var result = DataSourceParameter._typeValues.filter(function (type) { return type.name === realTypeName; });\n            if (result.length > 0)\n                return result[0].specifics;\n            return 'string';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DataSourceParameter.prototype.getInfo = function () {\n        if (this.type) {\n            var info = _utils_3.extend(true, [], this._serializationsInfo);\n            info.splice(info.indexOf(info.filter(function (prop) { return prop.propertyName === 'value'; })[0]), 1, this._valueInfo());\n            return info;\n        }\n        return this._serializationsInfo;\n    };\n    DataSourceParameter.prototype.isPropertyVisible = function (propName) {\n        if (propName === 'resultType')\n            return _editorTypeMapper_1.IsDataAccessExpression(this.type());\n        return true;\n    };\n    DataSourceParameter._typeValues = [\n        new DataSourceParameterTypeValue('System.DateTime', dateDefaultValue(), tryParseDate),\n        new DataSourceParameterTypeValue('System.String', ''),\n        new DataSourceParameterTypeValue('System.SByte', '0', integerValueConverter),\n        new DataSourceParameterTypeValue('System.Int16', '0', integerValueConverter),\n        new DataSourceParameterTypeValue('System.Int32', '0', integerValueConverter),\n        new DataSourceParameterTypeValue('System.Int64', '0', integerValueConverter),\n        new DataSourceParameterTypeValue('System.Byte', '0', integerValueConverter),\n        new DataSourceParameterTypeValue('System.UInt16', '0', integerValueConverter),\n        new DataSourceParameterTypeValue('System.UInt32', '0', integerValueConverter),\n        new DataSourceParameterTypeValue('System.UInt64', '0', integerValueConverter),\n        new DataSourceParameterTypeValue('System.Decimal', '0', floatValueConverter),\n        new DataSourceParameterTypeValue('System.Double', '0', floatValueConverter),\n        new DataSourceParameterTypeValue('System.Single', '0', floatValueConverter),\n        new DataSourceParameterTypeValue('System.Boolean', false, function (val) { return val !== void 0 ? String(val).toLowerCase() === 'true' : val; }),\n        new DataSourceParameterTypeValue('System.Guid', '00000000-0000-0000-0000-000000000000'),\n        new DataSourceParameterTypeValue(_editorTypeMapper_1.ExpressionType, '', expressionValueConverter),\n        new DataSourceParameterTypeValue('System.Char', ''),\n    ];\n    return DataSourceParameter;\n}(utils_1.Disposable));\nexports.DataSourceParameter = DataSourceParameter;\n"]},"metadata":{},"sourceType":"script"}