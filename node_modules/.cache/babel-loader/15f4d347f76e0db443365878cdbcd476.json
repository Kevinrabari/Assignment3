{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_window-definition-editor.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.windowDefinitionEditor = exports.WindowDefinitionEditor = exports.WindowDefinitionMode = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar data_item_1 = require(\"../../model/data-item/data-item\");\n\nvar specific_calc_window_definition_1 = require(\"../../model/data-item/window-definition/specific-calc-window-definition\");\n\nvar _undo_engine_helper_1 = require(\"../../model/internal/_undo-engine-helper\");\n\nvar _form_adapter_editors_1 = require(\"../form-adapter/_form-adapter-editors\");\n\nvar _object_properties_wrapper_1 = require(\"../form-adapter/_object-properties-wrapper\");\n\nvar _display_name_provider_1 = require(\"../_display-name-provider\");\n\nvar WindowDefinitionMode;\n\n(function (WindowDefinitionMode) {\n  WindowDefinitionMode[WindowDefinitionMode[\"Predefined\"] = 0] = \"Predefined\";\n  WindowDefinitionMode[WindowDefinitionMode[\"Specific\"] = 1] = \"Specific\";\n})(WindowDefinitionMode = exports.WindowDefinitionMode || (exports.WindowDefinitionMode = {}));\n\nvar WindowDefinitionEditor = function () {\n  function WindowDefinitionEditor(windowDefinition, _params) {\n    var _this = this;\n\n    this._params = _params;\n    this.mode = ko.observable(null);\n    this.value = windowDefinition.windowDefinition;\n\n    if (this.value() instanceof specific_calc_window_definition_1.SpecificWindowDefinition) {\n      this.mode(WindowDefinitionMode.Specific);\n      var definition = this.value();\n      definition._dimensionsInfoPatcher = WindowDefinitionEditor.createPatchSpecificWindowDimensionsInfo(definition, _params.dataDashboardItem, _params.dataSourceBrowser);\n    } else {\n      this.mode(WindowDefinitionMode.Predefined);\n    }\n\n    this.mode.subscribe(this.setValue, this);\n    this.formAdapterWrapper = ko.pureComputed(function () {\n      if (_this.value()) {\n        return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n          model: _this.value(),\n          properties: _this.value().getInfo()\n        });\n      }\n    });\n  }\n\n  Object.defineProperty(WindowDefinitionEditor.prototype, \"dataSource\", {\n    get: function () {\n      return [{\n        value: WindowDefinitionMode.Predefined,\n        displayValue: 'DashboardWebStringId.Calculations.WindowDefinitionModePredefined'\n      }, {\n        value: WindowDefinitionMode.Specific,\n        displayValue: 'DashboardWebStringId.Calculations.WindowDefinitionModeSpecific'\n      }];\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  WindowDefinitionEditor.prototype.setValue = function (newMode) {\n    if (newMode === WindowDefinitionMode.Predefined) {\n      this.value(this._params.dataDashboardItem._getDefaultCalculationWindowDefinition());\n    } else {\n      var windowDefinition = new specific_calc_window_definition_1.SpecificWindowDefinition();\n      windowDefinition._dimensionsInfoPatcher = WindowDefinitionEditor.createPatchSpecificWindowDimensionsInfo(windowDefinition, this._params.dataDashboardItem, this._params.dataSourceBrowser);\n      this.value(windowDefinition);\n    }\n  };\n\n  WindowDefinitionEditor.createPatchSpecificWindowDimensionsInfo = function (definition, dataDashboardItem, dataSourceBrowser) {\n    return function (propertyInfo) {\n      var lookupValueFromDimension = function (d) {\n        return {\n          value: d.uniqueName(),\n          displayValue: _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, dataDashboardItem, d)\n        };\n      };\n\n      var allDimensions = dataDashboardItem._dimensions.map(lookupValueFromDimension);\n\n      var getAvailableDimensions = function () {\n        return dataDashboardItem._dimensions.filter(function (d) {\n          return !definition.dimensions().some(function (wd) {\n            return wd.uniqueName() === d.uniqueName();\n          });\n        }).map(lookupValueFromDimension);\n      };\n\n      var editorOptions = {\n        dataFields: ['uniqueName'],\n        gridColumns: [{\n          dataField: 'uniqueName',\n          lookup: {\n            displayExpr: 'displayValue',\n            valueExpr: 'value'\n          },\n          calculateDisplayValue: function (gridRow) {\n            var dimension = allDimensions.filter(function (d) {\n              return d.value === gridRow.uniqueName;\n            })[0];\n            return dimension && dimension.displayValue || gridRow.uniqueName;\n          }\n        }],\n        enableAddItem: function () {\n          return !!getAvailableDimensions().length;\n        },\n        noDataText: 'DashboardWebStringId.CollectionEditor.NoItems',\n        createNewItemHandler: function () {\n          if (getAvailableDimensions().length > 0) {\n            return new data_item_1.DataItemLink(dataDashboardItem, {\n              '@DefaultId': getAvailableDimensions()[0].value\n            });\n          }\n        },\n        customizeInlineEditor: function (e) {\n          var uniqueName = e.row && e.row.data && e.row.data.uniqueName;\n          var availableDimensions = getAvailableDimensions();\n\n          if (availableDimensions.filter(function (d) {\n            return d.value === uniqueName;\n          }).length) {\n            e.editorOptions.dataSource = availableDimensions;\n          } else {\n            e.editorOptions.dataSource = allDimensions.filter(function (d) {\n              return d.value === uniqueName;\n            }).concat(availableDimensions);\n          }\n        }\n      };\n      return __assign(__assign({}, propertyInfo), {\n        formAdapterItem: _form_adapter_editors_1.inlineEditCollectionEditor(editorOptions)\n      });\n    };\n  };\n\n  __decorate([_undo_engine_helper_1.wrapWithUndoRedo], WindowDefinitionEditor.prototype, \"setValue\", null);\n\n  return WindowDefinitionEditor;\n}();\n\nexports.WindowDefinitionEditor = WindowDefinitionEditor;\n\nvar windowDefinitionEditor = function (params) {\n  return function (context) {\n    return {\n      template: function (args, itemElement) {\n        var windowDefinition = args.component.option('formData')[args.dataField];\n        var viewModel = new WindowDefinitionEditor(windowDefinition, params);\n        ko.applyBindingsToNode(_jquery_helpers_1.$unwrap(itemElement), {\n          template: {\n            name: 'dx-dashboard-window-definition-editor',\n            data: viewModel\n          }\n        }, context.bindingContext);\n      }\n    };\n  };\n};\n\nexports.windowDefinitionEditor = windowDefinitionEditor;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/calculations/_window-definition-editor.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","d","Reflect","decorate","defineProperty","exports","value","windowDefinitionEditor","WindowDefinitionEditor","WindowDefinitionMode","ko","require","_jquery_helpers_1","data_item_1","specific_calc_window_definition_1","_undo_engine_helper_1","_form_adapter_editors_1","_object_properties_wrapper_1","_display_name_provider_1","windowDefinition","_params","_this","mode","observable","SpecificWindowDefinition","Specific","definition","_dimensionsInfoPatcher","createPatchSpecificWindowDimensionsInfo","dataDashboardItem","dataSourceBrowser","Predefined","subscribe","setValue","formAdapterWrapper","pureComputed","ObjectPropertiesWrapper","model","properties","getInfo","get","displayValue","enumerable","configurable","newMode","_getDefaultCalculationWindowDefinition","propertyInfo","lookupValueFromDimension","uniqueName","getDataItemDisplayName","allDimensions","_dimensions","map","getAvailableDimensions","filter","dimensions","some","wd","editorOptions","dataFields","gridColumns","dataField","lookup","displayExpr","valueExpr","calculateDisplayValue","gridRow","dimension","enableAddItem","noDataText","createNewItemHandler","DataItemLink","customizeInlineEditor","e","row","data","availableDimensions","dataSource","concat","formAdapterItem","inlineEditCollectionEditor","wrapWithUndoRedo","params","context","template","args","itemElement","component","option","viewModel","applyBindingsToNode","$unwrap","name","bindingContext"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_window-definition-editor.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.windowDefinitionEditor = exports.WindowDefinitionEditor = exports.WindowDefinitionMode = void 0;\nvar ko = require(\"knockout\");\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar data_item_1 = require(\"../../model/data-item/data-item\");\nvar specific_calc_window_definition_1 = require(\"../../model/data-item/window-definition/specific-calc-window-definition\");\nvar _undo_engine_helper_1 = require(\"../../model/internal/_undo-engine-helper\");\nvar _form_adapter_editors_1 = require(\"../form-adapter/_form-adapter-editors\");\nvar _object_properties_wrapper_1 = require(\"../form-adapter/_object-properties-wrapper\");\nvar _display_name_provider_1 = require(\"../_display-name-provider\");\nvar WindowDefinitionMode;\n(function (WindowDefinitionMode) {\n    WindowDefinitionMode[WindowDefinitionMode[\"Predefined\"] = 0] = \"Predefined\";\n    WindowDefinitionMode[WindowDefinitionMode[\"Specific\"] = 1] = \"Specific\";\n})(WindowDefinitionMode = exports.WindowDefinitionMode || (exports.WindowDefinitionMode = {}));\nvar WindowDefinitionEditor = (function () {\n    function WindowDefinitionEditor(windowDefinition, _params) {\n        var _this = this;\n        this._params = _params;\n        this.mode = ko.observable(null);\n        this.value = windowDefinition.windowDefinition;\n        if (this.value() instanceof specific_calc_window_definition_1.SpecificWindowDefinition) {\n            this.mode(WindowDefinitionMode.Specific);\n            var definition = this.value();\n            definition._dimensionsInfoPatcher = WindowDefinitionEditor.createPatchSpecificWindowDimensionsInfo(definition, _params.dataDashboardItem, _params.dataSourceBrowser);\n        }\n        else {\n            this.mode(WindowDefinitionMode.Predefined);\n        }\n        this.mode.subscribe(this.setValue, this);\n        this.formAdapterWrapper = ko.pureComputed(function () {\n            if (_this.value()) {\n                return new _object_properties_wrapper_1.ObjectPropertiesWrapper({ model: _this.value(), properties: _this.value().getInfo() });\n            }\n        });\n    }\n    Object.defineProperty(WindowDefinitionEditor.prototype, \"dataSource\", {\n        get: function () {\n            return [\n                { value: WindowDefinitionMode.Predefined, displayValue: 'DashboardWebStringId.Calculations.WindowDefinitionModePredefined' },\n                { value: WindowDefinitionMode.Specific, displayValue: 'DashboardWebStringId.Calculations.WindowDefinitionModeSpecific' }\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    WindowDefinitionEditor.prototype.setValue = function (newMode) {\n        if (newMode === WindowDefinitionMode.Predefined) {\n            this.value(this._params.dataDashboardItem._getDefaultCalculationWindowDefinition());\n        }\n        else {\n            var windowDefinition = new specific_calc_window_definition_1.SpecificWindowDefinition();\n            windowDefinition._dimensionsInfoPatcher = WindowDefinitionEditor.createPatchSpecificWindowDimensionsInfo(windowDefinition, this._params.dataDashboardItem, this._params.dataSourceBrowser);\n            this.value(windowDefinition);\n        }\n    };\n    WindowDefinitionEditor.createPatchSpecificWindowDimensionsInfo = function (definition, dataDashboardItem, dataSourceBrowser) { return function (propertyInfo) {\n        var lookupValueFromDimension = function (d) {\n            return {\n                value: d.uniqueName(),\n                displayValue: _display_name_provider_1.getDataItemDisplayName(dataSourceBrowser, dataDashboardItem, d)\n            };\n        };\n        var allDimensions = dataDashboardItem._dimensions.map(lookupValueFromDimension);\n        var getAvailableDimensions = function () {\n            return dataDashboardItem._dimensions\n                .filter(function (d) { return !definition.dimensions().some(function (wd) { return wd.uniqueName() === d.uniqueName(); }); })\n                .map(lookupValueFromDimension);\n        };\n        var editorOptions = {\n            dataFields: ['uniqueName'],\n            gridColumns: [{\n                    dataField: 'uniqueName',\n                    lookup: {\n                        displayExpr: 'displayValue',\n                        valueExpr: 'value',\n                    },\n                    calculateDisplayValue: function (gridRow) {\n                        var dimension = allDimensions.filter(function (d) { return d.value === gridRow.uniqueName; })[0];\n                        return dimension && dimension.displayValue || gridRow.uniqueName;\n                    }\n                }],\n            enableAddItem: function () { return !!getAvailableDimensions().length; },\n            noDataText: 'DashboardWebStringId.CollectionEditor.NoItems',\n            createNewItemHandler: function () {\n                if (getAvailableDimensions().length > 0) {\n                    return new data_item_1.DataItemLink(dataDashboardItem, { '@DefaultId': getAvailableDimensions()[0].value });\n                }\n            },\n            customizeInlineEditor: function (e) {\n                var uniqueName = e.row && e.row.data && e.row.data.uniqueName;\n                var availableDimensions = getAvailableDimensions();\n                if (availableDimensions.filter(function (d) { return d.value === uniqueName; }).length) {\n                    e.editorOptions.dataSource = availableDimensions;\n                }\n                else {\n                    e.editorOptions.dataSource = allDimensions\n                        .filter(function (d) { return d.value === uniqueName; })\n                        .concat(availableDimensions);\n                }\n            },\n        };\n        return __assign(__assign({}, propertyInfo), { formAdapterItem: _form_adapter_editors_1.inlineEditCollectionEditor(editorOptions) });\n    }; };\n    __decorate([\n        _undo_engine_helper_1.wrapWithUndoRedo\n    ], WindowDefinitionEditor.prototype, \"setValue\", null);\n    return WindowDefinitionEditor;\n}());\nexports.WindowDefinitionEditor = WindowDefinitionEditor;\nvar windowDefinitionEditor = function (params) { return function (context) {\n    return {\n        template: function (args, itemElement) {\n            var windowDefinition = args.component.option('formData')[args.dataField];\n            var viewModel = new WindowDefinitionEditor(windowDefinition, params);\n            ko.applyBindingsToNode(_jquery_helpers_1.$unwrap(itemElement), { template: { name: 'dx-dashboard-window-definition-editor', data: viewModel } }, context.bindingContext);\n        }\n    };\n}; };\nexports.windowDefinitionEditor = windowDefinitionEditor;\n"]},"metadata":{},"sourceType":"script"}