{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_geo-point-map-item-base.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.geoPointMapItemBase = void 0;\n\nvar themes_1 = require(\"devextreme/viz/themes\");\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar _utils_1 = require(\"../../data/_utils\");\n\nvar _z_index_1 = require(\"../../data/_z-index\");\n\nvar _map_item_1 = require(\"./_map-item\");\n\nvar geoPointMapItemBase = function (_super) {\n  __extends(geoPointMapItemBase, _super);\n\n  function geoPointMapItemBase(container, options) {\n    var _this = _super.call(this, container, options) || this;\n\n    var that = _this;\n\n    that.raiseTimerClusterizationDataRequest = function () {\n      var clientState = that._getClusterizationInfo();\n\n      if (clientState.clientSize.width > 0 && clientState.clientSize.height > 0) {\n        that._onDataRequest();\n      }\n\n      clearTimeout(that.timer);\n      that.timer = false;\n    };\n\n    return _this;\n  }\n\n  geoPointMapItemBase.prototype.initialDataRequestUnsafe = function () {\n    this._raiseClusterizationDataRequest();\n  };\n\n  geoPointMapItemBase.prototype.selectTupleUnsafe = function (tuple, state) {\n    var that = this;\n\n    that._getMarkerLayers().forEach(function (layer) {\n      layer.getElements().forEach(function (item) {\n        if (item.attribute('latSelection') == tuple[0].value[0] && item.attribute('lonSelection') == tuple[0].value[1]) {\n          item.selected(state);\n        }\n      });\n    });\n  };\n\n  geoPointMapItemBase.prototype._setSelectionUnsafe = function (values) {\n    _super.prototype._setSelectionUnsafe.call(this, values);\n\n    this.clearSelection();\n\n    if (values && values.length > 0) {\n      this._getMarkerLayers().forEach(function (layer) {\n        layer.getElements().forEach(function (item) {\n          values.forEach(function (value, i) {\n            if (item.attribute('latSelection') == value[0] && item.attribute('lonSelection') == value[1]) {\n              item.selected(true);\n            }\n          });\n        });\n      });\n    }\n  };\n\n  geoPointMapItemBase.prototype.renderContentUnsafe = function (element, changeExisting, afterRenderCallback) {\n    var options = _jquery_helpers_1.deepExtend(this._getMapViewerOptions(), this._getGeoPointMapViewerOptions());\n\n    this._renderContentInternal(element, changeExisting, options);\n\n    return false;\n  };\n\n  geoPointMapItemBase.prototype.renderPartialContentUnsafe = function () {\n    var viewModel = this.options.ViewModel;\n\n    this._updateMarkerLayers(viewModel);\n  };\n\n  geoPointMapItemBase.prototype.resetClientViewport = function () {\n    _super.prototype.resetClientViewport.call(this);\n\n    this._raiseClusterizationDataRequest();\n  };\n\n  geoPointMapItemBase.prototype.updateContentStateUnsafe = function () {\n    var that = this,\n        layers = that.mapViewer.option('layers');\n    layers.forEach(function (layer) {\n      if (layer.type === 'marker') layer.hoverEnabled = that._getCustomHoverEnabled();\n    });\n    this.mapViewer.option('layers', layers);\n  };\n\n  geoPointMapItemBase.prototype.forceUpdateClientState = function () {\n    if (this.hasWidget) {\n      this._onClientStateUpdate(this._getClientContext());\n    }\n  };\n\n  geoPointMapItemBase.prototype._getGeoPointMapViewerOptions = function () {\n    var that = this,\n        viewModel = that.options.ViewModel;\n    return {\n      layers: that._configureLayers(viewModel),\n      onClick: function (e) {\n        if (e.target && e.target.layer.type === 'marker') that._raiseItemClick(e.target);\n      },\n      legends: that._getLegends(viewModel),\n      tooltip: {\n        enabled: true,\n        zIndex: _z_index_1.zIndex.dashboardItemTooltips,\n        container: _utils_1.tooltipContainerSelector,\n        customizeTooltip: function (arg) {\n          var dimensionText,\n              measureText,\n              mainText,\n              resultHtml = '';\n\n          if (arg.layer.type === 'marker') {\n            dimensionText = arg.attribute('dimensionsTooltip');\n            mainText = arg.attribute('tooltip');\n            measureText = arg.attribute('measuresTooltip');\n            if (dimensionText) resultHtml += '<tr><td>' + dimensionText + '</td></tr>';\n            if (mainText) resultHtml += '<tr><td>' + mainText + (measureText ? '' : '</td></tr>');\n            if (measureText) resultHtml += (mainText ? '<br>' : '</td></tr>') + measureText + '</td></tr>';\n          }\n\n          return {\n            html: resultHtml != '' ? '<table align=\"left\">' + resultHtml + '</table>' : ''\n          };\n        }\n      }\n    };\n  };\n\n  geoPointMapItemBase.prototype._getMarkerLayers = function () {};\n\n  geoPointMapItemBase.prototype._configureLayers = function (viewModel) {\n    var mapDataSource = this._getMapDataSource(viewModel.MapItems, viewModel.ShapeTitleAttributeName);\n\n    return this._configureGeometryLayers(mapDataSource, this._getArea(viewModel)).concat(this._configureMarkerLayers(viewModel));\n  };\n\n  geoPointMapItemBase.prototype._configureMarkerLayers = function (viewModel) {};\n\n  geoPointMapItemBase.prototype._updateMarkerLayers = function (viewModel) {\n    var layers = this.mapViewer.option('layers'),\n        markerLayers = this._configureMarkerLayers(viewModel);\n\n    markerLayers.forEach(function (layer, index) {\n      layers[index + 1] = layer;\n    });\n    this.mapViewer.option('layers', layers);\n  };\n\n  geoPointMapItemBase.prototype._getMarker = function (viewModel, markerDataSource) {\n    var style;\n    return {\n      customize: function (items) {\n        items.forEach(function (item) {\n          item.selected(item.attribute('selected'));\n          style = {\n            color: item.attribute('color')\n          };\n          var size = item.attribute('size');\n          if (size) style.size = size;\n          item.applySettings(style);\n        });\n      },\n      selectionMode: 'multiple'\n    };\n  };\n\n  geoPointMapItemBase.prototype._getArea = function (viewModel) {\n    var that = this;\n    return __assign(__assign({}, that._getLabelSettings(viewModel)), {\n      hoverEnabled: false,\n      selectionMode: that._selectionMode()\n    });\n  };\n\n  geoPointMapItemBase.prototype._getLegends = function (viewModel) {\n    var legends = [],\n        colorLegend = this._getColorLegend(viewModel),\n        sizeLegend = this._getWeightLegend(viewModel);\n\n    if (colorLegend) {\n      legends.push(colorLegend);\n    }\n\n    if (sizeLegend) {\n      legends.push(sizeLegend);\n    }\n\n    return legends;\n  };\n\n  geoPointMapItemBase.prototype._getColorLegend = function (viewModel) {\n    var legend = this._getLegend(viewModel.ColorLegend);\n\n    if (legend) {\n      legend.source = {\n        grouping: 'color'\n      };\n    }\n\n    return legend;\n  };\n\n  geoPointMapItemBase.prototype._getWeightLegend = function (viewModel) {\n    var legend = this._getLegend(viewModel.WeightedLegend);\n\n    if (legend) {\n      legend.source = {\n        grouping: 'size'\n      };\n      legend.markerShape = 'circle';\n      legend.markerColor = themes_1.getTheme(themes_1.currentTheme()).map['layer:area'].color;\n      legend.orientation = 'vertical';\n    }\n\n    return legend;\n  };\n\n  geoPointMapItemBase.prototype._getMinMaxValues = function (markerDataSource) {\n    var min, max;\n\n    if (markerDataSource.length > 0) {\n      for (var i = 0; i < markerDataSource.length; i++) {\n        if (max === undefined || markerDataSource[i].attributes.value !== undefined && markerDataSource[i].attributes.value > max) {\n          max = markerDataSource[i].attributes.value;\n        }\n\n        if (min === undefined || markerDataSource[i].attributes.value !== undefined && markerDataSource[i].attributes.value < min) {\n          min = markerDataSource[i].attributes.value;\n        }\n      }\n    }\n\n    return {\n      min: min,\n      max: max\n    };\n  };\n\n  geoPointMapItemBase.prototype._pointsCountTooltip = function (count) {\n    return '<b>' + count + ' points</b>';\n  };\n\n  geoPointMapItemBase.prototype._getElementInteractionValue = function (element, viewModel) {\n    return [element.attribute('latSelection'), element.attribute('lonSelection')];\n  };\n\n  geoPointMapItemBase.prototype._getDimensionsTooltipHtml = function (tooltipDimensions) {\n    var values = [];\n\n    if (tooltipDimensions.length === 1) {\n      if (tooltipDimensions[0].values) {\n        for (var i = 0; i < tooltipDimensions[0].values.length; i++) {\n          values.push('<b>' + this._getHtml(tooltipDimensions[0].values[i]) + '</b>');\n        }\n\n        return values.join('<br>');\n      }\n    } else {\n      for (var i = 0; i < tooltipDimensions.length; i++) {\n        var tooltipDimension = tooltipDimensions[i];\n\n        if (tooltipDimension.values) {\n          values.push('<b>' + this._getHtml(tooltipDimension.caption) + '</b>');\n\n          for (var j = 0; j < tooltipDimension.values.length; j++) {\n            values.push(this._getHtml(tooltipDimension.values[j]));\n          }\n        }\n      }\n\n      return values.join('<br>');\n    }\n\n    return '';\n  };\n\n  geoPointMapItemBase.prototype._getMeasuresTooltipHtml = function (tooltipMeasures) {\n    var result = [];\n\n    for (var i = 0; i < tooltipMeasures.length; i++) {\n      result.push(this._getToolTip(tooltipMeasures[i].caption, tooltipMeasures[i].value));\n    }\n\n    return result.join('<br>');\n  };\n\n  geoPointMapItemBase.prototype._getDataPoint = function (element) {\n    var that = this,\n        viewModel = that.options.ViewModel;\n    return {\n      getValues: function () {\n        return that._getElementInteractionValue(element, viewModel);\n      },\n      getMeasureIds: function () {\n        return that._getDataPointMeasureIds();\n      },\n      getDeltaIds: function () {\n        return [];\n      }\n    };\n  };\n\n  geoPointMapItemBase.prototype._getDataPointMeasureIds = function () {\n    return [];\n  };\n\n  geoPointMapItemBase.prototype._updateContentSizeUnsafe = function () {\n    _super.prototype._updateContentSizeUnsafe.call(this);\n\n    if (!!this.mapViewer) {\n      this._raiseClusterizationDataRequest();\n    }\n  };\n\n  geoPointMapItemBase.prototype._raiseClusterizationDataRequest = function () {\n    if (this.options.ViewModel.EnableClustering) {\n      var clientContext = this._getClientContext();\n\n      this._onClientStateUpdate(clientContext);\n\n      if (clientContext.clusterizationInfo.clientSize.width > 0 && clientContext.clusterizationInfo.clientSize.height > 0) {\n        this._onDataRequest();\n      }\n    }\n  };\n\n  geoPointMapItemBase.prototype._onViewPortChanged = function () {\n    _super.prototype._onViewPortChanged.call(this);\n\n    if (this.options.ViewModel.EnableClustering && !this._isLocked() && !this.timer) {\n      this.timer = setTimeout(this.raiseTimerClusterizationDataRequest, 500);\n    }\n  };\n\n  geoPointMapItemBase.prototype._onInitialExtentUnsafe = function (viewport) {\n    _super.prototype._onInitialExtentUnsafe.call(this, viewport);\n\n    this._raiseClusterizationDataRequest();\n  };\n\n  return geoPointMapItemBase;\n}(_map_item_1.mapItem);\n\nexports.geoPointMapItemBase = geoPointMapItemBase;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/viewer-parts/viewer-items/_geo-point-map-item-base.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","defineProperty","exports","value","geoPointMapItemBase","themes_1","require","_jquery_helpers_1","_utils_1","_z_index_1","_map_item_1","_super","container","options","_this","that","raiseTimerClusterizationDataRequest","clientState","_getClusterizationInfo","clientSize","width","height","_onDataRequest","clearTimeout","timer","initialDataRequestUnsafe","_raiseClusterizationDataRequest","selectTupleUnsafe","tuple","state","_getMarkerLayers","forEach","layer","getElements","item","attribute","selected","_setSelectionUnsafe","values","clearSelection","renderContentUnsafe","element","changeExisting","afterRenderCallback","deepExtend","_getMapViewerOptions","_getGeoPointMapViewerOptions","_renderContentInternal","renderPartialContentUnsafe","viewModel","ViewModel","_updateMarkerLayers","resetClientViewport","updateContentStateUnsafe","layers","mapViewer","option","type","hoverEnabled","_getCustomHoverEnabled","forceUpdateClientState","hasWidget","_onClientStateUpdate","_getClientContext","_configureLayers","onClick","e","target","_raiseItemClick","legends","_getLegends","tooltip","enabled","zIndex","dashboardItemTooltips","tooltipContainerSelector","customizeTooltip","arg","dimensionText","measureText","mainText","resultHtml","html","mapDataSource","_getMapDataSource","MapItems","ShapeTitleAttributeName","_configureGeometryLayers","_getArea","concat","_configureMarkerLayers","markerLayers","index","_getMarker","markerDataSource","style","customize","items","color","size","applySettings","selectionMode","_getLabelSettings","_selectionMode","colorLegend","_getColorLegend","sizeLegend","_getWeightLegend","push","legend","_getLegend","ColorLegend","source","grouping","WeightedLegend","markerShape","markerColor","getTheme","currentTheme","map","orientation","_getMinMaxValues","min","max","undefined","attributes","_pointsCountTooltip","count","_getElementInteractionValue","_getDimensionsTooltipHtml","tooltipDimensions","_getHtml","join","tooltipDimension","caption","j","_getMeasuresTooltipHtml","tooltipMeasures","result","_getToolTip","_getDataPoint","getValues","getMeasureIds","_getDataPointMeasureIds","getDeltaIds","_updateContentSizeUnsafe","EnableClustering","clientContext","clusterizationInfo","_onViewPortChanged","_isLocked","setTimeout","_onInitialExtentUnsafe","viewport","mapItem"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_geo-point-map-item-base.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.geoPointMapItemBase = void 0;\nvar themes_1 = require(\"devextreme/viz/themes\");\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar _utils_1 = require(\"../../data/_utils\");\nvar _z_index_1 = require(\"../../data/_z-index\");\nvar _map_item_1 = require(\"./_map-item\");\nvar geoPointMapItemBase = (function (_super) {\n    __extends(geoPointMapItemBase, _super);\n    function geoPointMapItemBase(container, options) {\n        var _this = _super.call(this, container, options) || this;\n        var that = _this;\n        that.raiseTimerClusterizationDataRequest = function () {\n            var clientState = that._getClusterizationInfo();\n            if (clientState.clientSize.width > 0 && clientState.clientSize.height > 0) {\n                that._onDataRequest();\n            }\n            clearTimeout(that.timer);\n            that.timer = false;\n        };\n        return _this;\n    }\n    geoPointMapItemBase.prototype.initialDataRequestUnsafe = function () {\n        this._raiseClusterizationDataRequest();\n    };\n    geoPointMapItemBase.prototype.selectTupleUnsafe = function (tuple, state) {\n        var that = this;\n        that._getMarkerLayers().forEach(function (layer) {\n            layer.getElements().forEach(function (item) {\n                if (item.attribute('latSelection') == tuple[0].value[0] && item.attribute('lonSelection') == tuple[0].value[1]) {\n                    item.selected(state);\n                }\n            });\n        });\n    };\n    geoPointMapItemBase.prototype._setSelectionUnsafe = function (values) {\n        _super.prototype._setSelectionUnsafe.call(this, values);\n        this.clearSelection();\n        if (values && values.length > 0) {\n            this._getMarkerLayers().forEach(function (layer) {\n                layer.getElements().forEach(function (item) {\n                    values.forEach(function (value, i) {\n                        if (item.attribute('latSelection') == value[0] && item.attribute('lonSelection') == value[1]) {\n                            item.selected(true);\n                        }\n                    });\n                });\n            });\n        }\n    };\n    geoPointMapItemBase.prototype.renderContentUnsafe = function (element, changeExisting, afterRenderCallback) {\n        var options = _jquery_helpers_1.deepExtend(this._getMapViewerOptions(), this._getGeoPointMapViewerOptions());\n        this._renderContentInternal(element, changeExisting, options);\n        return false;\n    };\n    geoPointMapItemBase.prototype.renderPartialContentUnsafe = function () {\n        var viewModel = this.options.ViewModel;\n        this._updateMarkerLayers(viewModel);\n    };\n    geoPointMapItemBase.prototype.resetClientViewport = function () {\n        _super.prototype.resetClientViewport.call(this);\n        this._raiseClusterizationDataRequest();\n    };\n    geoPointMapItemBase.prototype.updateContentStateUnsafe = function () {\n        var that = this, layers = that.mapViewer.option('layers');\n        layers.forEach(function (layer) {\n            if (layer.type === 'marker')\n                layer.hoverEnabled = that._getCustomHoverEnabled();\n        });\n        this.mapViewer.option('layers', layers);\n    };\n    geoPointMapItemBase.prototype.forceUpdateClientState = function () {\n        if (this.hasWidget) {\n            this._onClientStateUpdate(this._getClientContext());\n        }\n    };\n    geoPointMapItemBase.prototype._getGeoPointMapViewerOptions = function () {\n        var that = this, viewModel = that.options.ViewModel;\n        return {\n            layers: that._configureLayers(viewModel),\n            onClick: function (e) {\n                if (e.target && e.target.layer.type === 'marker')\n                    that._raiseItemClick(e.target);\n            },\n            legends: that._getLegends(viewModel),\n            tooltip: {\n                enabled: true,\n                zIndex: _z_index_1.zIndex.dashboardItemTooltips,\n                container: _utils_1.tooltipContainerSelector,\n                customizeTooltip: function (arg) {\n                    var dimensionText, measureText, mainText, resultHtml = '';\n                    if (arg.layer.type === 'marker') {\n                        dimensionText = arg.attribute('dimensionsTooltip');\n                        mainText = arg.attribute('tooltip');\n                        measureText = arg.attribute('measuresTooltip');\n                        if (dimensionText)\n                            resultHtml += '<tr><td>' + dimensionText + '</td></tr>';\n                        if (mainText)\n                            resultHtml += '<tr><td>' + mainText + (measureText ? '' : '</td></tr>');\n                        if (measureText)\n                            resultHtml += (mainText ? '<br>' : '</td></tr>') + measureText + '</td></tr>';\n                    }\n                    return {\n                        html: (resultHtml != '') ? '<table align=\"left\">' + resultHtml + '</table>' : ''\n                    };\n                }\n            }\n        };\n    };\n    geoPointMapItemBase.prototype._getMarkerLayers = function () {\n    };\n    geoPointMapItemBase.prototype._configureLayers = function (viewModel) {\n        var mapDataSource = this._getMapDataSource(viewModel.MapItems, viewModel.ShapeTitleAttributeName);\n        return this._configureGeometryLayers(mapDataSource, this._getArea(viewModel)).concat(this._configureMarkerLayers(viewModel));\n    };\n    geoPointMapItemBase.prototype._configureMarkerLayers = function (viewModel) {\n    };\n    geoPointMapItemBase.prototype._updateMarkerLayers = function (viewModel) {\n        var layers = this.mapViewer.option('layers'), markerLayers = this._configureMarkerLayers(viewModel);\n        markerLayers.forEach(function (layer, index) {\n            layers[index + 1] = layer;\n        });\n        this.mapViewer.option('layers', layers);\n    };\n    geoPointMapItemBase.prototype._getMarker = function (viewModel, markerDataSource) {\n        var style;\n        return {\n            customize: function (items) {\n                items.forEach(function (item) {\n                    item.selected(item.attribute('selected'));\n                    style = { color: item.attribute('color') };\n                    var size = item.attribute('size');\n                    if (size)\n                        style.size = size;\n                    item.applySettings(style);\n                });\n            },\n            selectionMode: 'multiple'\n        };\n    };\n    geoPointMapItemBase.prototype._getArea = function (viewModel) {\n        var that = this;\n        return __assign(__assign({}, that._getLabelSettings(viewModel)), { hoverEnabled: false, selectionMode: that._selectionMode() });\n    };\n    geoPointMapItemBase.prototype._getLegends = function (viewModel) {\n        var legends = [], colorLegend = this._getColorLegend(viewModel), sizeLegend = this._getWeightLegend(viewModel);\n        if (colorLegend) {\n            legends.push(colorLegend);\n        }\n        if (sizeLegend) {\n            legends.push(sizeLegend);\n        }\n        return legends;\n    };\n    geoPointMapItemBase.prototype._getColorLegend = function (viewModel) {\n        var legend = this._getLegend(viewModel.ColorLegend);\n        if (legend) {\n            legend.source = { grouping: 'color' };\n        }\n        return legend;\n    };\n    geoPointMapItemBase.prototype._getWeightLegend = function (viewModel) {\n        var legend = this._getLegend(viewModel.WeightedLegend);\n        if (legend) {\n            legend.source = { grouping: 'size' };\n            legend.markerShape = 'circle';\n            legend.markerColor = themes_1.getTheme(themes_1.currentTheme()).map['layer:area'].color;\n            legend.orientation = 'vertical';\n        }\n        return legend;\n    };\n    geoPointMapItemBase.prototype._getMinMaxValues = function (markerDataSource) {\n        var min, max;\n        if (markerDataSource.length > 0) {\n            for (var i = 0; i < markerDataSource.length; i++) {\n                if (max === undefined || markerDataSource[i].attributes.value !== undefined && (markerDataSource[i].attributes.value > max)) {\n                    max = markerDataSource[i].attributes.value;\n                }\n                if (min === undefined || markerDataSource[i].attributes.value !== undefined && (markerDataSource[i].attributes.value < min)) {\n                    min = markerDataSource[i].attributes.value;\n                }\n            }\n        }\n        return {\n            min: min,\n            max: max\n        };\n    };\n    geoPointMapItemBase.prototype._pointsCountTooltip = function (count) {\n        return '<b>' + count + ' points</b>';\n    };\n    geoPointMapItemBase.prototype._getElementInteractionValue = function (element, viewModel) {\n        return [element.attribute('latSelection'), element.attribute('lonSelection')];\n    };\n    geoPointMapItemBase.prototype._getDimensionsTooltipHtml = function (tooltipDimensions) {\n        var values = [];\n        if (tooltipDimensions.length === 1) {\n            if (tooltipDimensions[0].values) {\n                for (var i = 0; i < tooltipDimensions[0].values.length; i++) {\n                    values.push('<b>' + this._getHtml(tooltipDimensions[0].values[i]) + '</b>');\n                }\n                return values.join('<br>');\n            }\n        }\n        else {\n            for (var i = 0; i < tooltipDimensions.length; i++) {\n                var tooltipDimension = tooltipDimensions[i];\n                if (tooltipDimension.values) {\n                    values.push('<b>' + this._getHtml(tooltipDimension.caption) + '</b>');\n                    for (var j = 0; j < tooltipDimension.values.length; j++) {\n                        values.push(this._getHtml(tooltipDimension.values[j]));\n                    }\n                }\n            }\n            return values.join('<br>');\n        }\n        return '';\n    };\n    geoPointMapItemBase.prototype._getMeasuresTooltipHtml = function (tooltipMeasures) {\n        var result = [];\n        for (var i = 0; i < tooltipMeasures.length; i++) {\n            result.push(this._getToolTip(tooltipMeasures[i].caption, tooltipMeasures[i].value));\n        }\n        return result.join('<br>');\n    };\n    geoPointMapItemBase.prototype._getDataPoint = function (element) {\n        var that = this, viewModel = that.options.ViewModel;\n        return {\n            getValues: function () {\n                return that._getElementInteractionValue(element, viewModel);\n            },\n            getMeasureIds: function () {\n                return that._getDataPointMeasureIds();\n            },\n            getDeltaIds: function () {\n                return [];\n            }\n        };\n    };\n    geoPointMapItemBase.prototype._getDataPointMeasureIds = function () {\n        return [];\n    };\n    geoPointMapItemBase.prototype._updateContentSizeUnsafe = function () {\n        _super.prototype._updateContentSizeUnsafe.call(this);\n        if (!!this.mapViewer) {\n            this._raiseClusterizationDataRequest();\n        }\n    };\n    geoPointMapItemBase.prototype._raiseClusterizationDataRequest = function () {\n        if (this.options.ViewModel.EnableClustering) {\n            var clientContext = this._getClientContext();\n            this._onClientStateUpdate(clientContext);\n            if (clientContext.clusterizationInfo.clientSize.width > 0 && clientContext.clusterizationInfo.clientSize.height > 0) {\n                this._onDataRequest();\n            }\n        }\n    };\n    geoPointMapItemBase.prototype._onViewPortChanged = function () {\n        _super.prototype._onViewPortChanged.call(this);\n        if (this.options.ViewModel.EnableClustering && !this._isLocked() && !this.timer) {\n            this.timer = setTimeout(this.raiseTimerClusterizationDataRequest, 500);\n        }\n    };\n    geoPointMapItemBase.prototype._onInitialExtentUnsafe = function (viewport) {\n        _super.prototype._onInitialExtentUnsafe.call(this, viewport);\n        this._raiseClusterizationDataRequest();\n    };\n    return geoPointMapItemBase;\n}(_map_item_1.mapItem));\nexports.geoPointMapItemBase = geoPointMapItemBase;\n"]},"metadata":{},"sourceType":"script"}