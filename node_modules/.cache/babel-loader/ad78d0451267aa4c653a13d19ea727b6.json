{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_range-state-controller.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RangeStateController = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\n\nvar _utils_1 = require(\"../../../data/_utils\");\n\nvar dashboard_state_1 = require(\"../../dashboard-state\");\n\nvar _dimension_filter_values_1 = require(\"../../data-item/_dimension-filter-values\");\n\nvar _date_utils_1 = require(\"../../internal/_date-utils\");\n\nvar RangeStateController = function () {\n  function RangeStateController(item) {\n    this.item = item;\n  }\n\n  Object.defineProperty(RangeStateController.prototype, \"defaultDateTimePeriodName\", {\n    get: function () {\n      return this.item.defaultDateTimePeriodName;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(RangeStateController.prototype, \"currentSelectedDateTimePeriodName\", {\n    get: function () {\n      return this.item.currentSelectedDateTimePeriodName;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(RangeStateController.prototype, \"dateTimePeriods\", {\n    get: function () {\n      return this.item.dateTimePeriods;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(RangeStateController.prototype, \"_selectionValues\", {\n    get: function () {\n      return this.item._selectionValues;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  RangeStateController.prototype._getSelectionByPeriod = function (period) {\n    return this.item._getSelectionByPeriod(period);\n  };\n\n  RangeStateController.prototype._setSelection = function (stateSelection) {\n    this.item._setSelection(stateSelection);\n  };\n\n  RangeStateController.prototype.initialize = function () {\n    var _this = this;\n\n    if (this.defaultDateTimePeriodName()) {\n      this.item._processItemSetPredefinedPeriod(this.defaultDateTimePeriodName());\n    }\n\n    this.dateTimePeriods.subscribe(function (newPeriods) {\n      if (!newPeriods.filter(function (p) {\n        return p.name() === _this.defaultDateTimePeriodName();\n      })[0]) {\n        _this.defaultDateTimePeriodName(undefined);\n      }\n    });\n\n    var subscribeOnDefaultPeriodNameChange = function () {\n      _this.item._defaultDateTimePeriodIndexSubscription && _this.item._defaultDateTimePeriodIndexSubscription.dispose();\n      _this.item._defaultDateTimePeriodIndexSubscription = null;\n\n      var newPeriod = _this.dateTimePeriods().filter(function (p) {\n        return p.name() === _this.defaultDateTimePeriodName();\n      })[0];\n\n      if (newPeriod) {\n        _this.item._defaultDateTimePeriodIndexSubscription = newPeriod.name.subscribe(function (changedName) {\n          _this.defaultDateTimePeriodName(changedName);\n        });\n      }\n    };\n\n    this.defaultDateTimePeriodName.subscribe(function (newName) {\n      subscribeOnDefaultPeriodNameChange();\n\n      _this.item._processItemSetPredefinedPeriod(newName);\n    });\n    subscribeOnDefaultPeriodNameChange();\n    this.item._state = ko.computed(function () {\n      var state = new dashboard_state_1.ItemState();\n\n      if (_this.defaultDateTimePeriodName() && _this.defaultDateTimePeriodName() !== _this.currentSelectedDateTimePeriodName()) {\n        state.RangeFilterState = null;\n      }\n\n      if (_this.currentSelectedDateTimePeriodName()) {\n        if (_this.currentSelectedDateTimePeriodName() !== _this.defaultDateTimePeriodName()) {\n          state.RangeFilterState = {\n            PeriodName: _this.currentSelectedDateTimePeriodName()\n          };\n        }\n      } else {\n        var selection = _date_utils_1.toStringArray(_this._selectionValues());\n\n        if (selection && selection.length && (!!selection[0][0] || !!selection[0][1])) {\n          state.RangeFilterState = {\n            Selection: {\n              Minimum: selection[0][0],\n              Maximum: selection[0][1]\n            }\n          };\n        }\n      }\n\n      return state;\n    });\n  };\n\n  RangeStateController.prototype.setState = function (itemState) {\n    var obsoleteItemState = itemState;\n    var rangeFilterState = itemState.RangeFilterState;\n    var selectedPeriod;\n    var selection;\n\n    if (rangeFilterState) {\n      var rangeSelection = rangeFilterState.Selection;\n\n      if (rangeFilterState.PeriodName) {\n        var period = this.dateTimePeriods().filter(function (p) {\n          return p.name() === rangeFilterState.PeriodName;\n        })[0];\n\n        if (period) {\n          selectedPeriod = rangeFilterState.PeriodName;\n          selection = this._getSelectionByPeriod(period);\n        }\n      } else if (rangeSelection) {\n        if (!!rangeSelection.Minimum || !!rangeSelection.Maximum) {\n          selection = [[rangeSelection.Minimum, rangeSelection.Maximum]];\n        }\n      }\n    } else {\n      selection = itemState.MasterFilterValues || obsoleteItemState.Selection;\n    }\n\n    this.currentSelectedDateTimePeriodName(selectedPeriod);\n\n    this._setSelection(selection);\n  };\n\n  RangeStateController.prototype.removeSelectionFromState = function (state) {\n    var itemState = _jquery_helpers_1.deepExtend({}, state);\n\n    itemState.RangeFilterState = undefined;\n    return itemState;\n  };\n\n  RangeStateController.prototype.setPredefinedPeriodToState = function (state, periodName) {\n    var itemState = _jquery_helpers_1.deepExtend({}, state);\n\n    itemState.RangeFilterState = {\n      PeriodName: periodName\n    };\n    return itemState;\n  };\n\n  RangeStateController.prototype.setSelectionToState = function (state, selection) {\n    var itemState = _jquery_helpers_1.deepExtend({}, state);\n\n    if (!itemState.RangeFilterState) {\n      itemState.RangeFilterState = new dashboard_state_1.RangeFilterState();\n    }\n\n    var rangeSelection = new dashboard_state_1.RangeFilterSelection();\n\n    if (selection && selection.length > 0 && selection[0].length > 0) {\n      rangeSelection.Minimum = selection[0][0];\n      rangeSelection.Maximum = selection[0][1];\n    }\n\n    itemState.RangeFilterState.Selection = rangeSelection;\n    return itemState;\n  };\n\n  RangeStateController.prototype.extendContentState = function (content) {\n    var _this = this;\n\n    if (this.currentSelectedDateTimePeriodName()) {\n      var selectedPeriod = this.dateTimePeriods().filter(function (p) {\n        return p.name() === _this.currentSelectedDateTimePeriodName();\n      })[0];\n\n      if (selectedPeriod) {\n        content.ViewModel.SelectedPeriodIndex = this.dateTimePeriods().indexOf(selectedPeriod);\n      }\n    }\n  };\n\n  RangeStateController.prototype._getDisplayFilterValues = function (limitCount) {\n    var metaData = this.item._dataManager() ? this.item._dataManager().getMetaData() : undefined,\n        selection = this.item._outputFilter(),\n        outFilterValues = [],\n        argumentDimension = selection && selection.dimensions && selection.dimensions[0];\n\n    if (argumentDimension) {\n      var dimensionId = argumentDimension['@DefaultId'];\n      var format = metaData ? metaData.getDimensionFormat(dimensionId) : undefined;\n\n      if (!_utils_1.arrayEquals(selection.range, this.item._fullRange())) {\n        var filterValues = new _dimension_filter_values_1.DimensionFilterValues(this.item._getDimensionDisplayName(dimensionId));\n        filterValues.Values.push({\n          Type: 'Range',\n          RangeLeft: selection.range[0],\n          RangeRight: selection.range[1],\n          Format: format\n        });\n        outFilterValues.push(filterValues);\n      }\n    }\n\n    return outFilterValues;\n  };\n\n  return RangeStateController;\n}();\n\nexports.RangeStateController = RangeStateController;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/model/items/range-filter/_range-state-controller.js"],"names":["Object","defineProperty","exports","value","RangeStateController","ko","require","_jquery_helpers_1","_utils_1","dashboard_state_1","_dimension_filter_values_1","_date_utils_1","item","prototype","get","defaultDateTimePeriodName","enumerable","configurable","currentSelectedDateTimePeriodName","dateTimePeriods","_selectionValues","_getSelectionByPeriod","period","_setSelection","stateSelection","initialize","_this","_processItemSetPredefinedPeriod","subscribe","newPeriods","filter","p","name","undefined","subscribeOnDefaultPeriodNameChange","_defaultDateTimePeriodIndexSubscription","dispose","newPeriod","changedName","newName","_state","computed","state","ItemState","RangeFilterState","PeriodName","selection","toStringArray","length","Selection","Minimum","Maximum","setState","itemState","obsoleteItemState","rangeFilterState","selectedPeriod","rangeSelection","MasterFilterValues","removeSelectionFromState","deepExtend","setPredefinedPeriodToState","periodName","setSelectionToState","RangeFilterSelection","extendContentState","content","ViewModel","SelectedPeriodIndex","indexOf","_getDisplayFilterValues","limitCount","metaData","_dataManager","getMetaData","_outputFilter","outFilterValues","argumentDimension","dimensions","dimensionId","format","getDimensionFormat","arrayEquals","range","_fullRange","filterValues","DimensionFilterValues","_getDimensionDisplayName","Values","push","Type","RangeLeft","RangeRight","Format"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_range-state-controller.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RangeStateController = void 0;\nvar ko = require(\"knockout\");\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\nvar _utils_1 = require(\"../../../data/_utils\");\nvar dashboard_state_1 = require(\"../../dashboard-state\");\nvar _dimension_filter_values_1 = require(\"../../data-item/_dimension-filter-values\");\nvar _date_utils_1 = require(\"../../internal/_date-utils\");\nvar RangeStateController = (function () {\n    function RangeStateController(item) {\n        this.item = item;\n    }\n    Object.defineProperty(RangeStateController.prototype, \"defaultDateTimePeriodName\", {\n        get: function () { return this.item.defaultDateTimePeriodName; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RangeStateController.prototype, \"currentSelectedDateTimePeriodName\", {\n        get: function () { return this.item.currentSelectedDateTimePeriodName; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RangeStateController.prototype, \"dateTimePeriods\", {\n        get: function () { return this.item.dateTimePeriods; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RangeStateController.prototype, \"_selectionValues\", {\n        get: function () { return this.item._selectionValues; },\n        enumerable: false,\n        configurable: true\n    });\n    RangeStateController.prototype._getSelectionByPeriod = function (period) {\n        return this.item._getSelectionByPeriod(period);\n    };\n    RangeStateController.prototype._setSelection = function (stateSelection) {\n        this.item._setSelection(stateSelection);\n    };\n    RangeStateController.prototype.initialize = function () {\n        var _this = this;\n        if (this.defaultDateTimePeriodName()) {\n            this.item._processItemSetPredefinedPeriod(this.defaultDateTimePeriodName());\n        }\n        this.dateTimePeriods.subscribe(function (newPeriods) {\n            if (!newPeriods.filter(function (p) { return p.name() === _this.defaultDateTimePeriodName(); })[0]) {\n                _this.defaultDateTimePeriodName(undefined);\n            }\n        });\n        var subscribeOnDefaultPeriodNameChange = function () {\n            _this.item._defaultDateTimePeriodIndexSubscription && _this.item._defaultDateTimePeriodIndexSubscription.dispose();\n            _this.item._defaultDateTimePeriodIndexSubscription = null;\n            var newPeriod = _this.dateTimePeriods().filter(function (p) { return p.name() === _this.defaultDateTimePeriodName(); })[0];\n            if (newPeriod) {\n                _this.item._defaultDateTimePeriodIndexSubscription = newPeriod.name.subscribe(function (changedName) {\n                    _this.defaultDateTimePeriodName(changedName);\n                });\n            }\n        };\n        this.defaultDateTimePeriodName.subscribe(function (newName) {\n            subscribeOnDefaultPeriodNameChange();\n            _this.item._processItemSetPredefinedPeriod(newName);\n        });\n        subscribeOnDefaultPeriodNameChange();\n        this.item._state = ko.computed(function () {\n            var state = new dashboard_state_1.ItemState();\n            if (_this.defaultDateTimePeriodName() && _this.defaultDateTimePeriodName() !== _this.currentSelectedDateTimePeriodName()) {\n                state.RangeFilterState = null;\n            }\n            if (_this.currentSelectedDateTimePeriodName()) {\n                if (_this.currentSelectedDateTimePeriodName() !== _this.defaultDateTimePeriodName()) {\n                    state.RangeFilterState = {\n                        PeriodName: _this.currentSelectedDateTimePeriodName()\n                    };\n                }\n            }\n            else {\n                var selection = _date_utils_1.toStringArray(_this._selectionValues());\n                if (selection && selection.length && (!!selection[0][0] || !!selection[0][1])) {\n                    state.RangeFilterState = {\n                        Selection: {\n                            Minimum: selection[0][0],\n                            Maximum: selection[0][1]\n                        }\n                    };\n                }\n            }\n            return state;\n        });\n    };\n    RangeStateController.prototype.setState = function (itemState) {\n        var obsoleteItemState = itemState;\n        var rangeFilterState = itemState.RangeFilterState;\n        var selectedPeriod;\n        var selection;\n        if (rangeFilterState) {\n            var rangeSelection = rangeFilterState.Selection;\n            if (rangeFilterState.PeriodName) {\n                var period = this.dateTimePeriods().filter(function (p) { return p.name() === rangeFilterState.PeriodName; })[0];\n                if (period) {\n                    selectedPeriod = rangeFilterState.PeriodName;\n                    selection = this._getSelectionByPeriod(period);\n                }\n            }\n            else if (rangeSelection) {\n                if (!!rangeSelection.Minimum || !!rangeSelection.Maximum) {\n                    selection = [[rangeSelection.Minimum, rangeSelection.Maximum]];\n                }\n            }\n        }\n        else {\n            selection = itemState.MasterFilterValues || obsoleteItemState.Selection;\n        }\n        this.currentSelectedDateTimePeriodName(selectedPeriod);\n        this._setSelection(selection);\n    };\n    RangeStateController.prototype.removeSelectionFromState = function (state) {\n        var itemState = _jquery_helpers_1.deepExtend({}, state);\n        itemState.RangeFilterState = undefined;\n        return itemState;\n    };\n    RangeStateController.prototype.setPredefinedPeriodToState = function (state, periodName) {\n        var itemState = _jquery_helpers_1.deepExtend({}, state);\n        itemState.RangeFilterState = { PeriodName: periodName };\n        return itemState;\n    };\n    RangeStateController.prototype.setSelectionToState = function (state, selection) {\n        var itemState = _jquery_helpers_1.deepExtend({}, state);\n        if (!itemState.RangeFilterState) {\n            itemState.RangeFilterState = new dashboard_state_1.RangeFilterState();\n        }\n        var rangeSelection = new dashboard_state_1.RangeFilterSelection();\n        if (selection && selection.length > 0 && selection[0].length > 0) {\n            rangeSelection.Minimum = selection[0][0];\n            rangeSelection.Maximum = selection[0][1];\n        }\n        itemState.RangeFilterState.Selection = rangeSelection;\n        return itemState;\n    };\n    RangeStateController.prototype.extendContentState = function (content) {\n        var _this = this;\n        if (this.currentSelectedDateTimePeriodName()) {\n            var selectedPeriod = this.dateTimePeriods().filter(function (p) { return p.name() === _this.currentSelectedDateTimePeriodName(); })[0];\n            if (selectedPeriod) {\n                content.ViewModel.SelectedPeriodIndex = this.dateTimePeriods().indexOf(selectedPeriod);\n            }\n        }\n    };\n    RangeStateController.prototype._getDisplayFilterValues = function (limitCount) {\n        var metaData = this.item._dataManager() ? this.item._dataManager().getMetaData() : undefined, selection = this.item._outputFilter(), outFilterValues = [], argumentDimension = selection && selection.dimensions && selection.dimensions[0];\n        if (argumentDimension) {\n            var dimensionId = argumentDimension['@DefaultId'];\n            var format = metaData ? metaData.getDimensionFormat(dimensionId) : undefined;\n            if (!_utils_1.arrayEquals(selection.range, this.item._fullRange())) {\n                var filterValues = new _dimension_filter_values_1.DimensionFilterValues(this.item._getDimensionDisplayName(dimensionId));\n                filterValues.Values.push({\n                    Type: 'Range',\n                    RangeLeft: selection.range[0],\n                    RangeRight: selection.range[1],\n                    Format: format\n                });\n                outFilterValues.push(filterValues);\n            }\n        }\n        return outFilterValues;\n    };\n    return RangeStateController;\n}());\nexports.RangeStateController = RangeStateController;\n"]},"metadata":{},"sourceType":"script"}