{"ast":null,"code":"/**\r\n* DevExpress Dashboard (save-dashboard-extension.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SaveDashboardExtension = void 0;\n\nvar ko = require(\"knockout\");\n\nvar control_options_1 = require(\"../../common/control-options\");\n\nvar _interfaces_1 = require(\"../../common/internal/_interfaces\");\n\nvar _default_1 = require(\"../../data/localization/_default\");\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar _confirm_dialog_1 = require(\"../confirm-dialog/_confirm-dialog\");\n\nvar toolbox_items_1 = require(\"../toolbox-extension/toolbox-items\");\n\nvar name = 'save-dashboard';\nvar nameAlias = 'saveDashboard';\n\nvar SaveDashboardExtension = function () {\n  function SaveDashboardExtension(dashboardControl) {\n    var _this = this;\n\n    this.dashboardControl = dashboardControl;\n    this.name = 'save-dashboard';\n    this._confirmDialogViewModel = new _confirm_dialog_1.ConfirmDialogViewModel();\n    this.canSaveDashboard = ko.computed(function () {\n      return !!_this.dashboardControl.dashboard();\n    });\n    this._isDashboardDirty = ko.computed(function () {\n      return _this._undoEngineExtension && _this._undoEngineExtension.isChanged();\n    });\n    this._customTemplate = {\n      name: 'dx-dashboard-confirm-dialog',\n      data: this._confirmDialogViewModel\n    };\n    this.designerToViewerAction = {\n      orderNo: 20,\n      action: function (options) {\n        var def = _jquery_helpers_1.createJQueryDeferred();\n\n        _this._ensureDashboardSaved().then(function () {\n          if (_this._isDashboardDirty()) {\n            var container = _this.dashboardControl.dashboardContainer();\n\n            _this.dashboardControl.loadDashboard(container.id).done(function () {\n              return def.resolve(options);\n            });\n          }\n\n          def.resolve(options);\n        }, function () {\n          return def.reject();\n        });\n\n        return def.promise();\n      }\n    };\n    this._menuItem = new toolbox_items_1.DashboardMenuItem('save', 'DashboardWebStringId.DashboardMenuSave', 110, _interfaces_1.KeyCodes.S, function () {\n      _this._toolboxExtension.closeMenu();\n\n      _this.saveDashboard();\n    });\n    this._menuItem.hasSeparator = true;\n    this._menuItem.disabled = ko.computed(function () {\n      return !_this.canSaveDashboard() || !_this._isDashboardDirty();\n    });\n  }\n\n  SaveDashboardExtension.prototype.start = function () {\n    this.dashboardControl.customTemplates.push(this._customTemplate);\n\n    this._toolboxExtension.menuItems.push(this._menuItem);\n  };\n\n  SaveDashboardExtension.prototype.stop = function () {\n    this._toolboxExtension.menuItems.remove(this._menuItem);\n\n    this.dashboardControl.customTemplates.remove(this._customTemplate);\n  };\n\n  Object.defineProperty(SaveDashboardExtension.prototype, \"_toolboxExtension\", {\n    get: function () {\n      var extension = this.dashboardControl.findExtension('toolbox');\n\n      if (!extension) {\n        throw Error('Open Dashboard Extension requeries Toolbox Extension');\n      }\n\n      return extension;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(SaveDashboardExtension.prototype, \"_undoEngineExtension\", {\n    get: function () {\n      return this.dashboardControl.findExtension('undo-redo');\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  SaveDashboardExtension.prototype.performSaveDashboard = function (dashboardId, dashboardJson) {\n    var _this = this;\n\n    this.dashboardControl.notificationController.showState(_default_1.getLocalizationById('DashboardWebStringId.Notification.DashboardSaving'));\n    return this.dashboardControl.remoteService.postToServer(this.dashboardControl._endpointCollection.dashboardUrls.DashboardAction + '/' + encodeURIComponent(dashboardId), dashboardJson).done(function (result) {\n      _this.dashboardControl.notificationController.showSuccess(_default_1.getLocalizationById('DashboardWebStringId.Notification.DashboardSaved'));\n    }).fail(function (jqXHR) {\n      _this.dashboardControl.notificationController.showError(_default_1.getLocalizationById('DashboardWebStringId.Notification.DashboardCanNotBeSaved'), jqXHR);\n    });\n  };\n\n  SaveDashboardExtension.prototype.ensureDashboardSaved = function (action) {\n    this._ensureDashboardSaved().done(action);\n  };\n\n  SaveDashboardExtension.prototype._ensureDashboardSaved = function () {\n    var _this = this;\n\n    var def = _jquery_helpers_1.createJQueryDeferred();\n\n    if (this._isDashboardDirty()) {\n      this._confirmDialogViewModel.confirm(_default_1.getLocalizationById('DashboardWebStringId.Dialog.ConfirmSaving'), _default_1.getLocalizationById('DashboardWebStringId.SaveConfirmationDialogMessage') + '<br/>' + _default_1.getLocalizationById('DashboardWebStringId.SaveChangesDialogMessage'), _default_1.getLocalizationById('DashboardWebStringId.Dialog.Save'), _default_1.getLocalizationById('DashboardWebStringId.Dialog.DoNotSave')).then(function (result) {\n        if (result) {\n          _this.saveDashboard().done(function () {\n            return def.resolve();\n          });\n        } else {\n          def.resolve();\n        }\n      }, function () {\n        return def.reject();\n      });\n    } else {\n      def.resolve();\n    }\n\n    return def.promise();\n  };\n\n  SaveDashboardExtension.prototype.saveDashboard = function () {\n    var _this = this;\n\n    if (this.canSaveDashboard()) {\n      var dashboardContainer = this.dashboardControl.dashboardContainer();\n      return this.performSaveDashboard(dashboardContainer.id, dashboardContainer.dashboard.getJSON()).done(function () {\n        return _this._undoEngineExtension && _this._undoEngineExtension.isChanged(false);\n      });\n    } else {\n      throw Error(_default_1.getLocalizationById('DashboardWebStringId.Notification.DashboardSavingIsNotAvailable'));\n    }\n  };\n\n  return SaveDashboardExtension;\n}();\n\nexports.SaveDashboardExtension = SaveDashboardExtension;\n\ncontrol_options_1.designerExtensions[name] = function (dashboardControl, options) {\n  return new SaveDashboardExtension(dashboardControl);\n};\n\ncontrol_options_1.extensionNameMap[name] = nameAlias;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/extensions/save-dashboard-extension.js"],"names":["Object","defineProperty","exports","value","SaveDashboardExtension","ko","require","control_options_1","_interfaces_1","_default_1","_jquery_helpers_1","_confirm_dialog_1","toolbox_items_1","name","nameAlias","dashboardControl","_this","_confirmDialogViewModel","ConfirmDialogViewModel","canSaveDashboard","computed","dashboard","_isDashboardDirty","_undoEngineExtension","isChanged","_customTemplate","data","designerToViewerAction","orderNo","action","options","def","createJQueryDeferred","_ensureDashboardSaved","then","container","dashboardContainer","loadDashboard","id","done","resolve","reject","promise","_menuItem","DashboardMenuItem","KeyCodes","S","_toolboxExtension","closeMenu","saveDashboard","hasSeparator","disabled","prototype","start","customTemplates","push","menuItems","stop","remove","get","extension","findExtension","Error","enumerable","configurable","performSaveDashboard","dashboardId","dashboardJson","notificationController","showState","getLocalizationById","remoteService","postToServer","_endpointCollection","dashboardUrls","DashboardAction","encodeURIComponent","result","showSuccess","fail","jqXHR","showError","ensureDashboardSaved","confirm","getJSON","designerExtensions","extensionNameMap"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (save-dashboard-extension.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SaveDashboardExtension = void 0;\nvar ko = require(\"knockout\");\nvar control_options_1 = require(\"../../common/control-options\");\nvar _interfaces_1 = require(\"../../common/internal/_interfaces\");\nvar _default_1 = require(\"../../data/localization/_default\");\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar _confirm_dialog_1 = require(\"../confirm-dialog/_confirm-dialog\");\nvar toolbox_items_1 = require(\"../toolbox-extension/toolbox-items\");\nvar name = 'save-dashboard';\nvar nameAlias = 'saveDashboard';\nvar SaveDashboardExtension = (function () {\n    function SaveDashboardExtension(dashboardControl) {\n        var _this = this;\n        this.dashboardControl = dashboardControl;\n        this.name = 'save-dashboard';\n        this._confirmDialogViewModel = new _confirm_dialog_1.ConfirmDialogViewModel();\n        this.canSaveDashboard = ko.computed(function () { return !!_this.dashboardControl.dashboard(); });\n        this._isDashboardDirty = ko.computed(function () { return _this._undoEngineExtension && _this._undoEngineExtension.isChanged(); });\n        this._customTemplate = {\n            name: 'dx-dashboard-confirm-dialog',\n            data: this._confirmDialogViewModel\n        };\n        this.designerToViewerAction = {\n            orderNo: 20,\n            action: function (options) {\n                var def = _jquery_helpers_1.createJQueryDeferred();\n                _this._ensureDashboardSaved()\n                    .then(function () {\n                    if (_this._isDashboardDirty()) {\n                        var container = _this.dashboardControl.dashboardContainer();\n                        _this.dashboardControl.loadDashboard(container.id)\n                            .done(function () { return def.resolve(options); });\n                    }\n                    def.resolve(options);\n                }, function () { return def.reject(); });\n                return def.promise();\n            }\n        };\n        this._menuItem = new toolbox_items_1.DashboardMenuItem('save', 'DashboardWebStringId.DashboardMenuSave', 110, _interfaces_1.KeyCodes.S, function () { _this._toolboxExtension.closeMenu(); _this.saveDashboard(); });\n        this._menuItem.hasSeparator = true;\n        this._menuItem.disabled = ko.computed(function () { return !_this.canSaveDashboard() || !_this._isDashboardDirty(); });\n    }\n    SaveDashboardExtension.prototype.start = function () {\n        this.dashboardControl.customTemplates.push(this._customTemplate);\n        this._toolboxExtension.menuItems.push(this._menuItem);\n    };\n    SaveDashboardExtension.prototype.stop = function () {\n        this._toolboxExtension.menuItems.remove(this._menuItem);\n        this.dashboardControl.customTemplates.remove(this._customTemplate);\n    };\n    Object.defineProperty(SaveDashboardExtension.prototype, \"_toolboxExtension\", {\n        get: function () {\n            var extension = this.dashboardControl.findExtension('toolbox');\n            if (!extension) {\n                throw Error('Open Dashboard Extension requeries Toolbox Extension');\n            }\n            return extension;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SaveDashboardExtension.prototype, \"_undoEngineExtension\", {\n        get: function () {\n            return this.dashboardControl.findExtension('undo-redo');\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SaveDashboardExtension.prototype.performSaveDashboard = function (dashboardId, dashboardJson) {\n        var _this = this;\n        this.dashboardControl.notificationController.showState(_default_1.getLocalizationById('DashboardWebStringId.Notification.DashboardSaving'));\n        return this.dashboardControl.remoteService.postToServer(this.dashboardControl._endpointCollection.dashboardUrls.DashboardAction + '/' + encodeURIComponent(dashboardId), dashboardJson)\n            .done(function (result) {\n            _this.dashboardControl.notificationController.showSuccess(_default_1.getLocalizationById('DashboardWebStringId.Notification.DashboardSaved'));\n        }).fail(function (jqXHR) {\n            _this.dashboardControl.notificationController.showError(_default_1.getLocalizationById('DashboardWebStringId.Notification.DashboardCanNotBeSaved'), jqXHR);\n        });\n    };\n    SaveDashboardExtension.prototype.ensureDashboardSaved = function (action) {\n        this._ensureDashboardSaved().done(action);\n    };\n    SaveDashboardExtension.prototype._ensureDashboardSaved = function () {\n        var _this = this;\n        var def = _jquery_helpers_1.createJQueryDeferred();\n        if (this._isDashboardDirty()) {\n            this._confirmDialogViewModel\n                .confirm(_default_1.getLocalizationById('DashboardWebStringId.Dialog.ConfirmSaving'), _default_1.getLocalizationById('DashboardWebStringId.SaveConfirmationDialogMessage') + '<br/>' + _default_1.getLocalizationById('DashboardWebStringId.SaveChangesDialogMessage'), _default_1.getLocalizationById('DashboardWebStringId.Dialog.Save'), _default_1.getLocalizationById('DashboardWebStringId.Dialog.DoNotSave'))\n                .then(function (result) {\n                if (result) {\n                    _this.saveDashboard()\n                        .done(function () { return def.resolve(); });\n                }\n                else {\n                    def.resolve();\n                }\n            }, function () { return def.reject(); });\n        }\n        else {\n            def.resolve();\n        }\n        return def.promise();\n    };\n    SaveDashboardExtension.prototype.saveDashboard = function () {\n        var _this = this;\n        if (this.canSaveDashboard()) {\n            var dashboardContainer = this.dashboardControl.dashboardContainer();\n            return this.performSaveDashboard(dashboardContainer.id, dashboardContainer.dashboard.getJSON())\n                .done(function () { return _this._undoEngineExtension && _this._undoEngineExtension.isChanged(false); });\n        }\n        else {\n            throw Error(_default_1.getLocalizationById('DashboardWebStringId.Notification.DashboardSavingIsNotAvailable'));\n        }\n    };\n    return SaveDashboardExtension;\n}());\nexports.SaveDashboardExtension = SaveDashboardExtension;\ncontrol_options_1.designerExtensions[name] = function (dashboardControl, options) { return new SaveDashboardExtension(dashboardControl); };\ncontrol_options_1.extensionNameMap[name] = nameAlias;\n"]},"metadata":{},"sourceType":"script"}