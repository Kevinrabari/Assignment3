{"ast":null,"code":"/**\n* DevExpress Analytics (widgets\\expressioneditor\\tools\\_tools.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tools = void 0;\n\nvar $ = require(\"jquery\");\n\nvar ko = require(\"knockout\");\n\nvar localization_utils_1 = require(\"../../../property-grid/localization/localization_utils\");\n\nvar _localization_1 = require(\"../../../property-grid/localization/_localization\");\n\nvar _utils_1 = require(\"../../../property-grid/widgets/internal/_utils\");\n\nvar utils_1 = require(\"../../../serializer/utils\");\n\nvar _expressioneditor_1 = require(\"../_expressioneditor\");\n\nvar _functions_1 = require(\"./_functions\");\n\nvar _operatorNames_1 = require(\"./_operatorNames\");\n\nvar Tools = function (_super) {\n  __extends(Tools, _super);\n\n  function Tools(onClick, parametersOptions, options, fieldListOptions) {\n    var _this = _super.call(this) || this;\n\n    _this.searchPlaceholder = function () {\n      return _localization_1.searchPlaceholder();\n    };\n\n    _this._categories = ko.observableArray([]);\n    _this.toolBox = [];\n    _this.description = ko.observable();\n    _this._defaultClick = onClick;\n\n    _operatorNames_1.operatorNames.filter(function (item) {\n      return !!item.descriptionStringId;\n    }).forEach(function (item) {\n      return _this._initDescription(item);\n    });\n\n    var functionGroups = ko.computed(function () {\n      return options() && ko.unwrap(options().functions) || _functions_1.functionDisplay();\n    }),\n        functions = ko.computed(function () {\n      return functionGroups().map(function (funtionGroup) {\n        return _this._createFunctionsCategoryItem(funtionGroup.items, localization_utils_1.getLocalization(funtionGroup.display, funtionGroup.localizationId));\n      });\n    }),\n        createDefaultCategories = function () {\n      return [_this._createFieldsCategory(fieldListOptions, parametersOptions), _this._createConstantCategory(), _this._createFunctionsCategory(functions), _this._createOperatorsCategory(_operatorNames_1.operatorNames)];\n    },\n        selectedContent = ko.observable(null),\n        resetCategoriesSelection = function () {\n      var firstItem = _this._categories()[0].content;\n\n      selectedContent() && selectedContent().isSelected(false);\n      selectedContent(firstItem);\n      firstItem.isSelected(true);\n    },\n        updateCategories = function (newOptions) {\n      _this._disposeCategories();\n\n      var defaultCategories = createDefaultCategories();\n      newOptions && newOptions.customizeCategories && newOptions.customizeCategories(_this, defaultCategories, onClick);\n\n      _this._categories(defaultCategories);\n\n      resetCategoriesSelection();\n    };\n\n    _this.resetCategoriesSelection = resetCategoriesSelection;\n    [functionGroups, functions].forEach(function (x) {\n      return _this._disposables.push(x);\n    });\n\n    _this._disposables.push(options.subscribe(function (newOptions) {\n      updateCategories(newOptions);\n    }));\n\n    updateCategories(options());\n\n    _this._disposables.push(_this.showDescription = ko.computed(function () {\n      return selectedContent() && selectedContent().showDescription;\n    }));\n\n    _this.toolBox = [_this._generateTab(_this._categories, 'dx-expressioneditor-categories', function (item) {\n      if (item.data && item.data.selectedItem && item.data.selectedItem() && item.data.items.indexOf(item.data.selectedItem()) !== -1) {\n        var contentItem = item.data.selectedItem();\n\n        _this.description(_this._localizedExpressionEditorItem(contentItem));\n      } else {\n        _this.description(undefined);\n      }\n\n      if (selectedContent() === item) return;\n      selectedContent().isSelected(false);\n      item.isSelected(true);\n      selectedContent(item);\n    }), _this._generateTab(selectedContent, 'dx-expressioneditor-selectedcontent', function (item) {\n      _this.description(_this._localizedExpressionEditorItem(item));\n    }, _this._defaultClick), _this._generateTab(_this.description, 'dx-expressioneditor-description', undefined, undefined, _this.showDescription)];\n    return _this;\n  }\n\n  Tools.prototype._generateTab = function (content, templateName, click, dblclick, visible) {\n    if (templateName === void 0) {\n      templateName = null;\n    }\n\n    return {\n      templateName: templateName,\n      content: content,\n      click: click,\n      dblclick: dblclick,\n      visible: visible || true\n    };\n  };\n\n  Tools.prototype._localizedExpressionEditorItem = function (item) {\n    return item.descriptionStringId ? localization_utils_1.getLocalization(item.text, item.descriptionStringId) : item.description ? item.description : item.text;\n  };\n\n  Tools.prototype._initDescription = function (expressionEditorItem) {\n    expressionEditorItem.description = this._localizedExpressionEditorItem(expressionEditorItem);\n  };\n\n  Tools.prototype._createFieldsCategory = function (fields, parameters) {\n    var category = {\n      displayName: localization_utils_1.getLocalization('Fields', 'AnalyticsCoreStringId.ExpressionEditor_ItemInfo_Fields'),\n      content: {\n        showDescription: false,\n        isSelected: ko.observable(false),\n        data: {\n          fields: fields,\n          parameters: parameters\n        },\n        name: 'dx-expressioneditor-fields'\n      },\n      dispose: function () {\n        return void 0;\n      }\n    };\n    return category;\n  };\n\n  Tools.prototype._createConstantCategory = function () {\n    var items = [{\n      text: '?',\n      descriptionStringId: 'ExpressionEditorStringId.Constant_Null'\n    }, {\n      text: 'False',\n      descriptionStringId: 'ExpressionEditorStringId.Constant_False'\n    }, {\n      text: 'True',\n      descriptionStringId: 'ExpressionEditorStringId.Constant_True'\n    }];\n    return _expressioneditor_1.createExpressionEditorCollectionToolOptions(items, 'Constants', 'DataAccessStringId.ExpressionEditor_DocumentationCategory_Constants', true);\n  };\n\n  Tools.prototype._createOperatorsCategory = function (data) {\n    return _expressioneditor_1.createExpressionEditorCollectionToolOptions(data, 'Operators', 'DataAccessStringId.ExpressionEditor_DocumentationCategory_Operators', true);\n  };\n\n  Tools.prototype._createFunctionsCategoryContent = function (textToSearch, isSelected, items) {\n    return {\n      showDescription: true,\n      isSelected: isSelected,\n      data: {\n        textToSearch: textToSearch,\n        items: items,\n        availableItems: ko.observableArray(items),\n        selectedItem: ko.observable(null)\n      },\n      name: 'dx-expressioneditor-collection-function'\n    };\n  };\n\n  Tools.prototype._createFunctionsCategoryItem = function (functions, display) {\n    var _this = this;\n\n    var result = {\n      display: display,\n      isSelected: ko.observable(false),\n      data: [],\n      name: 'dx-expressioneditor-collection-function'\n    };\n    $.map(functions, function (item) {\n      if (item) {\n        item.forEach(function (functionItem) {\n          _this._initDescription(functionItem);\n\n          result.data.push(functionItem);\n        });\n      }\n    });\n    return result;\n  };\n\n  Tools.prototype._createFunctionsCategory = function (items) {\n    var textToSearch = ko.observable(''),\n        disposables = [],\n        isSelected = ko.observable(false),\n        timeout = null,\n        allItems = ko.computed(function () {\n      return [].concat.apply([], items().map(function (x) {\n        return x.data;\n      }));\n    }),\n        content = this._createFunctionsCategoryContent(textToSearch, isSelected, allItems()),\n        category = {\n      displayName: localization_utils_1.getLocalization('Functions', 'DataAccessStringId.ExpressionEditor_DocumentationCategory_Functions'),\n      items: items,\n      allItems: allItems,\n      isSelected: isSelected,\n      content: content,\n      collapsed: ko.observable(true),\n      updateContent: function (items, isSelected) {\n        content.isSelected && content.isSelected(false);\n        content.isSelected = isSelected;\n        content.isSelected(true);\n        content.data.items = items;\n        content.data.availableItems(content.data.items.filter(function (x) {\n          return !!_utils_1.findMatchesInString(x.text, textToSearch());\n        }));\n      },\n      templateName: 'dx-expressioneditor-category-accordion',\n      dispose: function () {\n        disposables.forEach(function (x) {\n          return x.dispose();\n        });\n        disposables.splice(0, disposables.length);\n      }\n    };\n\n    disposables.push(allItems);\n    disposables.push(textToSearch.subscribe(function (newVal) {\n      timeout && clearTimeout(timeout);\n      timeout = setTimeout(function () {\n        category.content.data.availableItems(category.content.data.items.filter(function (x) {\n          return !!_utils_1.findMatchesInString(x.text, newVal);\n        }));\n      }, 150);\n    }));\n    return category;\n  };\n\n  Tools.prototype._disposeCategories = function () {\n    this._categories().forEach(function (category) {\n      return category.dispose && category.dispose();\n    });\n  };\n\n  Tools.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._disposeCategories();\n  };\n\n  return Tools;\n}(utils_1.Disposable);\n\nexports.Tools = Tools;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/widgets/expressioneditor/tools/_tools.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","Tools","$","require","ko","localization_utils_1","_localization_1","_utils_1","utils_1","_expressioneditor_1","_functions_1","_operatorNames_1","_super","onClick","parametersOptions","options","fieldListOptions","_this","searchPlaceholder","_categories","observableArray","toolBox","description","observable","_defaultClick","operatorNames","filter","item","descriptionStringId","forEach","_initDescription","functionGroups","computed","unwrap","functions","functionDisplay","map","funtionGroup","_createFunctionsCategoryItem","items","getLocalization","display","localizationId","createDefaultCategories","_createFieldsCategory","_createConstantCategory","_createFunctionsCategory","_createOperatorsCategory","selectedContent","resetCategoriesSelection","firstItem","content","isSelected","updateCategories","newOptions","_disposeCategories","defaultCategories","customizeCategories","x","_disposables","push","subscribe","showDescription","_generateTab","data","selectedItem","indexOf","contentItem","_localizedExpressionEditorItem","undefined","templateName","click","dblclick","visible","text","expressionEditorItem","fields","parameters","category","displayName","name","dispose","createExpressionEditorCollectionToolOptions","_createFunctionsCategoryContent","textToSearch","availableItems","result","functionItem","disposables","timeout","allItems","concat","apply","collapsed","updateContent","findMatchesInString","splice","length","newVal","clearTimeout","setTimeout","Disposable"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (widgets\\expressioneditor\\tools\\_tools.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Tools = void 0;\nvar $ = require(\"jquery\");\nvar ko = require(\"knockout\");\nvar localization_utils_1 = require(\"../../../property-grid/localization/localization_utils\");\nvar _localization_1 = require(\"../../../property-grid/localization/_localization\");\nvar _utils_1 = require(\"../../../property-grid/widgets/internal/_utils\");\nvar utils_1 = require(\"../../../serializer/utils\");\nvar _expressioneditor_1 = require(\"../_expressioneditor\");\nvar _functions_1 = require(\"./_functions\");\nvar _operatorNames_1 = require(\"./_operatorNames\");\nvar Tools = (function (_super) {\n    __extends(Tools, _super);\n    function Tools(onClick, parametersOptions, options, fieldListOptions) {\n        var _this = _super.call(this) || this;\n        _this.searchPlaceholder = function () { return _localization_1.searchPlaceholder(); };\n        _this._categories = ko.observableArray([]);\n        _this.toolBox = [];\n        _this.description = ko.observable();\n        _this._defaultClick = onClick;\n        _operatorNames_1.operatorNames.filter(function (item) { return !!item.descriptionStringId; }).forEach(function (item) { return _this._initDescription(item); });\n        var functionGroups = ko.computed(function () {\n            return options() && ko.unwrap(options().functions) || _functions_1.functionDisplay();\n        }), functions = ko.computed(function () {\n            return functionGroups().map(function (funtionGroup) {\n                return _this._createFunctionsCategoryItem(funtionGroup.items, localization_utils_1.getLocalization(funtionGroup.display, funtionGroup.localizationId));\n            });\n        }), createDefaultCategories = function () {\n            return [\n                _this._createFieldsCategory(fieldListOptions, parametersOptions),\n                _this._createConstantCategory(),\n                _this._createFunctionsCategory(functions),\n                _this._createOperatorsCategory(_operatorNames_1.operatorNames)\n            ];\n        }, selectedContent = ko.observable(null), resetCategoriesSelection = function () {\n            var firstItem = _this._categories()[0].content;\n            selectedContent() && selectedContent().isSelected(false);\n            selectedContent(firstItem);\n            firstItem.isSelected(true);\n        }, updateCategories = function (newOptions) {\n            _this._disposeCategories();\n            var defaultCategories = createDefaultCategories();\n            newOptions && newOptions.customizeCategories && newOptions.customizeCategories(_this, defaultCategories, onClick);\n            _this._categories(defaultCategories);\n            resetCategoriesSelection();\n        };\n        _this.resetCategoriesSelection = resetCategoriesSelection;\n        [functionGroups, functions].forEach(function (x) { return _this._disposables.push(x); });\n        _this._disposables.push(options.subscribe(function (newOptions) {\n            updateCategories(newOptions);\n        }));\n        updateCategories(options());\n        _this._disposables.push(_this.showDescription = ko.computed(function () { return selectedContent() && selectedContent().showDescription; }));\n        _this.toolBox = [\n            _this._generateTab(_this._categories, 'dx-expressioneditor-categories', function (item) {\n                if (item.data && item.data.selectedItem && item.data.selectedItem() && item.data.items.indexOf(item.data.selectedItem()) !== -1) {\n                    var contentItem = item.data.selectedItem();\n                    _this.description(_this._localizedExpressionEditorItem(contentItem));\n                }\n                else {\n                    _this.description(undefined);\n                }\n                if (selectedContent() === item)\n                    return;\n                selectedContent().isSelected(false);\n                item.isSelected(true);\n                selectedContent(item);\n            }),\n            _this._generateTab(selectedContent, 'dx-expressioneditor-selectedcontent', function (item) { _this.description(_this._localizedExpressionEditorItem(item)); }, _this._defaultClick),\n            _this._generateTab(_this.description, 'dx-expressioneditor-description', undefined, undefined, _this.showDescription)\n        ];\n        return _this;\n    }\n    Tools.prototype._generateTab = function (content, templateName, click, dblclick, visible) {\n        if (templateName === void 0) { templateName = null; }\n        return {\n            templateName: templateName,\n            content: content,\n            click: click,\n            dblclick: dblclick,\n            visible: visible || true\n        };\n    };\n    Tools.prototype._localizedExpressionEditorItem = function (item) {\n        return item.descriptionStringId ? localization_utils_1.getLocalization(item.text, item.descriptionStringId) : item.description ? item.description : item.text;\n    };\n    Tools.prototype._initDescription = function (expressionEditorItem) {\n        expressionEditorItem.description = this._localizedExpressionEditorItem(expressionEditorItem);\n    };\n    Tools.prototype._createFieldsCategory = function (fields, parameters) {\n        var category = {\n            displayName: localization_utils_1.getLocalization('Fields', 'AnalyticsCoreStringId.ExpressionEditor_ItemInfo_Fields'),\n            content: {\n                showDescription: false,\n                isSelected: ko.observable(false),\n                data: { fields: fields, parameters: parameters },\n                name: 'dx-expressioneditor-fields'\n            },\n            dispose: function () { return void 0; }\n        };\n        return category;\n    };\n    Tools.prototype._createConstantCategory = function () {\n        var items = [\n            { text: '?', descriptionStringId: 'ExpressionEditorStringId.Constant_Null' },\n            { text: 'False', descriptionStringId: 'ExpressionEditorStringId.Constant_False' },\n            { text: 'True', descriptionStringId: 'ExpressionEditorStringId.Constant_True' }\n        ];\n        return _expressioneditor_1.createExpressionEditorCollectionToolOptions(items, 'Constants', 'DataAccessStringId.ExpressionEditor_DocumentationCategory_Constants', true);\n    };\n    Tools.prototype._createOperatorsCategory = function (data) {\n        return _expressioneditor_1.createExpressionEditorCollectionToolOptions(data, 'Operators', 'DataAccessStringId.ExpressionEditor_DocumentationCategory_Operators', true);\n    };\n    Tools.prototype._createFunctionsCategoryContent = function (textToSearch, isSelected, items) {\n        return {\n            showDescription: true,\n            isSelected: isSelected,\n            data: {\n                textToSearch: textToSearch,\n                items: items,\n                availableItems: ko.observableArray(items),\n                selectedItem: ko.observable(null)\n            },\n            name: 'dx-expressioneditor-collection-function',\n        };\n    };\n    Tools.prototype._createFunctionsCategoryItem = function (functions, display) {\n        var _this = this;\n        var result = {\n            display: display,\n            isSelected: ko.observable(false),\n            data: [],\n            name: 'dx-expressioneditor-collection-function',\n        };\n        $.map(functions, (function (item) {\n            if (item) {\n                item.forEach(function (functionItem) {\n                    _this._initDescription(functionItem);\n                    result.data.push(functionItem);\n                });\n            }\n        }));\n        return result;\n    };\n    Tools.prototype._createFunctionsCategory = function (items) {\n        var textToSearch = ko.observable(''), disposables = [], isSelected = ko.observable(false), timeout = null, allItems = ko.computed(function () { return [].concat.apply([], items().map(function (x) { return x.data; })); }), content = this._createFunctionsCategoryContent(textToSearch, isSelected, allItems()), category = {\n            displayName: localization_utils_1.getLocalization('Functions', 'DataAccessStringId.ExpressionEditor_DocumentationCategory_Functions'),\n            items: items, allItems: allItems, isSelected: isSelected, content: content,\n            collapsed: ko.observable(true),\n            updateContent: function (items, isSelected) {\n                content.isSelected && content.isSelected(false);\n                content.isSelected = isSelected;\n                content.isSelected(true);\n                content.data.items = items;\n                content.data.availableItems(content.data.items.filter(function (x) { return !!_utils_1.findMatchesInString(x.text, textToSearch()); }));\n            },\n            templateName: 'dx-expressioneditor-category-accordion',\n            dispose: function () {\n                disposables.forEach(function (x) { return x.dispose(); });\n                disposables.splice(0, disposables.length);\n            }\n        };\n        disposables.push(allItems);\n        disposables.push(textToSearch.subscribe(function (newVal) {\n            timeout && clearTimeout(timeout);\n            timeout = setTimeout(function () {\n                category.content.data.availableItems(category.content.data.items.filter(function (x) { return !!_utils_1.findMatchesInString(x.text, newVal); }));\n            }, 150);\n        }));\n        return category;\n    };\n    Tools.prototype._disposeCategories = function () {\n        this._categories().forEach(function (category) { return category.dispose && category.dispose(); });\n    };\n    Tools.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._disposeCategories();\n    };\n    return Tools;\n}(utils_1.Disposable));\nexports.Tools = Tools;\n"]},"metadata":{},"sourceType":"script"}