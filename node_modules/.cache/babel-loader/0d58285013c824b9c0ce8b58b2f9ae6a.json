{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/html_editor/modules/variables.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Quill from \"devextreme-quill\";\nimport $ from \"../../../core/renderer\";\nimport { getBoundingRect } from \"../../../core/utils/position\";\nimport PopupModule from \"./popup\";\nimport BaseModule from \"./base\";\nimport Variable from \"../formats/variable\";\nimport { extend } from \"../../../core/utils/extend\";\nvar VariableModule = BaseModule;\n\nif (Quill) {\n  var VARIABLE_FORMAT_CLASS = \"dx-variable-format\";\n  var ACTIVE_FORMAT_CLASS = \"dx-format-active\";\n  Quill.register({\n    \"formats/variable\": Variable\n  }, true);\n  VariableModule = class extends PopupModule {\n    _getDefaultOptions() {\n      var baseConfig = super._getDefaultOptions();\n\n      return extend(baseConfig, {\n        escapeChar: \"\"\n      });\n    }\n\n    constructor(quill, options) {\n      super(quill, options);\n      var toolbar = quill.getModule(\"toolbar\");\n\n      if (toolbar) {\n        toolbar.addClickHandler(\"variable\", this.showPopup.bind(this));\n      }\n\n      quill.keyboard.addBinding({\n        key: \"P\",\n        altKey: true\n      }, this.showPopup.bind(this));\n\n      this._popup.on(\"shown\", e => {\n        var $ofElement = $(e.component.option(\"position\").of);\n\n        if ($ofElement.hasClass(VARIABLE_FORMAT_CLASS)) {\n          $ofElement.addClass(ACTIVE_FORMAT_CLASS);\n        }\n      });\n    }\n\n    showPopup(event) {\n      var selection = this.quill.getSelection(true);\n      var position = selection ? selection.index : this.quill.getLength();\n      this.savePosition(position);\n\n      this._resetPopupPosition(event, position);\n\n      super.showPopup();\n    }\n\n    _resetPopupPosition(event, position) {\n      if (event && event.element) {\n        this._popup.option(\"position\", {\n          of: event.element,\n          offset: {\n            h: 0,\n            v: 0\n          },\n          my: \"top center\",\n          at: \"bottom center\",\n          collision: \"fit\"\n        });\n      } else {\n        var mentionBounds = this.quill.getBounds(position);\n        var rootRect = getBoundingRect(this.quill.root);\n\n        this._popup.option(\"position\", {\n          of: this.quill.root,\n          offset: {\n            h: mentionBounds.left,\n            v: mentionBounds.bottom - rootRect.height\n          },\n          my: \"top center\",\n          at: \"bottom left\",\n          collision: \"fit flip\"\n        });\n      }\n    }\n\n    insertEmbedContent(selectionChangedEvent) {\n      var caretPosition = this.getPosition();\n      var selectedItem = selectionChangedEvent.component.option(\"selectedItem\");\n      var variableData = extend({}, {\n        value: selectedItem,\n        escapeChar: this.options.escapeChar\n      });\n      setTimeout(function () {\n        this.quill.insertEmbed(caretPosition, \"variable\", variableData);\n        this.quill.setSelection(caretPosition + 1);\n      }.bind(this));\n    }\n\n  };\n}\n\nexport default VariableModule;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/html_editor/modules/variables.js"],"names":["Quill","$","getBoundingRect","PopupModule","BaseModule","Variable","extend","VariableModule","VARIABLE_FORMAT_CLASS","ACTIVE_FORMAT_CLASS","register","_getDefaultOptions","baseConfig","escapeChar","constructor","quill","options","toolbar","getModule","addClickHandler","showPopup","bind","keyboard","addBinding","key","altKey","_popup","on","e","$ofElement","component","option","of","hasClass","addClass","event","selection","getSelection","position","index","getLength","savePosition","_resetPopupPosition","element","offset","h","v","my","at","collision","mentionBounds","getBounds","rootRect","root","left","bottom","height","insertEmbedContent","selectionChangedEvent","caretPosition","getPosition","selectedItem","variableData","value","setTimeout","insertEmbed","setSelection"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/html_editor/modules/variables.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Quill from \"devextreme-quill\";\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../../core/utils/position\";\r\nimport PopupModule from \"./popup\";\r\nimport BaseModule from \"./base\";\r\nimport Variable from \"../formats/variable\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nvar VariableModule = BaseModule;\r\nif (Quill) {\r\n    var VARIABLE_FORMAT_CLASS = \"dx-variable-format\";\r\n    var ACTIVE_FORMAT_CLASS = \"dx-format-active\";\r\n    Quill.register({\r\n        \"formats/variable\": Variable\r\n    }, true);\r\n    VariableModule = class extends PopupModule {\r\n        _getDefaultOptions() {\r\n            var baseConfig = super._getDefaultOptions();\r\n            return extend(baseConfig, {\r\n                escapeChar: \"\"\r\n            })\r\n        }\r\n        constructor(quill, options) {\r\n            super(quill, options);\r\n            var toolbar = quill.getModule(\"toolbar\");\r\n            if (toolbar) {\r\n                toolbar.addClickHandler(\"variable\", this.showPopup.bind(this))\r\n            }\r\n            quill.keyboard.addBinding({\r\n                key: \"P\",\r\n                altKey: true\r\n            }, this.showPopup.bind(this));\r\n            this._popup.on(\"shown\", e => {\r\n                var $ofElement = $(e.component.option(\"position\").of);\r\n                if ($ofElement.hasClass(VARIABLE_FORMAT_CLASS)) {\r\n                    $ofElement.addClass(ACTIVE_FORMAT_CLASS)\r\n                }\r\n            })\r\n        }\r\n        showPopup(event) {\r\n            var selection = this.quill.getSelection(true);\r\n            var position = selection ? selection.index : this.quill.getLength();\r\n            this.savePosition(position);\r\n            this._resetPopupPosition(event, position);\r\n            super.showPopup()\r\n        }\r\n        _resetPopupPosition(event, position) {\r\n            if (event && event.element) {\r\n                this._popup.option(\"position\", {\r\n                    of: event.element,\r\n                    offset: {\r\n                        h: 0,\r\n                        v: 0\r\n                    },\r\n                    my: \"top center\",\r\n                    at: \"bottom center\",\r\n                    collision: \"fit\"\r\n                })\r\n            } else {\r\n                var mentionBounds = this.quill.getBounds(position);\r\n                var rootRect = getBoundingRect(this.quill.root);\r\n                this._popup.option(\"position\", {\r\n                    of: this.quill.root,\r\n                    offset: {\r\n                        h: mentionBounds.left,\r\n                        v: mentionBounds.bottom - rootRect.height\r\n                    },\r\n                    my: \"top center\",\r\n                    at: \"bottom left\",\r\n                    collision: \"fit flip\"\r\n                })\r\n            }\r\n        }\r\n        insertEmbedContent(selectionChangedEvent) {\r\n            var caretPosition = this.getPosition();\r\n            var selectedItem = selectionChangedEvent.component.option(\"selectedItem\");\r\n            var variableData = extend({}, {\r\n                value: selectedItem,\r\n                escapeChar: this.options.escapeChar\r\n            });\r\n            setTimeout(function() {\r\n                this.quill.insertEmbed(caretPosition, \"variable\", variableData);\r\n                this.quill.setSelection(caretPosition + 1)\r\n            }.bind(this))\r\n        }\r\n    }\r\n}\r\nexport default VariableModule;\r\n"]},"metadata":{},"sourceType":"module"}