{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/file_manager/ui.file_manager.notification.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport { extend } from \"../../core/utils/extend\";\nimport { isFunction } from \"../../core/utils/type\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport { getWindow, hasWindow } from \"../../core/utils/window\";\nimport Widget from \"../widget/ui.widget\";\nimport Popup from \"../popup\";\nimport Drawer from \"../drawer/ui.drawer\";\nimport { NotificationManager, NotificationManagerStub, MANAGER_ID_NAME } from \"./ui.file_manager.notification_manager\";\nvar window = getWindow();\nvar ADAPTIVE_STATE_SCREEN_WIDTH = 1e3;\nvar FILE_MANAGER_NOTIFICATION_CLASS = \"dx-filemanager-notification\";\nvar FILE_MANAGER_NOTIFICATION_DRAWER_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-drawer\");\nvar FILE_MANAGER_NOTIFICATION_DRAWER_PANEL_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_DRAWER_CLASS, \"-panel\");\nvar FILE_MANAGER_NOTIFICATION_POPUP_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-popup\");\nvar FILE_MANAGER_NOTIFICATION_POPUP_ERROR_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-popup-error\");\nvar FILE_MANAGER_NOTIFICATION_COMMON_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-common\");\nvar FILE_MANAGER_NOTIFICATION_SEPARATOR_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-separator\");\nvar FILE_MANAGER_NOTIFICATION_DETAILS_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-details\");\nvar FILE_MANAGER_NOTIFICATION_COMMON_NO_ITEM_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-common-no-item\");\nexport default class FileManagerNotificationControl extends Widget {\n  _initMarkup() {\n    super._initMarkup();\n\n    this._initActions();\n\n    this._isInAdaptiveState = this._isSmallScreen();\n    this._managerMap = {};\n    this._notificationManagerStubId = null;\n\n    this._setNotificationManager();\n\n    var $progressPanelContainer = this.option(\"progressPanelContainer\");\n    var $progressDrawer = $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_DRAWER_CLASS).appendTo($progressPanelContainer);\n    $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_DRAWER_PANEL_CLASS).appendTo($progressDrawer);\n    var drawerOptions = extend({\n      opened: false,\n      position: \"right\",\n      template: container => this._ensureProgressPanelCreated(container)\n    }, this._getProgressDrawerAdaptiveOptions());\n    this._progressDrawer = this._createComponent($progressDrawer, Drawer, drawerOptions);\n    var $drawerContent = $progressDrawer.find(\".\".concat(FILE_MANAGER_NOTIFICATION_DRAWER_PANEL_CLASS)).first();\n    var contentRenderer = this.option(\"contentTemplate\");\n\n    if (isFunction(contentRenderer)) {\n      contentRenderer($drawerContent, this);\n    }\n  }\n\n  _setNotificationManager(options) {\n    options = extend({\n      onActionProgressStatusChanged: this._raiseActionProgress.bind(this)\n    }, options);\n\n    if (!this._notificationManagerStubId) {\n      var stubManager = new NotificationManagerStub(options);\n      this._notificationManagerStubId = stubManager.getId();\n      this._managerMap[this._notificationManagerStubId] = stubManager;\n    }\n\n    if (!this._isProgressDrawerDisabled()) {\n      var notificationManagerComponent = this._getProgressManagerComponent();\n\n      options.isActual = true;\n      var defaultManager = new notificationManagerComponent(options);\n      this._managerMap[defaultManager.getId()] = defaultManager;\n    }\n  }\n\n  _getNotificationManager(operationInfo) {\n    var actualManagerId = (null === operationInfo || void 0 === operationInfo ? void 0 : operationInfo[MANAGER_ID_NAME]) || this._getActualNotificationManagerId();\n\n    return this._managerMap[actualManagerId] || this._managerMap[this._notificationManagerStubId];\n  }\n\n  _clearManagerMap() {\n    var stubManager = this._managerMap[this._notificationManagerStubId];\n    delete this._managerMap;\n    this._managerMap = {\n      [this._notificationManagerStubId]: stubManager\n    };\n  }\n\n  _getActualNotificationManagerId() {\n    return Object.keys(this._managerMap).filter(managerId => this._managerMap[managerId].isActual())[0];\n  }\n\n  tryShowProgressPanel() {\n    var promise = new Deferred();\n\n    var notificationManager = this._getNotificationManager();\n\n    if (notificationManager.isActionProgressStatusDefault() || this._isProgressDrawerOpened() || this._isProgressDrawerDisabled()) {\n      return promise.resolve().promise();\n    }\n\n    setTimeout(() => {\n      this._progressDrawer.show().done(promise.resolve);\n\n      this._hidePopup();\n\n      notificationManager.tryHideActionProgress();\n    });\n    return promise.promise();\n  }\n\n  addOperation(processingMessage, allowCancel, allowProgressAutoUpdate) {\n    var notificationManager = this._getNotificationManager();\n\n    return notificationManager.addOperation(processingMessage, allowCancel, allowProgressAutoUpdate);\n  }\n\n  addOperationDetails(operationInfo, details, showCloseButton) {\n    var notificationManager = this._getNotificationManager(operationInfo);\n\n    notificationManager.addOperationDetails(operationInfo, details, showCloseButton);\n  }\n\n  updateOperationItemProgress(operationInfo, itemIndex, itemProgress, commonProgress) {\n    var notificationManager = this._getNotificationManager(operationInfo);\n\n    notificationManager.updateOperationItemProgress(operationInfo, itemIndex, itemProgress, commonProgress);\n  }\n\n  completeOperationItem(operationInfo, itemIndex, commonProgress) {\n    var notificationManager = this._getNotificationManager(operationInfo);\n\n    notificationManager.completeOperationItem(operationInfo, itemIndex, commonProgress);\n  }\n\n  completeOperation(operationInfo, commonText, isError, statusText) {\n    var notificationManager = this._getNotificationManager(operationInfo);\n\n    if (!isError) {\n      this._showPopup(commonText);\n    }\n\n    notificationManager.completeOperation(operationInfo, commonText, isError, statusText);\n\n    if (!this._isProgressDrawerOpened() || !notificationManager.hasNoOperations()) {\n      notificationManager.updateActionProgressStatus(operationInfo);\n    } else {\n      notificationManager.tryHideActionProgress();\n    }\n  }\n\n  completeSingleOperationWithError(operationInfo, errorInfo) {\n    var notificationManager = this._getNotificationManager(operationInfo);\n\n    notificationManager.completeSingleOperationWithError(operationInfo, errorInfo);\n\n    this._showPopupError(errorInfo);\n  }\n\n  addOperationDetailsError(operationInfo, errorInfo) {\n    var notificationManager = this._getNotificationManager(operationInfo);\n\n    notificationManager.addOperationDetailsError(operationInfo, errorInfo);\n\n    this._showPopupError(errorInfo);\n  }\n\n  _hideProgressPanel() {\n    setTimeout(() => this._progressDrawer.hide());\n  }\n\n  _isSmallScreen() {\n    if (!hasWindow()) {\n      return false;\n    }\n\n    return getWidth(window) <= ADAPTIVE_STATE_SCREEN_WIDTH;\n  }\n\n  _dimensionChanged(dimension) {\n    if (!(dimension && \"height\" === dimension)) {\n      this._checkAdaptiveState();\n    }\n  }\n\n  _checkAdaptiveState() {\n    var oldState = this._isInAdaptiveState;\n    this._isInAdaptiveState = this._isSmallScreen();\n\n    if (oldState !== this._isInAdaptiveState && this._progressDrawer) {\n      var notificationManager = this._getNotificationManager();\n\n      if (notificationManager.handleDimensionChanged()) {\n        var options = this._getProgressDrawerAdaptiveOptions();\n\n        this._progressDrawer.option(options);\n      }\n    }\n  }\n\n  _getProgressDrawerAdaptiveOptions() {\n    if (this._isInAdaptiveState) {\n      return {\n        openedStateMode: \"overlap\",\n        shading: true,\n        hideOnOutsideClick: true\n      };\n    } else {\n      return {\n        openedStateMode: \"shrink\",\n        shading: false,\n        hideOnOutsideClick: false\n      };\n    }\n  }\n\n  _ensureProgressPanelCreated(container) {\n    var notificationManager = this._getNotificationManager();\n\n    notificationManager.ensureProgressPanelCreated(container, {\n      onOperationCanceled: _ref => {\n        var {\n          info: info\n        } = _ref;\n        return this._raiseOperationCanceled(info);\n      },\n      onOperationItemCanceled: _ref2 => {\n        var {\n          item: item,\n          itemIndex: itemIndex\n        } = _ref2;\n        return this._raiseOperationItemCanceled(item, itemIndex);\n      },\n      onPanelClosed: () => this._hideProgressPanel()\n    });\n  }\n\n  _getProgressManagerComponent() {\n    return NotificationManager;\n  }\n\n  _isProgressDrawerDisabled() {\n    return !this.option(\"showProgressPanel\");\n  }\n\n  _isProgressDrawerOpened() {\n    return this._progressDrawer.option(\"opened\");\n  }\n\n  _hidePopup(forceHide) {\n    if (!this.option(\"showNotificationPopup\") && !forceHide) {\n      return;\n    }\n\n    this._getNotificationPopup().hide();\n  }\n\n  _showPopup(content, errorMode) {\n    if (this._isProgressDrawerOpened() || !this.option(\"showNotificationPopup\")) {\n      return;\n    }\n\n    this._getNotificationPopup().$wrapper().toggleClass(FILE_MANAGER_NOTIFICATION_POPUP_ERROR_CLASS, !!errorMode);\n\n    this._getNotificationPopup().option(\"contentTemplate\", content);\n\n    if (!this._getNotificationPopup().option(\"visible\")) {\n      this._getNotificationPopup().show();\n    }\n  }\n\n  _showPopupError(errorInfo) {\n    if (!this.option(\"showNotificationPopup\")) {\n      return;\n    }\n\n    var notificationManager = this._getNotificationManager();\n\n    var $content = $(\"<div>\");\n    var $message = $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_COMMON_CLASS).text(errorInfo.commonErrorText);\n    var $separator = $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_SEPARATOR_CLASS);\n    $(\"<div>\").appendTo($separator);\n    var $details = $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_DETAILS_CLASS);\n\n    if (errorInfo.item) {\n      notificationManager.createErrorDetailsProgressBox($details, errorInfo.item, errorInfo.detailErrorText);\n    } else {\n      $message.addClass(FILE_MANAGER_NOTIFICATION_COMMON_NO_ITEM_CLASS);\n      notificationManager.renderError($details, errorInfo.detailErrorText);\n    }\n\n    $content.append($message, $separator, $details);\n\n    this._showPopup($content, true);\n  }\n\n  _getNotificationPopup() {\n    if (!this._notificationPopup) {\n      var $popup = $(\"<div>\").appendTo(this.$element());\n      this._notificationPopup = this._createComponent($popup, Popup, {\n        container: this.$element(),\n        wrapperAttr: {\n          class: FILE_MANAGER_NOTIFICATION_POPUP_CLASS\n        },\n        width: \"auto\",\n        height: \"auto\",\n        showTitle: false,\n        dragEnabled: false,\n        shading: false,\n        visible: false,\n        hideOnOutsideClick: true,\n        animation: {\n          duration: 0\n        },\n        position: {\n          my: \"right top\",\n          at: \"right top\",\n          of: this.option(\"positionTarget\"),\n          offset: \"-10 -5\"\n        }\n      });\n    }\n\n    return this._notificationPopup;\n  }\n\n  _raiseActionProgress(message, status) {\n    this._actions.onActionProgress({\n      message: message,\n      status: status\n    });\n  }\n\n  _raiseOperationCanceled(info) {\n    this._actions.onOperationCanceled({\n      info: info\n    });\n  }\n\n  _raiseOperationItemCanceled(item, index) {\n    this._actions.onOperationItemCanceled({\n      item: item,\n      itemIndex: index\n    });\n  }\n\n  _initActions() {\n    this._actions = {\n      onActionProgress: this._createActionByOption(\"onActionProgress\"),\n      onOperationCanceled: this._createActionByOption(\"onOperationCanceled\"),\n      onOperationItemCanceled: this._createActionByOption(\"onOperationItemCanceled\")\n    };\n  }\n\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      progressPanelContainer: null,\n      contentTemplate: null,\n      onActionProgress: null,\n      onOperationCanceled: null,\n      onOperationItemCanceled: null,\n      showProgressPanel: true,\n      showNotificationPopup: true\n    });\n  }\n\n  _optionChanged(args) {\n    var name = args.name;\n\n    switch (name) {\n      case \"progressPanelContainer\":\n      case \"contentTemplate\":\n        break;\n\n      case \"showProgressPanel\":\n        this._setNotificationManager();\n\n        this._getNotificationManager().updateActionProgressStatus();\n\n        if (!args.value) {\n          this._hideProgressPanel();\n\n          this._clearManagerMap();\n        }\n\n        this._progressDrawer.repaint();\n\n        break;\n\n      case \"showNotificationPopup\":\n        if (!args.value) {\n          this._hidePopup(true);\n        }\n\n        break;\n\n      case \"onActionProgress\":\n      case \"onOperationCanceled\":\n      case \"onOperationItemCanceled\":\n        this._actions[name] = this._createActionByOption(name);\n        break;\n\n      default:\n        super._optionChanged(args);\n\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/file_manager/ui.file_manager.notification.js"],"names":["getWidth","$","extend","isFunction","Deferred","getWindow","hasWindow","Widget","Popup","Drawer","NotificationManager","NotificationManagerStub","MANAGER_ID_NAME","window","ADAPTIVE_STATE_SCREEN_WIDTH","FILE_MANAGER_NOTIFICATION_CLASS","FILE_MANAGER_NOTIFICATION_DRAWER_CLASS","concat","FILE_MANAGER_NOTIFICATION_DRAWER_PANEL_CLASS","FILE_MANAGER_NOTIFICATION_POPUP_CLASS","FILE_MANAGER_NOTIFICATION_POPUP_ERROR_CLASS","FILE_MANAGER_NOTIFICATION_COMMON_CLASS","FILE_MANAGER_NOTIFICATION_SEPARATOR_CLASS","FILE_MANAGER_NOTIFICATION_DETAILS_CLASS","FILE_MANAGER_NOTIFICATION_COMMON_NO_ITEM_CLASS","FileManagerNotificationControl","_initMarkup","_initActions","_isInAdaptiveState","_isSmallScreen","_managerMap","_notificationManagerStubId","_setNotificationManager","$progressPanelContainer","option","$progressDrawer","addClass","appendTo","drawerOptions","opened","position","template","container","_ensureProgressPanelCreated","_getProgressDrawerAdaptiveOptions","_progressDrawer","_createComponent","$drawerContent","find","first","contentRenderer","options","onActionProgressStatusChanged","_raiseActionProgress","bind","stubManager","getId","_isProgressDrawerDisabled","notificationManagerComponent","_getProgressManagerComponent","isActual","defaultManager","_getNotificationManager","operationInfo","actualManagerId","_getActualNotificationManagerId","_clearManagerMap","Object","keys","filter","managerId","tryShowProgressPanel","promise","notificationManager","isActionProgressStatusDefault","_isProgressDrawerOpened","resolve","setTimeout","show","done","_hidePopup","tryHideActionProgress","addOperation","processingMessage","allowCancel","allowProgressAutoUpdate","addOperationDetails","details","showCloseButton","updateOperationItemProgress","itemIndex","itemProgress","commonProgress","completeOperationItem","completeOperation","commonText","isError","statusText","_showPopup","hasNoOperations","updateActionProgressStatus","completeSingleOperationWithError","errorInfo","_showPopupError","addOperationDetailsError","_hideProgressPanel","hide","_dimensionChanged","dimension","_checkAdaptiveState","oldState","handleDimensionChanged","openedStateMode","shading","hideOnOutsideClick","ensureProgressPanelCreated","onOperationCanceled","_ref","info","_raiseOperationCanceled","onOperationItemCanceled","_ref2","item","_raiseOperationItemCanceled","onPanelClosed","forceHide","_getNotificationPopup","content","errorMode","$wrapper","toggleClass","$content","$message","text","commonErrorText","$separator","$details","createErrorDetailsProgressBox","detailErrorText","renderError","append","_notificationPopup","$popup","$element","wrapperAttr","class","width","height","showTitle","dragEnabled","visible","animation","duration","my","at","of","offset","message","status","_actions","onActionProgress","index","_createActionByOption","_getDefaultOptions","progressPanelContainer","contentTemplate","showProgressPanel","showNotificationPopup","_optionChanged","args","name","value","repaint"],"mappings":"AAAA;;;;;;;;AAQA,SACIA,QADJ,QAEO,uBAFP;AAGA,OAAOC,CAAP,MAAc,qBAAd;AACA,SACIC,MADJ,QAEO,yBAFP;AAGA,SACIC,UADJ,QAEO,uBAFP;AAGA,SACIC,QADJ,QAEO,2BAFP;AAGA,SACIC,SADJ,EAEIC,SAFJ,QAGO,yBAHP;AAIA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,SACIC,mBADJ,EAEIC,uBAFJ,EAGIC,eAHJ,QAIO,wCAJP;AAKA,IAAIC,MAAM,GAAGR,SAAS,EAAtB;AACA,IAAIS,2BAA2B,GAAG,GAAlC;AACA,IAAIC,+BAA+B,GAAG,6BAAtC;AACA,IAAIC,sCAAsC,GAAG,GAAGC,MAAH,CAAUF,+BAAV,EAA2C,SAA3C,CAA7C;AACA,IAAIG,4CAA4C,GAAG,GAAGD,MAAH,CAAUD,sCAAV,EAAkD,QAAlD,CAAnD;AACA,IAAIG,qCAAqC,GAAG,GAAGF,MAAH,CAAUF,+BAAV,EAA2C,QAA3C,CAA5C;AACA,IAAIK,2CAA2C,GAAG,GAAGH,MAAH,CAAUF,+BAAV,EAA2C,cAA3C,CAAlD;AACA,IAAIM,sCAAsC,GAAG,GAAGJ,MAAH,CAAUF,+BAAV,EAA2C,SAA3C,CAA7C;AACA,IAAIO,yCAAyC,GAAG,GAAGL,MAAH,CAAUF,+BAAV,EAA2C,YAA3C,CAAhD;AACA,IAAIQ,uCAAuC,GAAG,GAAGN,MAAH,CAAUF,+BAAV,EAA2C,UAA3C,CAA9C;AACA,IAAIS,8CAA8C,GAAG,GAAGP,MAAH,CAAUF,+BAAV,EAA2C,iBAA3C,CAArD;AACA,eAAe,MAAMU,8BAAN,SAA6ClB,MAA7C,CAAoD;AAC/DmB,EAAAA,WAAW,GAAG;AACV,UAAMA,WAAN;;AACA,SAAKC,YAAL;;AACA,SAAKC,kBAAL,GAA0B,KAAKC,cAAL,EAA1B;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKC,0BAAL,GAAkC,IAAlC;;AACA,SAAKC,uBAAL;;AACA,QAAIC,uBAAuB,GAAG,KAAKC,MAAL,CAAY,wBAAZ,CAA9B;AACA,QAAIC,eAAe,GAAGlC,CAAC,CAAC,OAAD,CAAD,CAAWmC,QAAX,CAAoBpB,sCAApB,EAA4DqB,QAA5D,CAAqEJ,uBAArE,CAAtB;AACAhC,IAAAA,CAAC,CAAC,OAAD,CAAD,CAAWmC,QAAX,CAAoBlB,4CAApB,EAAkEmB,QAAlE,CAA2EF,eAA3E;AACA,QAAIG,aAAa,GAAGpC,MAAM,CAAC;AACvBqC,MAAAA,MAAM,EAAE,KADe;AAEvBC,MAAAA,QAAQ,EAAE,OAFa;AAGvBC,MAAAA,QAAQ,EAAEC,SAAS,IAAI,KAAKC,2BAAL,CAAiCD,SAAjC;AAHA,KAAD,EAIvB,KAAKE,iCAAL,EAJuB,CAA1B;AAKA,SAAKC,eAAL,GAAuB,KAAKC,gBAAL,CAAsBX,eAAtB,EAAuC1B,MAAvC,EAA+C6B,aAA/C,CAAvB;AACA,QAAIS,cAAc,GAAGZ,eAAe,CAACa,IAAhB,CAAqB,IAAI/B,MAAJ,CAAWC,4CAAX,CAArB,EAA+E+B,KAA/E,EAArB;AACA,QAAIC,eAAe,GAAG,KAAKhB,MAAL,CAAY,iBAAZ,CAAtB;;AACA,QAAI/B,UAAU,CAAC+C,eAAD,CAAd,EAAiC;AAC7BA,MAAAA,eAAe,CAACH,cAAD,EAAiB,IAAjB,CAAf;AACH;AACJ;;AACDf,EAAAA,uBAAuB,CAACmB,OAAD,EAAU;AAC7BA,IAAAA,OAAO,GAAGjD,MAAM,CAAC;AACbkD,MAAAA,6BAA6B,EAAE,KAAKC,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B;AADlB,KAAD,EAEbH,OAFa,CAAhB;;AAGA,QAAI,CAAC,KAAKpB,0BAAV,EAAsC;AAClC,UAAIwB,WAAW,GAAG,IAAI5C,uBAAJ,CAA4BwC,OAA5B,CAAlB;AACA,WAAKpB,0BAAL,GAAkCwB,WAAW,CAACC,KAAZ,EAAlC;AACA,WAAK1B,WAAL,CAAiB,KAAKC,0BAAtB,IAAoDwB,WAApD;AACH;;AACD,QAAI,CAAC,KAAKE,yBAAL,EAAL,EAAuC;AACnC,UAAIC,4BAA4B,GAAG,KAAKC,4BAAL,EAAnC;;AACAR,MAAAA,OAAO,CAACS,QAAR,GAAmB,IAAnB;AACA,UAAIC,cAAc,GAAG,IAAIH,4BAAJ,CAAiCP,OAAjC,CAArB;AACA,WAAKrB,WAAL,CAAiB+B,cAAc,CAACL,KAAf,EAAjB,IAA2CK,cAA3C;AACH;AACJ;;AACDC,EAAAA,uBAAuB,CAACC,aAAD,EAAgB;AACnC,QAAIC,eAAe,GAAG,CAAC,SAASD,aAAT,IAA0B,KAAK,CAAL,KAAWA,aAArC,GAAqD,KAAK,CAA1D,GAA8DA,aAAa,CAACnD,eAAD,CAA5E,KAAkG,KAAKqD,+BAAL,EAAxH;;AACA,WAAO,KAAKnC,WAAL,CAAiBkC,eAAjB,KAAqC,KAAKlC,WAAL,CAAiB,KAAKC,0BAAtB,CAA5C;AACH;;AACDmC,EAAAA,gBAAgB,GAAG;AACf,QAAIX,WAAW,GAAG,KAAKzB,WAAL,CAAiB,KAAKC,0BAAtB,CAAlB;AACA,WAAO,KAAKD,WAAZ;AACA,SAAKA,WAAL,GAAmB;AACf,OAAC,KAAKC,0BAAN,GAAmCwB;AADpB,KAAnB;AAGH;;AACDU,EAAAA,+BAA+B,GAAG;AAC9B,WAAOE,MAAM,CAACC,IAAP,CAAY,KAAKtC,WAAjB,EAA8BuC,MAA9B,CAAqCC,SAAS,IAAI,KAAKxC,WAAL,CAAiBwC,SAAjB,EAA4BV,QAA5B,EAAlD,EAA0F,CAA1F,CAAP;AACH;;AACDW,EAAAA,oBAAoB,GAAG;AACnB,QAAIC,OAAO,GAAG,IAAIpE,QAAJ,EAAd;;AACA,QAAIqE,mBAAmB,GAAG,KAAKX,uBAAL,EAA1B;;AACA,QAAIW,mBAAmB,CAACC,6BAApB,MAAuD,KAAKC,uBAAL,EAAvD,IAAyF,KAAKlB,yBAAL,EAA7F,EAA+H;AAC3H,aAAOe,OAAO,CAACI,OAAR,GAAkBJ,OAAlB,EAAP;AACH;;AACDK,IAAAA,UAAU,CAAC,MAAM;AACb,WAAKhC,eAAL,CAAqBiC,IAArB,GAA4BC,IAA5B,CAAiCP,OAAO,CAACI,OAAzC;;AACA,WAAKI,UAAL;;AACAP,MAAAA,mBAAmB,CAACQ,qBAApB;AACH,KAJS,CAAV;AAKA,WAAOT,OAAO,CAACA,OAAR,EAAP;AACH;;AACDU,EAAAA,YAAY,CAACC,iBAAD,EAAoBC,WAApB,EAAiCC,uBAAjC,EAA0D;AAClE,QAAIZ,mBAAmB,GAAG,KAAKX,uBAAL,EAA1B;;AACA,WAAOW,mBAAmB,CAACS,YAApB,CAAiCC,iBAAjC,EAAoDC,WAApD,EAAiEC,uBAAjE,CAAP;AACH;;AACDC,EAAAA,mBAAmB,CAACvB,aAAD,EAAgBwB,OAAhB,EAAyBC,eAAzB,EAA0C;AACzD,QAAIf,mBAAmB,GAAG,KAAKX,uBAAL,CAA6BC,aAA7B,CAA1B;;AACAU,IAAAA,mBAAmB,CAACa,mBAApB,CAAwCvB,aAAxC,EAAuDwB,OAAvD,EAAgEC,eAAhE;AACH;;AACDC,EAAAA,2BAA2B,CAAC1B,aAAD,EAAgB2B,SAAhB,EAA2BC,YAA3B,EAAyCC,cAAzC,EAAyD;AAChF,QAAInB,mBAAmB,GAAG,KAAKX,uBAAL,CAA6BC,aAA7B,CAA1B;;AACAU,IAAAA,mBAAmB,CAACgB,2BAApB,CAAgD1B,aAAhD,EAA+D2B,SAA/D,EAA0EC,YAA1E,EAAwFC,cAAxF;AACH;;AACDC,EAAAA,qBAAqB,CAAC9B,aAAD,EAAgB2B,SAAhB,EAA2BE,cAA3B,EAA2C;AAC5D,QAAInB,mBAAmB,GAAG,KAAKX,uBAAL,CAA6BC,aAA7B,CAA1B;;AACAU,IAAAA,mBAAmB,CAACoB,qBAApB,CAA0C9B,aAA1C,EAAyD2B,SAAzD,EAAoEE,cAApE;AACH;;AACDE,EAAAA,iBAAiB,CAAC/B,aAAD,EAAgBgC,UAAhB,EAA4BC,OAA5B,EAAqCC,UAArC,EAAiD;AAC9D,QAAIxB,mBAAmB,GAAG,KAAKX,uBAAL,CAA6BC,aAA7B,CAA1B;;AACA,QAAI,CAACiC,OAAL,EAAc;AACV,WAAKE,UAAL,CAAgBH,UAAhB;AACH;;AACDtB,IAAAA,mBAAmB,CAACqB,iBAApB,CAAsC/B,aAAtC,EAAqDgC,UAArD,EAAiEC,OAAjE,EAA0EC,UAA1E;;AACA,QAAI,CAAC,KAAKtB,uBAAL,EAAD,IAAmC,CAACF,mBAAmB,CAAC0B,eAApB,EAAxC,EAA+E;AAC3E1B,MAAAA,mBAAmB,CAAC2B,0BAApB,CAA+CrC,aAA/C;AACH,KAFD,MAEO;AACHU,MAAAA,mBAAmB,CAACQ,qBAApB;AACH;AACJ;;AACDoB,EAAAA,gCAAgC,CAACtC,aAAD,EAAgBuC,SAAhB,EAA2B;AACvD,QAAI7B,mBAAmB,GAAG,KAAKX,uBAAL,CAA6BC,aAA7B,CAA1B;;AACAU,IAAAA,mBAAmB,CAAC4B,gCAApB,CAAqDtC,aAArD,EAAoEuC,SAApE;;AACA,SAAKC,eAAL,CAAqBD,SAArB;AACH;;AACDE,EAAAA,wBAAwB,CAACzC,aAAD,EAAgBuC,SAAhB,EAA2B;AAC/C,QAAI7B,mBAAmB,GAAG,KAAKX,uBAAL,CAA6BC,aAA7B,CAA1B;;AACAU,IAAAA,mBAAmB,CAAC+B,wBAApB,CAA6CzC,aAA7C,EAA4DuC,SAA5D;;AACA,SAAKC,eAAL,CAAqBD,SAArB;AACH;;AACDG,EAAAA,kBAAkB,GAAG;AACjB5B,IAAAA,UAAU,CAAC,MAAM,KAAKhC,eAAL,CAAqB6D,IAArB,EAAP,CAAV;AACH;;AACD7E,EAAAA,cAAc,GAAG;AACb,QAAI,CAACvB,SAAS,EAAd,EAAkB;AACd,aAAO,KAAP;AACH;;AACD,WAAON,QAAQ,CAACa,MAAD,CAAR,IAAoBC,2BAA3B;AACH;;AACD6F,EAAAA,iBAAiB,CAACC,SAAD,EAAY;AACzB,QAAI,EAAEA,SAAS,IAAI,aAAaA,SAA5B,CAAJ,EAA4C;AACxC,WAAKC,mBAAL;AACH;AACJ;;AACDA,EAAAA,mBAAmB,GAAG;AAClB,QAAIC,QAAQ,GAAG,KAAKlF,kBAApB;AACA,SAAKA,kBAAL,GAA0B,KAAKC,cAAL,EAA1B;;AACA,QAAIiF,QAAQ,KAAK,KAAKlF,kBAAlB,IAAwC,KAAKiB,eAAjD,EAAkE;AAC9D,UAAI4B,mBAAmB,GAAG,KAAKX,uBAAL,EAA1B;;AACA,UAAIW,mBAAmB,CAACsC,sBAApB,EAAJ,EAAkD;AAC9C,YAAI5D,OAAO,GAAG,KAAKP,iCAAL,EAAd;;AACA,aAAKC,eAAL,CAAqBX,MAArB,CAA4BiB,OAA5B;AACH;AACJ;AACJ;;AACDP,EAAAA,iCAAiC,GAAG;AAChC,QAAI,KAAKhB,kBAAT,EAA6B;AACzB,aAAO;AACHoF,QAAAA,eAAe,EAAE,SADd;AAEHC,QAAAA,OAAO,EAAE,IAFN;AAGHC,QAAAA,kBAAkB,EAAE;AAHjB,OAAP;AAKH,KAND,MAMO;AACH,aAAO;AACHF,QAAAA,eAAe,EAAE,QADd;AAEHC,QAAAA,OAAO,EAAE,KAFN;AAGHC,QAAAA,kBAAkB,EAAE;AAHjB,OAAP;AAKH;AACJ;;AACDvE,EAAAA,2BAA2B,CAACD,SAAD,EAAY;AACnC,QAAI+B,mBAAmB,GAAG,KAAKX,uBAAL,EAA1B;;AACAW,IAAAA,mBAAmB,CAAC0C,0BAApB,CAA+CzE,SAA/C,EAA0D;AACtD0E,MAAAA,mBAAmB,EAAEC,IAAI,IAAI;AACzB,YAAI;AACAC,UAAAA,IAAI,EAAEA;AADN,YAEAD,IAFJ;AAGA,eAAO,KAAKE,uBAAL,CAA6BD,IAA7B,CAAP;AACH,OANqD;AAOtDE,MAAAA,uBAAuB,EAAEC,KAAK,IAAI;AAC9B,YAAI;AACAC,UAAAA,IAAI,EAAEA,IADN;AAEAhC,UAAAA,SAAS,EAAEA;AAFX,YAGA+B,KAHJ;AAIA,eAAO,KAAKE,2BAAL,CAAiCD,IAAjC,EAAuChC,SAAvC,CAAP;AACH,OAbqD;AActDkC,MAAAA,aAAa,EAAE,MAAM,KAAKnB,kBAAL;AAdiC,KAA1D;AAgBH;;AACD9C,EAAAA,4BAA4B,GAAG;AAC3B,WAAOjD,mBAAP;AACH;;AACD+C,EAAAA,yBAAyB,GAAG;AACxB,WAAO,CAAC,KAAKvB,MAAL,CAAY,mBAAZ,CAAR;AACH;;AACDyC,EAAAA,uBAAuB,GAAG;AACtB,WAAO,KAAK9B,eAAL,CAAqBX,MAArB,CAA4B,QAA5B,CAAP;AACH;;AACD8C,EAAAA,UAAU,CAAC6C,SAAD,EAAY;AAClB,QAAI,CAAC,KAAK3F,MAAL,CAAY,uBAAZ,CAAD,IAAyC,CAAC2F,SAA9C,EAAyD;AACrD;AACH;;AACD,SAAKC,qBAAL,GAA6BpB,IAA7B;AACH;;AACDR,EAAAA,UAAU,CAAC6B,OAAD,EAAUC,SAAV,EAAqB;AAC3B,QAAI,KAAKrD,uBAAL,MAAkC,CAAC,KAAKzC,MAAL,CAAY,uBAAZ,CAAvC,EAA6E;AACzE;AACH;;AACD,SAAK4F,qBAAL,GAA6BG,QAA7B,GAAwCC,WAAxC,CAAoD9G,2CAApD,EAAiG,CAAC,CAAC4G,SAAnG;;AACA,SAAKF,qBAAL,GAA6B5F,MAA7B,CAAoC,iBAApC,EAAuD6F,OAAvD;;AACA,QAAI,CAAC,KAAKD,qBAAL,GAA6B5F,MAA7B,CAAoC,SAApC,CAAL,EAAqD;AACjD,WAAK4F,qBAAL,GAA6BhD,IAA7B;AACH;AACJ;;AACDyB,EAAAA,eAAe,CAACD,SAAD,EAAY;AACvB,QAAI,CAAC,KAAKpE,MAAL,CAAY,uBAAZ,CAAL,EAA2C;AACvC;AACH;;AACD,QAAIuC,mBAAmB,GAAG,KAAKX,uBAAL,EAA1B;;AACA,QAAIqE,QAAQ,GAAGlI,CAAC,CAAC,OAAD,CAAhB;AACA,QAAImI,QAAQ,GAAGnI,CAAC,CAAC,OAAD,CAAD,CAAWmC,QAAX,CAAoBf,sCAApB,EAA4DgH,IAA5D,CAAiE/B,SAAS,CAACgC,eAA3E,CAAf;AACA,QAAIC,UAAU,GAAGtI,CAAC,CAAC,OAAD,CAAD,CAAWmC,QAAX,CAAoBd,yCAApB,CAAjB;AACArB,IAAAA,CAAC,CAAC,OAAD,CAAD,CAAWoC,QAAX,CAAoBkG,UAApB;AACA,QAAIC,QAAQ,GAAGvI,CAAC,CAAC,OAAD,CAAD,CAAWmC,QAAX,CAAoBb,uCAApB,CAAf;;AACA,QAAI+E,SAAS,CAACoB,IAAd,EAAoB;AAChBjD,MAAAA,mBAAmB,CAACgE,6BAApB,CAAkDD,QAAlD,EAA4DlC,SAAS,CAACoB,IAAtE,EAA4EpB,SAAS,CAACoC,eAAtF;AACH,KAFD,MAEO;AACHN,MAAAA,QAAQ,CAAChG,QAAT,CAAkBZ,8CAAlB;AACAiD,MAAAA,mBAAmB,CAACkE,WAApB,CAAgCH,QAAhC,EAA0ClC,SAAS,CAACoC,eAApD;AACH;;AACDP,IAAAA,QAAQ,CAACS,MAAT,CAAgBR,QAAhB,EAA0BG,UAA1B,EAAsCC,QAAtC;;AACA,SAAKtC,UAAL,CAAgBiC,QAAhB,EAA0B,IAA1B;AACH;;AACDL,EAAAA,qBAAqB,GAAG;AACpB,QAAI,CAAC,KAAKe,kBAAV,EAA8B;AAC1B,UAAIC,MAAM,GAAG7I,CAAC,CAAC,OAAD,CAAD,CAAWoC,QAAX,CAAoB,KAAK0G,QAAL,EAApB,CAAb;AACA,WAAKF,kBAAL,GAA0B,KAAK/F,gBAAL,CAAsBgG,MAAtB,EAA8BtI,KAA9B,EAAqC;AAC3DkC,QAAAA,SAAS,EAAE,KAAKqG,QAAL,EADgD;AAE3DC,QAAAA,WAAW,EAAE;AACTC,UAAAA,KAAK,EAAE9H;AADE,SAF8C;AAK3D+H,QAAAA,KAAK,EAAE,MALoD;AAM3DC,QAAAA,MAAM,EAAE,MANmD;AAO3DC,QAAAA,SAAS,EAAE,KAPgD;AAQ3DC,QAAAA,WAAW,EAAE,KAR8C;AAS3DpC,QAAAA,OAAO,EAAE,KATkD;AAU3DqC,QAAAA,OAAO,EAAE,KAVkD;AAW3DpC,QAAAA,kBAAkB,EAAE,IAXuC;AAY3DqC,QAAAA,SAAS,EAAE;AACPC,UAAAA,QAAQ,EAAE;AADH,SAZgD;AAe3DhH,QAAAA,QAAQ,EAAE;AACNiH,UAAAA,EAAE,EAAE,WADE;AAENC,UAAAA,EAAE,EAAE,WAFE;AAGNC,UAAAA,EAAE,EAAE,KAAKzH,MAAL,CAAY,gBAAZ,CAHE;AAIN0H,UAAAA,MAAM,EAAE;AAJF;AAfiD,OAArC,CAA1B;AAsBH;;AACD,WAAO,KAAKf,kBAAZ;AACH;;AACDxF,EAAAA,oBAAoB,CAACwG,OAAD,EAAUC,MAAV,EAAkB;AAClC,SAAKC,QAAL,CAAcC,gBAAd,CAA+B;AAC3BH,MAAAA,OAAO,EAAEA,OADkB;AAE3BC,MAAAA,MAAM,EAAEA;AAFmB,KAA/B;AAIH;;AACDvC,EAAAA,uBAAuB,CAACD,IAAD,EAAO;AAC1B,SAAKyC,QAAL,CAAc3C,mBAAd,CAAkC;AAC9BE,MAAAA,IAAI,EAAEA;AADwB,KAAlC;AAGH;;AACDK,EAAAA,2BAA2B,CAACD,IAAD,EAAOuC,KAAP,EAAc;AACrC,SAAKF,QAAL,CAAcvC,uBAAd,CAAsC;AAClCE,MAAAA,IAAI,EAAEA,IAD4B;AAElChC,MAAAA,SAAS,EAAEuE;AAFuB,KAAtC;AAIH;;AACDtI,EAAAA,YAAY,GAAG;AACX,SAAKoI,QAAL,GAAgB;AACZC,MAAAA,gBAAgB,EAAE,KAAKE,qBAAL,CAA2B,kBAA3B,CADN;AAEZ9C,MAAAA,mBAAmB,EAAE,KAAK8C,qBAAL,CAA2B,qBAA3B,CAFT;AAGZ1C,MAAAA,uBAAuB,EAAE,KAAK0C,qBAAL,CAA2B,yBAA3B;AAHb,KAAhB;AAKH;;AACDC,EAAAA,kBAAkB,GAAG;AACjB,WAAOjK,MAAM,CAAC,MAAMiK,kBAAN,EAAD,EAA6B;AACtCC,MAAAA,sBAAsB,EAAE,IADc;AAEtCC,MAAAA,eAAe,EAAE,IAFqB;AAGtCL,MAAAA,gBAAgB,EAAE,IAHoB;AAItC5C,MAAAA,mBAAmB,EAAE,IAJiB;AAKtCI,MAAAA,uBAAuB,EAAE,IALa;AAMtC8C,MAAAA,iBAAiB,EAAE,IANmB;AAOtCC,MAAAA,qBAAqB,EAAE;AAPe,KAA7B,CAAb;AASH;;AACDC,EAAAA,cAAc,CAACC,IAAD,EAAO;AACjB,QAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;;AACA,YAAQA,IAAR;AACI,WAAK,wBAAL;AACA,WAAK,iBAAL;AACI;;AACJ,WAAK,mBAAL;AACI,aAAK1I,uBAAL;;AACA,aAAK8B,uBAAL,GAA+BsC,0BAA/B;;AACA,YAAI,CAACqE,IAAI,CAACE,KAAV,EAAiB;AACb,eAAKlE,kBAAL;;AACA,eAAKvC,gBAAL;AACH;;AACD,aAAKrB,eAAL,CAAqB+H,OAArB;;AACA;;AACJ,WAAK,uBAAL;AACI,YAAI,CAACH,IAAI,CAACE,KAAV,EAAiB;AACb,eAAK3F,UAAL,CAAgB,IAAhB;AACH;;AACD;;AACJ,WAAK,kBAAL;AACA,WAAK,qBAAL;AACA,WAAK,yBAAL;AACI,aAAK+E,QAAL,CAAcW,IAAd,IAAsB,KAAKR,qBAAL,CAA2BQ,IAA3B,CAAtB;AACA;;AACJ;AACI,cAAMF,cAAN,CAAqBC,IAArB;;AAxBR;AA0BH;;AA1S8D","sourcesContent":["/**\r\n * DevExtreme (esm/ui/file_manager/ui.file_manager.notification.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    isFunction\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport Popup from \"../popup\";\r\nimport Drawer from \"../drawer/ui.drawer\";\r\nimport {\r\n    NotificationManager,\r\n    NotificationManagerStub,\r\n    MANAGER_ID_NAME\r\n} from \"./ui.file_manager.notification_manager\";\r\nvar window = getWindow();\r\nvar ADAPTIVE_STATE_SCREEN_WIDTH = 1e3;\r\nvar FILE_MANAGER_NOTIFICATION_CLASS = \"dx-filemanager-notification\";\r\nvar FILE_MANAGER_NOTIFICATION_DRAWER_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-drawer\");\r\nvar FILE_MANAGER_NOTIFICATION_DRAWER_PANEL_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_DRAWER_CLASS, \"-panel\");\r\nvar FILE_MANAGER_NOTIFICATION_POPUP_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-popup\");\r\nvar FILE_MANAGER_NOTIFICATION_POPUP_ERROR_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-popup-error\");\r\nvar FILE_MANAGER_NOTIFICATION_COMMON_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-common\");\r\nvar FILE_MANAGER_NOTIFICATION_SEPARATOR_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-separator\");\r\nvar FILE_MANAGER_NOTIFICATION_DETAILS_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-details\");\r\nvar FILE_MANAGER_NOTIFICATION_COMMON_NO_ITEM_CLASS = \"\".concat(FILE_MANAGER_NOTIFICATION_CLASS, \"-common-no-item\");\r\nexport default class FileManagerNotificationControl extends Widget {\r\n    _initMarkup() {\r\n        super._initMarkup();\r\n        this._initActions();\r\n        this._isInAdaptiveState = this._isSmallScreen();\r\n        this._managerMap = {};\r\n        this._notificationManagerStubId = null;\r\n        this._setNotificationManager();\r\n        var $progressPanelContainer = this.option(\"progressPanelContainer\");\r\n        var $progressDrawer = $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_DRAWER_CLASS).appendTo($progressPanelContainer);\r\n        $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_DRAWER_PANEL_CLASS).appendTo($progressDrawer);\r\n        var drawerOptions = extend({\r\n            opened: false,\r\n            position: \"right\",\r\n            template: container => this._ensureProgressPanelCreated(container)\r\n        }, this._getProgressDrawerAdaptiveOptions());\r\n        this._progressDrawer = this._createComponent($progressDrawer, Drawer, drawerOptions);\r\n        var $drawerContent = $progressDrawer.find(\".\".concat(FILE_MANAGER_NOTIFICATION_DRAWER_PANEL_CLASS)).first();\r\n        var contentRenderer = this.option(\"contentTemplate\");\r\n        if (isFunction(contentRenderer)) {\r\n            contentRenderer($drawerContent, this)\r\n        }\r\n    }\r\n    _setNotificationManager(options) {\r\n        options = extend({\r\n            onActionProgressStatusChanged: this._raiseActionProgress.bind(this)\r\n        }, options);\r\n        if (!this._notificationManagerStubId) {\r\n            var stubManager = new NotificationManagerStub(options);\r\n            this._notificationManagerStubId = stubManager.getId();\r\n            this._managerMap[this._notificationManagerStubId] = stubManager\r\n        }\r\n        if (!this._isProgressDrawerDisabled()) {\r\n            var notificationManagerComponent = this._getProgressManagerComponent();\r\n            options.isActual = true;\r\n            var defaultManager = new notificationManagerComponent(options);\r\n            this._managerMap[defaultManager.getId()] = defaultManager\r\n        }\r\n    }\r\n    _getNotificationManager(operationInfo) {\r\n        var actualManagerId = (null === operationInfo || void 0 === operationInfo ? void 0 : operationInfo[MANAGER_ID_NAME]) || this._getActualNotificationManagerId();\r\n        return this._managerMap[actualManagerId] || this._managerMap[this._notificationManagerStubId]\r\n    }\r\n    _clearManagerMap() {\r\n        var stubManager = this._managerMap[this._notificationManagerStubId];\r\n        delete this._managerMap;\r\n        this._managerMap = {\r\n            [this._notificationManagerStubId]: stubManager\r\n        }\r\n    }\r\n    _getActualNotificationManagerId() {\r\n        return Object.keys(this._managerMap).filter(managerId => this._managerMap[managerId].isActual())[0]\r\n    }\r\n    tryShowProgressPanel() {\r\n        var promise = new Deferred;\r\n        var notificationManager = this._getNotificationManager();\r\n        if (notificationManager.isActionProgressStatusDefault() || this._isProgressDrawerOpened() || this._isProgressDrawerDisabled()) {\r\n            return promise.resolve().promise()\r\n        }\r\n        setTimeout(() => {\r\n            this._progressDrawer.show().done(promise.resolve);\r\n            this._hidePopup();\r\n            notificationManager.tryHideActionProgress()\r\n        });\r\n        return promise.promise()\r\n    }\r\n    addOperation(processingMessage, allowCancel, allowProgressAutoUpdate) {\r\n        var notificationManager = this._getNotificationManager();\r\n        return notificationManager.addOperation(processingMessage, allowCancel, allowProgressAutoUpdate)\r\n    }\r\n    addOperationDetails(operationInfo, details, showCloseButton) {\r\n        var notificationManager = this._getNotificationManager(operationInfo);\r\n        notificationManager.addOperationDetails(operationInfo, details, showCloseButton)\r\n    }\r\n    updateOperationItemProgress(operationInfo, itemIndex, itemProgress, commonProgress) {\r\n        var notificationManager = this._getNotificationManager(operationInfo);\r\n        notificationManager.updateOperationItemProgress(operationInfo, itemIndex, itemProgress, commonProgress)\r\n    }\r\n    completeOperationItem(operationInfo, itemIndex, commonProgress) {\r\n        var notificationManager = this._getNotificationManager(operationInfo);\r\n        notificationManager.completeOperationItem(operationInfo, itemIndex, commonProgress)\r\n    }\r\n    completeOperation(operationInfo, commonText, isError, statusText) {\r\n        var notificationManager = this._getNotificationManager(operationInfo);\r\n        if (!isError) {\r\n            this._showPopup(commonText)\r\n        }\r\n        notificationManager.completeOperation(operationInfo, commonText, isError, statusText);\r\n        if (!this._isProgressDrawerOpened() || !notificationManager.hasNoOperations()) {\r\n            notificationManager.updateActionProgressStatus(operationInfo)\r\n        } else {\r\n            notificationManager.tryHideActionProgress()\r\n        }\r\n    }\r\n    completeSingleOperationWithError(operationInfo, errorInfo) {\r\n        var notificationManager = this._getNotificationManager(operationInfo);\r\n        notificationManager.completeSingleOperationWithError(operationInfo, errorInfo);\r\n        this._showPopupError(errorInfo)\r\n    }\r\n    addOperationDetailsError(operationInfo, errorInfo) {\r\n        var notificationManager = this._getNotificationManager(operationInfo);\r\n        notificationManager.addOperationDetailsError(operationInfo, errorInfo);\r\n        this._showPopupError(errorInfo)\r\n    }\r\n    _hideProgressPanel() {\r\n        setTimeout(() => this._progressDrawer.hide())\r\n    }\r\n    _isSmallScreen() {\r\n        if (!hasWindow()) {\r\n            return false\r\n        }\r\n        return getWidth(window) <= ADAPTIVE_STATE_SCREEN_WIDTH\r\n    }\r\n    _dimensionChanged(dimension) {\r\n        if (!(dimension && \"height\" === dimension)) {\r\n            this._checkAdaptiveState()\r\n        }\r\n    }\r\n    _checkAdaptiveState() {\r\n        var oldState = this._isInAdaptiveState;\r\n        this._isInAdaptiveState = this._isSmallScreen();\r\n        if (oldState !== this._isInAdaptiveState && this._progressDrawer) {\r\n            var notificationManager = this._getNotificationManager();\r\n            if (notificationManager.handleDimensionChanged()) {\r\n                var options = this._getProgressDrawerAdaptiveOptions();\r\n                this._progressDrawer.option(options)\r\n            }\r\n        }\r\n    }\r\n    _getProgressDrawerAdaptiveOptions() {\r\n        if (this._isInAdaptiveState) {\r\n            return {\r\n                openedStateMode: \"overlap\",\r\n                shading: true,\r\n                hideOnOutsideClick: true\r\n            }\r\n        } else {\r\n            return {\r\n                openedStateMode: \"shrink\",\r\n                shading: false,\r\n                hideOnOutsideClick: false\r\n            }\r\n        }\r\n    }\r\n    _ensureProgressPanelCreated(container) {\r\n        var notificationManager = this._getNotificationManager();\r\n        notificationManager.ensureProgressPanelCreated(container, {\r\n            onOperationCanceled: _ref => {\r\n                var {\r\n                    info: info\r\n                } = _ref;\r\n                return this._raiseOperationCanceled(info)\r\n            },\r\n            onOperationItemCanceled: _ref2 => {\r\n                var {\r\n                    item: item,\r\n                    itemIndex: itemIndex\r\n                } = _ref2;\r\n                return this._raiseOperationItemCanceled(item, itemIndex)\r\n            },\r\n            onPanelClosed: () => this._hideProgressPanel()\r\n        })\r\n    }\r\n    _getProgressManagerComponent() {\r\n        return NotificationManager\r\n    }\r\n    _isProgressDrawerDisabled() {\r\n        return !this.option(\"showProgressPanel\")\r\n    }\r\n    _isProgressDrawerOpened() {\r\n        return this._progressDrawer.option(\"opened\")\r\n    }\r\n    _hidePopup(forceHide) {\r\n        if (!this.option(\"showNotificationPopup\") && !forceHide) {\r\n            return\r\n        }\r\n        this._getNotificationPopup().hide()\r\n    }\r\n    _showPopup(content, errorMode) {\r\n        if (this._isProgressDrawerOpened() || !this.option(\"showNotificationPopup\")) {\r\n            return\r\n        }\r\n        this._getNotificationPopup().$wrapper().toggleClass(FILE_MANAGER_NOTIFICATION_POPUP_ERROR_CLASS, !!errorMode);\r\n        this._getNotificationPopup().option(\"contentTemplate\", content);\r\n        if (!this._getNotificationPopup().option(\"visible\")) {\r\n            this._getNotificationPopup().show()\r\n        }\r\n    }\r\n    _showPopupError(errorInfo) {\r\n        if (!this.option(\"showNotificationPopup\")) {\r\n            return\r\n        }\r\n        var notificationManager = this._getNotificationManager();\r\n        var $content = $(\"<div>\");\r\n        var $message = $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_COMMON_CLASS).text(errorInfo.commonErrorText);\r\n        var $separator = $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_SEPARATOR_CLASS);\r\n        $(\"<div>\").appendTo($separator);\r\n        var $details = $(\"<div>\").addClass(FILE_MANAGER_NOTIFICATION_DETAILS_CLASS);\r\n        if (errorInfo.item) {\r\n            notificationManager.createErrorDetailsProgressBox($details, errorInfo.item, errorInfo.detailErrorText)\r\n        } else {\r\n            $message.addClass(FILE_MANAGER_NOTIFICATION_COMMON_NO_ITEM_CLASS);\r\n            notificationManager.renderError($details, errorInfo.detailErrorText)\r\n        }\r\n        $content.append($message, $separator, $details);\r\n        this._showPopup($content, true)\r\n    }\r\n    _getNotificationPopup() {\r\n        if (!this._notificationPopup) {\r\n            var $popup = $(\"<div>\").appendTo(this.$element());\r\n            this._notificationPopup = this._createComponent($popup, Popup, {\r\n                container: this.$element(),\r\n                wrapperAttr: {\r\n                    class: FILE_MANAGER_NOTIFICATION_POPUP_CLASS\r\n                },\r\n                width: \"auto\",\r\n                height: \"auto\",\r\n                showTitle: false,\r\n                dragEnabled: false,\r\n                shading: false,\r\n                visible: false,\r\n                hideOnOutsideClick: true,\r\n                animation: {\r\n                    duration: 0\r\n                },\r\n                position: {\r\n                    my: \"right top\",\r\n                    at: \"right top\",\r\n                    of: this.option(\"positionTarget\"),\r\n                    offset: \"-10 -5\"\r\n                }\r\n            })\r\n        }\r\n        return this._notificationPopup\r\n    }\r\n    _raiseActionProgress(message, status) {\r\n        this._actions.onActionProgress({\r\n            message: message,\r\n            status: status\r\n        })\r\n    }\r\n    _raiseOperationCanceled(info) {\r\n        this._actions.onOperationCanceled({\r\n            info: info\r\n        })\r\n    }\r\n    _raiseOperationItemCanceled(item, index) {\r\n        this._actions.onOperationItemCanceled({\r\n            item: item,\r\n            itemIndex: index\r\n        })\r\n    }\r\n    _initActions() {\r\n        this._actions = {\r\n            onActionProgress: this._createActionByOption(\"onActionProgress\"),\r\n            onOperationCanceled: this._createActionByOption(\"onOperationCanceled\"),\r\n            onOperationItemCanceled: this._createActionByOption(\"onOperationItemCanceled\")\r\n        }\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            progressPanelContainer: null,\r\n            contentTemplate: null,\r\n            onActionProgress: null,\r\n            onOperationCanceled: null,\r\n            onOperationItemCanceled: null,\r\n            showProgressPanel: true,\r\n            showNotificationPopup: true\r\n        })\r\n    }\r\n    _optionChanged(args) {\r\n        var name = args.name;\r\n        switch (name) {\r\n            case \"progressPanelContainer\":\r\n            case \"contentTemplate\":\r\n                break;\r\n            case \"showProgressPanel\":\r\n                this._setNotificationManager();\r\n                this._getNotificationManager().updateActionProgressStatus();\r\n                if (!args.value) {\r\n                    this._hideProgressPanel();\r\n                    this._clearManagerMap()\r\n                }\r\n                this._progressDrawer.repaint();\r\n                break;\r\n            case \"showNotificationPopup\":\r\n                if (!args.value) {\r\n                    this._hidePopup(true)\r\n                }\r\n                break;\r\n            case \"onActionProgress\":\r\n            case \"onOperationCanceled\":\r\n            case \"onOperationItemCanceled\":\r\n                this._actions[name] = this._createActionByOption(name);\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}