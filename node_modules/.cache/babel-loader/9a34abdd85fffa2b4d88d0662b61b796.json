{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_parameter-editor-viewmodel.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ParameterEditorViewModel = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _data_source_browser_1 = require(\"../../common/_data-source-browser\");\n\nvar _default_1 = require(\"../../data/localization/_default\");\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar disposable_object_1 = require(\"../../model/disposable-object\");\n\nvar _knockout_utils_1 = require(\"../../model/internal/_knockout-utils\");\n\nvar look_up_value_1 = require(\"../../model/parameters/look-up-value\");\n\nvar _dynamic_list_lookup_settings_1 = require(\"../../model/parameters/metadata/_dynamic-list-lookup-settings\");\n\nvar _parameter_1 = require(\"../../model/parameters/metadata/_parameter\");\n\nvar _static_list_lookup_settings_1 = require(\"../../model/parameters/metadata/_static-list-lookup-settings\");\n\nvar _parameters_helper_1 = require(\"../../model/parameters/_parameters-helper\");\n\nvar _form_adapter_editors_1 = require(\"../form-adapter/_form-adapter-editors\");\n\nvar _object_properties_wrapper_1 = require(\"../form-adapter/_object-properties-wrapper\");\n\nvar _field_picker_1 = require(\"./_field-picker\");\n\nvar _lookup_values_editors_1 = require(\"./_lookup-values-editors\");\n\nvar ParameterEditorViewModel = function (_super) {\n  __extends(ParameterEditorViewModel, _super);\n\n  function ParameterEditorViewModel(parameter, _dataSourceBrowserGetter, isNameValid) {\n    var _this = _super.call(this) || this;\n\n    _this.parameter = parameter;\n    _this._dataSourceBrowserGetter = _dataSourceBrowserGetter;\n    _this.commonParameterSettings = _this._getCommonParameterSettingsWrapper(parameter, isNameValid);\n    _this.lookUpParameterType = new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: parameter,\n      properties: [__assign(__assign({}, _parameter_1.lookUpSourceType), {\n        simpleFormAdapterItem: 'selectBoxEditor'\n      })]\n    });\n    _this.staticListLookUpSettings = _knockout_utils_1.safeComputed({\n      staticListLookUpSettings: parameter.staticListLookUpSettings,\n      type: _this.parameter.type\n    }, function (args) {\n      if (args.staticListLookUpSettings) {\n        return _this._getStaticListLookUpSettingsWrapper(args.staticListLookUpSettings, args.type);\n      }\n\n      return null;\n    });\n    _this.dynamicListLookUpSettings = _knockout_utils_1.safeComputed({\n      dynamicListLookUpSettings: parameter.dynamicListLookUpSettings\n    }, function (args) {\n      if (args.dynamicListLookUpSettings) {\n        return _this._getDynamicListLookUpSettingsWrapper(args.dynamicListLookUpSettings);\n      }\n\n      return null;\n    });\n    return _this;\n  }\n\n  Object.defineProperty(ParameterEditorViewModel.prototype, \"dataSourceBrowser\", {\n    get: function () {\n      return this._dataSourceBrowserGetter ? this._dataSourceBrowserGetter() : undefined;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ParameterEditorViewModel.prototype._getStaticListLookUpSettingsWrapper = function (staticListLookUpSettings, parameterType) {\n    var editorOptions = {\n      dataFields: [_static_list_lookup_settings_1.lookUpValue.propertyName],\n      noDataText: 'DashboardWebStringId.CollectionEditor.Parameters.NoItems',\n      gridColumns: [__assign({\n        dataField: _static_list_lookup_settings_1.lookUpValue.propertyName\n      }, getGridEditorSettings(parameterType))],\n      createNewItemHandler: function () {\n        var newLookUpValue = new look_up_value_1.LookUpValue({});\n        newLookUpValue.valueType(parameterType);\n        return newLookUpValue;\n      }\n    };\n    return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: staticListLookUpSettings,\n      properties: [__assign(__assign({}, _static_list_lookup_settings_1.lookUpvalues), {\n        formAdapterItem: _form_adapter_editors_1.inlineEditCollectionEditor(editorOptions)\n      })]\n    });\n  };\n\n  ParameterEditorViewModel.prototype._getDynamicListLookUpSettingsWrapper = function (dynamicListLookUpSettings) {\n    var _a;\n\n    var _this = this;\n\n    var isDataSourceAndDataMemberSet = function (model) {\n      if (model) {\n        var isDataSourceSet = !!model.dataSource();\n\n        var dataMemberSupported = _this.dataSourceBrowser.dataMembersSupported(model);\n\n        var isDataMemberSet = true;\n\n        if (dataMemberSupported) {\n          isDataMemberSet = !!model.dataMember();\n        }\n\n        return isDataSourceSet && isDataMemberSet;\n      }\n\n      return false;\n    };\n\n    return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: dynamicListLookUpSettings,\n      properties: [__assign(__assign({}, _dynamic_list_lookup_settings_1._dataSourceNameSerialization), {\n        formAdapterItem: dataSourceChooserEditor(this.dataSourceBrowser)\n      }), __assign(__assign({}, _dynamic_list_lookup_settings_1._dataMemberSerialization), {\n        formAdapterItem: dataMemberChooserEditor({\n          dataSourceBrowser: this.dataSourceBrowser,\n          dynamicListLookUpSettings: dynamicListLookUpSettings\n        })\n      }), __assign(__assign({}, _dynamic_list_lookup_settings_1.valueMemberSerialization), {\n        formAdapterItem: fieldChooserEditor({\n          dataSourceBrowser: this.dataSourceBrowser,\n          dynamicListLookUpSettings: dynamicListLookUpSettings\n        })\n      }), __assign(__assign({}, _dynamic_list_lookup_settings_1.displayMemberSerialization), {\n        formAdapterItem: fieldChooserEditor({\n          dataSourceBrowser: this.dataSourceBrowser,\n          dynamicListLookUpSettings: dynamicListLookUpSettings\n        })\n      }), __assign(__assign({}, _dynamic_list_lookup_settings_1.sortByMember), {\n        formAdapterItem: fieldChooserEditor({\n          dataSourceBrowser: this.dataSourceBrowser,\n          dynamicListLookUpSettings: dynamicListLookUpSettings\n        })\n      }), _dynamic_list_lookup_settings_1.sortOrder],\n      disabledFilterRules: (_a = {}, _a[_dynamic_list_lookup_settings_1._dataMemberSerialization.propertyName] = function () {\n        return !_this.dataSourceBrowser.dataMembersSupported(dynamicListLookUpSettings);\n      }, _a[_dynamic_list_lookup_settings_1.valueMemberSerialization.propertyName] = function () {\n        return !isDataSourceAndDataMemberSet(dynamicListLookUpSettings);\n      }, _a[_dynamic_list_lookup_settings_1.displayMemberSerialization.propertyName] = function () {\n        return !isDataSourceAndDataMemberSet(dynamicListLookUpSettings);\n      }, _a[_dynamic_list_lookup_settings_1.sortByMember.propertyName] = function () {\n        return !isDataSourceAndDataMemberSet(dynamicListLookUpSettings);\n      }, _a)\n    });\n  };\n\n  ParameterEditorViewModel.prototype._getCommonParameterSettingsWrapper = function (parameter, isNameValid) {\n    var _a, _b, _c;\n\n    var _this = this;\n\n    var propertyInfos = [__assign(__assign({}, _parameter_1.parameterName), {\n      validateBeforeSet: true,\n      validationRules: __spreadArray([{\n        type: 'custom',\n        validationCallback: function (options) {\n          return isNameValid(options.value);\n        },\n        message: _default_1.getLocalizationById('DashboardWebStringId.Parameters.ParameterNameShouldBeUnique')\n      }], _parameter_1.parameterName.validationRules)\n    }), _parameter_1.description, _parameter_1.parameterVisible, _parameter_1.allowNull, _parameter_1.allowMultiselect, _parameter_1.parameterTypePropertyGrid, __assign(__assign({}, _parameter_1.defaultValue), {\n      externalUpdateCallback: function (updateHandler) {\n        return _knockout_utils_1.safeSubscribe({\n          lookupSourceType: parameter.lookUpSourceType,\n          allowMultiselect: parameter.allowMultiselect\n        }, function () {\n          return updateHandler({\n            forceValidate: false\n          });\n        });\n      }\n    }), __assign(__assign({}, _parameter_1.defaultValues), {\n      validateBeforeSet: true,\n      formAdapterItem: _lookup_values_editors_1.multipleLookupValueEditor({\n        parameter: parameter,\n        dataSourceBrowser: this.dataSourceBrowser\n      })\n    }), _parameter_1.selectAllValues, _parameter_1.lookUpSourceType];\n    return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: parameter,\n      properties: propertyInfos,\n      visibilityFilterRules: (_a = {}, _a[_parameter_1.defaultValue.propertyName] = function (model) {\n        return !model.allowMultiselect();\n      }, _a[_parameter_1.defaultValues.propertyName] = function (model) {\n        return !!model.allowMultiselect();\n      }, _a[_parameter_1.selectAllValues.propertyName] = function (model) {\n        return !!model.allowMultiselect();\n      }, _a),\n      disabledFilterRules: (_b = {}, _b[_parameter_1.allowMultiselect.propertyName] = ['lookUpSourceType', '=', 'None'], _b[_parameter_1.defaultValues.propertyName] = function (model) {\n        return !!model.selectAllValues();\n      }, _b),\n      dynamicEditorRules: (_c = {}, _c[_parameter_1.defaultValue.propertyName] = function (model) {\n        if (model.lookUpSourceType() !== 'None') {\n          return {\n            formAdapterItem: _lookup_values_editors_1.singleLookupValueEditor({\n              parameter: parameter,\n              dataSourceBrowser: _this.dataSourceBrowser\n            })\n          };\n        } else {\n          return {\n            simpleFormAdapterItem: _parameters_helper_1.ParameterHelper.getEditorType(model.type())\n          };\n        }\n      }, _c)\n    });\n  };\n\n  return ParameterEditorViewModel;\n}(disposable_object_1.DisposableObject);\n\nexports.ParameterEditorViewModel = ParameterEditorViewModel;\n\nvar dataSourceChooserEditor = function (dataSourceBrowser) {\n  return _form_adapter_editors_1.observableSelectBoxEditor({\n    observables: {\n      dashboardDataSources: dataSourceBrowser._dataSources\n    },\n    load: function (args) {\n      return args.dashboardDataSources.map(function (ds) {\n        return {\n          value: ds.componentName(),\n          displayValue: ds.name()\n        };\n      });\n    },\n    additionalOptions: function () {\n      return {\n        placeholder: _default_1.getLocalizationById('DashboardStringId.ParametersSelectorText'),\n        noDataText: _default_1.getLocalizationById('DashboardStringId.FilterElementNoDataToDisplay')\n      };\n    }\n  });\n};\n\nvar dataMemberChooserEditor = function (options) {\n  return _form_adapter_editors_1.observableSelectBoxEditor({\n    observables: {\n      dashboardDataSources: options.dataSourceBrowser._dataSources,\n      selectedDashboardDataSource: options.dynamicListLookUpSettings.dataSource\n    },\n    load: function (args) {\n      var dataSource = args.dashboardDataSources.filter(function (ds) {\n        return ds.componentName() === args.selectedDashboardDataSource;\n      })[0];\n\n      if (dataSource && dataSource.supportDataMembers) {\n        return _jquery_helpers_1.$promiseAdapter(options.dataSourceBrowser.getDataFieldsArray(args.selectedDashboardDataSource, '', '', _data_source_browser_1.isNonCollectionDataField).then(function (members) {\n          return members.map(function (member) {\n            return {\n              value: member.dataMember(),\n              displayValue: member.dataMember()\n            };\n          });\n        }));\n      } else {\n        return [];\n      }\n    },\n    additionalOptions: function () {\n      return {\n        placeholder: _default_1.getLocalizationById('DashboardStringId.ParametersSelectorText'),\n        noDataText: _default_1.getLocalizationById('DashboardStringId.FilterElementNoDataToDisplay')\n      };\n    }\n  });\n};\n\nvar fieldChooserEditor = function (options) {\n  return function (context) {\n    return {\n      template: function (args, itemElement) {\n        var element = _jquery_helpers_1.$unwrap(itemElement);\n\n        element.classList.add('dx-dashboard-field-picker');\n        var value = ko.observable(_form_adapter_editors_1.getFieldValue(args));\n        value.subscribe(function (newValue) {\n          args.component.updateData(args.dataField, newValue);\n        });\n        var model = new _field_picker_1.FieldListPicker(options.dataSourceBrowser, value, options.dynamicListLookUpSettings, args.editorOptions.disabled);\n        ko.applyBindingsToNode(element, {\n          template: {\n            name: 'dx-dashboard-field-picker',\n            data: model\n          }\n        }, context.bindingContext);\n      }\n    };\n  };\n};\n\nfunction getGridEditorSettings(typeString) {\n  switch (typeString) {\n    case 'System.Guid':\n      return {\n        dataType: 'string',\n        editorOptions: {\n          mask: 'xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxx',\n          maskRules: {\n            'x': /[0-9a-fA-F]/\n          },\n          useMaskedValue: true\n        }\n      };\n\n    case 'System.SByte':\n    case 'System.Int64':\n    case 'System.Int32':\n    case 'System.Int16':\n    case 'System.Byte':\n    case 'System.UInt16':\n    case 'System.UInt32':\n    case 'System.UInt64':\n      return {\n        dataType: 'number',\n        editorOptions: {\n          showSpinButtons: true,\n          format: '0#'\n        }\n      };\n\n    case 'System.Single':\n    case 'System.Double':\n    case 'System.Decimal':\n      return {\n        dataType: 'number',\n        editorOptions: {\n          showSpinButtons: true\n        }\n      };\n\n    case 'System.DateTime':\n      return {\n        dataType: 'datetime'\n      };\n\n    case 'System.Boolean':\n      return {\n        dataType: 'boolean'\n      };\n\n    default:\n    case 'System.String':\n      return {\n        dataType: 'string'\n      };\n  }\n}","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/parameter-settings/_parameter-editor-viewmodel.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArray","to","from","il","j","defineProperty","exports","value","ParameterEditorViewModel","ko","require","_data_source_browser_1","_default_1","_jquery_helpers_1","disposable_object_1","_knockout_utils_1","look_up_value_1","_dynamic_list_lookup_settings_1","_parameter_1","_static_list_lookup_settings_1","_parameters_helper_1","_form_adapter_editors_1","_object_properties_wrapper_1","_field_picker_1","_lookup_values_editors_1","_super","parameter","_dataSourceBrowserGetter","isNameValid","_this","commonParameterSettings","_getCommonParameterSettingsWrapper","lookUpParameterType","ObjectPropertiesWrapper","model","properties","lookUpSourceType","simpleFormAdapterItem","staticListLookUpSettings","safeComputed","type","args","_getStaticListLookUpSettingsWrapper","dynamicListLookUpSettings","_getDynamicListLookUpSettingsWrapper","get","undefined","enumerable","configurable","parameterType","editorOptions","dataFields","lookUpValue","propertyName","noDataText","gridColumns","dataField","getGridEditorSettings","createNewItemHandler","newLookUpValue","LookUpValue","valueType","lookUpvalues","formAdapterItem","inlineEditCollectionEditor","_a","isDataSourceAndDataMemberSet","isDataSourceSet","dataSource","dataMemberSupported","dataSourceBrowser","dataMembersSupported","isDataMemberSet","dataMember","_dataSourceNameSerialization","dataSourceChooserEditor","_dataMemberSerialization","dataMemberChooserEditor","valueMemberSerialization","fieldChooserEditor","displayMemberSerialization","sortByMember","sortOrder","disabledFilterRules","_b","_c","propertyInfos","parameterName","validateBeforeSet","validationRules","validationCallback","options","message","getLocalizationById","description","parameterVisible","allowNull","allowMultiselect","parameterTypePropertyGrid","defaultValue","externalUpdateCallback","updateHandler","safeSubscribe","lookupSourceType","forceValidate","defaultValues","multipleLookupValueEditor","selectAllValues","visibilityFilterRules","dynamicEditorRules","singleLookupValueEditor","ParameterHelper","getEditorType","DisposableObject","observableSelectBoxEditor","observables","dashboardDataSources","_dataSources","load","map","ds","componentName","displayValue","name","additionalOptions","placeholder","selectedDashboardDataSource","filter","supportDataMembers","$promiseAdapter","getDataFieldsArray","isNonCollectionDataField","then","members","member","context","template","itemElement","element","$unwrap","classList","add","observable","getFieldValue","subscribe","newValue","component","updateData","FieldListPicker","disabled","applyBindingsToNode","data","bindingContext","typeString","dataType","mask","maskRules","useMaskedValue","showSpinButtons","format"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_parameter-editor-viewmodel.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParameterEditorViewModel = void 0;\nvar ko = require(\"knockout\");\nvar _data_source_browser_1 = require(\"../../common/_data-source-browser\");\nvar _default_1 = require(\"../../data/localization/_default\");\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar disposable_object_1 = require(\"../../model/disposable-object\");\nvar _knockout_utils_1 = require(\"../../model/internal/_knockout-utils\");\nvar look_up_value_1 = require(\"../../model/parameters/look-up-value\");\nvar _dynamic_list_lookup_settings_1 = require(\"../../model/parameters/metadata/_dynamic-list-lookup-settings\");\nvar _parameter_1 = require(\"../../model/parameters/metadata/_parameter\");\nvar _static_list_lookup_settings_1 = require(\"../../model/parameters/metadata/_static-list-lookup-settings\");\nvar _parameters_helper_1 = require(\"../../model/parameters/_parameters-helper\");\nvar _form_adapter_editors_1 = require(\"../form-adapter/_form-adapter-editors\");\nvar _object_properties_wrapper_1 = require(\"../form-adapter/_object-properties-wrapper\");\nvar _field_picker_1 = require(\"./_field-picker\");\nvar _lookup_values_editors_1 = require(\"./_lookup-values-editors\");\nvar ParameterEditorViewModel = (function (_super) {\n    __extends(ParameterEditorViewModel, _super);\n    function ParameterEditorViewModel(parameter, _dataSourceBrowserGetter, isNameValid) {\n        var _this = _super.call(this) || this;\n        _this.parameter = parameter;\n        _this._dataSourceBrowserGetter = _dataSourceBrowserGetter;\n        _this.commonParameterSettings = _this._getCommonParameterSettingsWrapper(parameter, isNameValid);\n        _this.lookUpParameterType = new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: parameter,\n            properties: [__assign(__assign({}, _parameter_1.lookUpSourceType), { simpleFormAdapterItem: 'selectBoxEditor' })]\n        });\n        _this.staticListLookUpSettings = _knockout_utils_1.safeComputed({ staticListLookUpSettings: parameter.staticListLookUpSettings, type: _this.parameter.type }, function (args) {\n            if (args.staticListLookUpSettings) {\n                return _this._getStaticListLookUpSettingsWrapper(args.staticListLookUpSettings, args.type);\n            }\n            return null;\n        });\n        _this.dynamicListLookUpSettings = _knockout_utils_1.safeComputed({ dynamicListLookUpSettings: parameter.dynamicListLookUpSettings }, function (args) {\n            if (args.dynamicListLookUpSettings) {\n                return _this._getDynamicListLookUpSettingsWrapper(args.dynamicListLookUpSettings);\n            }\n            return null;\n        });\n        return _this;\n    }\n    Object.defineProperty(ParameterEditorViewModel.prototype, \"dataSourceBrowser\", {\n        get: function () {\n            return this._dataSourceBrowserGetter ? this._dataSourceBrowserGetter() : undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ParameterEditorViewModel.prototype._getStaticListLookUpSettingsWrapper = function (staticListLookUpSettings, parameterType) {\n        var editorOptions = {\n            dataFields: [_static_list_lookup_settings_1.lookUpValue.propertyName],\n            noDataText: 'DashboardWebStringId.CollectionEditor.Parameters.NoItems',\n            gridColumns: [__assign({ dataField: _static_list_lookup_settings_1.lookUpValue.propertyName }, getGridEditorSettings(parameterType))],\n            createNewItemHandler: function () {\n                var newLookUpValue = new look_up_value_1.LookUpValue({});\n                newLookUpValue.valueType(parameterType);\n                return newLookUpValue;\n            },\n        };\n        return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: staticListLookUpSettings,\n            properties: [__assign(__assign({}, _static_list_lookup_settings_1.lookUpvalues), { formAdapterItem: _form_adapter_editors_1.inlineEditCollectionEditor(editorOptions) })]\n        });\n    };\n    ParameterEditorViewModel.prototype._getDynamicListLookUpSettingsWrapper = function (dynamicListLookUpSettings) {\n        var _a;\n        var _this = this;\n        var isDataSourceAndDataMemberSet = function (model) {\n            if (model) {\n                var isDataSourceSet = !!model.dataSource();\n                var dataMemberSupported = _this.dataSourceBrowser.dataMembersSupported(model);\n                var isDataMemberSet = true;\n                if (dataMemberSupported) {\n                    isDataMemberSet = !!model.dataMember();\n                }\n                return isDataSourceSet && isDataMemberSet;\n            }\n            return false;\n        };\n        return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: dynamicListLookUpSettings,\n            properties: [\n                __assign(__assign({}, _dynamic_list_lookup_settings_1._dataSourceNameSerialization), { formAdapterItem: dataSourceChooserEditor(this.dataSourceBrowser) }),\n                __assign(__assign({}, _dynamic_list_lookup_settings_1._dataMemberSerialization), { formAdapterItem: dataMemberChooserEditor({ dataSourceBrowser: this.dataSourceBrowser, dynamicListLookUpSettings: dynamicListLookUpSettings }) }),\n                __assign(__assign({}, _dynamic_list_lookup_settings_1.valueMemberSerialization), { formAdapterItem: fieldChooserEditor({ dataSourceBrowser: this.dataSourceBrowser, dynamicListLookUpSettings: dynamicListLookUpSettings }) }),\n                __assign(__assign({}, _dynamic_list_lookup_settings_1.displayMemberSerialization), { formAdapterItem: fieldChooserEditor({ dataSourceBrowser: this.dataSourceBrowser, dynamicListLookUpSettings: dynamicListLookUpSettings }) }),\n                __assign(__assign({}, _dynamic_list_lookup_settings_1.sortByMember), { formAdapterItem: fieldChooserEditor({ dataSourceBrowser: this.dataSourceBrowser, dynamicListLookUpSettings: dynamicListLookUpSettings }) }),\n                _dynamic_list_lookup_settings_1.sortOrder\n            ],\n            disabledFilterRules: (_a = {},\n                _a[_dynamic_list_lookup_settings_1._dataMemberSerialization.propertyName] = function () { return !_this.dataSourceBrowser.dataMembersSupported(dynamicListLookUpSettings); },\n                _a[_dynamic_list_lookup_settings_1.valueMemberSerialization.propertyName] = function () { return !isDataSourceAndDataMemberSet(dynamicListLookUpSettings); },\n                _a[_dynamic_list_lookup_settings_1.displayMemberSerialization.propertyName] = function () { return !isDataSourceAndDataMemberSet(dynamicListLookUpSettings); },\n                _a[_dynamic_list_lookup_settings_1.sortByMember.propertyName] = function () { return !isDataSourceAndDataMemberSet(dynamicListLookUpSettings); },\n                _a)\n        });\n    };\n    ParameterEditorViewModel.prototype._getCommonParameterSettingsWrapper = function (parameter, isNameValid) {\n        var _a, _b, _c;\n        var _this = this;\n        var propertyInfos = [\n            __assign(__assign({}, _parameter_1.parameterName), { validateBeforeSet: true, validationRules: __spreadArray([\n                    {\n                        type: 'custom',\n                        validationCallback: function (options) { return isNameValid(options.value); },\n                        message: _default_1.getLocalizationById('DashboardWebStringId.Parameters.ParameterNameShouldBeUnique')\n                    }\n                ], _parameter_1.parameterName.validationRules) }),\n            _parameter_1.description,\n            _parameter_1.parameterVisible,\n            _parameter_1.allowNull,\n            _parameter_1.allowMultiselect,\n            _parameter_1.parameterTypePropertyGrid,\n            __assign(__assign({}, _parameter_1.defaultValue), { externalUpdateCallback: function (updateHandler) { return _knockout_utils_1.safeSubscribe({\n                    lookupSourceType: parameter.lookUpSourceType,\n                    allowMultiselect: parameter.allowMultiselect\n                }, function () { return updateHandler({ forceValidate: false }); }); } }),\n            __assign(__assign({}, _parameter_1.defaultValues), { validateBeforeSet: true, formAdapterItem: _lookup_values_editors_1.multipleLookupValueEditor({ parameter: parameter, dataSourceBrowser: this.dataSourceBrowser }) }),\n            _parameter_1.selectAllValues,\n            _parameter_1.lookUpSourceType\n        ];\n        return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: parameter,\n            properties: propertyInfos,\n            visibilityFilterRules: (_a = {},\n                _a[_parameter_1.defaultValue.propertyName] = function (model) { return !model.allowMultiselect(); },\n                _a[_parameter_1.defaultValues.propertyName] = function (model) { return !!model.allowMultiselect(); },\n                _a[_parameter_1.selectAllValues.propertyName] = function (model) { return !!model.allowMultiselect(); },\n                _a),\n            disabledFilterRules: (_b = {},\n                _b[_parameter_1.allowMultiselect.propertyName] = ['lookUpSourceType', '=', 'None'],\n                _b[_parameter_1.defaultValues.propertyName] = function (model) { return !!model.selectAllValues(); },\n                _b),\n            dynamicEditorRules: (_c = {},\n                _c[_parameter_1.defaultValue.propertyName] = function (model) {\n                    if (model.lookUpSourceType() !== 'None') {\n                        return { formAdapterItem: _lookup_values_editors_1.singleLookupValueEditor({ parameter: parameter, dataSourceBrowser: _this.dataSourceBrowser }) };\n                    }\n                    else {\n                        return { simpleFormAdapterItem: _parameters_helper_1.ParameterHelper.getEditorType(model.type()) };\n                    }\n                },\n                _c)\n        });\n    };\n    return ParameterEditorViewModel;\n}(disposable_object_1.DisposableObject));\nexports.ParameterEditorViewModel = ParameterEditorViewModel;\nvar dataSourceChooserEditor = function (dataSourceBrowser) {\n    return _form_adapter_editors_1.observableSelectBoxEditor({\n        observables: {\n            dashboardDataSources: dataSourceBrowser._dataSources\n        },\n        load: function (args) {\n            return args.dashboardDataSources.map(function (ds) {\n                return {\n                    value: ds.componentName(),\n                    displayValue: ds.name()\n                };\n            });\n        },\n        additionalOptions: function () {\n            return {\n                placeholder: _default_1.getLocalizationById('DashboardStringId.ParametersSelectorText'),\n                noDataText: _default_1.getLocalizationById('DashboardStringId.FilterElementNoDataToDisplay')\n            };\n        }\n    });\n};\nvar dataMemberChooserEditor = function (options) {\n    return _form_adapter_editors_1.observableSelectBoxEditor({\n        observables: {\n            dashboardDataSources: options.dataSourceBrowser._dataSources,\n            selectedDashboardDataSource: options.dynamicListLookUpSettings.dataSource,\n        },\n        load: function (args) {\n            var dataSource = args.dashboardDataSources.filter(function (ds) { return ds.componentName() === args.selectedDashboardDataSource; })[0];\n            if (dataSource && dataSource.supportDataMembers) {\n                return _jquery_helpers_1.$promiseAdapter(options.dataSourceBrowser.getDataFieldsArray(args.selectedDashboardDataSource, '', '', _data_source_browser_1.isNonCollectionDataField)\n                    .then(function (members) {\n                    return members.map(function (member) { return { value: member.dataMember(), displayValue: member.dataMember() }; });\n                }));\n            }\n            else {\n                return [];\n            }\n        },\n        additionalOptions: function () {\n            return {\n                placeholder: _default_1.getLocalizationById('DashboardStringId.ParametersSelectorText'),\n                noDataText: _default_1.getLocalizationById('DashboardStringId.FilterElementNoDataToDisplay'),\n            };\n        }\n    });\n};\nvar fieldChooserEditor = function (options) { return function (context) {\n    return {\n        template: function (args, itemElement) {\n            var element = _jquery_helpers_1.$unwrap(itemElement);\n            element.classList.add('dx-dashboard-field-picker');\n            var value = ko.observable(_form_adapter_editors_1.getFieldValue(args));\n            value.subscribe(function (newValue) {\n                args.component.updateData(args.dataField, newValue);\n            });\n            var model = new _field_picker_1.FieldListPicker(options.dataSourceBrowser, value, options.dynamicListLookUpSettings, args.editorOptions.disabled);\n            ko.applyBindingsToNode(element, { template: { name: 'dx-dashboard-field-picker', data: model } }, context.bindingContext);\n        }\n    };\n}; };\nfunction getGridEditorSettings(typeString) {\n    switch (typeString) {\n        case 'System.Guid':\n            return {\n                dataType: 'string',\n                editorOptions: {\n                    mask: 'xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxx',\n                    maskRules: {\n                        'x': /[0-9a-fA-F]/,\n                    },\n                    useMaskedValue: true,\n                },\n            };\n        case 'System.SByte':\n        case 'System.Int64':\n        case 'System.Int32':\n        case 'System.Int16':\n        case 'System.Byte':\n        case 'System.UInt16':\n        case 'System.UInt32':\n        case 'System.UInt64':\n            return {\n                dataType: 'number',\n                editorOptions: {\n                    showSpinButtons: true,\n                    format: '0#',\n                },\n            };\n        case 'System.Single':\n        case 'System.Double':\n        case 'System.Decimal':\n            return {\n                dataType: 'number',\n                editorOptions: {\n                    showSpinButtons: true,\n                },\n            };\n        case 'System.DateTime':\n            return {\n                dataType: 'datetime'\n            };\n        case 'System.Boolean':\n            return {\n                dataType: 'boolean'\n            };\n        default:\n        case 'System.String':\n            return {\n                dataType: 'string'\n            };\n    }\n}\n"]},"metadata":{},"sourceType":"script"}