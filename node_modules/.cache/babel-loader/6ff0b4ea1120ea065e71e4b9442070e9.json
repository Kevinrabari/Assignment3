{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_card-element-properties-composer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CardElementPropertiesComposer = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _default_1 = require(\"../../../data/localization/_default\");\n\nvar card_item_delta_format_rule_1 = require(\"../../../model/format-rules/card-item-delta-format-rule\");\n\nvar _dashboard_item_format_rule_1 = require(\"../../../model/format-rules/metadata/_dashboard-item-format-rule\");\n\nvar _undo_engine_helper_1 = require(\"../../../model/internal/_undo-engine-helper\");\n\nvar card_1 = require(\"../../../model/items/card/card\");\n\nvar card_layout_template_1 = require(\"../../../model/items/card/card-layout-template\");\n\nvar _card_1 = require(\"../../../model/items/card/metadata/_card\");\n\nvar _card_row_1 = require(\"../../../model/items/card/metadata/_card-row\");\n\nvar _data_dashboard_item_1 = require(\"../../../model/items/metadata/_data-dashboard-item\");\n\nvar _sparkline_options_1 = require(\"../../../model/items/options/metadata/_sparkline-options\");\n\nvar _base_metadata_1 = require(\"../../../model/metadata/_base-metadata\");\n\nvar _form_adapter_editors_1 = require(\"../../form-adapter/_form-adapter-editors\");\n\nvar _object_properties_wrapper_1 = require(\"../../form-adapter/_object-properties-wrapper\");\n\nvar _accordion_tab_1 = require(\"../../properties-controller/_accordion-tab\");\n\nvar _display_name_provider_1 = require(\"../../_display-name-provider\");\n\nvar _base_properties_composer_1 = require(\"./_base-properties-composer\");\n\nvar _shared_composers_1 = require(\"./_shared-composers\");\n\nvar CardElementPropertiesComposer = function (_super) {\n  __extends(CardElementPropertiesComposer, _super);\n\n  function CardElementPropertiesComposer(customizeHandler, editTemplateHandler, editFormat, applyTemplateToAllCards, editRuleHandler) {\n    if (editTemplateHandler === void 0) {\n      editTemplateHandler = function (model) {};\n    }\n\n    if (editFormat === void 0) {\n      editFormat = function (model) {};\n    }\n\n    if (applyTemplateToAllCards === void 0) {\n      applyTemplateToAllCards = function (template) {};\n    }\n\n    if (editRuleHandler === void 0) {\n      editRuleHandler = function () {};\n    }\n\n    var _this = _super.call(this, customizeHandler) || this;\n\n    _this.editTemplateHandler = editTemplateHandler;\n    _this.editFormat = editFormat;\n    _this.applyTemplateToAllCards = applyTemplateToAllCards;\n    _this.editRuleHandler = editRuleHandler;\n    return _this;\n  }\n\n  CardElementPropertiesComposer.prototype._composeTabsCore = function (model, args) {\n    var commonTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.Common, 'DashboardWebStringId.Options', this.getCommonWrapper(model, args.dashboardItem, args.dataSourceBrowser)),\n        deltaTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.DeltaOptions, 'DashboardWebStringId.Grid.DeltaOptions'),\n        sparklineTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.SparklineOptions, 'DashboardWebStringId.Card.SparklineOptions', this.getSparklineWrapper(model)),\n        templatesTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.CardTemplates, 'DashboardWebStringId.CardLayout.Editor.CardLayout'),\n        deltaFormatsTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.DeltaFormats, 'DashboardWebStringId.CardLayout.Editor.FormatOptions'),\n        conditionalFormattingTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.ConditionalFormatting, 'DashboardWebStringId.ConditionalFormatting'),\n        result = [commonTab, templatesTab, deltaTab, sparklineTab, deltaFormatsTab, conditionalFormattingTab];\n\n    if (model instanceof card_1.Card) {\n      ko.computed(function () {\n        deltaTab.tabModel(_shared_composers_1.SharedComposers.getDeltaOptionsWrapper(model._isTypeEmpty() ? model.deltaOptions : model.cardDeltaOptions));\n      });\n      conditionalFormattingTab.tabModel(this.getFormatRulesWrapper(model, args.dashboardItem));\n      this.fillTemplatesTab(templatesTab, model);\n      deltaFormatsTab.tabModel(_shared_composers_1.SharedComposers.getDeltaFormatsOptionsWrapper(model, this.editFormat));\n    }\n\n    return result;\n  };\n\n  CardElementPropertiesComposer.prototype.getCommonWrapper = function (model, dashboardItem, dataSourceBrowser) {\n    var properties = [__assign({\n      editorOptions: {\n        placeholder: _display_name_provider_1.getDataItemContainerDisplayName(dataSourceBrowser, dashboardItem, model)\n      }\n    }, _base_metadata_1.name)];\n    return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: model,\n      properties: properties,\n      disabledFilterRules: null\n    });\n  };\n\n  CardElementPropertiesComposer.prototype.getSparklineWrapper = function (model) {\n    var properties = _shared_composers_1.SharedComposers.getSparklineOptionsProperties();\n\n    var disabledRules = {};\n    disabledRules[_sparkline_options_1.viewType.propertyName] = [_card_1.showSparkline.propertyName, '=', false];\n    disabledRules[_sparkline_options_1.highlightMinMaxPoints.propertyName] = [_card_1.showSparkline.propertyName, '=', false];\n    disabledRules[_sparkline_options_1.highlightStartEndPoints.propertyName] = [_card_1.showSparkline.propertyName, '=', false];\n    var visibilityRules = {};\n\n    visibilityRules[_card_1.showSparkline.propertyName] = function () {\n      return model._isTypeEmpty();\n    };\n\n    return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: model,\n      properties: [_card_1.showSparkline, {\n        container: _card_row_1.cardSparklineRowOptions,\n        properties: properties\n      }],\n      disabledFilterRules: disabledRules,\n      visibilityFilterRules: visibilityRules\n    });\n  };\n\n  CardElementPropertiesComposer.prototype.fillTemplatesTab = function (tab, card) {\n    var _this = this;\n\n    var availableTemplates = ko.computed(function () {\n      return _this.getAvailableTemplates(card);\n    });\n    var selectedTemplate = ko.computed({\n      read: function () {\n        return card.layoutTemplate();\n      },\n      write: function (newTemplate) {\n        _this.switchTemplate(card, newTemplate);\n      }\n    });\n    var singleChoiceEditorOptions = {\n      propertyName: 'title',\n      dataSource: availableTemplates(),\n      enableEditItem: function (item) {\n        return !(item instanceof card_layout_template_1.CardEmptyLayoutTemplate);\n      },\n      editItemHandler: this.editTemplateHandler,\n      customToolbarItems: [{\n        name: _default_1.getLocalizationById('DashboardWebStringId.CardLayout.ApplyToAllCards'),\n        icon: '#dx-dashboard-template-to-all-cards',\n        action: function () {\n          _this.applyTemplateToAllCards(selectedTemplate());\n        }\n      }]\n    };\n    tab.tabModel(new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: {\n        layoutTemplates: selectedTemplate\n      },\n      properties: [{\n        formAdapterItem: _form_adapter_editors_1.editableListEditor(singleChoiceEditorOptions),\n        propertyName: 'layoutTemplates'\n      }]\n    }));\n  };\n\n  CardElementPropertiesComposer.prototype.switchTemplate = function (card, newTemplate) {\n    var templateChanged = function (newTemplate) {\n      return card.layoutTemplate().getType() !== newTemplate.getType();\n    };\n\n    if (templateChanged(newTemplate)) {\n      card._setTemplateSwitchingOptions(newTemplate);\n    }\n  };\n\n  CardElementPropertiesComposer.prototype.getAvailableTemplates = function (card) {\n    var result = [];\n    var currentTemplateAdded = false;\n    var currentTemplate = card.layoutTemplate();\n\n    var addTemplate = function (templateClass) {\n      var templateInstance = new templateClass();\n\n      if (templateInstance.getType() === currentTemplate.getType()) {\n        result.push(currentTemplate);\n        currentTemplateAdded = true;\n      } else {\n        templateInstance._resetToDefaults();\n\n        result.push(templateInstance);\n      }\n    };\n\n    addTemplate(card_layout_template_1.CardStretchedLayoutTemplate);\n    addTemplate(card_layout_template_1.CardCenteredLayoutTemplate);\n    addTemplate(card_layout_template_1.CardCompactLayoutTemplate);\n    addTemplate(card_layout_template_1.CardLightweightLayoutTemplate);\n\n    if (!currentTemplateAdded) {\n      result.push(currentTemplate);\n    }\n\n    return result;\n  };\n\n  CardElementPropertiesComposer.prototype.getFormatRulesWrapper = function (model, dashboardItem) {\n    var collectionEditorOptions = {\n      propertyName: _dashboard_item_format_rule_1.classCaption.propertyName,\n      createNewItemHandler: function () {\n        var rule = new card_item_delta_format_rule_1.CardItemDeltaFormatRule();\n        rule.cardId(model._getDataId());\n        return rule;\n      },\n      editItemHandler: this.editRuleHandler,\n      visibleItemsFilter: function (rule) {\n        return rule instanceof card_item_delta_format_rule_1.CardItemDeltaFormatRule && rule.cardId() === model._getDataId();\n      }\n    };\n    return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: dashboardItem,\n      properties: [__assign(__assign({}, _data_dashboard_item_1.formatRules), {\n        formAdapterItem: _form_adapter_editors_1.collectionEditor(collectionEditorOptions)\n      })]\n    });\n  };\n\n  __decorate([_undo_engine_helper_1.wrapWithUndoRedo], CardElementPropertiesComposer.prototype, \"switchTemplate\", null);\n\n  return CardElementPropertiesComposer;\n}(_base_properties_composer_1.DataItemContainerPropertiesComposer);\n\nexports.CardElementPropertiesComposer = CardElementPropertiesComposer;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/items/properties-composers/_card-element-properties-composer.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","exports","value","CardElementPropertiesComposer","ko","require","_default_1","card_item_delta_format_rule_1","_dashboard_item_format_rule_1","_undo_engine_helper_1","card_1","card_layout_template_1","_card_1","_card_row_1","_data_dashboard_item_1","_sparkline_options_1","_base_metadata_1","_form_adapter_editors_1","_object_properties_wrapper_1","_accordion_tab_1","_display_name_provider_1","_base_properties_composer_1","_shared_composers_1","_super","customizeHandler","editTemplateHandler","editFormat","applyTemplateToAllCards","editRuleHandler","model","template","_this","_composeTabsCore","args","commonTab","AccordionTab","KnownTabs","Common","getCommonWrapper","dashboardItem","dataSourceBrowser","deltaTab","DeltaOptions","sparklineTab","SparklineOptions","getSparklineWrapper","templatesTab","CardTemplates","deltaFormatsTab","DeltaFormats","conditionalFormattingTab","ConditionalFormatting","result","Card","computed","tabModel","SharedComposers","getDeltaOptionsWrapper","_isTypeEmpty","deltaOptions","cardDeltaOptions","getFormatRulesWrapper","fillTemplatesTab","getDeltaFormatsOptionsWrapper","properties","editorOptions","placeholder","getDataItemContainerDisplayName","name","ObjectPropertiesWrapper","disabledFilterRules","getSparklineOptionsProperties","disabledRules","viewType","propertyName","showSparkline","highlightMinMaxPoints","highlightStartEndPoints","visibilityRules","container","cardSparklineRowOptions","visibilityFilterRules","tab","card","availableTemplates","getAvailableTemplates","selectedTemplate","read","layoutTemplate","write","newTemplate","switchTemplate","singleChoiceEditorOptions","dataSource","enableEditItem","item","CardEmptyLayoutTemplate","editItemHandler","customToolbarItems","getLocalizationById","icon","action","layoutTemplates","formAdapterItem","editableListEditor","templateChanged","getType","_setTemplateSwitchingOptions","currentTemplateAdded","currentTemplate","addTemplate","templateClass","templateInstance","push","_resetToDefaults","CardStretchedLayoutTemplate","CardCenteredLayoutTemplate","CardCompactLayoutTemplate","CardLightweightLayoutTemplate","collectionEditorOptions","classCaption","createNewItemHandler","rule","CardItemDeltaFormatRule","cardId","_getDataId","visibleItemsFilter","formatRules","collectionEditor","wrapWithUndoRedo","DataItemContainerPropertiesComposer"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_card-element-properties-composer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardElementPropertiesComposer = void 0;\nvar ko = require(\"knockout\");\nvar _default_1 = require(\"../../../data/localization/_default\");\nvar card_item_delta_format_rule_1 = require(\"../../../model/format-rules/card-item-delta-format-rule\");\nvar _dashboard_item_format_rule_1 = require(\"../../../model/format-rules/metadata/_dashboard-item-format-rule\");\nvar _undo_engine_helper_1 = require(\"../../../model/internal/_undo-engine-helper\");\nvar card_1 = require(\"../../../model/items/card/card\");\nvar card_layout_template_1 = require(\"../../../model/items/card/card-layout-template\");\nvar _card_1 = require(\"../../../model/items/card/metadata/_card\");\nvar _card_row_1 = require(\"../../../model/items/card/metadata/_card-row\");\nvar _data_dashboard_item_1 = require(\"../../../model/items/metadata/_data-dashboard-item\");\nvar _sparkline_options_1 = require(\"../../../model/items/options/metadata/_sparkline-options\");\nvar _base_metadata_1 = require(\"../../../model/metadata/_base-metadata\");\nvar _form_adapter_editors_1 = require(\"../../form-adapter/_form-adapter-editors\");\nvar _object_properties_wrapper_1 = require(\"../../form-adapter/_object-properties-wrapper\");\nvar _accordion_tab_1 = require(\"../../properties-controller/_accordion-tab\");\nvar _display_name_provider_1 = require(\"../../_display-name-provider\");\nvar _base_properties_composer_1 = require(\"./_base-properties-composer\");\nvar _shared_composers_1 = require(\"./_shared-composers\");\nvar CardElementPropertiesComposer = (function (_super) {\n    __extends(CardElementPropertiesComposer, _super);\n    function CardElementPropertiesComposer(customizeHandler, editTemplateHandler, editFormat, applyTemplateToAllCards, editRuleHandler) {\n        if (editTemplateHandler === void 0) { editTemplateHandler = function (model) { }; }\n        if (editFormat === void 0) { editFormat = function (model) { }; }\n        if (applyTemplateToAllCards === void 0) { applyTemplateToAllCards = function (template) { }; }\n        if (editRuleHandler === void 0) { editRuleHandler = function () { }; }\n        var _this = _super.call(this, customizeHandler) || this;\n        _this.editTemplateHandler = editTemplateHandler;\n        _this.editFormat = editFormat;\n        _this.applyTemplateToAllCards = applyTemplateToAllCards;\n        _this.editRuleHandler = editRuleHandler;\n        return _this;\n    }\n    CardElementPropertiesComposer.prototype._composeTabsCore = function (model, args) {\n        var commonTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.Common, 'DashboardWebStringId.Options', this.getCommonWrapper(model, args.dashboardItem, args.dataSourceBrowser)), deltaTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.DeltaOptions, 'DashboardWebStringId.Grid.DeltaOptions'), sparklineTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.SparklineOptions, 'DashboardWebStringId.Card.SparklineOptions', this.getSparklineWrapper(model)), templatesTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.CardTemplates, 'DashboardWebStringId.CardLayout.Editor.CardLayout'), deltaFormatsTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.DeltaFormats, 'DashboardWebStringId.CardLayout.Editor.FormatOptions'), conditionalFormattingTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.ConditionalFormatting, 'DashboardWebStringId.ConditionalFormatting'), result = [commonTab, templatesTab, deltaTab, sparklineTab, deltaFormatsTab, conditionalFormattingTab];\n        if (model instanceof card_1.Card) {\n            ko.computed(function () {\n                deltaTab.tabModel(_shared_composers_1.SharedComposers.getDeltaOptionsWrapper(model._isTypeEmpty() ? model.deltaOptions : model.cardDeltaOptions));\n            });\n            conditionalFormattingTab.tabModel(this.getFormatRulesWrapper(model, args.dashboardItem));\n            this.fillTemplatesTab(templatesTab, model);\n            deltaFormatsTab.tabModel(_shared_composers_1.SharedComposers.getDeltaFormatsOptionsWrapper(model, this.editFormat));\n        }\n        return result;\n    };\n    CardElementPropertiesComposer.prototype.getCommonWrapper = function (model, dashboardItem, dataSourceBrowser) {\n        var properties = [\n            __assign({ editorOptions: { placeholder: _display_name_provider_1.getDataItemContainerDisplayName(dataSourceBrowser, dashboardItem, model) } }, _base_metadata_1.name)\n        ];\n        return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: model,\n            properties: properties,\n            disabledFilterRules: null\n        });\n    };\n    CardElementPropertiesComposer.prototype.getSparklineWrapper = function (model) {\n        var properties = _shared_composers_1.SharedComposers.getSparklineOptionsProperties();\n        var disabledRules = {};\n        disabledRules[_sparkline_options_1.viewType.propertyName] = [_card_1.showSparkline.propertyName, '=', false];\n        disabledRules[_sparkline_options_1.highlightMinMaxPoints.propertyName] = [_card_1.showSparkline.propertyName, '=', false];\n        disabledRules[_sparkline_options_1.highlightStartEndPoints.propertyName] = [_card_1.showSparkline.propertyName, '=', false];\n        var visibilityRules = {};\n        visibilityRules[_card_1.showSparkline.propertyName] = function () { return model._isTypeEmpty(); };\n        return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: model,\n            properties: [\n                _card_1.showSparkline,\n                {\n                    container: _card_row_1.cardSparklineRowOptions,\n                    properties: properties\n                }\n            ],\n            disabledFilterRules: disabledRules,\n            visibilityFilterRules: visibilityRules\n        });\n    };\n    CardElementPropertiesComposer.prototype.fillTemplatesTab = function (tab, card) {\n        var _this = this;\n        var availableTemplates = ko.computed(function () { return _this.getAvailableTemplates(card); });\n        var selectedTemplate = ko.computed({\n            read: function () {\n                return card.layoutTemplate();\n            },\n            write: function (newTemplate) {\n                _this.switchTemplate(card, newTemplate);\n            }\n        });\n        var singleChoiceEditorOptions = {\n            propertyName: 'title',\n            dataSource: availableTemplates(),\n            enableEditItem: function (item) { return !(item instanceof card_layout_template_1.CardEmptyLayoutTemplate); },\n            editItemHandler: this.editTemplateHandler,\n            customToolbarItems: [{\n                    name: _default_1.getLocalizationById('DashboardWebStringId.CardLayout.ApplyToAllCards'),\n                    icon: '#dx-dashboard-template-to-all-cards',\n                    action: function () { _this.applyTemplateToAllCards(selectedTemplate()); }\n                }],\n        };\n        tab.tabModel(new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: { layoutTemplates: selectedTemplate },\n            properties: [{\n                    formAdapterItem: _form_adapter_editors_1.editableListEditor(singleChoiceEditorOptions),\n                    propertyName: 'layoutTemplates'\n                }]\n        }));\n    };\n    CardElementPropertiesComposer.prototype.switchTemplate = function (card, newTemplate) {\n        var templateChanged = function (newTemplate) {\n            return card.layoutTemplate().getType() !== newTemplate.getType();\n        };\n        if (templateChanged(newTemplate)) {\n            card._setTemplateSwitchingOptions(newTemplate);\n        }\n    };\n    CardElementPropertiesComposer.prototype.getAvailableTemplates = function (card) {\n        var result = [];\n        var currentTemplateAdded = false;\n        var currentTemplate = card.layoutTemplate();\n        var addTemplate = function (templateClass) {\n            var templateInstance = new templateClass();\n            if (templateInstance.getType() === currentTemplate.getType()) {\n                result.push(currentTemplate);\n                currentTemplateAdded = true;\n            }\n            else {\n                templateInstance._resetToDefaults();\n                result.push(templateInstance);\n            }\n        };\n        addTemplate(card_layout_template_1.CardStretchedLayoutTemplate);\n        addTemplate(card_layout_template_1.CardCenteredLayoutTemplate);\n        addTemplate(card_layout_template_1.CardCompactLayoutTemplate);\n        addTemplate(card_layout_template_1.CardLightweightLayoutTemplate);\n        if (!currentTemplateAdded) {\n            result.push(currentTemplate);\n        }\n        return result;\n    };\n    CardElementPropertiesComposer.prototype.getFormatRulesWrapper = function (model, dashboardItem) {\n        var collectionEditorOptions = {\n            propertyName: _dashboard_item_format_rule_1.classCaption.propertyName,\n            createNewItemHandler: function () {\n                var rule = new card_item_delta_format_rule_1.CardItemDeltaFormatRule();\n                rule.cardId(model._getDataId());\n                return rule;\n            },\n            editItemHandler: this.editRuleHandler,\n            visibleItemsFilter: function (rule) { return (rule instanceof card_item_delta_format_rule_1.CardItemDeltaFormatRule) && rule.cardId() === model._getDataId(); },\n        };\n        return new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: dashboardItem,\n            properties: [__assign(__assign({}, _data_dashboard_item_1.formatRules), { formAdapterItem: _form_adapter_editors_1.collectionEditor(collectionEditorOptions) })]\n        });\n    };\n    __decorate([\n        _undo_engine_helper_1.wrapWithUndoRedo\n    ], CardElementPropertiesComposer.prototype, \"switchTemplate\", null);\n    return CardElementPropertiesComposer;\n}(_base_properties_composer_1.DataItemContainerPropertiesComposer));\nexports.CardElementPropertiesComposer = CardElementPropertiesComposer;\n"]},"metadata":{},"sourceType":"script"}