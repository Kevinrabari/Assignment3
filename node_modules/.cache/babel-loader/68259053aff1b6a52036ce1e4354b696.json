{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_simple-filter-tree-list.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimpleFilterTreeList = void 0;\n\nvar array_store_1 = require(\"devextreme/data/array_store\");\n\nvar custom_store_1 = require(\"devextreme/data/custom_store\");\n\nvar check_box_1 = require(\"devextreme/ui/check_box\");\n\nvar ko = require(\"knockout\");\n\nvar _default_1 = require(\"../../../data/localization/_default\");\n\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\n\nvar _utils_1 = require(\"../../../data/_utils\");\n\nvar model_1 = require(\"../../../model\");\n\nvar treeRootValue = '0';\n\nvar SimpleFilterTreeList = function (_super) {\n  __extends(SimpleFilterTreeList, _super);\n\n  function SimpleFilterTreeList(dashboardItem, dataSourceBrowser) {\n    var _this = _super.call(this) || this;\n\n    _this.dashboardItem = dashboardItem;\n    _this.dataSourceBrowser = dataSourceBrowser;\n    _this._dataCache = [];\n    _this.template = {\n      name: 'dx-simple-filter-tree-list',\n      data: {\n        editorOptions: ko.observable(undefined),\n        visible: ko.observable(false)\n      }\n    };\n    return _this;\n  }\n\n  SimpleFilterTreeList.prototype.reload = function (field) {\n    this._dataCache = [];\n    this.template.data.editorOptions(this._getTreeListOptions(this._getStore(field), field && !field.isGroup()));\n  };\n\n  SimpleFilterTreeList.prototype.show = function (field) {\n    this.template.data.visible(true);\n    this.reload(field);\n  };\n\n  SimpleFilterTreeList.prototype.hide = function () {\n    this.template.data.visible(false);\n    this.template.data.editorOptions(undefined);\n  };\n\n  SimpleFilterTreeList.prototype.getTreeListItems = function () {\n    return this._dataCache;\n  };\n\n  SimpleFilterTreeList.prototype.dispose = function () {\n    this.dispose();\n    this._dataCache = [];\n  };\n\n  SimpleFilterTreeList.prototype._getBranchIndexes = function (filterItems, initialParentId) {\n    var branchIndexes = [];\n    var parentId = initialParentId;\n\n    while (parentId !== treeRootValue) {\n      var index = _utils_1.findIndex(filterItems, function (filterItem) {\n        return filterItem.id == parentId;\n      });\n\n      branchIndexes.push(index);\n      parentId = filterItems[index].parentId;\n    }\n\n    return branchIndexes.reverse();\n  };\n\n  SimpleFilterTreeList.prototype._getStore = function (selectedField) {\n    var _this = this;\n\n    return new custom_store_1.default({\n      load: function (options) {\n        if (!selectedField) {\n          return undefined;\n        }\n\n        var result = _jquery_helpers_1.createJQueryDeferred();\n\n        if (options.filter) {\n          new array_store_1.default({\n            data: _this._dataCache\n          }).load({\n            filter: options.filter\n          }).then(function (data) {\n            if (data && data.length) {\n              result.resolve(data);\n            } else if (options.filter[0] === 'parentId') {\n              var parentId_1 = options.filter && options.filter[0] === 'parentId' ? options.filter[2] : treeRootValue;\n              var pathComponents_1 = !!parentId_1 ? parentId_1.split('.') : undefined;\n\n              var filterItemsState = _this.getTreeListItems();\n\n              var branch = _this._getBranchIndexes(filterItemsState, parentId_1);\n\n              _this.dataSourceBrowser.getDimensionFilterItems(_this.dashboardItem, selectedField.dataMember(), filterItemsState.map(function (i) {\n                return i.data;\n              }), branch).done(function (expandedItems) {\n                var _a;\n\n                var items = expandedItems.map(function (item, index) {\n                  return {\n                    id: parentId_1 + '.' + index,\n                    parentId: parentId_1,\n                    displayName: item.IsBlank ? '(Blank)' : item.Text,\n                    hasItems: selectedField.hasItems(pathComponents_1),\n                    data: item\n                  };\n                });\n\n                var parentIndex = _utils_1.findIndex(_this._dataCache, function (item) {\n                  return item.id === parentId_1;\n                });\n\n                (_a = _this._dataCache).splice.apply(_a, __spreadArray([parentIndex + 1, 0], items));\n\n                result.resolve(items);\n              });\n            } else {\n              result.resolve([]);\n            }\n          });\n        }\n\n        return _jquery_helpers_1.$promiseAdapter(result.promise());\n      }\n    });\n  };\n\n  SimpleFilterTreeList.prototype._getTreeListOptions = function (store, searchEnabled) {\n    var _this = this;\n\n    return {\n      dataSource: {\n        store: store\n      },\n      noDataText: '',\n      rootValue: treeRootValue,\n      dataStructure: 'plain',\n      keyExpr: 'id',\n      parentIdExpr: 'parentId',\n      hasItemsExpr: 'hasItems',\n      columns: [{\n        caption: _default_1.getLocalizationById('DashboardStringId.FilterElementShowAllItem'),\n        dataField: 'displayName'\n      }],\n      selection: {\n        allowSelectAll: true,\n        mode: 'multiple',\n        recursive: true\n      },\n      scrolling: {\n        mode: 'virtual'\n      },\n      searchPanel: {\n        placeholder: _default_1.getLocalizationById('DashboardStringId.SearchNullValuePrompt'),\n        visible: searchEnabled,\n        width: '100%',\n        searchVisibleColumnsOnly: true\n      },\n      remoteOperations: {\n        filtering: true\n      },\n      showRowLines: false,\n      onEditorPrepared: function (e) {\n        _jquery_helpers_1.$unwrap(e.editorElement).classList.remove('dx-treelist-checkbox-size');\n      },\n      onSelectionChanged: function (e) {\n        e.component.forEachNode(function (node) {\n          node.data.data.IsChecked = e.component.isRowSelected(node.key);\n        });\n      },\n      onCellPrepared: function (e) {\n        if (e.rowType === 'data' && (e.data.data.IsChecked === null || e.data.data.IsChecked === undefined)) {\n          var editor = check_box_1.default.getInstance(_jquery_helpers_1.$unwrap(e.cellElement).querySelector('.dx-select-checkbox'));\n\n          if (editor) {\n            editor.option('value', undefined);\n          }\n        }\n      },\n      onNodesInitialized: function (e) {\n        var selectedKeys = [];\n        e.component.forEachNode(function (node) {\n          if (node.data.data.IsChecked) {\n            selectedKeys.push(node.key);\n          }\n        });\n        e.component.selectRows(selectedKeys, false);\n      },\n      onInitialized: function (e) {\n        _this.treeList = e.component;\n      }\n    };\n  };\n\n  return SimpleFilterTreeList;\n}(model_1.DisposableObject);\n\nexports.SimpleFilterTreeList = SimpleFilterTreeList;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/filtering/simple-filter-editor/_simple-filter-tree-list.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__spreadArray","to","from","i","il","length","j","defineProperty","exports","value","SimpleFilterTreeList","array_store_1","require","custom_store_1","check_box_1","ko","_default_1","_jquery_helpers_1","_utils_1","model_1","treeRootValue","_super","dashboardItem","dataSourceBrowser","_this","_dataCache","template","name","data","editorOptions","observable","undefined","visible","reload","field","_getTreeListOptions","_getStore","isGroup","show","hide","getTreeListItems","dispose","_getBranchIndexes","filterItems","initialParentId","branchIndexes","parentId","index","findIndex","filterItem","id","push","reverse","selectedField","default","load","options","result","createJQueryDeferred","filter","then","resolve","parentId_1","pathComponents_1","split","filterItemsState","branch","getDimensionFilterItems","dataMember","map","done","expandedItems","_a","items","item","displayName","IsBlank","Text","hasItems","parentIndex","splice","apply","$promiseAdapter","promise","store","searchEnabled","dataSource","noDataText","rootValue","dataStructure","keyExpr","parentIdExpr","hasItemsExpr","columns","caption","getLocalizationById","dataField","selection","allowSelectAll","mode","recursive","scrolling","searchPanel","placeholder","width","searchVisibleColumnsOnly","remoteOperations","filtering","showRowLines","onEditorPrepared","e","$unwrap","editorElement","classList","remove","onSelectionChanged","component","forEachNode","node","IsChecked","isRowSelected","key","onCellPrepared","rowType","editor","getInstance","cellElement","querySelector","option","onNodesInitialized","selectedKeys","selectRows","onInitialized","treeList","DisposableObject"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_simple-filter-tree-list.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SimpleFilterTreeList = void 0;\nvar array_store_1 = require(\"devextreme/data/array_store\");\nvar custom_store_1 = require(\"devextreme/data/custom_store\");\nvar check_box_1 = require(\"devextreme/ui/check_box\");\nvar ko = require(\"knockout\");\nvar _default_1 = require(\"../../../data/localization/_default\");\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\nvar _utils_1 = require(\"../../../data/_utils\");\nvar model_1 = require(\"../../../model\");\nvar treeRootValue = '0';\nvar SimpleFilterTreeList = (function (_super) {\n    __extends(SimpleFilterTreeList, _super);\n    function SimpleFilterTreeList(dashboardItem, dataSourceBrowser) {\n        var _this = _super.call(this) || this;\n        _this.dashboardItem = dashboardItem;\n        _this.dataSourceBrowser = dataSourceBrowser;\n        _this._dataCache = [];\n        _this.template = {\n            name: 'dx-simple-filter-tree-list',\n            data: {\n                editorOptions: ko.observable(undefined),\n                visible: ko.observable(false)\n            }\n        };\n        return _this;\n    }\n    SimpleFilterTreeList.prototype.reload = function (field) {\n        this._dataCache = [];\n        this.template.data.editorOptions(this._getTreeListOptions(this._getStore(field), field && !field.isGroup()));\n    };\n    SimpleFilterTreeList.prototype.show = function (field) {\n        this.template.data.visible(true);\n        this.reload(field);\n    };\n    SimpleFilterTreeList.prototype.hide = function () {\n        this.template.data.visible(false);\n        this.template.data.editorOptions(undefined);\n    };\n    SimpleFilterTreeList.prototype.getTreeListItems = function () {\n        return this._dataCache;\n    };\n    SimpleFilterTreeList.prototype.dispose = function () {\n        this.dispose();\n        this._dataCache = [];\n    };\n    SimpleFilterTreeList.prototype._getBranchIndexes = function (filterItems, initialParentId) {\n        var branchIndexes = [];\n        var parentId = initialParentId;\n        while (parentId !== treeRootValue) {\n            var index = _utils_1.findIndex(filterItems, function (filterItem) { return filterItem.id == parentId; });\n            branchIndexes.push(index);\n            parentId = filterItems[index].parentId;\n        }\n        return branchIndexes.reverse();\n    };\n    SimpleFilterTreeList.prototype._getStore = function (selectedField) {\n        var _this = this;\n        return new custom_store_1.default({\n            load: function (options) {\n                if (!selectedField) {\n                    return undefined;\n                }\n                var result = _jquery_helpers_1.createJQueryDeferred();\n                if (options.filter) {\n                    new array_store_1.default({ data: _this._dataCache })\n                        .load({ filter: options.filter })\n                        .then(function (data) {\n                        if (data && data.length) {\n                            result.resolve(data);\n                        }\n                        else if (options.filter[0] === 'parentId') {\n                            var parentId_1 = (options.filter && options.filter[0] === 'parentId') ? options.filter[2] : treeRootValue;\n                            var pathComponents_1 = !!parentId_1 ? parentId_1.split('.') : undefined;\n                            var filterItemsState = _this.getTreeListItems();\n                            var branch = _this._getBranchIndexes(filterItemsState, parentId_1);\n                            _this.dataSourceBrowser.getDimensionFilterItems(_this.dashboardItem, selectedField.dataMember(), filterItemsState.map(function (i) { return i.data; }), branch).done(function (expandedItems) {\n                                var _a;\n                                var items = expandedItems.map(function (item, index) {\n                                    return {\n                                        id: parentId_1 + '.' + index,\n                                        parentId: parentId_1,\n                                        displayName: item.IsBlank ? '(Blank)' : item.Text,\n                                        hasItems: selectedField.hasItems(pathComponents_1),\n                                        data: item\n                                    };\n                                });\n                                var parentIndex = _utils_1.findIndex(_this._dataCache, function (item) { return item.id === parentId_1; });\n                                (_a = _this._dataCache).splice.apply(_a, __spreadArray([parentIndex + 1, 0], items));\n                                result.resolve(items);\n                            });\n                        }\n                        else {\n                            result.resolve([]);\n                        }\n                    });\n                }\n                return _jquery_helpers_1.$promiseAdapter(result.promise());\n            }\n        });\n    };\n    SimpleFilterTreeList.prototype._getTreeListOptions = function (store, searchEnabled) {\n        var _this = this;\n        return {\n            dataSource: { store: store },\n            noDataText: '',\n            rootValue: treeRootValue,\n            dataStructure: 'plain',\n            keyExpr: 'id',\n            parentIdExpr: 'parentId',\n            hasItemsExpr: 'hasItems',\n            columns: [{\n                    caption: _default_1.getLocalizationById('DashboardStringId.FilterElementShowAllItem'),\n                    dataField: 'displayName',\n                }],\n            selection: {\n                allowSelectAll: true,\n                mode: 'multiple',\n                recursive: true\n            },\n            scrolling: {\n                mode: 'virtual'\n            },\n            searchPanel: {\n                placeholder: _default_1.getLocalizationById('DashboardStringId.SearchNullValuePrompt'),\n                visible: searchEnabled,\n                width: '100%',\n                searchVisibleColumnsOnly: true\n            },\n            remoteOperations: {\n                filtering: true\n            },\n            showRowLines: false,\n            onEditorPrepared: function (e) {\n                _jquery_helpers_1.$unwrap(e.editorElement).classList.remove('dx-treelist-checkbox-size');\n            },\n            onSelectionChanged: function (e) {\n                e.component.forEachNode(function (node) {\n                    node.data.data.IsChecked = e.component.isRowSelected(node.key);\n                });\n            },\n            onCellPrepared: function (e) {\n                if (e.rowType === 'data' && (e.data.data.IsChecked === null || e.data.data.IsChecked === undefined)) {\n                    var editor = check_box_1.default.getInstance(_jquery_helpers_1.$unwrap(e.cellElement).querySelector('.dx-select-checkbox'));\n                    if (editor) {\n                        editor.option('value', undefined);\n                    }\n                }\n            },\n            onNodesInitialized: function (e) {\n                var selectedKeys = [];\n                e.component.forEachNode(function (node) {\n                    if (node.data.data.IsChecked) {\n                        selectedKeys.push(node.key);\n                    }\n                });\n                e.component.selectRows(selectedKeys, false);\n            },\n            onInitialized: function (e) {\n                _this.treeList = e.component;\n            },\n        };\n    };\n    return SimpleFilterTreeList;\n}(model_1.DisposableObject));\nexports.SimpleFilterTreeList = SimpleFilterTreeList;\n"]},"metadata":{},"sourceType":"script"}