{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_knockout-utils.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createObservableDataSource = exports.safeComputed = exports.safeSubscribe = exports.subscribeAndPerform = exports.subscribeToArrayItemProperties = exports.syncArrayHelper = exports.subscribeArrayChangeWithCancel = exports.subscribeWithPrev = exports.subscribeArrayChange = void 0;\n\nvar custom_store_1 = require(\"devextreme/data/custom_store\");\n\nvar data_source_1 = require(\"devextreme/data/data_source\");\n\nvar ko = require(\"knockout\");\n\nfunction subscribeArrayChange(array, handlers) {\n  return array.subscribe(function (changes) {\n    changes.forEach(function (arrayChange) {\n      var change = arrayChange;\n\n      if (change.status === 'added' && handlers.added) {\n        handlers.added(change.value, change.index);\n      }\n\n      if (change.status === 'deleted' && handlers.deleted) {\n        handlers.deleted(change.value);\n      }\n    });\n  }, null, 'arrayChange');\n}\n\nexports.subscribeArrayChange = subscribeArrayChange;\n\nfunction subscribeWithPrev(target, callback) {\n  var prevValue;\n  var disposables = [];\n  disposables.push(target.subscribe(function (value) {\n    prevValue = value;\n  }, null, 'beforeChange'));\n  disposables.push(target.subscribe(function (value) {\n    callback(prevValue, value);\n    prevValue = undefined;\n  }));\n  return {\n    dispose: function () {\n      disposables.forEach(function (disposable) {\n        return disposable.dispose();\n      });\n      disposables = [];\n    }\n  };\n}\n\nexports.subscribeWithPrev = subscribeWithPrev;\n\nfunction subscribeArrayChangeWithCancel(target, callback) {\n  var prevValue;\n  var disposables = [];\n  disposables.push(target.subscribe(function (value) {\n    prevValue = value && value.slice();\n  }, null, 'beforeChange'));\n  disposables.push(target.subscribe(function (changes) {\n    var ok = true;\n\n    try {\n      ok = callback(changes);\n    } catch (error) {\n      target(prevValue);\n      prevValue = undefined;\n      throw error;\n    }\n\n    if (!ok) target(prevValue);\n    prevValue = undefined;\n  }, null, 'arrayChange'));\n  return {\n    dispose: function () {\n      disposables.forEach(function (element) {\n        return element.dispose();\n      });\n    }\n  };\n}\n\nexports.subscribeArrayChangeWithCancel = subscribeArrayChangeWithCancel;\n\nfunction syncArrayHelper(sourceArray, destArray, addHandler) {\n  destArray(sourceArray.peek().map(function (item) {\n    return addHandler(item);\n  }));\n  return sourceArray.subscribe(function (changes) {\n    changes.forEach(function (arrayChange) {\n      var change = arrayChange;\n\n      if (change.status === 'added') {\n        destArray.splice(change.index, 0, addHandler(change.value));\n      } else if (change.status === 'deleted') {\n        destArray.splice(change.index, 1);\n      }\n    });\n  }, null, 'arrayChange');\n}\n\nexports.syncArrayHelper = syncArrayHelper;\n\nfunction subscribeToArrayItemProperties(array, handler) {\n  var subscriptionInfoList = [];\n\n  var subscribe = function (item) {\n    subscriptionInfoList.push({\n      object: item,\n      subscriptions: [].concat(handler(item) || [])\n    });\n  };\n\n  var unsubscribe = function (item) {\n    var info = subscriptionInfoList.filter(function (info) {\n      return info.object === item;\n    })[0];\n\n    if (info) {\n      info.subscriptions.forEach(function (subscription) {\n        return subscription.dispose();\n      });\n      subscriptionInfoList.splice(subscriptionInfoList.indexOf(info), 1);\n    }\n  };\n\n  array().forEach(subscribe);\n  var arrayChangeSubscribtion = subscribeArrayChange(array, {\n    added: subscribe,\n    deleted: unsubscribe\n  });\n  return {\n    dispose: function () {\n      arrayChangeSubscribtion.dispose();\n      arrayChangeSubscribtion = null;\n      subscriptionInfoList.forEach(function (info) {\n        return info.subscriptions.forEach(function (subscription) {\n          return subscription.dispose();\n        });\n      });\n      subscriptionInfoList.splice(0, subscriptionInfoList.length);\n    }\n  };\n}\n\nexports.subscribeToArrayItemProperties = subscribeToArrayItemProperties;\n\nfunction subscribeAndPerform(subscribable, action) {\n  action(subscribable());\n  return subscribable.subscribe(action);\n}\n\nexports.subscribeAndPerform = subscribeAndPerform;\n\nfunction safeSubscribe(observables, handler) {\n  var computed = ko.pureComputed(function () {\n    return Object.keys(observables).reduce(function (acc, key) {\n      acc[key] = observables[key]();\n      return acc;\n    }, {});\n  });\n  var prevDisposable = handler(computed());\n  var subscription = computed.subscribe(function (args) {\n    prevDisposable && prevDisposable.dispose();\n    prevDisposable = handler(args);\n  });\n  return {\n    dispose: function () {\n      subscription.dispose();\n      computed.dispose();\n      prevDisposable && prevDisposable.dispose();\n    }\n  };\n}\n\nexports.safeSubscribe = safeSubscribe;\n\nfunction safeComputed(observables, handler) {\n  var observable = ko.observable();\n  var subscription = safeSubscribe(observables, function (args) {\n    observable(handler(args));\n  });\n  var computed = ko.pureComputed(function () {\n    return observable();\n  });\n  var oldDispose = computed.dispose;\n\n  computed.dispose = function () {\n    subscription.dispose();\n    oldDispose.call(computed);\n  };\n\n  return computed;\n}\n\nexports.safeComputed = safeComputed;\n\nfunction createObservableDataSource(observables, load) {\n  var computed = ko.pureComputed(function () {\n    return Object.keys(observables).reduce(function (acc, key) {\n      acc[key] = observables[key]();\n      return acc;\n    }, {});\n  });\n  var dataSource = new data_source_1.default({\n    store: new custom_store_1.default({\n      loadMode: 'raw',\n      load: function () {\n        return load(computed());\n      }\n    })\n  });\n  var subscription = computed.subscribe(function (_) {\n    dataSource.reload();\n  });\n  return {\n    dataSource: dataSource,\n    dispose: function () {\n      subscription.dispose();\n      if (dataSource['_disposed'] !== true) dataSource.dispose();\n      computed.dispose();\n    }\n  };\n}\n\nexports.createObservableDataSource = createObservableDataSource;","map":{"version":3,"sources":["/Users/kevinrabari/Desktop/Georgian College Work/1005_ Mobile Web Application/Assignment3/node_modules/devexpress-dashboard/model/internal/_knockout-utils.js"],"names":["Object","defineProperty","exports","value","createObservableDataSource","safeComputed","safeSubscribe","subscribeAndPerform","subscribeToArrayItemProperties","syncArrayHelper","subscribeArrayChangeWithCancel","subscribeWithPrev","subscribeArrayChange","custom_store_1","require","data_source_1","ko","array","handlers","subscribe","changes","forEach","arrayChange","change","status","added","index","deleted","target","callback","prevValue","disposables","push","undefined","dispose","disposable","slice","ok","error","element","sourceArray","destArray","addHandler","peek","map","item","splice","handler","subscriptionInfoList","object","subscriptions","concat","unsubscribe","info","filter","subscription","indexOf","arrayChangeSubscribtion","length","subscribable","action","observables","computed","pureComputed","keys","reduce","acc","key","prevDisposable","args","observable","oldDispose","call","load","dataSource","default","store","loadMode","_","reload"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_knockout-utils.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createObservableDataSource = exports.safeComputed = exports.safeSubscribe = exports.subscribeAndPerform = exports.subscribeToArrayItemProperties = exports.syncArrayHelper = exports.subscribeArrayChangeWithCancel = exports.subscribeWithPrev = exports.subscribeArrayChange = void 0;\nvar custom_store_1 = require(\"devextreme/data/custom_store\");\nvar data_source_1 = require(\"devextreme/data/data_source\");\nvar ko = require(\"knockout\");\nfunction subscribeArrayChange(array, handlers) {\n    return array.subscribe(function (changes) {\n        changes.forEach(function (arrayChange) {\n            var change = arrayChange;\n            if (change.status === 'added' && handlers.added) {\n                handlers.added(change.value, change.index);\n            }\n            if (change.status === 'deleted' && handlers.deleted) {\n                handlers.deleted(change.value);\n            }\n        });\n    }, null, 'arrayChange');\n}\nexports.subscribeArrayChange = subscribeArrayChange;\nfunction subscribeWithPrev(target, callback) {\n    var prevValue;\n    var disposables = [];\n    disposables.push(target.subscribe(function (value) {\n        prevValue = value;\n    }, null, 'beforeChange'));\n    disposables.push(target.subscribe(function (value) {\n        callback(prevValue, value);\n        prevValue = undefined;\n    }));\n    return {\n        dispose: function () {\n            disposables.forEach(function (disposable) { return disposable.dispose(); });\n            disposables = [];\n        }\n    };\n}\nexports.subscribeWithPrev = subscribeWithPrev;\nfunction subscribeArrayChangeWithCancel(target, callback) {\n    var prevValue;\n    var disposables = [];\n    disposables.push(target.subscribe(function (value) {\n        prevValue = value && value.slice();\n    }, null, 'beforeChange'));\n    disposables.push(target.subscribe(function (changes) {\n        var ok = true;\n        try {\n            ok = callback(changes);\n        }\n        catch (error) {\n            target(prevValue);\n            prevValue = undefined;\n            throw error;\n        }\n        if (!ok)\n            target(prevValue);\n        prevValue = undefined;\n    }, null, 'arrayChange'));\n    return {\n        dispose: function () { disposables.forEach(function (element) { return element.dispose(); }); }\n    };\n}\nexports.subscribeArrayChangeWithCancel = subscribeArrayChangeWithCancel;\nfunction syncArrayHelper(sourceArray, destArray, addHandler) {\n    destArray(sourceArray.peek().map(function (item) { return addHandler(item); }));\n    return sourceArray.subscribe(function (changes) {\n        changes.forEach(function (arrayChange) {\n            var change = arrayChange;\n            if (change.status === 'added') {\n                destArray.splice(change.index, 0, addHandler(change.value));\n            }\n            else if (change.status === 'deleted') {\n                destArray.splice(change.index, 1);\n            }\n        });\n    }, null, 'arrayChange');\n}\nexports.syncArrayHelper = syncArrayHelper;\nfunction subscribeToArrayItemProperties(array, handler) {\n    var subscriptionInfoList = [];\n    var subscribe = function (item) {\n        subscriptionInfoList.push({ object: item, subscriptions: [].concat(handler(item) || []) });\n    };\n    var unsubscribe = function (item) {\n        var info = subscriptionInfoList.filter(function (info) { return info.object === item; })[0];\n        if (info) {\n            info.subscriptions.forEach(function (subscription) { return subscription.dispose(); });\n            subscriptionInfoList.splice(subscriptionInfoList.indexOf(info), 1);\n        }\n    };\n    array().forEach(subscribe);\n    var arrayChangeSubscribtion = subscribeArrayChange(array, {\n        added: subscribe,\n        deleted: unsubscribe\n    });\n    return {\n        dispose: function () {\n            arrayChangeSubscribtion.dispose();\n            arrayChangeSubscribtion = null;\n            subscriptionInfoList.forEach(function (info) { return info.subscriptions.forEach(function (subscription) { return subscription.dispose(); }); });\n            subscriptionInfoList.splice(0, subscriptionInfoList.length);\n        }\n    };\n}\nexports.subscribeToArrayItemProperties = subscribeToArrayItemProperties;\nfunction subscribeAndPerform(subscribable, action) {\n    action(subscribable());\n    return subscribable.subscribe(action);\n}\nexports.subscribeAndPerform = subscribeAndPerform;\nfunction safeSubscribe(observables, handler) {\n    var computed = ko.pureComputed(function () { return Object.keys(observables).reduce(function (acc, key) { acc[key] = observables[key](); return acc; }, {}); });\n    var prevDisposable = handler(computed());\n    var subscription = computed.subscribe(function (args) {\n        prevDisposable && prevDisposable.dispose();\n        prevDisposable = handler(args);\n    });\n    return {\n        dispose: function () {\n            subscription.dispose();\n            computed.dispose();\n            prevDisposable && prevDisposable.dispose();\n        }\n    };\n}\nexports.safeSubscribe = safeSubscribe;\nfunction safeComputed(observables, handler) {\n    var observable = ko.observable();\n    var subscription = safeSubscribe(observables, function (args) {\n        observable(handler(args));\n    });\n    var computed = ko.pureComputed(function () { return observable(); });\n    var oldDispose = computed.dispose;\n    computed.dispose = function () {\n        subscription.dispose();\n        oldDispose.call(computed);\n    };\n    return computed;\n}\nexports.safeComputed = safeComputed;\nfunction createObservableDataSource(observables, load) {\n    var computed = ko.pureComputed(function () { return Object.keys(observables).reduce(function (acc, key) { acc[key] = observables[key](); return acc; }, {}); });\n    var dataSource = new data_source_1.default({\n        store: new custom_store_1.default({\n            loadMode: 'raw',\n            load: function () { return load(computed()); }\n        })\n    });\n    var subscription = computed.subscribe(function (_) {\n        dataSource.reload();\n    });\n    return {\n        dataSource: dataSource,\n        dispose: function () {\n            subscription.dispose();\n            if (dataSource['_disposed'] !== true)\n                dataSource.dispose();\n            computed.dispose();\n        }\n    };\n}\nexports.createObservableDataSource = createObservableDataSource;\n"]},"metadata":{},"sourceType":"script"}