{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_viewer-api.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewerApi = exports.viewerApiEventsNames = void 0;\n\nvar ko = require(\"knockout\");\n\nvar _drill_through_data_wrapper_1 = require(\"../../data/drill-through-data/_drill-through-data-wrapper\");\n\nvar _default_1 = require(\"../../data/localization/_default\");\n\nvar _common_1 = require(\"../../data/_common\");\n\nvar model_1 = require(\"../../model\");\n\nvar disposable_object_1 = require(\"../../model/disposable-object\");\n\nvar _array_utils_1 = require(\"../../model/internal/_array-utils\");\n\nvar _helper_classes_1 = require(\"../../model/internal/_helper-classes\");\n\nvar _knockout_utils_1 = require(\"../../model/internal/_knockout-utils\");\n\nvar data_dashboard_item_1 = require(\"../../model/items/data-dashboard-item\");\n\nvar date_filter_item_1 = require(\"../../model/items/filter-items/date-filter-item\");\n\nvar range_filter_item_1 = require(\"../../model/items/range-filter/range-filter-item\");\n\nvar _events_helper_1 = require(\"../../viewer-parts/viewer/_events-helper\");\n\nvar _underlying_data_provider_1 = require(\"../data/_underlying-data-provider\");\n\nvar _options_manager_1 = require(\"../internal/_options-manager\");\n\nvar _utils_1 = require(\"../internal/_utils\");\n\nvar notificator_1 = require(\"../notification-controller/notificator\");\n\nexports.viewerApiEventsNames = ['itemClick', 'itemSelectionChanged', 'itemWidgetCreated', 'itemWidgetUpdating', 'itemWidgetUpdated', 'itemWidgetOptionsPrepared', 'itemElementCustomColor', 'itemVisualInteractivity', 'itemMasterFilterStateChanged', 'itemDrillDownStateChanged', 'itemActionAvailabilityChanged', 'itemCaptionToolbarUpdated', 'dashboardTitleToolbarUpdated', 'selectedTabPageChanged'];\n\nvar ViewerApi = function (_super) {\n  __extends(ViewerApi, _super);\n\n  function ViewerApi(dashboardControl) {\n    var _this = _super.call(this) || this;\n\n    _this.dashboardControl = dashboardControl;\n    _this._viewerItems = {};\n    _this._dashboardDisposables = [];\n    _this._internalEvents = new _options_manager_1.EventManager();\n    _this.title = ko.observable(null);\n\n    _this._viewerItemCreated = function (item, viewerItem) {\n      if (!!viewerItem) {\n        if (item instanceof data_dashboard_item_1.DataDashboardItem) {\n          viewerItem.itemClick.add(_this._raiseItemClick);\n          viewerItem.itemSelectionChanged.add(_this._raiseItemSelectionChanged);\n          viewerItem.clearMasterFilter.add(_this._raiseClearMasterFilter);\n        }\n\n        if (!!viewerItem['itemElementCustomColor']) {\n          viewerItem['itemElementCustomColor'].add(_this._raiseItemElementCustomColor);\n        }\n\n        viewerItem.itemWidgetCreated.add(_this._raiseItemWidgetCreated);\n        viewerItem.itemWidgetUpdating.add(_this._raiseItemWidgetUpdating);\n        viewerItem.itemWidgetUpdated.add(_this._raiseItemWidgetUpdated);\n        viewerItem.itemWidgetOptionsPrepared.add(_this._raiseItemWidgetOptionsPrepared);\n        viewerItem.itemCaptionToolbarUpdated.add(_this._raiseItemCaptionToolbarUpdated);\n      }\n\n      if (!_this._viewerItems[item.componentName()]) {\n        _this._viewerItems[item.componentName()] = [];\n      }\n\n      if (_this._viewerItems[item.componentName()].indexOf(viewerItem) === -1) {\n        _this._viewerItems[item.componentName()].push(viewerItem);\n      }\n    };\n\n    _this._viewerItemDispose = function (item, viewerItem) {\n      if (!!viewerItem) {\n        if (item instanceof data_dashboard_item_1.DataDashboardItem) {\n          viewerItem.itemClick.remove(_this._raiseItemClick);\n          viewerItem.itemSelectionChanged.remove(_this._raiseItemSelectionChanged);\n          viewerItem.clearMasterFilter.remove(_this._raiseClearMasterFilter);\n        }\n\n        if (!!viewerItem['itemElementCustomColor']) {\n          viewerItem['itemElementCustomColor'].remove(_this._raiseItemElementCustomColor);\n        }\n\n        viewerItem.itemWidgetCreated.remove(_this._raiseItemWidgetCreated);\n        viewerItem.itemWidgetUpdating.remove(_this._raiseItemWidgetUpdating);\n        viewerItem.itemWidgetUpdated.remove(_this._raiseItemWidgetUpdated);\n        viewerItem.itemCaptionToolbarUpdated.remove(_this._raiseItemCaptionToolbarUpdated);\n      }\n\n      if (_this._viewerItems[item.componentName()]) {\n        var index = _this._viewerItems[item.componentName()].indexOf(viewerItem);\n\n        if (index > -1) {\n          _this._viewerItems[item.componentName()].splice(index, 1);\n        }\n      }\n    };\n\n    _this._beforeApplyViewerItemOptions = function (item, options, isCreation, customInteractivityOptions) {\n      if (item instanceof data_dashboard_item_1.DataDashboardItem) {\n        _this._internalEvents.raise('itemVisualInteractivity', _events_helper_1.createItemInteractivityEventArgs(item, customInteractivityOptions));\n      }\n    };\n\n    _this._raiseItemActionAvailabilityChanged = function (item) {\n      _this._internalEvents.raise('itemActionAvailabilityChanged', {\n        itemName: item.componentName(),\n        dashboardItem: item\n      });\n    };\n\n    _this._raiseItemClick = function (itemName, dataPoint) {\n      _this._internalEvents.raise('itemClick', _events_helper_1.createItemClickEventArgs(_this._getDataItem(itemName), dataPoint, _this.requestUnderlyingData));\n    };\n\n    _this._raiseItemSelectionChanged = function (itemName, tuples) {\n      _this._internalEvents.raise('itemSelectionChanged', _events_helper_1.createItemSelectionChangedEventArgs(_this._getDataItem(itemName), tuples));\n    };\n\n    _this._raiseItemWidgetCreated = function (name, viewControl) {\n      var item = _this._getItem(name);\n\n      _this._internalEvents.raise('itemWidgetCreated', _events_helper_1.createWidgetEventArgs(item, viewControl));\n    };\n\n    _this._raiseItemWidgetUpdating = function (name, viewControl) {\n      var item = _this._getItem(name);\n\n      _this._internalEvents.raise('itemWidgetUpdating', _events_helper_1.createWidgetEventArgs(item, viewControl));\n    };\n\n    _this._raiseItemWidgetUpdated = function (name, viewControl) {\n      var item = _this._getItem(name);\n\n      _this._internalEvents.raise('itemWidgetUpdated', _events_helper_1.createWidgetEventArgs(item, viewControl));\n    };\n\n    _this._raiseItemWidgetOptionsPrepared = function (name, options) {\n      var item = _this._getItem(name);\n\n      _this._internalEvents.raise('itemWidgetOptionsPrepared', _events_helper_1.createWidgetOptionsEventArgs(item, options));\n    };\n\n    _this._raiseItemCaptionToolbarUpdated = function (name, options) {\n      var item = _this._getItem(name);\n\n      _this._internalEvents.raise('itemCaptionToolbarUpdated', {\n        itemName: name,\n        dashboardItem: item,\n        options: options\n      });\n    };\n\n    _this._raiseTitleToolbarUpdated = function (options) {\n      _this._internalEvents.raise('dashboardTitleToolbarUpdated', {\n        dashboard: _this.dashboardControl.dashboard(),\n        options: options\n      });\n    };\n\n    _this._raiseItemElementCustomColor = function (itemName, eventArgs) {\n      _this._internalEvents.raise('itemElementCustomColor', _events_helper_1.createItemElementCustomColorEventArgs(_this._getDataItem(itemName), eventArgs));\n    };\n\n    _this._raiseItemVisualInteractivity = function (itemName, interactivityOptions) {\n      _this._internalEvents.raise('itemVisualInteractivity', _events_helper_1.createItemInteractivityEventArgs(_this._getDataItem(itemName), interactivityOptions));\n    };\n\n    _this._raiseClearMasterFilter = function (itemName) {\n      var item = _this._getItem(itemName);\n\n      _this._internalEvents.raise('itemMasterFilterStateChanged', {\n        itemName: item.componentName(),\n        dashboardItem: item,\n        values: null\n      });\n    };\n\n    _this.requestUnderlyingData = function (itemName, args, onCompleted) {\n      var dataDashboardItem = _this._getDataItem(itemName);\n\n      var raiseOnCompleted = function (underlyingData) {\n        var drillThroughData = new _drill_through_data_wrapper_1.DrillThroughDataWrapper(underlyingData);\n        drillThroughData.initialize();\n        onCompleted(drillThroughData);\n      };\n\n      var provider = new _underlying_data_provider_1.UnderlyingDataProvider(_this.dashboardControl._serviceClient());\n      provider.requestUnderlyingData(dataDashboardItem, args).done(raiseOnCompleted).fail(function (request) {\n        var errorMessage = notificator_1.NotificationController._getErrorTextFromResponse(request);\n\n        if (!errorMessage) {\n          errorMessage = _default_1.getLocalizationById('DashboardWebStringId.Notification.AttemptToGetUnderlyingData');\n        }\n\n        raiseOnCompleted({\n          ErrorMessage: errorMessage\n        });\n      });\n    };\n\n    _this.on = _this._internalEvents.on;\n    _this.off = _this._internalEvents.off;\n\n    _this.toDispose(_knockout_utils_1.subscribeWithPrev(_this.title, function (oldValue, newValue) {\n      if (oldValue) {\n        oldValue.onUpdated.remove(_this._raiseTitleToolbarUpdated);\n      }\n\n      if (newValue) {\n        newValue.onUpdated.add(_this._raiseTitleToolbarUpdated);\n      }\n    }));\n\n    _this.toDispose(ko.computed(function () {\n      var newDashboard = dashboardControl.dashboard();\n\n      _this._dashboardDisposables.forEach(function (d) {\n        return d.dispose();\n      });\n\n      _this._dashboardDisposables = [];\n\n      if (newDashboard) {\n        newDashboard.items().filter(function (item) {\n          return item instanceof model_1.TabContainerItem;\n        }).forEach(function (tabContainer) {\n          tabContainer._activePageChanged = function (prevPageName, pageName) {\n            _this._raiseSelectedTabPageChanged(tabContainer.componentName(), prevPageName, pageName);\n          };\n        });\n\n        newDashboard._dataDashboardItems().forEach(function (item) {\n          var itemName = item.componentName.peek();\n\n          _this._raiseItemActionAvailabilityChanged(item);\n\n          var disposables = [_knockout_utils_1.subscribeWithPrev(item._actions, function (prevActions, actions) {\n            if (!_array_utils_1.arrayEquals(prevActions, actions)) {\n              _this._raiseItemActionAvailabilityChanged(item);\n            }\n          })];\n          disposables.push(_knockout_utils_1.subscribeArrayChange(item._drillDownValues, {\n            added: function (v) {\n              _this._internalEvents.raise('itemDrillDownStateChanged', {\n                itemName: itemName,\n                dashboardItem: item,\n                action: 'Down',\n                values: item._drillDownValues()\n              });\n            },\n            deleted: function (v) {\n              _this._internalEvents.raise('itemDrillDownStateChanged', {\n                itemName: itemName,\n                dashboardItem: item,\n                action: 'Up',\n                values: item._drillDownValues()\n              });\n            }\n          }));\n          disposables.push(item._actualSelectionValues.subscribe(function (newValue) {\n            _this._internalEvents.raise('itemMasterFilterStateChanged', {\n              itemName: itemName,\n              dashboardItem: item,\n              values: newValue\n            });\n          }));\n          Array.prototype.push.apply(_this._dashboardDisposables, disposables);\n        });\n      }\n    }));\n\n    return _this;\n  }\n\n  ViewerApi.prototype._checkIsRangeFilterItem = function (itemName) {\n    var item = this._getDataItem(itemName);\n\n    if (!(item instanceof range_filter_item_1.RangeFilterItem) && !(item instanceof date_filter_item_1.DateFilterItem)) {\n      throw new Error('Action is called for an unsupported dashboard item. This action can be performed only for Range Filter and Date Filter.');\n    }\n  };\n\n  ViewerApi.prototype._raiseSelectedTabPageChanged = function (tabContainerName, prevPageName, pageName) {\n    this._internalEvents.raise('selectedTabPageChanged', {\n      tabContainerName: tabContainerName,\n      selectedPage: pageName,\n      previousPage: prevPageName\n    });\n  };\n\n  ViewerApi.prototype.start = function () {\n    this.dashboardControl._dashboardContext.viewerItemCreated.add(this._viewerItemCreated);\n\n    this.dashboardControl._dashboardContext.viewerItemDispose.add(this._viewerItemDispose);\n\n    this.dashboardControl._dashboardContext.beforeApplyViewerItemOptions.add(this._beforeApplyViewerItemOptions);\n  };\n\n  ViewerApi.prototype.stop = function () {\n    this.dashboardControl._dashboardContext.viewerItemCreated.remove(this._viewerItemCreated);\n\n    this.dashboardControl._dashboardContext.viewerItemDispose.remove(this._viewerItemDispose);\n\n    this.dashboardControl._dashboardContext.beforeApplyViewerItemOptions.remove(this._beforeApplyViewerItemOptions);\n  };\n\n  ViewerApi.prototype._getItemCore = function (itemId, findItem) {\n    var dashboard = this.dashboardControl.dashboard();\n\n    if (dashboard) {\n      var item = findItem(dashboard);\n\n      if (item) {\n        return item;\n      } else {\n        throw Error(\"The item with the '\" + itemId + \"' name does not exist\");\n      }\n    } else {\n      throw new Error('Cannot perform operation because the dashboard is not loaded');\n    }\n  };\n\n  ViewerApi.prototype._getItem = function (itemId) {\n    return this._getItemCore(itemId, function (dashboard) {\n      return dashboard._allItems().filter(function (item) {\n        return item.componentName() == itemId;\n      })[0];\n    });\n  };\n\n  ViewerApi.prototype._getDataItem = function (itemName) {\n    return this._getItemCore(itemName, function (dashboard) {\n      return dashboard._findDataItem(itemName);\n    });\n  };\n\n  ViewerApi.prototype.getCurrentRange = function (itemName) {\n    this._checkIsRangeFilterItem(itemName);\n\n    var item = this._getDataItem(itemName);\n\n    var selection = item._actualSelectionValues() && item._actualSelectionValues()[0] || item._getEntireRange();\n\n    return selection && selection.length > 0 ? {\n      minimum: selection[0],\n      maximum: selection[1]\n    } : null;\n  };\n\n  ViewerApi.prototype.getEntireRange = function (itemName) {\n    this._checkIsRangeFilterItem(itemName);\n\n    var entireRange = this._getDataItem(itemName)._getEntireRange();\n\n    return entireRange.length > 0 ? {\n      minimum: entireRange[0],\n      maximum: entireRange[1]\n    } : null;\n  };\n\n  ViewerApi.prototype.setRange = function (itemName, range) {\n    this._checkIsRangeFilterItem(itemName);\n\n    this.setMasterFilter(itemName, [[range.minimum, range.maximum]]);\n  };\n\n  ViewerApi.prototype.setPredefinedRange = function (itemName, dateTimePeriodName) {\n    this._checkIsRangeFilterItem(itemName);\n\n    var rangeFilter = this._getDataItem(itemName);\n\n    var periods = rangeFilter.dateTimePeriods().filter(function (period) {\n      return period.name() === dateTimePeriodName;\n    });\n\n    if (periods.length === 0) {\n      throw new Error(\"The predefined range with the '\" + dateTimePeriodName + \"' name does not exist\");\n    }\n\n    rangeFilter._processItemSetPredefinedPeriod(dateTimePeriodName);\n  };\n\n  ViewerApi.prototype.getAvailablePredefinedRanges = function (itemName) {\n    this._checkIsRangeFilterItem(itemName);\n\n    return this._getDataItem(itemName).dateTimePeriods().map(function (period) {\n      return period.name();\n    });\n  };\n\n  ViewerApi.prototype.getCurrentPredefinedRange = function (itemName) {\n    this._checkIsRangeFilterItem(itemName);\n\n    var period = this._getDataItem(itemName).currentSelectedDateTimePeriodName();\n\n    return period ? period : '';\n  };\n\n  ViewerApi.prototype.getCurrentSelection = function (itemName) {\n    _helper_classes_1.Guard.isNotFalsy(itemName, 'itemName');\n\n    var itemData = this._getDataItem(itemName)._getItemData(),\n        tuples = [],\n        viewerItem = this._getViewerItem(itemName);\n\n    var selectedTuples = viewerItem && viewerItem.getSelectedTuples() || null;\n\n    if (selectedTuples) {\n      tuples = selectedTuples.map(function (selectedTuple) {\n        return itemData.createTuple(selectedTuple);\n      });\n    }\n\n    return tuples;\n  };\n\n  ViewerApi.prototype.canSetMasterFilter = function (itemName) {\n    return this._getDataItem(itemName)._actions().indexOf(_common_1.viewerActions.setMasterFilter) !== -1;\n  };\n\n  ViewerApi.prototype.canClearMasterFilter = function (itemName) {\n    return this._getDataItem(itemName)._actions().indexOf(_common_1.viewerActions.clearMasterFilter) !== -1;\n  };\n\n  ViewerApi.prototype.canPerformDrillDown = function (itemName) {\n    return this._getDataItem(itemName)._actions().indexOf(_common_1.viewerActions.drillDown) !== -1;\n  };\n\n  ViewerApi.prototype.canPerformDrillUp = function (itemName) {\n    return this._getDataItem(itemName)._actions().indexOf(_common_1.viewerActions.drillUp) !== -1;\n  };\n\n  ViewerApi.prototype.getItemData = function (itemName) {\n    return this._getDataItem(itemName)._getItemData();\n  };\n\n  ViewerApi.prototype.getCurrentFilterValues = function (itemName) {\n    return this._getDataItem(itemName)._getCurrentFilterValues();\n  };\n\n  ViewerApi.prototype.getAvailableFilterValues = function (itemName) {\n    return this._getDataItem(itemName)._getAvailableFilterValues(itemName);\n  };\n\n  ViewerApi.prototype.getCurrentDrillDownValues = function (itemName) {\n    return this._getDataItem(itemName)._getCurrentDrillDownValues();\n  };\n\n  ViewerApi.prototype.getAvailableDrillDownValues = function (itemName) {\n    return this._getDataItem(itemName)._getAvailableDrillDownValues(itemName);\n  };\n\n  ViewerApi.prototype.setMasterFilter = function (itemName, values) {\n    this._getDataItem(itemName)._performSetMasterFilter(values);\n  };\n\n  ViewerApi.prototype.clearMasterFilter = function (itemName) {\n    this._getDataItem(itemName)._performClearMasterFilter();\n  };\n\n  ViewerApi.prototype.performDrillDown = function (itemName, value) {\n    this._getDataItem(itemName)._performDrillDown(value);\n  };\n\n  ViewerApi.prototype.performDrillUp = function (itemName) {\n    this._getDataItem(itemName)._performDrillUp();\n  };\n\n  ViewerApi.prototype.getAvailableActions = function (itemName) {\n    return this._getDataItem(itemName)._getAvailableActions();\n  };\n\n  ViewerApi.prototype.updateItemCaptionToolbar = function (itemName) {\n    var _this = this;\n\n    var dashboardItemNames = itemName ? this.dashboardControl.dashboard().findItem(itemName) && [itemName] || [] : this.dashboardControl.dashboard()._allItems().map(function (item) {\n      return item.componentName();\n    });\n\n    if (itemName && dashboardItemNames.length === 0) {\n      throw new Error(\"The item with the '\" + itemName + \"' name does not exist\");\n    }\n\n    dashboardItemNames.forEach(function (itemName) {\n      _this._viewerItems[itemName] && _this._viewerItems[itemName].forEach(function (viewerItem) {\n        return viewerItem.updateCaptionToolbar();\n      });\n    });\n  };\n\n  ViewerApi.prototype.updateDashboardTitleToolbar = function () {\n    if (this.title()) {\n      this.title().update();\n    }\n  };\n\n  ViewerApi.prototype.setSelectedTabPage = function (tabPageName) {\n    var dashboard = this.dashboardControl.dashboard();\n\n    if (dashboard) {\n      var tabPage = _utils_1.findItemForApi(this.dashboardControl.dashboard(), tabPageName, model_1.DashboardTabPage);\n\n      var tabContainer = this._findParentTabContainer(tabPageName);\n\n      if (tabContainer && tabPage) tabContainer._activeTabPage(tabPage);\n    }\n  };\n\n  ViewerApi.prototype.setSelectedTabPageIndex = function (tabContainerName, index) {\n    var dashboard = this.dashboardControl.dashboard();\n\n    if (dashboard) {\n      var tabContainer = _utils_1.findItemForApi(this.dashboardControl.dashboard(), tabContainerName, model_1.TabContainerItem);\n\n      if (index < 0 || index > tabContainer.tabPages().length - 1) {\n        throw Error(\"The '\" + tabContainerName + \"' tab container does not contain a tab page with the following index: \" + index);\n      }\n\n      var tabContainerLayoutItem = this.dashboardControl.dashboard().layout().findLayoutItem(tabContainer);\n\n      if (tabContainerLayoutItem) {\n        this.setSelectedTabPage(tabContainerLayoutItem.childNodes()[index].dashboardItem());\n      }\n    }\n  };\n\n  ViewerApi.prototype.getSelectedTabPageIndex = function (tabContainerName) {\n    var dashboard = this.dashboardControl.dashboard();\n\n    if (dashboard) {\n      var tabContainer = _utils_1.findItemForApi(this.dashboardControl.dashboard(), tabContainerName, model_1.TabContainerItem);\n\n      var tabContainerLayoutItem = this.dashboardControl.dashboard().layout().findLayoutItem(tabContainer);\n      var activeTabPageLayoutItem = this.dashboardControl.dashboard().layout().findLayoutItem(tabContainer._activeTabPage());\n\n      if (tabContainerLayoutItem && tabContainerLayoutItem) {\n        return tabContainerLayoutItem.childNodes().indexOf(activeTabPageLayoutItem);\n      }\n    }\n\n    return -1;\n  };\n\n  ViewerApi.prototype.getSelectedTabPage = function (tabContainerName) {\n    var dashboard = this.dashboardControl.dashboard();\n\n    if (dashboard) {\n      var tabContainer = _utils_1.findItemForApi(this.dashboardControl.dashboard(), tabContainerName, model_1.TabContainerItem);\n\n      return tabContainer._activeTabPage() ? tabContainer._activeTabPage().componentName() : '';\n    }\n\n    return '';\n  };\n\n  ViewerApi.prototype._findParentTabContainer = function (tabPageName) {\n    var tabContainers = this.dashboardControl.dashboard().items().filter(function (item) {\n      return item instanceof model_1.TabContainerItem;\n    });\n    var parentContainer;\n    tabContainers.forEach(function (container) {\n      var pages = container.tabPages().filter(function (page) {\n        return page.componentName() === tabPageName;\n      });\n\n      if (pages.length > 0) {\n        parentContainer = container;\n      }\n    });\n\n    if (!parentContainer) {\n      throw new Error(\"The tab container item with the page'\" + tabPageName + \"' name does not exist\");\n    }\n\n    return parentContainer;\n  };\n\n  ViewerApi.prototype._getViewerItem = function (itemName) {\n    var viewerItems = this._viewerItems[itemName] ? this._viewerItems[itemName].filter(function (viewer) {\n      return viewer.hasWidget;\n    }) : [];\n    return viewerItems.length > 0 ? viewerItems[0] : undefined;\n  };\n\n  return ViewerApi;\n}(disposable_object_1.DisposableObject);\n\nexports.ViewerApi = ViewerApi;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/common/viewer/_viewer-api.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","ViewerApi","viewerApiEventsNames","ko","require","_drill_through_data_wrapper_1","_default_1","_common_1","model_1","disposable_object_1","_array_utils_1","_helper_classes_1","_knockout_utils_1","data_dashboard_item_1","date_filter_item_1","range_filter_item_1","_events_helper_1","_underlying_data_provider_1","_options_manager_1","_utils_1","notificator_1","_super","dashboardControl","_this","_viewerItems","_dashboardDisposables","_internalEvents","EventManager","title","observable","_viewerItemCreated","item","viewerItem","DataDashboardItem","itemClick","add","_raiseItemClick","itemSelectionChanged","_raiseItemSelectionChanged","clearMasterFilter","_raiseClearMasterFilter","_raiseItemElementCustomColor","itemWidgetCreated","_raiseItemWidgetCreated","itemWidgetUpdating","_raiseItemWidgetUpdating","itemWidgetUpdated","_raiseItemWidgetUpdated","itemWidgetOptionsPrepared","_raiseItemWidgetOptionsPrepared","itemCaptionToolbarUpdated","_raiseItemCaptionToolbarUpdated","componentName","indexOf","push","_viewerItemDispose","remove","index","splice","_beforeApplyViewerItemOptions","options","isCreation","customInteractivityOptions","raise","createItemInteractivityEventArgs","_raiseItemActionAvailabilityChanged","itemName","dashboardItem","dataPoint","createItemClickEventArgs","_getDataItem","requestUnderlyingData","tuples","createItemSelectionChangedEventArgs","name","viewControl","_getItem","createWidgetEventArgs","createWidgetOptionsEventArgs","_raiseTitleToolbarUpdated","dashboard","eventArgs","createItemElementCustomColorEventArgs","_raiseItemVisualInteractivity","interactivityOptions","values","args","onCompleted","dataDashboardItem","raiseOnCompleted","underlyingData","drillThroughData","DrillThroughDataWrapper","initialize","provider","UnderlyingDataProvider","_serviceClient","done","fail","request","errorMessage","NotificationController","_getErrorTextFromResponse","getLocalizationById","ErrorMessage","on","off","toDispose","subscribeWithPrev","oldValue","newValue","onUpdated","computed","newDashboard","forEach","dispose","items","filter","TabContainerItem","tabContainer","_activePageChanged","prevPageName","pageName","_raiseSelectedTabPageChanged","_dataDashboardItems","peek","disposables","_actions","prevActions","actions","arrayEquals","subscribeArrayChange","_drillDownValues","added","v","action","deleted","_actualSelectionValues","subscribe","apply","_checkIsRangeFilterItem","RangeFilterItem","DateFilterItem","Error","tabContainerName","selectedPage","previousPage","start","_dashboardContext","viewerItemCreated","viewerItemDispose","beforeApplyViewerItemOptions","stop","_getItemCore","itemId","findItem","_allItems","_findDataItem","getCurrentRange","selection","_getEntireRange","length","minimum","maximum","getEntireRange","entireRange","setRange","range","setMasterFilter","setPredefinedRange","dateTimePeriodName","rangeFilter","periods","dateTimePeriods","period","_processItemSetPredefinedPeriod","getAvailablePredefinedRanges","map","getCurrentPredefinedRange","currentSelectedDateTimePeriodName","getCurrentSelection","Guard","isNotFalsy","itemData","_getItemData","_getViewerItem","selectedTuples","getSelectedTuples","selectedTuple","createTuple","canSetMasterFilter","viewerActions","canClearMasterFilter","canPerformDrillDown","drillDown","canPerformDrillUp","drillUp","getItemData","getCurrentFilterValues","_getCurrentFilterValues","getAvailableFilterValues","_getAvailableFilterValues","getCurrentDrillDownValues","_getCurrentDrillDownValues","getAvailableDrillDownValues","_getAvailableDrillDownValues","_performSetMasterFilter","_performClearMasterFilter","performDrillDown","_performDrillDown","performDrillUp","_performDrillUp","getAvailableActions","_getAvailableActions","updateItemCaptionToolbar","dashboardItemNames","updateCaptionToolbar","updateDashboardTitleToolbar","update","setSelectedTabPage","tabPageName","tabPage","findItemForApi","DashboardTabPage","_findParentTabContainer","_activeTabPage","setSelectedTabPageIndex","tabPages","tabContainerLayoutItem","layout","findLayoutItem","childNodes","getSelectedTabPageIndex","activeTabPageLayoutItem","getSelectedTabPage","tabContainers","parentContainer","container","pages","page","viewerItems","viewer","hasWidget","undefined","DisposableObject"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_viewer-api.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ViewerApi = exports.viewerApiEventsNames = void 0;\nvar ko = require(\"knockout\");\nvar _drill_through_data_wrapper_1 = require(\"../../data/drill-through-data/_drill-through-data-wrapper\");\nvar _default_1 = require(\"../../data/localization/_default\");\nvar _common_1 = require(\"../../data/_common\");\nvar model_1 = require(\"../../model\");\nvar disposable_object_1 = require(\"../../model/disposable-object\");\nvar _array_utils_1 = require(\"../../model/internal/_array-utils\");\nvar _helper_classes_1 = require(\"../../model/internal/_helper-classes\");\nvar _knockout_utils_1 = require(\"../../model/internal/_knockout-utils\");\nvar data_dashboard_item_1 = require(\"../../model/items/data-dashboard-item\");\nvar date_filter_item_1 = require(\"../../model/items/filter-items/date-filter-item\");\nvar range_filter_item_1 = require(\"../../model/items/range-filter/range-filter-item\");\nvar _events_helper_1 = require(\"../../viewer-parts/viewer/_events-helper\");\nvar _underlying_data_provider_1 = require(\"../data/_underlying-data-provider\");\nvar _options_manager_1 = require(\"../internal/_options-manager\");\nvar _utils_1 = require(\"../internal/_utils\");\nvar notificator_1 = require(\"../notification-controller/notificator\");\nexports.viewerApiEventsNames = [\n    'itemClick',\n    'itemSelectionChanged',\n    'itemWidgetCreated',\n    'itemWidgetUpdating',\n    'itemWidgetUpdated',\n    'itemWidgetOptionsPrepared',\n    'itemElementCustomColor',\n    'itemVisualInteractivity',\n    'itemMasterFilterStateChanged',\n    'itemDrillDownStateChanged',\n    'itemActionAvailabilityChanged',\n    'itemCaptionToolbarUpdated',\n    'dashboardTitleToolbarUpdated',\n    'selectedTabPageChanged'\n];\nvar ViewerApi = (function (_super) {\n    __extends(ViewerApi, _super);\n    function ViewerApi(dashboardControl) {\n        var _this = _super.call(this) || this;\n        _this.dashboardControl = dashboardControl;\n        _this._viewerItems = {};\n        _this._dashboardDisposables = [];\n        _this._internalEvents = new _options_manager_1.EventManager();\n        _this.title = ko.observable(null);\n        _this._viewerItemCreated = function (item, viewerItem) {\n            if (!!viewerItem) {\n                if (item instanceof data_dashboard_item_1.DataDashboardItem) {\n                    viewerItem.itemClick.add(_this._raiseItemClick);\n                    viewerItem.itemSelectionChanged.add(_this._raiseItemSelectionChanged);\n                    viewerItem.clearMasterFilter.add(_this._raiseClearMasterFilter);\n                }\n                if (!!viewerItem['itemElementCustomColor']) {\n                    viewerItem['itemElementCustomColor'].add(_this._raiseItemElementCustomColor);\n                }\n                viewerItem.itemWidgetCreated.add(_this._raiseItemWidgetCreated);\n                viewerItem.itemWidgetUpdating.add(_this._raiseItemWidgetUpdating);\n                viewerItem.itemWidgetUpdated.add(_this._raiseItemWidgetUpdated);\n                viewerItem.itemWidgetOptionsPrepared.add(_this._raiseItemWidgetOptionsPrepared);\n                viewerItem.itemCaptionToolbarUpdated.add(_this._raiseItemCaptionToolbarUpdated);\n            }\n            if (!_this._viewerItems[item.componentName()]) {\n                _this._viewerItems[item.componentName()] = [];\n            }\n            if (_this._viewerItems[item.componentName()].indexOf(viewerItem) === -1) {\n                _this._viewerItems[item.componentName()].push(viewerItem);\n            }\n        };\n        _this._viewerItemDispose = function (item, viewerItem) {\n            if (!!viewerItem) {\n                if (item instanceof data_dashboard_item_1.DataDashboardItem) {\n                    viewerItem.itemClick.remove(_this._raiseItemClick);\n                    viewerItem.itemSelectionChanged.remove(_this._raiseItemSelectionChanged);\n                    viewerItem.clearMasterFilter.remove(_this._raiseClearMasterFilter);\n                }\n                if (!!viewerItem['itemElementCustomColor']) {\n                    viewerItem['itemElementCustomColor'].remove(_this._raiseItemElementCustomColor);\n                }\n                viewerItem.itemWidgetCreated.remove(_this._raiseItemWidgetCreated);\n                viewerItem.itemWidgetUpdating.remove(_this._raiseItemWidgetUpdating);\n                viewerItem.itemWidgetUpdated.remove(_this._raiseItemWidgetUpdated);\n                viewerItem.itemCaptionToolbarUpdated.remove(_this._raiseItemCaptionToolbarUpdated);\n            }\n            if (_this._viewerItems[item.componentName()]) {\n                var index = _this._viewerItems[item.componentName()].indexOf(viewerItem);\n                if (index > -1) {\n                    _this._viewerItems[item.componentName()].splice(index, 1);\n                }\n            }\n        };\n        _this._beforeApplyViewerItemOptions = function (item, options, isCreation, customInteractivityOptions) {\n            if (item instanceof data_dashboard_item_1.DataDashboardItem) {\n                _this._internalEvents.raise('itemVisualInteractivity', _events_helper_1.createItemInteractivityEventArgs(item, customInteractivityOptions));\n            }\n        };\n        _this._raiseItemActionAvailabilityChanged = function (item) {\n            _this._internalEvents.raise('itemActionAvailabilityChanged', {\n                itemName: item.componentName(),\n                dashboardItem: item,\n            });\n        };\n        _this._raiseItemClick = function (itemName, dataPoint) {\n            _this._internalEvents.raise('itemClick', _events_helper_1.createItemClickEventArgs(_this._getDataItem(itemName), dataPoint, _this.requestUnderlyingData));\n        };\n        _this._raiseItemSelectionChanged = function (itemName, tuples) {\n            _this._internalEvents.raise('itemSelectionChanged', _events_helper_1.createItemSelectionChangedEventArgs(_this._getDataItem(itemName), tuples));\n        };\n        _this._raiseItemWidgetCreated = function (name, viewControl) {\n            var item = _this._getItem(name);\n            _this._internalEvents.raise('itemWidgetCreated', _events_helper_1.createWidgetEventArgs(item, viewControl));\n        };\n        _this._raiseItemWidgetUpdating = function (name, viewControl) {\n            var item = _this._getItem(name);\n            _this._internalEvents.raise('itemWidgetUpdating', _events_helper_1.createWidgetEventArgs(item, viewControl));\n        };\n        _this._raiseItemWidgetUpdated = function (name, viewControl) {\n            var item = _this._getItem(name);\n            _this._internalEvents.raise('itemWidgetUpdated', _events_helper_1.createWidgetEventArgs(item, viewControl));\n        };\n        _this._raiseItemWidgetOptionsPrepared = function (name, options) {\n            var item = _this._getItem(name);\n            _this._internalEvents.raise('itemWidgetOptionsPrepared', _events_helper_1.createWidgetOptionsEventArgs(item, options));\n        };\n        _this._raiseItemCaptionToolbarUpdated = function (name, options) {\n            var item = _this._getItem(name);\n            _this._internalEvents.raise('itemCaptionToolbarUpdated', { itemName: name, dashboardItem: item, options: options });\n        };\n        _this._raiseTitleToolbarUpdated = function (options) {\n            _this._internalEvents.raise('dashboardTitleToolbarUpdated', { dashboard: _this.dashboardControl.dashboard(), options: options });\n        };\n        _this._raiseItemElementCustomColor = function (itemName, eventArgs) {\n            _this._internalEvents.raise('itemElementCustomColor', _events_helper_1.createItemElementCustomColorEventArgs(_this._getDataItem(itemName), eventArgs));\n        };\n        _this._raiseItemVisualInteractivity = function (itemName, interactivityOptions) {\n            _this._internalEvents.raise('itemVisualInteractivity', _events_helper_1.createItemInteractivityEventArgs(_this._getDataItem(itemName), interactivityOptions));\n        };\n        _this._raiseClearMasterFilter = function (itemName) {\n            var item = _this._getItem(itemName);\n            _this._internalEvents.raise('itemMasterFilterStateChanged', {\n                itemName: item.componentName(),\n                dashboardItem: item,\n                values: null\n            });\n        };\n        _this.requestUnderlyingData = function (itemName, args, onCompleted) {\n            var dataDashboardItem = _this._getDataItem(itemName);\n            var raiseOnCompleted = function (underlyingData) {\n                var drillThroughData = new _drill_through_data_wrapper_1.DrillThroughDataWrapper(underlyingData);\n                drillThroughData.initialize();\n                onCompleted(drillThroughData);\n            };\n            var provider = new _underlying_data_provider_1.UnderlyingDataProvider(_this.dashboardControl._serviceClient());\n            provider.requestUnderlyingData(dataDashboardItem, args)\n                .done(raiseOnCompleted)\n                .fail(function (request) {\n                var errorMessage = notificator_1.NotificationController._getErrorTextFromResponse(request);\n                if (!errorMessage) {\n                    errorMessage = _default_1.getLocalizationById('DashboardWebStringId.Notification.AttemptToGetUnderlyingData');\n                }\n                raiseOnCompleted({ ErrorMessage: errorMessage });\n            });\n        };\n        _this.on = _this._internalEvents.on;\n        _this.off = _this._internalEvents.off;\n        _this.toDispose(_knockout_utils_1.subscribeWithPrev(_this.title, function (oldValue, newValue) {\n            if (oldValue) {\n                oldValue.onUpdated.remove(_this._raiseTitleToolbarUpdated);\n            }\n            if (newValue) {\n                newValue.onUpdated.add(_this._raiseTitleToolbarUpdated);\n            }\n        }));\n        _this.toDispose(ko.computed(function () {\n            var newDashboard = dashboardControl.dashboard();\n            _this._dashboardDisposables.forEach(function (d) { return d.dispose(); });\n            _this._dashboardDisposables = [];\n            if (newDashboard) {\n                newDashboard\n                    .items()\n                    .filter(function (item) { return item instanceof model_1.TabContainerItem; })\n                    .forEach(function (tabContainer) {\n                    tabContainer._activePageChanged = function (prevPageName, pageName) {\n                        _this._raiseSelectedTabPageChanged(tabContainer.componentName(), prevPageName, pageName);\n                    };\n                });\n                newDashboard._dataDashboardItems().forEach(function (item) {\n                    var itemName = item.componentName.peek();\n                    _this._raiseItemActionAvailabilityChanged(item);\n                    var disposables = [_knockout_utils_1.subscribeWithPrev(item._actions, function (prevActions, actions) {\n                            if (!_array_utils_1.arrayEquals(prevActions, actions)) {\n                                _this._raiseItemActionAvailabilityChanged(item);\n                            }\n                        })];\n                    disposables.push(_knockout_utils_1.subscribeArrayChange(item._drillDownValues, {\n                        added: function (v) {\n                            _this._internalEvents.raise('itemDrillDownStateChanged', {\n                                itemName: itemName,\n                                dashboardItem: item,\n                                action: 'Down',\n                                values: item._drillDownValues()\n                            });\n                        },\n                        deleted: function (v) {\n                            _this._internalEvents.raise('itemDrillDownStateChanged', {\n                                itemName: itemName,\n                                dashboardItem: item,\n                                action: 'Up',\n                                values: item._drillDownValues()\n                            });\n                        }\n                    }));\n                    disposables.push(item._actualSelectionValues.subscribe(function (newValue) {\n                        _this._internalEvents.raise('itemMasterFilterStateChanged', {\n                            itemName: itemName,\n                            dashboardItem: item,\n                            values: newValue\n                        });\n                    }));\n                    Array.prototype.push.apply(_this._dashboardDisposables, disposables);\n                });\n            }\n        }));\n        return _this;\n    }\n    ViewerApi.prototype._checkIsRangeFilterItem = function (itemName) {\n        var item = this._getDataItem(itemName);\n        if (!(item instanceof range_filter_item_1.RangeFilterItem) && !(item instanceof date_filter_item_1.DateFilterItem)) {\n            throw new Error('Action is called for an unsupported dashboard item. This action can be performed only for Range Filter and Date Filter.');\n        }\n    };\n    ViewerApi.prototype._raiseSelectedTabPageChanged = function (tabContainerName, prevPageName, pageName) {\n        this._internalEvents.raise('selectedTabPageChanged', {\n            tabContainerName: tabContainerName,\n            selectedPage: pageName,\n            previousPage: prevPageName\n        });\n    };\n    ViewerApi.prototype.start = function () {\n        this.dashboardControl._dashboardContext.viewerItemCreated.add(this._viewerItemCreated);\n        this.dashboardControl._dashboardContext.viewerItemDispose.add(this._viewerItemDispose);\n        this.dashboardControl._dashboardContext.beforeApplyViewerItemOptions.add(this._beforeApplyViewerItemOptions);\n    };\n    ViewerApi.prototype.stop = function () {\n        this.dashboardControl._dashboardContext.viewerItemCreated.remove(this._viewerItemCreated);\n        this.dashboardControl._dashboardContext.viewerItemDispose.remove(this._viewerItemDispose);\n        this.dashboardControl._dashboardContext.beforeApplyViewerItemOptions.remove(this._beforeApplyViewerItemOptions);\n    };\n    ViewerApi.prototype._getItemCore = function (itemId, findItem) {\n        var dashboard = this.dashboardControl.dashboard();\n        if (dashboard) {\n            var item = findItem(dashboard);\n            if (item) {\n                return item;\n            }\n            else {\n                throw Error(\"The item with the '\" + itemId + \"' name does not exist\");\n            }\n        }\n        else {\n            throw new Error('Cannot perform operation because the dashboard is not loaded');\n        }\n    };\n    ViewerApi.prototype._getItem = function (itemId) {\n        return this._getItemCore(itemId, function (dashboard) { return dashboard._allItems().filter(function (item) { return item.componentName() == itemId; })[0]; });\n    };\n    ViewerApi.prototype._getDataItem = function (itemName) {\n        return this._getItemCore(itemName, function (dashboard) { return dashboard._findDataItem(itemName); });\n    };\n    ViewerApi.prototype.getCurrentRange = function (itemName) {\n        this._checkIsRangeFilterItem(itemName);\n        var item = this._getDataItem(itemName);\n        var selection = item._actualSelectionValues() && item._actualSelectionValues()[0] || item._getEntireRange();\n        return selection && selection.length > 0 ? {\n            minimum: selection[0],\n            maximum: selection[1]\n        } : null;\n    };\n    ViewerApi.prototype.getEntireRange = function (itemName) {\n        this._checkIsRangeFilterItem(itemName);\n        var entireRange = this._getDataItem(itemName)._getEntireRange();\n        return entireRange.length > 0 ? {\n            minimum: entireRange[0],\n            maximum: entireRange[1]\n        } : null;\n    };\n    ViewerApi.prototype.setRange = function (itemName, range) {\n        this._checkIsRangeFilterItem(itemName);\n        this.setMasterFilter(itemName, [[range.minimum, range.maximum]]);\n    };\n    ViewerApi.prototype.setPredefinedRange = function (itemName, dateTimePeriodName) {\n        this._checkIsRangeFilterItem(itemName);\n        var rangeFilter = this._getDataItem(itemName);\n        var periods = rangeFilter.dateTimePeriods().filter(function (period) { return period.name() === dateTimePeriodName; });\n        if (periods.length === 0) {\n            throw new Error(\"The predefined range with the '\" + dateTimePeriodName + \"' name does not exist\");\n        }\n        rangeFilter._processItemSetPredefinedPeriod(dateTimePeriodName);\n    };\n    ViewerApi.prototype.getAvailablePredefinedRanges = function (itemName) {\n        this._checkIsRangeFilterItem(itemName);\n        return this._getDataItem(itemName).dateTimePeriods().map(function (period) { return period.name(); });\n    };\n    ViewerApi.prototype.getCurrentPredefinedRange = function (itemName) {\n        this._checkIsRangeFilterItem(itemName);\n        var period = this._getDataItem(itemName).currentSelectedDateTimePeriodName();\n        return period ? period : '';\n    };\n    ViewerApi.prototype.getCurrentSelection = function (itemName) {\n        _helper_classes_1.Guard.isNotFalsy(itemName, 'itemName');\n        var itemData = this._getDataItem(itemName)._getItemData(), tuples = [], viewerItem = this._getViewerItem(itemName);\n        var selectedTuples = viewerItem && viewerItem.getSelectedTuples() || null;\n        if (selectedTuples) {\n            tuples = selectedTuples.map(function (selectedTuple) { return itemData.createTuple(selectedTuple); });\n        }\n        return tuples;\n    };\n    ViewerApi.prototype.canSetMasterFilter = function (itemName) {\n        return this._getDataItem(itemName)._actions().indexOf(_common_1.viewerActions.setMasterFilter) !== -1;\n    };\n    ViewerApi.prototype.canClearMasterFilter = function (itemName) {\n        return this._getDataItem(itemName)._actions().indexOf(_common_1.viewerActions.clearMasterFilter) !== -1;\n    };\n    ViewerApi.prototype.canPerformDrillDown = function (itemName) {\n        return this._getDataItem(itemName)._actions().indexOf(_common_1.viewerActions.drillDown) !== -1;\n    };\n    ViewerApi.prototype.canPerformDrillUp = function (itemName) {\n        return this._getDataItem(itemName)._actions().indexOf(_common_1.viewerActions.drillUp) !== -1;\n    };\n    ViewerApi.prototype.getItemData = function (itemName) {\n        return this._getDataItem(itemName)._getItemData();\n    };\n    ViewerApi.prototype.getCurrentFilterValues = function (itemName) {\n        return this._getDataItem(itemName)._getCurrentFilterValues();\n    };\n    ViewerApi.prototype.getAvailableFilterValues = function (itemName) {\n        return this._getDataItem(itemName)._getAvailableFilterValues(itemName);\n    };\n    ViewerApi.prototype.getCurrentDrillDownValues = function (itemName) {\n        return this._getDataItem(itemName)._getCurrentDrillDownValues();\n    };\n    ViewerApi.prototype.getAvailableDrillDownValues = function (itemName) {\n        return this._getDataItem(itemName)._getAvailableDrillDownValues(itemName);\n    };\n    ViewerApi.prototype.setMasterFilter = function (itemName, values) {\n        this._getDataItem(itemName)._performSetMasterFilter(values);\n    };\n    ViewerApi.prototype.clearMasterFilter = function (itemName) {\n        this._getDataItem(itemName)._performClearMasterFilter();\n    };\n    ViewerApi.prototype.performDrillDown = function (itemName, value) {\n        this._getDataItem(itemName)._performDrillDown(value);\n    };\n    ViewerApi.prototype.performDrillUp = function (itemName) {\n        this._getDataItem(itemName)._performDrillUp();\n    };\n    ViewerApi.prototype.getAvailableActions = function (itemName) {\n        return this._getDataItem(itemName)._getAvailableActions();\n    };\n    ViewerApi.prototype.updateItemCaptionToolbar = function (itemName) {\n        var _this = this;\n        var dashboardItemNames = itemName ?\n            this.dashboardControl.dashboard().findItem(itemName) && [itemName] || []\n            :\n                this.dashboardControl\n                    .dashboard()\n                    ._allItems()\n                    .map(function (item) { return item.componentName(); });\n        if (itemName && dashboardItemNames.length === 0) {\n            throw new Error(\"The item with the '\" + itemName + \"' name does not exist\");\n        }\n        dashboardItemNames.forEach(function (itemName) {\n            _this._viewerItems[itemName] && _this._viewerItems[itemName].forEach(function (viewerItem) { return viewerItem.updateCaptionToolbar(); });\n        });\n    };\n    ViewerApi.prototype.updateDashboardTitleToolbar = function () {\n        if (this.title()) {\n            this.title().update();\n        }\n    };\n    ViewerApi.prototype.setSelectedTabPage = function (tabPageName) {\n        var dashboard = this.dashboardControl.dashboard();\n        if (dashboard) {\n            var tabPage = _utils_1.findItemForApi(this.dashboardControl.dashboard(), tabPageName, model_1.DashboardTabPage);\n            var tabContainer = this._findParentTabContainer(tabPageName);\n            if (tabContainer && tabPage)\n                tabContainer._activeTabPage(tabPage);\n        }\n    };\n    ViewerApi.prototype.setSelectedTabPageIndex = function (tabContainerName, index) {\n        var dashboard = this.dashboardControl.dashboard();\n        if (dashboard) {\n            var tabContainer = _utils_1.findItemForApi(this.dashboardControl.dashboard(), tabContainerName, model_1.TabContainerItem);\n            if (index < 0 || index > tabContainer.tabPages().length - 1) {\n                throw Error(\"The '\" + tabContainerName + \"' tab container does not contain a tab page with the following index: \" + index);\n            }\n            var tabContainerLayoutItem = this.dashboardControl.dashboard().layout().findLayoutItem(tabContainer);\n            if (tabContainerLayoutItem) {\n                this.setSelectedTabPage(tabContainerLayoutItem.childNodes()[index].dashboardItem());\n            }\n        }\n    };\n    ViewerApi.prototype.getSelectedTabPageIndex = function (tabContainerName) {\n        var dashboard = this.dashboardControl.dashboard();\n        if (dashboard) {\n            var tabContainer = _utils_1.findItemForApi(this.dashboardControl.dashboard(), tabContainerName, model_1.TabContainerItem);\n            var tabContainerLayoutItem = this.dashboardControl.dashboard().layout().findLayoutItem(tabContainer);\n            var activeTabPageLayoutItem = this.dashboardControl.dashboard().layout().findLayoutItem(tabContainer._activeTabPage());\n            if (tabContainerLayoutItem && tabContainerLayoutItem) {\n                return tabContainerLayoutItem.childNodes().indexOf(activeTabPageLayoutItem);\n            }\n        }\n        return -1;\n    };\n    ViewerApi.prototype.getSelectedTabPage = function (tabContainerName) {\n        var dashboard = this.dashboardControl.dashboard();\n        if (dashboard) {\n            var tabContainer = _utils_1.findItemForApi(this.dashboardControl.dashboard(), tabContainerName, model_1.TabContainerItem);\n            return tabContainer._activeTabPage() ? tabContainer._activeTabPage().componentName() : '';\n        }\n        return '';\n    };\n    ViewerApi.prototype._findParentTabContainer = function (tabPageName) {\n        var tabContainers = this.dashboardControl.dashboard().items().filter(function (item) { return item instanceof model_1.TabContainerItem; });\n        var parentContainer;\n        tabContainers.forEach(function (container) {\n            var pages = container.tabPages().filter(function (page) { return page.componentName() === tabPageName; });\n            if (pages.length > 0) {\n                parentContainer = container;\n            }\n        });\n        if (!parentContainer) {\n            throw new Error(\"The tab container item with the page'\" + tabPageName + \"' name does not exist\");\n        }\n        return parentContainer;\n    };\n    ViewerApi.prototype._getViewerItem = function (itemName) {\n        var viewerItems = this._viewerItems[itemName] ? this._viewerItems[itemName].filter(function (viewer) { return viewer.hasWidget; }) : [];\n        return viewerItems.length > 0 ? viewerItems[0] : undefined;\n    };\n    return ViewerApi;\n}(disposable_object_1.DisposableObject));\nexports.ViewerApi = ViewerApi;\n"]},"metadata":{},"sourceType":"script"}