{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_export-dialog-binder.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExportInfoManager = exports.ExportDialogBinder = exports.ExportDialogBinderOptions = void 0;\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar model_1 = require(\"../../model\");\n\nvar disposable_object_1 = require(\"../../model/disposable-object\");\n\nvar _date_utils_1 = require(\"../../model/internal/_date-utils\");\n\nvar dashboard_item_1 = require(\"../../model/items/dashboard-item\");\n\nvar data_dashboard_item_1 = require(\"../../model/items/data-dashboard-item\");\n\nvar group_item_1 = require(\"../../model/items/group/group-item\");\n\nvar dashboard_tab_page_1 = require(\"../../model/items/tab-container-item/dashboard-tab-page\");\n\nvar tab_container_item_1 = require(\"../../model/items/tab-container-item/tab-container-item\");\n\nvar _dashboard_title_view_constants_1 = require(\"../../viewer-parts/title/_dashboard-title-view-constants\");\n\nvar _export_dialog_1 = require(\"../../viewer-parts/widgets/dialogs/export/_export-dialog\");\n\nvar _export_options_1 = require(\"../../viewer-parts/_export-options\");\n\nvar ExportDialogBinderOptions = function () {\n  function ExportDialogBinderOptions() {}\n\n  return ExportDialogBinderOptions;\n}();\n\nexports.ExportDialogBinderOptions = ExportDialogBinderOptions;\n\nvar ExportDialogBinder = function () {\n  function ExportDialogBinder(_options) {\n    var _this = this;\n\n    this._options = _options;\n    this.availableExportFormats = ['PDF', 'Image', 'Excel'];\n\n    this.showDashboardDialog = function (format) {\n      _this._validateDashboardExport(format);\n\n      _this.exportDialog.setExportFunction(function (documentInfo) {\n        return _this.exportDashboardTo(format, documentInfo);\n      });\n\n      var title = _this._options.dashboard().title.visible() ? _this._options.dashboard().title.text() : 'Dashboard';\n\n      _this.exportDialog.showDialog('', null, format, {\n        defaultFileName: title,\n        defaultTitle: title\n      });\n    };\n\n    this.showItemDialog = function (itemComponentName, format) {\n      var item = _this._options.dashboard().findItem(itemComponentName);\n\n      if (!item) {\n        throw new Error(\"The item with the '\" + itemComponentName + \"' name does not exist\");\n      }\n\n      _this._validateExportFormat(format);\n\n      var exportCaption = item._caption;\n\n      _this.exportDialog.setExportFunction(function (documentInfo) {\n        return _this.exportDashboardItemTo(itemComponentName, format, documentInfo);\n      });\n\n      _this.exportDialog.showDialog(itemComponentName, _this._getExportItemType(item), format, {\n        defaultTitle: exportCaption,\n        defaultFileName: exportCaption\n      });\n    };\n\n    this.hide = function () {\n      if (!!_this._exportDialog) {\n        _this._exportDialog.hideDialog();\n      }\n    };\n\n    this.exportOptions = new _export_options_1.ExportOptions();\n    this.exportOptions.setPdfOptions(this._options.pdfExportOptions);\n    this.exportOptions.setImageOptions(this._options.imageExportOptions);\n    this.exportOptions.setExcelOptions(this._options.excelExportOptions);\n  }\n\n  ExportDialogBinder.prototype.reset = function () {\n    this._exportDialog = undefined;\n  };\n\n  ExportDialogBinder.prototype._getClientSize = function (container, mode) {\n    if (container) {\n      return {\n        width: _jquery_helpers_1.getOuterWidth(container),\n        height: _jquery_helpers_1.getOuterHeight(container)\n      };\n    } else {\n      if (mode === 'EntireDashboard') {\n        return {\n          width: 1920,\n          height: 1080\n        };\n      } else {\n        return {\n          width: window.outerWidth,\n          height: window.outerHeight\n        };\n      }\n    }\n  };\n\n  ExportDialogBinder.prototype._getActualComponentName = function (item) {\n    return item instanceof tab_container_item_1.TabContainerItem ? item._activeTabPage().componentName() : item.componentName();\n  };\n\n  ExportDialogBinder.prototype._getExportHolderItem = function (item) {\n    if (item instanceof tab_container_item_1.TabContainerItem) {\n      return this._options.dashboard()._getDisplayDashboardItem(item._activeTabPage());\n    }\n\n    return item;\n  };\n\n  ExportDialogBinder.prototype._getInfo = function (items, titleHeight, mode, format) {\n    var _this = this;\n\n    var container = this._options.getContainer().querySelector('.dx-dashboard-viewer'),\n        containerPosition = container ? _jquery_helpers_1.jqueryOffset(container) : {\n      left: 0,\n      top: 0\n    },\n        clientSize = this._getClientSize(container, mode);\n\n    var elementsList = items.map(function (item) {\n      var holderItem = _this._getExportHolderItem(item);\n\n      var isTabContainer = item instanceof tab_container_item_1.TabContainerItem;\n\n      var itemExportInfo = _this._options.exportInfoProvider.getItemExportInfo(holderItem.componentName(), mode, isTabContainer);\n\n      if (itemExportInfo) {\n        itemExportInfo.position = {\n          left: itemExportInfo.position.left - containerPosition.left,\n          top: itemExportInfo.position.top - containerPosition.top\n        };\n\n        if (isTabContainer) {\n          itemExportInfo.name = _this._getActualComponentName(item);\n          itemExportInfo.caption = holderItem.name();\n        }\n\n        return itemExportInfo;\n      } else if (format === 'Excel') {\n        return {\n          name: _this._getActualComponentName(item)\n        };\n      } else {\n        return null;\n      }\n    }).filter(function (itemExportInfo) {\n      return !!itemExportInfo;\n    });\n    return {\n      clientSize: clientSize,\n      titleHeight: titleHeight,\n      itemsState: elementsList\n    };\n  };\n\n  ExportDialogBinder.prototype._getFilterFormattableValues = function (dashboard, exportGroupName, item, exportInfo) {\n    var excelOptions = exportInfo.DocumentOptions.excelExportOptions;\n    var isGroupExport = !!exportGroupName;\n\n    if (exportInfo.Mode === 'EntireDashboard') {\n      if (!isGroupExport) {\n        if (exportInfo.Format === 'Excel' && excelOptions && excelOptions.DashboardStatePosition === 'Below') {\n          return item._getDisplayFilterValuesExternal();\n        } else {\n          if (item instanceof data_dashboard_item_1.DataDashboardItem && dashboard._masterFilterItems().indexOf(item) !== -1) {\n            return item._getDisplayFilterValues();\n          } else {\n            return [];\n          }\n        }\n      } else {\n        if (exportGroupName === item.componentName()) {\n          return this._getGroupExternalDisplayFilterValues(dashboard._dataDashboardItems(), exportGroupName);\n        } else {\n          return item._getDisplayFilterValues();\n        }\n      }\n    } else {\n      return item._getDisplayFilterValuesExternal();\n    }\n  };\n\n  ExportDialogBinder.prototype.exportDashboardTo = function (format, clientOptions, customFileName) {\n    this._validateDashboardExport(format);\n\n    var fileName = customFileName ? customFileName : clientOptions == undefined || clientOptions.fileName == undefined ? 'Export' : clientOptions.fileName,\n        dashboard = this._options.dashboard(),\n        items = dashboard.layout().getNodesRecursive().filter(function (node) {\n      return !!node.item;\n    }).filter(function (node) {\n      return !(node.item instanceof dashboard_tab_page_1.DashboardTabPage);\n    }).map(function (node) {\n      return node.item;\n    });\n\n    var exportOptions = this.exportOptions.convertToExportOptions(clientOptions);\n    if (!exportOptions.pdfExportOptions.Title) exportOptions.pdfExportOptions.Title = this._options.dashboard().title.text();\n    if (!exportOptions.imageExportOptions.Title) exportOptions.imageExportOptions.Title = this._options.dashboard().title.text();\n    if (format === 'Excel' && exportOptions.excelExportOptions.Format === 'Csv') throw new Error('Cannot export an entire dashboard in the CSV format.');\n\n    this._exportTo(items, {\n      mode: 'EntireDashboard',\n      format: format,\n      clientState: this._getInfo(items, this._options.dashboard().title.visible() ? _dashboard_title_view_constants_1.titleHeight : 0, 'EntireDashboard', format),\n      fileName: fileName\n    }, exportOptions);\n  };\n\n  ExportDialogBinder.prototype.exportDashboardItemTo = function (itemComponentName, format, clientOptions, customFileName) {\n    var fileName = customFileName ? customFileName : clientOptions == undefined || clientOptions.fileName == undefined ? 'Export' : clientOptions.fileName,\n        dashboard = this._options.dashboard(),\n        exportItem = dashboard.findItem(itemComponentName),\n        isGroup = exportItem instanceof group_item_1.GroupItem || exportItem instanceof dashboard_tab_page_1.DashboardTabPage;\n\n    var clientStateItems, dataQueryItems;\n\n    if (isGroup) {\n      var dashboardItems = dashboard.items().concat(dashboard.groups());\n\n      var needExportItem = function (item) {\n        return item.parentContainer() === exportItem.componentName();\n      };\n\n      clientStateItems = dashboardItems.filter(function (item) {\n        return needExportItem(item) || !!item.parentContainer() && needExportItem(dashboard.findItem(item.parentContainer()));\n      });\n      dataQueryItems = [exportItem].concat(clientStateItems);\n    } else {\n      clientStateItems = dataQueryItems = [exportItem];\n    }\n\n    this._validateExportFormat(format);\n\n    var exportOptions = this.exportOptions.convertToExportOptions(clientOptions);\n    if (!exportOptions.pdfExportOptions.Title) exportOptions.pdfExportOptions.Title = exportItem.name();\n    if (!exportOptions.imageExportOptions.Title) exportOptions.imageExportOptions.Title = exportItem.name();\n\n    this._exportTo(dataQueryItems, {\n      mode: isGroup ? 'EntireDashboard' : 'SingleItem',\n      format: format,\n      clientState: this._getInfo(clientStateItems, 0, 'SingleItem', format),\n      fileName: fileName,\n      name: itemComponentName,\n      itemType: this._getExportItemType(exportItem)\n    }, exportOptions);\n  };\n\n  Object.defineProperty(ExportDialogBinder.prototype, \"exportDialog\", {\n    get: function () {\n      if (!this._exportDialog) {\n        this._exportDialog = new _export_dialog_1.exportDialog({\n          container: this._options.getContainer(),\n          defaultDocumentInfo: this.exportOptions,\n          onShown: this._options.onExportDialogShown,\n          onShowing: this._options.onExportDialogShowing,\n          onHidden: this._options.onExportDialogHidden\n        });\n      }\n\n      return this._exportDialog;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ExportDialogBinder.prototype._getExportItemType = function (item) {\n    return item ? dashboard_item_1.DashboardItem._getCommonItemType(item.itemType()) : undefined;\n  };\n\n  ExportDialogBinder.prototype._getGroupExternalDisplayFilterValues = function (dataDashboardItems, groupName) {\n    var itemsInGroup = dataDashboardItems.filter(function (item) {\n      return item.parentContainer() === groupName;\n    });\n    var externalMasters = itemsInGroup.reduce(function (acc, item) {\n      return acc.concat(item._masterFilterItems());\n    }, []).filter(function (master, index, array) {\n      return array.indexOf(master) !== index;\n    }).filter(function (master) {\n      return itemsInGroup.indexOf(master) === -1;\n    });\n    return externalMasters.reduce(function (acc, master) {\n      return acc.concat(master._getDisplayFilterValues());\n    }, []);\n  };\n\n  ExportDialogBinder.prototype._exportTo = function (items, modeInfo, documentOptions) {\n    var _this = this;\n\n    var fileName = modeInfo.fileName && modeInfo.fileName.trim() ? modeInfo.fileName.replace(/[\\\\/:*?\"<>|]/g, '_') : 'Export';\n    var exportInfo = {\n      Mode: modeInfo.mode,\n      GroupName: modeInfo.name,\n      FileName: fileName,\n      ClientState: modeInfo.clientState,\n      Format: modeInfo.format,\n      DocumentOptions: documentOptions,\n      ItemType: modeInfo.itemType\n    };\n\n    var dashboard = this._options.dashboard();\n\n    var model = items.map(function (item) {\n      var holderItem = _this._getExportHolderItem(item);\n\n      return {\n        name: _this._getActualComponentName(item),\n        query: _this._getExportDataQueryParams(holderItem, modeInfo),\n        drillDownFormattableValues: holderItem instanceof data_dashboard_item_1.DataDashboardItem ? _date_utils_1.toStringArray(holderItem._getDisplayDrillDownValues()) : undefined,\n        filterFormattableValues: _date_utils_1.toStringArray(_this._getFilterFormattableValues(dashboard, exportInfo.GroupName, holderItem, exportInfo)),\n        selectedValues: _date_utils_1.toStringArray(holderItem._getExportingSelection())\n      };\n    });\n\n    this._options.serviceClient().performExport(exportInfo, model);\n  };\n\n  ExportDialogBinder.prototype._getExportDataQueryParams = function (dashboardItem, modeInfo) {\n    var queryParams = dashboardItem._getDataQueryParams();\n\n    if (dashboardItem instanceof model_1.GridItem && dashboardItem.columnFilterOptions.updateTotals()) {\n      var itemsState = modeInfo.clientState.itemsState.find(function (s) {\n        return s.name === dashboardItem.componentName();\n      });\n\n      if (itemsState) {\n        queryParams['ClientFilter'] = itemsState['combinedFilter'];\n      }\n    }\n\n    return queryParams;\n  };\n\n  ExportDialogBinder.prototype._validateExportFormat = function (format) {\n    if (this.availableExportFormats.indexOf(format) === -1) {\n      throw new Error(\"A format is specified incorrectly. Use one of the following: 'PDF', 'Image' or 'Excel'.\");\n    }\n  };\n\n  ExportDialogBinder.prototype._validateDashboardExport = function (format) {\n    this._validateExportFormat(format);\n\n    if (!this._options.dashboard()) {\n      throw new Error('Cannot perform exporting because the dashboard is not loaded.');\n    }\n  };\n\n  return ExportDialogBinder;\n}();\n\nexports.ExportDialogBinder = ExportDialogBinder;\n\nvar ExportInfoManager = function (_super) {\n  __extends(ExportInfoManager, _super);\n\n  function ExportInfoManager() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._primaryExportInfoProviders = {};\n    _this._secondaryExportInfoProviders = {};\n    _this._captionExportInfoProviders = {};\n    return _this;\n  }\n\n  ExportInfoManager.prototype.getItemExportInfo = function (itemName, mode, isCaption) {\n    if (mode === 'SingleItem' && this._secondaryExportInfoProviders[itemName]) {\n      return this._secondaryExportInfoProviders[itemName]();\n    } else if (isCaption && this._captionExportInfoProviders[itemName]) {\n      return this._captionExportInfoProviders[itemName]();\n    } else if (this._primaryExportInfoProviders[itemName]) {\n      return this._primaryExportInfoProviders[itemName]();\n    } else {\n      return null;\n    }\n  };\n\n  ExportInfoManager.prototype.registerPrimaryExportItem = function (itemName, getExportInfoFunc) {\n    this._primaryExportInfoProviders[itemName] = getExportInfoFunc;\n  };\n\n  ExportInfoManager.prototype.unregisterPrimaryExportItem = function (itemName) {\n    if (this._primaryExportInfoProviders[itemName]) {\n      delete this._primaryExportInfoProviders[itemName];\n    }\n  };\n\n  ExportInfoManager.prototype.registerSecondaryExportItem = function (itemName, getExportInfoFunc) {\n    this._secondaryExportInfoProviders[itemName] = getExportInfoFunc;\n  };\n\n  ExportInfoManager.prototype.unregisterSecondaryExportItem = function (itemName) {\n    if (this._secondaryExportInfoProviders[itemName]) {\n      delete this._secondaryExportInfoProviders[itemName];\n    }\n  };\n\n  ExportInfoManager.prototype.registerCaptionExportItem = function (itemName, getExportInfoFunc) {\n    this._captionExportInfoProviders[itemName] = getExportInfoFunc;\n  };\n\n  ExportInfoManager.prototype.unregisterCaptionExportItem = function (itemName) {\n    if (this._captionExportInfoProviders[itemName]) {\n      delete this._captionExportInfoProviders[itemName];\n    }\n  };\n\n  ExportInfoManager.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._primaryExportInfoProviders = {};\n    this._secondaryExportInfoProviders = {};\n    this._captionExportInfoProviders = {};\n  };\n\n  return ExportInfoManager;\n}(disposable_object_1.DisposableObject);\n\nexports.ExportInfoManager = ExportInfoManager;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/common/extensions/_export-dialog-binder.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","ExportInfoManager","ExportDialogBinder","ExportDialogBinderOptions","_jquery_helpers_1","require","model_1","disposable_object_1","_date_utils_1","dashboard_item_1","data_dashboard_item_1","group_item_1","dashboard_tab_page_1","tab_container_item_1","_dashboard_title_view_constants_1","_export_dialog_1","_export_options_1","_options","_this","availableExportFormats","showDashboardDialog","format","_validateDashboardExport","exportDialog","setExportFunction","documentInfo","exportDashboardTo","title","dashboard","visible","text","showDialog","defaultFileName","defaultTitle","showItemDialog","itemComponentName","item","findItem","Error","_validateExportFormat","exportCaption","_caption","exportDashboardItemTo","_getExportItemType","hide","_exportDialog","hideDialog","exportOptions","ExportOptions","setPdfOptions","pdfExportOptions","setImageOptions","imageExportOptions","setExcelOptions","excelExportOptions","reset","undefined","_getClientSize","container","mode","width","getOuterWidth","height","getOuterHeight","window","outerWidth","outerHeight","_getActualComponentName","TabContainerItem","_activeTabPage","componentName","_getExportHolderItem","_getDisplayDashboardItem","_getInfo","items","titleHeight","getContainer","querySelector","containerPosition","jqueryOffset","left","top","clientSize","elementsList","map","holderItem","isTabContainer","itemExportInfo","exportInfoProvider","getItemExportInfo","position","name","caption","filter","itemsState","_getFilterFormattableValues","exportGroupName","exportInfo","excelOptions","DocumentOptions","isGroupExport","Mode","Format","DashboardStatePosition","_getDisplayFilterValuesExternal","DataDashboardItem","_masterFilterItems","indexOf","_getDisplayFilterValues","_getGroupExternalDisplayFilterValues","_dataDashboardItems","clientOptions","customFileName","fileName","layout","getNodesRecursive","node","DashboardTabPage","convertToExportOptions","Title","_exportTo","clientState","exportItem","isGroup","GroupItem","clientStateItems","dataQueryItems","dashboardItems","concat","groups","needExportItem","parentContainer","itemType","get","defaultDocumentInfo","onShown","onExportDialogShown","onShowing","onExportDialogShowing","onHidden","onExportDialogHidden","enumerable","configurable","DashboardItem","_getCommonItemType","dataDashboardItems","groupName","itemsInGroup","externalMasters","reduce","acc","master","index","array","modeInfo","documentOptions","trim","replace","GroupName","FileName","ClientState","ItemType","model","query","_getExportDataQueryParams","drillDownFormattableValues","toStringArray","_getDisplayDrillDownValues","filterFormattableValues","selectedValues","_getExportingSelection","serviceClient","performExport","dashboardItem","queryParams","_getDataQueryParams","GridItem","columnFilterOptions","updateTotals","find","s","_super","apply","arguments","_primaryExportInfoProviders","_secondaryExportInfoProviders","_captionExportInfoProviders","itemName","isCaption","registerPrimaryExportItem","getExportInfoFunc","unregisterPrimaryExportItem","registerSecondaryExportItem","unregisterSecondaryExportItem","registerCaptionExportItem","unregisterCaptionExportItem","dispose","DisposableObject"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_export-dialog-binder.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExportInfoManager = exports.ExportDialogBinder = exports.ExportDialogBinderOptions = void 0;\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar model_1 = require(\"../../model\");\nvar disposable_object_1 = require(\"../../model/disposable-object\");\nvar _date_utils_1 = require(\"../../model/internal/_date-utils\");\nvar dashboard_item_1 = require(\"../../model/items/dashboard-item\");\nvar data_dashboard_item_1 = require(\"../../model/items/data-dashboard-item\");\nvar group_item_1 = require(\"../../model/items/group/group-item\");\nvar dashboard_tab_page_1 = require(\"../../model/items/tab-container-item/dashboard-tab-page\");\nvar tab_container_item_1 = require(\"../../model/items/tab-container-item/tab-container-item\");\nvar _dashboard_title_view_constants_1 = require(\"../../viewer-parts/title/_dashboard-title-view-constants\");\nvar _export_dialog_1 = require(\"../../viewer-parts/widgets/dialogs/export/_export-dialog\");\nvar _export_options_1 = require(\"../../viewer-parts/_export-options\");\nvar ExportDialogBinderOptions = (function () {\n    function ExportDialogBinderOptions() {\n    }\n    return ExportDialogBinderOptions;\n}());\nexports.ExportDialogBinderOptions = ExportDialogBinderOptions;\nvar ExportDialogBinder = (function () {\n    function ExportDialogBinder(_options) {\n        var _this = this;\n        this._options = _options;\n        this.availableExportFormats = ['PDF', 'Image', 'Excel'];\n        this.showDashboardDialog = function (format) {\n            _this._validateDashboardExport(format);\n            _this.exportDialog.setExportFunction(function (documentInfo) {\n                return _this.exportDashboardTo(format, documentInfo);\n            });\n            var title = _this._options.dashboard().title.visible() ? _this._options.dashboard().title.text() : 'Dashboard';\n            _this.exportDialog.showDialog('', null, format, {\n                defaultFileName: title,\n                defaultTitle: title\n            });\n        };\n        this.showItemDialog = function (itemComponentName, format) {\n            var item = _this._options.dashboard().findItem(itemComponentName);\n            if (!item) {\n                throw new Error(\"The item with the '\" + itemComponentName + \"' name does not exist\");\n            }\n            _this._validateExportFormat(format);\n            var exportCaption = item._caption;\n            _this.exportDialog.setExportFunction(function (documentInfo) {\n                return _this.exportDashboardItemTo(itemComponentName, format, documentInfo);\n            });\n            _this.exportDialog.showDialog(itemComponentName, _this._getExportItemType(item), format, {\n                defaultTitle: exportCaption,\n                defaultFileName: exportCaption,\n            });\n        };\n        this.hide = function () {\n            if (!!_this._exportDialog) {\n                _this._exportDialog.hideDialog();\n            }\n        };\n        this.exportOptions = new _export_options_1.ExportOptions();\n        this.exportOptions.setPdfOptions(this._options.pdfExportOptions);\n        this.exportOptions.setImageOptions(this._options.imageExportOptions);\n        this.exportOptions.setExcelOptions(this._options.excelExportOptions);\n    }\n    ExportDialogBinder.prototype.reset = function () {\n        this._exportDialog = undefined;\n    };\n    ExportDialogBinder.prototype._getClientSize = function (container, mode) {\n        if (container) {\n            return { width: _jquery_helpers_1.getOuterWidth(container), height: _jquery_helpers_1.getOuterHeight(container) };\n        }\n        else {\n            if (mode === 'EntireDashboard') {\n                return { width: 1920, height: 1080 };\n            }\n            else {\n                return { width: window.outerWidth, height: window.outerHeight };\n            }\n        }\n    };\n    ExportDialogBinder.prototype._getActualComponentName = function (item) {\n        return item instanceof tab_container_item_1.TabContainerItem ? item._activeTabPage().componentName() : item.componentName();\n    };\n    ExportDialogBinder.prototype._getExportHolderItem = function (item) {\n        if (item instanceof tab_container_item_1.TabContainerItem) {\n            return this._options.dashboard()._getDisplayDashboardItem(item._activeTabPage());\n        }\n        return item;\n    };\n    ExportDialogBinder.prototype._getInfo = function (items, titleHeight, mode, format) {\n        var _this = this;\n        var container = this._options.getContainer().querySelector('.dx-dashboard-viewer'), containerPosition = container ? _jquery_helpers_1.jqueryOffset(container) : { left: 0, top: 0 }, clientSize = this._getClientSize(container, mode);\n        var elementsList = items\n            .map(function (item) {\n            var holderItem = _this._getExportHolderItem(item);\n            var isTabContainer = item instanceof tab_container_item_1.TabContainerItem;\n            var itemExportInfo = _this._options.exportInfoProvider.getItemExportInfo(holderItem.componentName(), mode, isTabContainer);\n            if (itemExportInfo) {\n                itemExportInfo.position = {\n                    left: itemExportInfo.position.left - containerPosition.left,\n                    top: itemExportInfo.position.top - containerPosition.top\n                };\n                if (isTabContainer) {\n                    itemExportInfo.name = _this._getActualComponentName(item);\n                    itemExportInfo.caption = holderItem.name();\n                }\n                return itemExportInfo;\n            }\n            else if (format === 'Excel') {\n                return { name: _this._getActualComponentName(item) };\n            }\n            else {\n                return null;\n            }\n        })\n            .filter(function (itemExportInfo) { return !!itemExportInfo; });\n        return {\n            clientSize: clientSize,\n            titleHeight: titleHeight,\n            itemsState: elementsList\n        };\n    };\n    ExportDialogBinder.prototype._getFilterFormattableValues = function (dashboard, exportGroupName, item, exportInfo) {\n        var excelOptions = exportInfo.DocumentOptions.excelExportOptions;\n        var isGroupExport = !!exportGroupName;\n        if (exportInfo.Mode === 'EntireDashboard') {\n            if (!isGroupExport) {\n                if (exportInfo.Format === 'Excel' && excelOptions && excelOptions.DashboardStatePosition === 'Below') {\n                    return item._getDisplayFilterValuesExternal();\n                }\n                else {\n                    if (item instanceof data_dashboard_item_1.DataDashboardItem && dashboard._masterFilterItems().indexOf(item) !== -1) {\n                        return item._getDisplayFilterValues();\n                    }\n                    else {\n                        return [];\n                    }\n                }\n            }\n            else {\n                if (exportGroupName === item.componentName()) {\n                    return this._getGroupExternalDisplayFilterValues(dashboard._dataDashboardItems(), exportGroupName);\n                }\n                else {\n                    return item._getDisplayFilterValues();\n                }\n            }\n        }\n        else {\n            return item._getDisplayFilterValuesExternal();\n        }\n    };\n    ExportDialogBinder.prototype.exportDashboardTo = function (format, clientOptions, customFileName) {\n        this._validateDashboardExport(format);\n        var fileName = customFileName ? customFileName : (clientOptions == undefined || clientOptions.fileName == undefined) ? 'Export' : clientOptions.fileName, dashboard = this._options.dashboard(), items = dashboard\n            .layout()\n            .getNodesRecursive()\n            .filter(function (node) { return !!node.item; })\n            .filter(function (node) { return !(node.item instanceof dashboard_tab_page_1.DashboardTabPage); })\n            .map(function (node) { return node.item; });\n        var exportOptions = this.exportOptions.convertToExportOptions(clientOptions);\n        if (!exportOptions.pdfExportOptions.Title)\n            exportOptions.pdfExportOptions.Title = this._options.dashboard().title.text();\n        if (!exportOptions.imageExportOptions.Title)\n            exportOptions.imageExportOptions.Title = this._options.dashboard().title.text();\n        if (format === 'Excel' && exportOptions.excelExportOptions.Format === 'Csv')\n            throw new Error('Cannot export an entire dashboard in the CSV format.');\n        this._exportTo(items, {\n            mode: 'EntireDashboard',\n            format: format,\n            clientState: this._getInfo(items, this._options.dashboard().title.visible() ? _dashboard_title_view_constants_1.titleHeight : 0, 'EntireDashboard', format),\n            fileName: fileName\n        }, exportOptions);\n    };\n    ExportDialogBinder.prototype.exportDashboardItemTo = function (itemComponentName, format, clientOptions, customFileName) {\n        var fileName = customFileName ? customFileName : (clientOptions == undefined || clientOptions.fileName == undefined) ? 'Export' : clientOptions.fileName, dashboard = this._options.dashboard(), exportItem = dashboard.findItem(itemComponentName), isGroup = exportItem instanceof group_item_1.GroupItem || exportItem instanceof dashboard_tab_page_1.DashboardTabPage;\n        var clientStateItems, dataQueryItems;\n        if (isGroup) {\n            var dashboardItems = dashboard.items().concat(dashboard.groups());\n            var needExportItem = function (item) { return item.parentContainer() === exportItem.componentName(); };\n            clientStateItems = dashboardItems.filter(function (item) { return needExportItem(item) || !!item.parentContainer() && needExportItem(dashboard.findItem(item.parentContainer())); });\n            dataQueryItems = [exportItem].concat(clientStateItems);\n        }\n        else {\n            clientStateItems = dataQueryItems = [exportItem];\n        }\n        this._validateExportFormat(format);\n        var exportOptions = this.exportOptions.convertToExportOptions(clientOptions);\n        if (!exportOptions.pdfExportOptions.Title)\n            exportOptions.pdfExportOptions.Title = exportItem.name();\n        if (!exportOptions.imageExportOptions.Title)\n            exportOptions.imageExportOptions.Title = exportItem.name();\n        this._exportTo(dataQueryItems, {\n            mode: isGroup ? 'EntireDashboard' : 'SingleItem',\n            format: format,\n            clientState: this._getInfo(clientStateItems, 0, 'SingleItem', format),\n            fileName: fileName,\n            name: itemComponentName,\n            itemType: this._getExportItemType(exportItem)\n        }, exportOptions);\n    };\n    Object.defineProperty(ExportDialogBinder.prototype, \"exportDialog\", {\n        get: function () {\n            if (!this._exportDialog) {\n                this._exportDialog = new _export_dialog_1.exportDialog({\n                    container: this._options.getContainer(),\n                    defaultDocumentInfo: this.exportOptions,\n                    onShown: this._options.onExportDialogShown,\n                    onShowing: this._options.onExportDialogShowing,\n                    onHidden: this._options.onExportDialogHidden\n                });\n            }\n            return this._exportDialog;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ExportDialogBinder.prototype._getExportItemType = function (item) {\n        return item ? dashboard_item_1.DashboardItem._getCommonItemType(item.itemType()) : undefined;\n    };\n    ExportDialogBinder.prototype._getGroupExternalDisplayFilterValues = function (dataDashboardItems, groupName) {\n        var itemsInGroup = dataDashboardItems.filter(function (item) { return item.parentContainer() === groupName; });\n        var externalMasters = itemsInGroup\n            .reduce(function (acc, item) { return acc.concat(item._masterFilterItems()); }, [])\n            .filter(function (master, index, array) { return array.indexOf(master) !== index; })\n            .filter(function (master) { return itemsInGroup.indexOf(master) === -1; });\n        return externalMasters.reduce(function (acc, master) { return acc.concat(master._getDisplayFilterValues()); }, []);\n    };\n    ExportDialogBinder.prototype._exportTo = function (items, modeInfo, documentOptions) {\n        var _this = this;\n        var fileName = modeInfo.fileName && modeInfo.fileName.trim() ? modeInfo.fileName.replace(/[\\\\/:*?\"<>|]/g, '_') : 'Export';\n        var exportInfo = {\n            Mode: modeInfo.mode,\n            GroupName: modeInfo.name,\n            FileName: fileName,\n            ClientState: modeInfo.clientState,\n            Format: modeInfo.format,\n            DocumentOptions: documentOptions,\n            ItemType: modeInfo.itemType\n        };\n        var dashboard = this._options.dashboard();\n        var model = items.map(function (item) {\n            var holderItem = _this._getExportHolderItem(item);\n            return {\n                name: _this._getActualComponentName(item),\n                query: _this._getExportDataQueryParams(holderItem, modeInfo),\n                drillDownFormattableValues: holderItem instanceof data_dashboard_item_1.DataDashboardItem ? _date_utils_1.toStringArray(holderItem._getDisplayDrillDownValues()) : undefined,\n                filterFormattableValues: _date_utils_1.toStringArray(_this._getFilterFormattableValues(dashboard, exportInfo.GroupName, holderItem, exportInfo)),\n                selectedValues: _date_utils_1.toStringArray(holderItem._getExportingSelection())\n            };\n        });\n        this._options.serviceClient().performExport(exportInfo, model);\n    };\n    ExportDialogBinder.prototype._getExportDataQueryParams = function (dashboardItem, modeInfo) {\n        var queryParams = dashboardItem._getDataQueryParams();\n        if (dashboardItem instanceof model_1.GridItem && dashboardItem.columnFilterOptions.updateTotals()) {\n            var itemsState = modeInfo.clientState.itemsState.find(function (s) { return s.name === dashboardItem.componentName(); });\n            if (itemsState) {\n                queryParams['ClientFilter'] = itemsState['combinedFilter'];\n            }\n        }\n        return queryParams;\n    };\n    ExportDialogBinder.prototype._validateExportFormat = function (format) {\n        if (this.availableExportFormats.indexOf(format) === -1) {\n            throw new Error(\"A format is specified incorrectly. Use one of the following: 'PDF', 'Image' or 'Excel'.\");\n        }\n    };\n    ExportDialogBinder.prototype._validateDashboardExport = function (format) {\n        this._validateExportFormat(format);\n        if (!this._options.dashboard()) {\n            throw new Error('Cannot perform exporting because the dashboard is not loaded.');\n        }\n    };\n    return ExportDialogBinder;\n}());\nexports.ExportDialogBinder = ExportDialogBinder;\nvar ExportInfoManager = (function (_super) {\n    __extends(ExportInfoManager, _super);\n    function ExportInfoManager() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._primaryExportInfoProviders = {};\n        _this._secondaryExportInfoProviders = {};\n        _this._captionExportInfoProviders = {};\n        return _this;\n    }\n    ExportInfoManager.prototype.getItemExportInfo = function (itemName, mode, isCaption) {\n        if (mode === 'SingleItem' && this._secondaryExportInfoProviders[itemName]) {\n            return this._secondaryExportInfoProviders[itemName]();\n        }\n        else if (isCaption && this._captionExportInfoProviders[itemName]) {\n            return this._captionExportInfoProviders[itemName]();\n        }\n        else if (this._primaryExportInfoProviders[itemName]) {\n            return this._primaryExportInfoProviders[itemName]();\n        }\n        else {\n            return null;\n        }\n    };\n    ExportInfoManager.prototype.registerPrimaryExportItem = function (itemName, getExportInfoFunc) {\n        this._primaryExportInfoProviders[itemName] = getExportInfoFunc;\n    };\n    ExportInfoManager.prototype.unregisterPrimaryExportItem = function (itemName) {\n        if (this._primaryExportInfoProviders[itemName]) {\n            delete this._primaryExportInfoProviders[itemName];\n        }\n    };\n    ExportInfoManager.prototype.registerSecondaryExportItem = function (itemName, getExportInfoFunc) {\n        this._secondaryExportInfoProviders[itemName] = getExportInfoFunc;\n    };\n    ExportInfoManager.prototype.unregisterSecondaryExportItem = function (itemName) {\n        if (this._secondaryExportInfoProviders[itemName]) {\n            delete this._secondaryExportInfoProviders[itemName];\n        }\n    };\n    ExportInfoManager.prototype.registerCaptionExportItem = function (itemName, getExportInfoFunc) {\n        this._captionExportInfoProviders[itemName] = getExportInfoFunc;\n    };\n    ExportInfoManager.prototype.unregisterCaptionExportItem = function (itemName) {\n        if (this._captionExportInfoProviders[itemName]) {\n            delete this._captionExportInfoProviders[itemName];\n        }\n    };\n    ExportInfoManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._primaryExportInfoProviders = {};\n        this._secondaryExportInfoProviders = {};\n        this._captionExportInfoProviders = {};\n    };\n    return ExportInfoManager;\n}(disposable_object_1.DisposableObject));\nexports.ExportInfoManager = ExportInfoManager;\n"]},"metadata":{},"sourceType":"script"}