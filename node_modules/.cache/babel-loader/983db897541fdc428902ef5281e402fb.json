{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_card-layout-template-properties-composer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CardTemplatePropertiesComposer = void 0;\n\nvar analytics_internal_1 = require(\"@devexpress/analytics-core/analytics-internal\");\n\nvar ko = require(\"knockout\");\n\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\n\nvar _utils_1 = require(\"../../../data/_utils\");\n\nvar _knockout_utils_1 = require(\"../../../model/internal/_knockout-utils\");\n\nvar _undo_engine_helper_1 = require(\"../../../model/internal/_undo-engine-helper\");\n\nvar _card_layout_1 = require(\"../../../model/items/card/metadata/_card-layout\");\n\nvar _form_adapter_editors_1 = require(\"../../form-adapter/_form-adapter-editors\");\n\nvar _object_properties_wrapper_1 = require(\"../../form-adapter/_object-properties-wrapper\");\n\nvar _accordion_tab_1 = require(\"../../properties-controller/_accordion-tab\");\n\nvar _collection_editor_viewmodel_base_1 = require(\"../../ui-widgets/collection-editor/_collection-editor-viewmodel-base\");\n\nvar CardTemplatePropertiesComposer = function () {\n  function CardTemplatePropertiesComposer() {}\n\n  CardTemplatePropertiesComposer.prototype.composeTabs = function (model, args) {\n    if (args.applyTemplateToAllCards === undefined) args.applyTemplateToAllCards = function (template) {};\n    var layoutsTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.CardTemplateSettings, 'DashboardWebStringId.CardLayout.LayoutOptions');\n    this.fillLayoutsTab(layoutsTab, model, args.dimensionNames, args.applyTemplateToAllCards);\n    return [layoutsTab];\n  };\n\n  CardTemplatePropertiesComposer.prototype.fillLayoutsTab = function (tab, template, dimensionNames, applyTemplateToAllCards) {\n    var _this = this;\n\n    var refreshCallback = new _collection_editor_viewmodel_base_1.CollectionEditorRefreshCallback();\n\n    var propertiesList = template._collectProperties(dimensionNames);\n\n    var subscriptions = propertiesList.map(function (item) {\n      return _knockout_utils_1.safeSubscribe({\n        checked: item.checked,\n        selectedItem: item.selectedItem || function () {}\n      }, function () {\n        return refreshCallback.refresh();\n      });\n    });\n    var collectionEditorOptions = {\n      dataFields: ['checked', 'title', 'selectedItem', 'lookupDataSource'],\n      isToolbarVisible: false,\n      gridColumns: [{\n        dataField: 'checked',\n        dataType: 'boolean',\n        width: 40\n      }, {\n        dataField: 'selectedItem',\n        calculateDisplayValue: function (rowData) {\n          return rowData.title;\n        },\n        lookup: {\n          displayExpr: 'displayText',\n          valueExpr: 'key'\n        }\n      }],\n      customizeInlineEditor: function (e) {\n        e.editorOptions.dataSource = e.row.data.lookupDataSource;\n\n        if (e.dataField === 'selectedItem') {\n          var oldValueChanged = e.editorOptions.onValueChanged;\n\n          e.editorOptions.onValueChanged = function (ee) {\n            oldValueChanged.call(ee.component, ee);\n            setTimeout(function () {\n              return e.component.saveEditData();\n            });\n          };\n        }\n      },\n      customizeCell: function (e) {\n        if (!e.isEditing && e.column.dataField === 'selectedItem' && !!e.data.lookupDataSource) {\n          var icon = _utils_1.createSvgIconElement('dx-dashboard-ce-edit');\n\n          var div = document.createElement('div');\n          div.appendChild(icon);\n          div.classList.add('custom-edit-icon');\n          div.classList.add('dx-dashboard-editable-cell');\n\n          _jquery_helpers_1.$unwrap(e.cellElement).appendChild(div);\n        }\n      },\n      enableEditItem: function (selectedItem, e) {\n        if (e.column.dataField === 'selectedItem') return !!e.data.lookupDataSource;\n        return true;\n      },\n      forceRefreshCallback: refreshCallback\n    };\n    tab.tabModel(new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n      model: {\n        minWidth: template.minWidth,\n        maxWidth: template.maxWidth,\n        templateProperties: ko.observableArray(propertiesList),\n        buttonsFakeProperty: {}\n      },\n      properties: [__assign(__assign({}, _card_layout_1.minWidth), {\n        formAdapterItem: _form_adapter_editors_1.numberBoxEditor({\n          min: 1,\n          format: '0#'\n        })\n      }), __assign(__assign({}, _card_layout_1.maxWidth), {\n        formAdapterItem: _form_adapter_editors_1.nullableNumberBoxEditor({\n          defaultValue: 200,\n          editorOptions: {\n            min: 1,\n            format: '0#'\n          }\n        })\n      }), {\n        formAdapterItem: _form_adapter_editors_1.inlineEditCollectionEditor(collectionEditorOptions),\n        propertyName: 'templateProperties'\n      }, {\n        propertyName: 'buttonsFakeProperty',\n        formAdapterItem: _form_adapter_editors_1.actionButtons([{\n          text: analytics_internal_1.localize('DashboardWebStringId.CardLayout.ResetTemplate'),\n          onClick: function () {\n            return _this.resetTemplate(template);\n          },\n          elementAttr: {\n            class: 'dx-dashboard-card-template-reset-button'\n          }\n        }, {\n          text: analytics_internal_1.localize('DashboardWebStringId.CardLayout.ApplyToAllCards'),\n          onClick: function () {\n            return applyTemplateToAllCards(template);\n          },\n          elementAttr: {\n            class: 'dx-dashboard-card-template-apply-all-button'\n          }\n        }])\n      }],\n      disposableModelSubscriptions: subscriptions\n    }));\n  };\n\n  CardTemplatePropertiesComposer.prototype.resetTemplate = function (template) {\n    template._resetToDefaults();\n  };\n\n  __decorate([_undo_engine_helper_1.wrapWithUndoRedo], CardTemplatePropertiesComposer.prototype, \"resetTemplate\", null);\n\n  return CardTemplatePropertiesComposer;\n}();\n\nexports.CardTemplatePropertiesComposer = CardTemplatePropertiesComposer;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/designer/items/properties-composers/_card-layout-template-properties-composer.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","d","Reflect","decorate","defineProperty","exports","value","CardTemplatePropertiesComposer","analytics_internal_1","require","ko","_jquery_helpers_1","_utils_1","_knockout_utils_1","_undo_engine_helper_1","_card_layout_1","_form_adapter_editors_1","_object_properties_wrapper_1","_accordion_tab_1","_collection_editor_viewmodel_base_1","composeTabs","model","args","applyTemplateToAllCards","undefined","template","layoutsTab","AccordionTab","KnownTabs","CardTemplateSettings","fillLayoutsTab","dimensionNames","tab","_this","refreshCallback","CollectionEditorRefreshCallback","propertiesList","_collectProperties","subscriptions","map","item","safeSubscribe","checked","selectedItem","refresh","collectionEditorOptions","dataFields","isToolbarVisible","gridColumns","dataField","dataType","width","calculateDisplayValue","rowData","title","lookup","displayExpr","valueExpr","customizeInlineEditor","e","editorOptions","dataSource","row","data","lookupDataSource","oldValueChanged","onValueChanged","ee","component","setTimeout","saveEditData","customizeCell","isEditing","column","icon","createSvgIconElement","div","document","createElement","appendChild","classList","add","$unwrap","cellElement","enableEditItem","forceRefreshCallback","tabModel","ObjectPropertiesWrapper","minWidth","maxWidth","templateProperties","observableArray","buttonsFakeProperty","properties","formAdapterItem","numberBoxEditor","min","format","nullableNumberBoxEditor","defaultValue","inlineEditCollectionEditor","propertyName","actionButtons","text","localize","onClick","resetTemplate","elementAttr","class","disposableModelSubscriptions","_resetToDefaults","wrapWithUndoRedo"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_card-layout-template-properties-composer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardTemplatePropertiesComposer = void 0;\nvar analytics_internal_1 = require(\"@devexpress/analytics-core/analytics-internal\");\nvar ko = require(\"knockout\");\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\nvar _utils_1 = require(\"../../../data/_utils\");\nvar _knockout_utils_1 = require(\"../../../model/internal/_knockout-utils\");\nvar _undo_engine_helper_1 = require(\"../../../model/internal/_undo-engine-helper\");\nvar _card_layout_1 = require(\"../../../model/items/card/metadata/_card-layout\");\nvar _form_adapter_editors_1 = require(\"../../form-adapter/_form-adapter-editors\");\nvar _object_properties_wrapper_1 = require(\"../../form-adapter/_object-properties-wrapper\");\nvar _accordion_tab_1 = require(\"../../properties-controller/_accordion-tab\");\nvar _collection_editor_viewmodel_base_1 = require(\"../../ui-widgets/collection-editor/_collection-editor-viewmodel-base\");\nvar CardTemplatePropertiesComposer = (function () {\n    function CardTemplatePropertiesComposer() {\n    }\n    CardTemplatePropertiesComposer.prototype.composeTabs = function (model, args) {\n        if (args.applyTemplateToAllCards === undefined)\n            args.applyTemplateToAllCards = function (template) { };\n        var layoutsTab = new _accordion_tab_1.AccordionTab(_accordion_tab_1.KnownTabs.CardTemplateSettings, 'DashboardWebStringId.CardLayout.LayoutOptions');\n        this.fillLayoutsTab(layoutsTab, model, args.dimensionNames, args.applyTemplateToAllCards);\n        return [layoutsTab];\n    };\n    CardTemplatePropertiesComposer.prototype.fillLayoutsTab = function (tab, template, dimensionNames, applyTemplateToAllCards) {\n        var _this = this;\n        var refreshCallback = new _collection_editor_viewmodel_base_1.CollectionEditorRefreshCallback();\n        var propertiesList = template._collectProperties(dimensionNames);\n        var subscriptions = propertiesList.map(function (item) { return _knockout_utils_1.safeSubscribe({ checked: item.checked, selectedItem: item.selectedItem || (function () { }) }, function () { return refreshCallback.refresh(); }); });\n        var collectionEditorOptions = {\n            dataFields: ['checked', 'title', 'selectedItem', 'lookupDataSource'],\n            isToolbarVisible: false,\n            gridColumns: [{\n                    dataField: 'checked',\n                    dataType: 'boolean',\n                    width: 40,\n                }, {\n                    dataField: 'selectedItem',\n                    calculateDisplayValue: function (rowData) { return rowData.title; },\n                    lookup: {\n                        displayExpr: 'displayText',\n                        valueExpr: 'key',\n                    },\n                }],\n            customizeInlineEditor: function (e) {\n                e.editorOptions.dataSource = e.row.data.lookupDataSource;\n                if (e.dataField === 'selectedItem') {\n                    var oldValueChanged = e.editorOptions.onValueChanged;\n                    e.editorOptions.onValueChanged = function (ee) {\n                        oldValueChanged.call(ee.component, ee);\n                        setTimeout(function () { return e.component.saveEditData(); });\n                    };\n                }\n            },\n            customizeCell: function (e) {\n                if (!e.isEditing && e.column.dataField === 'selectedItem' && !!e.data.lookupDataSource) {\n                    var icon = _utils_1.createSvgIconElement('dx-dashboard-ce-edit');\n                    var div = document.createElement('div');\n                    div.appendChild(icon);\n                    div.classList.add('custom-edit-icon');\n                    div.classList.add('dx-dashboard-editable-cell');\n                    _jquery_helpers_1.$unwrap(e.cellElement).appendChild(div);\n                }\n            },\n            enableEditItem: function (selectedItem, e) {\n                if (e.column.dataField === 'selectedItem')\n                    return !!e.data.lookupDataSource;\n                return true;\n            },\n            forceRefreshCallback: refreshCallback,\n        };\n        tab.tabModel(new _object_properties_wrapper_1.ObjectPropertiesWrapper({\n            model: {\n                minWidth: template.minWidth,\n                maxWidth: template.maxWidth,\n                templateProperties: ko.observableArray(propertiesList),\n                buttonsFakeProperty: {},\n            },\n            properties: [\n                __assign(__assign({}, _card_layout_1.minWidth), { formAdapterItem: _form_adapter_editors_1.numberBoxEditor({ min: 1, format: '0#' }) }),\n                __assign(__assign({}, _card_layout_1.maxWidth), { formAdapterItem: _form_adapter_editors_1.nullableNumberBoxEditor({ defaultValue: 200, editorOptions: { min: 1, format: '0#' } }) }),\n                {\n                    formAdapterItem: _form_adapter_editors_1.inlineEditCollectionEditor(collectionEditorOptions),\n                    propertyName: 'templateProperties',\n                },\n                {\n                    propertyName: 'buttonsFakeProperty',\n                    formAdapterItem: _form_adapter_editors_1.actionButtons([\n                        {\n                            text: analytics_internal_1.localize('DashboardWebStringId.CardLayout.ResetTemplate'),\n                            onClick: function () { return _this.resetTemplate(template); },\n                            elementAttr: { class: 'dx-dashboard-card-template-reset-button' }\n                        },\n                        {\n                            text: analytics_internal_1.localize('DashboardWebStringId.CardLayout.ApplyToAllCards'),\n                            onClick: function () { return applyTemplateToAllCards(template); },\n                            elementAttr: { class: 'dx-dashboard-card-template-apply-all-button' }\n                        }\n                    ]),\n                }\n            ],\n            disposableModelSubscriptions: subscriptions,\n        }));\n    };\n    CardTemplatePropertiesComposer.prototype.resetTemplate = function (template) {\n        template._resetToDefaults();\n    };\n    __decorate([\n        _undo_engine_helper_1.wrapWithUndoRedo\n    ], CardTemplatePropertiesComposer.prototype, \"resetTemplate\", null);\n    return CardTemplatePropertiesComposer;\n}());\nexports.CardTemplatePropertiesComposer = CardTemplatePropertiesComposer;\n"]},"metadata":{},"sourceType":"script"}