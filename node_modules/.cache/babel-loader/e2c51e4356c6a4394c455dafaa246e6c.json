{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.properties_panel.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getHeight, getOuterHeight } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport { extend } from \"../../core/utils/extend\";\nimport ScrollView from \"../scroll_view\";\nimport TabPanel from \"../tab_panel\";\nimport DiagramFloatingPanel from \"./ui.diagram.floating_panel\";\nimport DiagramCommandsManager from \"./diagram.commands_manager\";\nvar DIAGRAM_PROPERTIES_POPUP_WIDTH = 420;\nvar DIAGRAM_PROPERTIES_POPUP_HEIGHT = 340;\nvar DIAGRAM_PROPERTIES_POPUP_CLASS = \"dx-diagram-properties-popup\";\nvar DIAGRAM_PROPERTIES_POPUP_NOTABS_CLASS = \"dx-diagram-properties-popup-notabs\";\nvar DIAGRAM_PROPERTIES_PANEL_CLASS = \"dx-diagram-properties-panel\";\nvar DIAGRAM_PROPERTIES_PANEL_GROUP_TITLE_CLASS = \"dx-diagram-properties-panel-group-title\";\nvar DIAGRAM_PROPERTIES_PANEL_GROUP_TOOLBAR_CLASS = \"dx-diagram-properties-panel-group-toolbar\";\n\nclass DiagramPropertiesPanel extends DiagramFloatingPanel {\n  _init() {\n    super._init();\n\n    this._commandTabs = DiagramCommandsManager.getPropertyPanelCommandTabs(this.option(\"propertyTabs\"));\n\n    this._createOnCreateToolbar();\n\n    this._createOnSelectedGroupChanged();\n  }\n\n  _initMarkup() {\n    this._toolbars = [];\n    this._selectedToolbar = void 0;\n\n    super._initMarkup();\n  }\n\n  _getPopupClass() {\n    var className = DIAGRAM_PROPERTIES_POPUP_CLASS;\n\n    if (!this._hasTabPanel()) {\n      className += \" \" + DIAGRAM_PROPERTIES_POPUP_NOTABS_CLASS;\n    }\n\n    return className;\n  }\n\n  _getPopupWidth() {\n    return this.isMobileView() ? \"100%\" : DIAGRAM_PROPERTIES_POPUP_WIDTH;\n  }\n\n  _getPopupHeight() {\n    return DIAGRAM_PROPERTIES_POPUP_HEIGHT;\n  }\n\n  _getPopupPosition() {\n    var $parent = this.option(\"offsetParent\");\n\n    if (this.isMobileView()) {\n      return {\n        my: \"left bottom\",\n        at: \"left bottom\",\n        of: $parent\n      };\n    }\n\n    return {\n      my: \"right bottom\",\n      at: \"right bottom\",\n      of: $parent,\n      offset: \"-\" + this.option(\"offsetX\") + \" -\" + this.option(\"offsetY\")\n    };\n  }\n\n  _getPopupAnimation() {\n    var $parent = this.option(\"offsetParent\");\n\n    if (this.isMobileView()) {\n      return {\n        hide: this._getPopupSlideAnimationObject({\n          direction: \"bottom\",\n          from: {\n            position: {\n              my: \"left bottom\",\n              at: \"left bottom\",\n              of: $parent\n            }\n          },\n          to: {\n            position: {\n              my: \"left top\",\n              at: \"left bottom\",\n              of: $parent\n            }\n          }\n        }),\n        show: this._getPopupSlideAnimationObject({\n          direction: \"top\",\n          from: {\n            position: {\n              my: \"left top\",\n              at: \"left bottom\",\n              of: $parent\n            }\n          },\n          to: {\n            position: {\n              my: \"left bottom\",\n              at: \"left bottom\",\n              of: $parent\n            }\n          }\n        })\n      };\n    }\n\n    return super._getPopupAnimation();\n  }\n\n  _getPopupOptions() {\n    return extend(super._getPopupOptions(), {\n      showTitle: this.isMobileView(),\n      showCloseButton: this.isMobileView()\n    });\n  }\n\n  _renderPopupContent($parent) {\n    if (!this._commandTabs.length) {\n      return;\n    }\n\n    var $panel = $(\"<div>\").addClass(DIAGRAM_PROPERTIES_PANEL_CLASS).appendTo($parent);\n\n    if (this._hasTabPanel()) {\n      this._renderTabPanel($panel);\n    } else {\n      this._renderTabContent($panel, this._commandTabs[0], 0, true);\n    }\n  }\n\n  _hasTabPanel() {\n    return this._commandTabs.length > 1;\n  }\n\n  _renderTabPanel($parent) {\n    var $tabPanel = $(\"<div>\").appendTo($parent);\n    this._tabPanel = this._createComponent($tabPanel, TabPanel, {\n      focusStateEnabled: false,\n      dataSource: this._commandTabs,\n      itemTemplate: (data, index, $element) => {\n        this._renderTabContent($element, data, index);\n      },\n      onSelectionChanged: e => {\n        this._onSelectedGroupChangedAction();\n\n        this._onPointerUpAction();\n      },\n      onContentReady: e => {\n        this._popup.option(\"height\", getHeight(e.component.$element()) + this._getVerticalPaddingsAndBorders());\n\n        if (this._firstScrollView) {\n          this._scrollViewHeight = getOuterHeight(this._firstScrollView.$element());\n\n          this._firstScrollView.option(\"height\", this._scrollViewHeight);\n        }\n      }\n    });\n  }\n\n  _renderTabContent($parent, tab, index, isSingleTab) {\n    var $scrollViewWrapper = $(\"<div>\").appendTo($parent);\n\n    var scrollView = this._createComponent($scrollViewWrapper, ScrollView, {\n      height: this._scrollViewHeight\n    });\n\n    this._renderTabInnerContent(scrollView.content(), tab, index);\n\n    if (isSingleTab) {\n      this._popup.option(\"height\", getHeight(scrollView.$element()) + this._getVerticalPaddingsAndBorders());\n    } else {\n      this._firstScrollView = this._firstScrollView || scrollView;\n    }\n  }\n\n  _renderTabInnerContent($parent, group, index) {\n    if (group.groups) {\n      group.groups.forEach((sg, si) => {\n        this._renderTabGroupContent($parent, index, sg.title, sg.commands);\n      });\n    } else if (group.commands) {\n      this._renderTabGroupContent($parent, index, void 0, group.commands);\n    }\n  }\n\n  _renderTabGroupContent($parent, index, title, commands) {\n    if (title) {\n      $(\"<div>\").addClass(DIAGRAM_PROPERTIES_PANEL_GROUP_TITLE_CLASS).appendTo($parent).text(title);\n    }\n\n    var $toolbar = $(\"<div>\").addClass(DIAGRAM_PROPERTIES_PANEL_GROUP_TOOLBAR_CLASS).appendTo($parent);\n    var args = {\n      $parent: $toolbar,\n      commands: commands\n    };\n\n    this._onCreateToolbarAction(args);\n\n    if (!this._toolbars[index]) {\n      this._toolbars[index] = [];\n    }\n\n    this._toolbars[index].push(args.toolbar);\n\n    this._selectedToolbar = args.toolbar;\n  }\n\n  getActiveToolbars() {\n    var index = this._tabPanel ? this._tabPanel.option(\"selectedIndex\") : 0;\n    return this._toolbars[index];\n  }\n\n  _createOnCreateToolbar() {\n    this._onCreateToolbarAction = this._createActionByOption(\"onCreateToolbar\");\n  }\n\n  _createOnSelectedGroupChanged() {\n    this._onSelectedGroupChangedAction = this._createActionByOption(\"onSelectedGroupChanged\");\n  }\n\n  _optionChanged(args) {\n    switch (args.name) {\n      case \"onCreateToolbar\":\n        this._createOnCreateToolbar();\n\n        break;\n\n      case \"onSelectedGroupChanged\":\n        this._createOnSelectedGroupChanged();\n\n        break;\n\n      case \"propertyTabs\":\n        this._invalidate();\n\n        break;\n\n      default:\n        super._optionChanged(args);\n\n    }\n  }\n\n}\n\nexport default DiagramPropertiesPanel;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/diagram/ui.diagram.properties_panel.js"],"names":["getHeight","getOuterHeight","$","extend","ScrollView","TabPanel","DiagramFloatingPanel","DiagramCommandsManager","DIAGRAM_PROPERTIES_POPUP_WIDTH","DIAGRAM_PROPERTIES_POPUP_HEIGHT","DIAGRAM_PROPERTIES_POPUP_CLASS","DIAGRAM_PROPERTIES_POPUP_NOTABS_CLASS","DIAGRAM_PROPERTIES_PANEL_CLASS","DIAGRAM_PROPERTIES_PANEL_GROUP_TITLE_CLASS","DIAGRAM_PROPERTIES_PANEL_GROUP_TOOLBAR_CLASS","DiagramPropertiesPanel","_init","_commandTabs","getPropertyPanelCommandTabs","option","_createOnCreateToolbar","_createOnSelectedGroupChanged","_initMarkup","_toolbars","_selectedToolbar","_getPopupClass","className","_hasTabPanel","_getPopupWidth","isMobileView","_getPopupHeight","_getPopupPosition","$parent","my","at","of","offset","_getPopupAnimation","hide","_getPopupSlideAnimationObject","direction","from","position","to","show","_getPopupOptions","showTitle","showCloseButton","_renderPopupContent","length","$panel","addClass","appendTo","_renderTabPanel","_renderTabContent","$tabPanel","_tabPanel","_createComponent","focusStateEnabled","dataSource","itemTemplate","data","index","$element","onSelectionChanged","e","_onSelectedGroupChangedAction","_onPointerUpAction","onContentReady","_popup","component","_getVerticalPaddingsAndBorders","_firstScrollView","_scrollViewHeight","tab","isSingleTab","$scrollViewWrapper","scrollView","height","_renderTabInnerContent","content","group","groups","forEach","sg","si","_renderTabGroupContent","title","commands","text","$toolbar","args","_onCreateToolbarAction","push","toolbar","getActiveToolbars","_createActionByOption","_optionChanged","name","_invalidate"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.properties_panel.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getHeight,\r\n    getOuterHeight\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport ScrollView from \"../scroll_view\";\r\nimport TabPanel from \"../tab_panel\";\r\nimport DiagramFloatingPanel from \"./ui.diagram.floating_panel\";\r\nimport DiagramCommandsManager from \"./diagram.commands_manager\";\r\nvar DIAGRAM_PROPERTIES_POPUP_WIDTH = 420;\r\nvar DIAGRAM_PROPERTIES_POPUP_HEIGHT = 340;\r\nvar DIAGRAM_PROPERTIES_POPUP_CLASS = \"dx-diagram-properties-popup\";\r\nvar DIAGRAM_PROPERTIES_POPUP_NOTABS_CLASS = \"dx-diagram-properties-popup-notabs\";\r\nvar DIAGRAM_PROPERTIES_PANEL_CLASS = \"dx-diagram-properties-panel\";\r\nvar DIAGRAM_PROPERTIES_PANEL_GROUP_TITLE_CLASS = \"dx-diagram-properties-panel-group-title\";\r\nvar DIAGRAM_PROPERTIES_PANEL_GROUP_TOOLBAR_CLASS = \"dx-diagram-properties-panel-group-toolbar\";\r\nclass DiagramPropertiesPanel extends DiagramFloatingPanel {\r\n    _init() {\r\n        super._init();\r\n        this._commandTabs = DiagramCommandsManager.getPropertyPanelCommandTabs(this.option(\"propertyTabs\"));\r\n        this._createOnCreateToolbar();\r\n        this._createOnSelectedGroupChanged()\r\n    }\r\n    _initMarkup() {\r\n        this._toolbars = [];\r\n        this._selectedToolbar = void 0;\r\n        super._initMarkup()\r\n    }\r\n    _getPopupClass() {\r\n        var className = DIAGRAM_PROPERTIES_POPUP_CLASS;\r\n        if (!this._hasTabPanel()) {\r\n            className += \" \" + DIAGRAM_PROPERTIES_POPUP_NOTABS_CLASS\r\n        }\r\n        return className\r\n    }\r\n    _getPopupWidth() {\r\n        return this.isMobileView() ? \"100%\" : DIAGRAM_PROPERTIES_POPUP_WIDTH\r\n    }\r\n    _getPopupHeight() {\r\n        return DIAGRAM_PROPERTIES_POPUP_HEIGHT\r\n    }\r\n    _getPopupPosition() {\r\n        var $parent = this.option(\"offsetParent\");\r\n        if (this.isMobileView()) {\r\n            return {\r\n                my: \"left bottom\",\r\n                at: \"left bottom\",\r\n                of: $parent\r\n            }\r\n        }\r\n        return {\r\n            my: \"right bottom\",\r\n            at: \"right bottom\",\r\n            of: $parent,\r\n            offset: \"-\" + this.option(\"offsetX\") + \" -\" + this.option(\"offsetY\")\r\n        }\r\n    }\r\n    _getPopupAnimation() {\r\n        var $parent = this.option(\"offsetParent\");\r\n        if (this.isMobileView()) {\r\n            return {\r\n                hide: this._getPopupSlideAnimationObject({\r\n                    direction: \"bottom\",\r\n                    from: {\r\n                        position: {\r\n                            my: \"left bottom\",\r\n                            at: \"left bottom\",\r\n                            of: $parent\r\n                        }\r\n                    },\r\n                    to: {\r\n                        position: {\r\n                            my: \"left top\",\r\n                            at: \"left bottom\",\r\n                            of: $parent\r\n                        }\r\n                    }\r\n                }),\r\n                show: this._getPopupSlideAnimationObject({\r\n                    direction: \"top\",\r\n                    from: {\r\n                        position: {\r\n                            my: \"left top\",\r\n                            at: \"left bottom\",\r\n                            of: $parent\r\n                        }\r\n                    },\r\n                    to: {\r\n                        position: {\r\n                            my: \"left bottom\",\r\n                            at: \"left bottom\",\r\n                            of: $parent\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n        return super._getPopupAnimation()\r\n    }\r\n    _getPopupOptions() {\r\n        return extend(super._getPopupOptions(), {\r\n            showTitle: this.isMobileView(),\r\n            showCloseButton: this.isMobileView()\r\n        })\r\n    }\r\n    _renderPopupContent($parent) {\r\n        if (!this._commandTabs.length) {\r\n            return\r\n        }\r\n        var $panel = $(\"<div>\").addClass(DIAGRAM_PROPERTIES_PANEL_CLASS).appendTo($parent);\r\n        if (this._hasTabPanel()) {\r\n            this._renderTabPanel($panel)\r\n        } else {\r\n            this._renderTabContent($panel, this._commandTabs[0], 0, true)\r\n        }\r\n    }\r\n    _hasTabPanel() {\r\n        return this._commandTabs.length > 1\r\n    }\r\n    _renderTabPanel($parent) {\r\n        var $tabPanel = $(\"<div>\").appendTo($parent);\r\n        this._tabPanel = this._createComponent($tabPanel, TabPanel, {\r\n            focusStateEnabled: false,\r\n            dataSource: this._commandTabs,\r\n            itemTemplate: (data, index, $element) => {\r\n                this._renderTabContent($element, data, index)\r\n            },\r\n            onSelectionChanged: e => {\r\n                this._onSelectedGroupChangedAction();\r\n                this._onPointerUpAction()\r\n            },\r\n            onContentReady: e => {\r\n                this._popup.option(\"height\", getHeight(e.component.$element()) + this._getVerticalPaddingsAndBorders());\r\n                if (this._firstScrollView) {\r\n                    this._scrollViewHeight = getOuterHeight(this._firstScrollView.$element());\r\n                    this._firstScrollView.option(\"height\", this._scrollViewHeight)\r\n                }\r\n            }\r\n        })\r\n    }\r\n    _renderTabContent($parent, tab, index, isSingleTab) {\r\n        var $scrollViewWrapper = $(\"<div>\").appendTo($parent);\r\n        var scrollView = this._createComponent($scrollViewWrapper, ScrollView, {\r\n            height: this._scrollViewHeight\r\n        });\r\n        this._renderTabInnerContent(scrollView.content(), tab, index);\r\n        if (isSingleTab) {\r\n            this._popup.option(\"height\", getHeight(scrollView.$element()) + this._getVerticalPaddingsAndBorders())\r\n        } else {\r\n            this._firstScrollView = this._firstScrollView || scrollView\r\n        }\r\n    }\r\n    _renderTabInnerContent($parent, group, index) {\r\n        if (group.groups) {\r\n            group.groups.forEach((sg, si) => {\r\n                this._renderTabGroupContent($parent, index, sg.title, sg.commands)\r\n            })\r\n        } else if (group.commands) {\r\n            this._renderTabGroupContent($parent, index, void 0, group.commands)\r\n        }\r\n    }\r\n    _renderTabGroupContent($parent, index, title, commands) {\r\n        if (title) {\r\n            $(\"<div>\").addClass(DIAGRAM_PROPERTIES_PANEL_GROUP_TITLE_CLASS).appendTo($parent).text(title)\r\n        }\r\n        var $toolbar = $(\"<div>\").addClass(DIAGRAM_PROPERTIES_PANEL_GROUP_TOOLBAR_CLASS).appendTo($parent);\r\n        var args = {\r\n            $parent: $toolbar,\r\n            commands: commands\r\n        };\r\n        this._onCreateToolbarAction(args);\r\n        if (!this._toolbars[index]) {\r\n            this._toolbars[index] = []\r\n        }\r\n        this._toolbars[index].push(args.toolbar);\r\n        this._selectedToolbar = args.toolbar\r\n    }\r\n    getActiveToolbars() {\r\n        var index = this._tabPanel ? this._tabPanel.option(\"selectedIndex\") : 0;\r\n        return this._toolbars[index]\r\n    }\r\n    _createOnCreateToolbar() {\r\n        this._onCreateToolbarAction = this._createActionByOption(\"onCreateToolbar\")\r\n    }\r\n    _createOnSelectedGroupChanged() {\r\n        this._onSelectedGroupChangedAction = this._createActionByOption(\"onSelectedGroupChanged\")\r\n    }\r\n    _optionChanged(args) {\r\n        switch (args.name) {\r\n            case \"onCreateToolbar\":\r\n                this._createOnCreateToolbar();\r\n                break;\r\n            case \"onSelectedGroupChanged\":\r\n                this._createOnSelectedGroupChanged();\r\n                break;\r\n            case \"propertyTabs\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n}\r\nexport default DiagramPropertiesPanel;\r\n"]},"metadata":{},"sourceType":"module"}