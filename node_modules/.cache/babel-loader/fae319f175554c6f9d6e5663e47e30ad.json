{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/file_manager/ui.file_manager.item_list.thumbnails.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { extend } from \"../../core/utils/extend\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport { name as contextMenuEventName } from \"../../events/contextmenu\";\nimport { getDisplayFileSize } from \"./ui.file_manager.common\";\nimport messageLocalization from \"../../localization/message\";\nimport FileManagerThumbnailListBox from \"./ui.file_manager.items_list.thumbnails.list_box\";\nimport FileManagerItemListBase from \"./ui.file_manager.item_list\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS = \"dx-filemanager-thumbnails\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS = \"dx-filemanager-thumbnails-item-thumbnail\";\nvar FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE = \"dxFileManager_thumbnails\";\n\nclass FileManagerThumbnailsItemList extends FileManagerItemListBase {\n  _initMarkup() {\n    super._initMarkup();\n\n    this.$element().addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS);\n    var contextMenuEvent = addNamespace(contextMenuEventName, FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\n    eventsEngine.on(this.$element(), contextMenuEvent, this._onContextMenu.bind(this));\n\n    this._createItemList();\n  }\n\n  _createItemList() {\n    var selectionMode = this._isMultipleSelectionMode() ? \"multiple\" : \"single\";\n    var $itemListContainer = $(\"<div>\").appendTo(this.$element());\n    this._itemList = this._createComponent($itemListContainer, FileManagerThumbnailListBox, {\n      dataSource: this._createDataSource(),\n      selectionMode: selectionMode,\n      selectedItemKeys: this.option(\"selectedItemKeys\"),\n      focusedItemKey: this.option(\"focusedItemKey\"),\n      activeStateEnabled: true,\n      hoverStateEnabled: true,\n      loopItemFocus: false,\n      focusStateEnabled: true,\n      onItemEnterKeyPressed: this._tryOpen.bind(this),\n      itemThumbnailTemplate: this._getItemThumbnailContainer.bind(this),\n      getTooltipText: this._getTooltipText.bind(this),\n      onSelectionChanged: this._onItemListSelectionChanged.bind(this),\n      onFocusedItemChanged: this._onItemListFocusedItemChanged.bind(this)\n    });\n  }\n\n  _onContextMenu(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!this._isDesktop()) {\n      return;\n    }\n\n    var items = null;\n    var targetItemElement = $(e.target).closest(this._getItemSelector());\n    var targetItem = null;\n\n    if (targetItemElement.length > 0) {\n      targetItem = this._itemList.getItemByItemElement(targetItemElement);\n\n      this._itemList.selectItem(targetItem);\n\n      items = this._getFileItemsForContextMenu(targetItem);\n    }\n\n    var target = {\n      itemData: targetItem,\n      itemElement: targetItemElement.length ? targetItemElement : void 0\n    };\n\n    this._showContextMenu(items, e.target, e, target);\n  }\n\n  _getItemThumbnailCssClass() {\n    return FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS;\n  }\n\n  _getItemSelector() {\n    return \".\".concat(FILE_MANAGER_THUMBNAILS_ITEM_CLASS);\n  }\n\n  _getTooltipText(fileItemInfo) {\n    var item = fileItemInfo.fileItem;\n\n    if (item.tooltipText) {\n      return item.tooltipText;\n    }\n\n    var text = \"\".concat(item.name, \"\\r\\n\");\n\n    if (!item.isDirectory) {\n      text += \"\".concat(messageLocalization.format(\"dxFileManager-listThumbnailsTooltipTextSize\"), \": \").concat(getDisplayFileSize(item.size), \"\\r\\n\");\n    }\n\n    text += \"\".concat(messageLocalization.format(\"dxFileManager-listThumbnailsTooltipTextDateModified\"), \": \").concat(item.dateModified);\n    return text;\n  }\n\n  _onItemDblClick(e) {\n    var $item = $(e.currentTarget);\n\n    var item = this._itemList.getItemByItemElement($item);\n\n    this._tryOpen(item);\n  }\n\n  _tryOpen(item) {\n    if (item) {\n      this._raiseSelectedItemOpened(item);\n    }\n  }\n\n  _getItemsInternal() {\n    return super._getItemsInternal().then(items => {\n      var deferred = new Deferred();\n      setTimeout(() => deferred.resolve(items));\n      return deferred.promise();\n    });\n  }\n\n  _disableDragging() {\n    return false;\n  }\n\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      focusStateEnabled: true\n    });\n  }\n\n  _onItemListSelectionChanged(_ref) {\n    var {\n      addedItemKeys: addedItemKeys,\n      removedItemKeys: removedItemKeys\n    } = _ref;\n    var selectedItemInfos = this.getSelectedItems();\n    var selectedItems = selectedItemInfos.map(itemInfo => itemInfo.fileItem);\n    var selectedItemKeys = selectedItems.map(item => item.key);\n\n    this._tryRaiseSelectionChanged({\n      selectedItemInfos: selectedItemInfos,\n      selectedItems: selectedItems,\n      selectedItemKeys: selectedItemKeys,\n      currentSelectedItemKeys: addedItemKeys,\n      currentDeselectedItemKeys: removedItemKeys\n    });\n  }\n\n  _onItemListFocusedItemChanged(_ref2) {\n    var {\n      item: item,\n      itemElement: itemElement\n    } = _ref2;\n\n    if (!this._isMultipleSelectionMode()) {\n      this._selectItemSingleSelection(item);\n    }\n\n    var fileSystemItem = (null === item || void 0 === item ? void 0 : item.fileItem) || null;\n\n    this._onFocusedItemChanged({\n      item: fileSystemItem,\n      itemKey: null === fileSystemItem || void 0 === fileSystemItem ? void 0 : fileSystemItem.key,\n      itemElement: itemElement || void 0\n    });\n  }\n\n  _setSelectedItemKeys(itemKeys) {\n    this._itemList.option(\"selectedItemKeys\", itemKeys);\n  }\n\n  _setFocusedItemKey(itemKey) {\n    this._itemList.option(\"focusedItemKey\", itemKey);\n  }\n\n  refresh(options) {\n    var actualOptions = {\n      dataSource: this._createDataSource()\n    };\n\n    if (options && Object.prototype.hasOwnProperty.call(options, \"focusedItemKey\")) {\n      actualOptions.focusedItemKey = options.focusedItemKey;\n    }\n\n    if (options && Object.prototype.hasOwnProperty.call(options, \"selectedItemKeys\")) {\n      actualOptions.selectedItemKeys = options.selectedItemKeys;\n    }\n\n    this._itemList.option(actualOptions);\n\n    this._refreshDeferred = new Deferred();\n    return this._refreshDeferred.promise();\n  }\n\n  _deselectItem(item) {\n    var itemElement = this._itemList.getItemElementByItem(item);\n\n    this._itemList.unselectItem(itemElement);\n  }\n\n  _selectItemSingleSelection(item) {\n    if (item) {\n      this._itemList.selectItem(item);\n    } else {\n      this._itemList.clearSelection();\n    }\n  }\n\n  clearSelection() {\n    this._itemList.clearSelection();\n  }\n\n  getSelectedItems() {\n    return this._itemList.getSelectedItems();\n  }\n\n}\n\nexport default FileManagerThumbnailsItemList;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/file_manager/ui.file_manager.item_list.thumbnails.js"],"names":["$","extend","Deferred","eventsEngine","addNamespace","name","contextMenuEventName","getDisplayFileSize","messageLocalization","FileManagerThumbnailListBox","FileManagerItemListBase","FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS","FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE","FileManagerThumbnailsItemList","_initMarkup","$element","addClass","contextMenuEvent","on","_onContextMenu","bind","_createItemList","selectionMode","_isMultipleSelectionMode","$itemListContainer","appendTo","_itemList","_createComponent","dataSource","_createDataSource","selectedItemKeys","option","focusedItemKey","activeStateEnabled","hoverStateEnabled","loopItemFocus","focusStateEnabled","onItemEnterKeyPressed","_tryOpen","itemThumbnailTemplate","_getItemThumbnailContainer","getTooltipText","_getTooltipText","onSelectionChanged","_onItemListSelectionChanged","onFocusedItemChanged","_onItemListFocusedItemChanged","e","preventDefault","stopPropagation","_isDesktop","items","targetItemElement","target","closest","_getItemSelector","targetItem","length","getItemByItemElement","selectItem","_getFileItemsForContextMenu","itemData","itemElement","_showContextMenu","_getItemThumbnailCssClass","concat","fileItemInfo","item","fileItem","tooltipText","text","isDirectory","format","size","dateModified","_onItemDblClick","$item","currentTarget","_raiseSelectedItemOpened","_getItemsInternal","then","deferred","setTimeout","resolve","promise","_disableDragging","_getDefaultOptions","_ref","addedItemKeys","removedItemKeys","selectedItemInfos","getSelectedItems","selectedItems","map","itemInfo","key","_tryRaiseSelectionChanged","currentSelectedItemKeys","currentDeselectedItemKeys","_ref2","_selectItemSingleSelection","fileSystemItem","_onFocusedItemChanged","itemKey","_setSelectedItemKeys","itemKeys","_setFocusedItemKey","refresh","options","actualOptions","Object","prototype","hasOwnProperty","call","_refreshDeferred","_deselectItem","getItemElementByItem","unselectItem","clearSelection"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/file_manager/ui.file_manager.item_list.thumbnails.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    name as contextMenuEventName\r\n} from \"../../events/contextmenu\";\r\nimport {\r\n    getDisplayFileSize\r\n} from \"./ui.file_manager.common\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport FileManagerThumbnailListBox from \"./ui.file_manager.items_list.thumbnails.list_box\";\r\nimport FileManagerItemListBase from \"./ui.file_manager.item_list\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS = \"dx-filemanager-thumbnails\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS = \"dx-filemanager-thumbnails-item-thumbnail\";\r\nvar FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE = \"dxFileManager_thumbnails\";\r\nclass FileManagerThumbnailsItemList extends FileManagerItemListBase {\r\n    _initMarkup() {\r\n        super._initMarkup();\r\n        this.$element().addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS);\r\n        var contextMenuEvent = addNamespace(contextMenuEventName, FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\r\n        eventsEngine.on(this.$element(), contextMenuEvent, this._onContextMenu.bind(this));\r\n        this._createItemList()\r\n    }\r\n    _createItemList() {\r\n        var selectionMode = this._isMultipleSelectionMode() ? \"multiple\" : \"single\";\r\n        var $itemListContainer = $(\"<div>\").appendTo(this.$element());\r\n        this._itemList = this._createComponent($itemListContainer, FileManagerThumbnailListBox, {\r\n            dataSource: this._createDataSource(),\r\n            selectionMode: selectionMode,\r\n            selectedItemKeys: this.option(\"selectedItemKeys\"),\r\n            focusedItemKey: this.option(\"focusedItemKey\"),\r\n            activeStateEnabled: true,\r\n            hoverStateEnabled: true,\r\n            loopItemFocus: false,\r\n            focusStateEnabled: true,\r\n            onItemEnterKeyPressed: this._tryOpen.bind(this),\r\n            itemThumbnailTemplate: this._getItemThumbnailContainer.bind(this),\r\n            getTooltipText: this._getTooltipText.bind(this),\r\n            onSelectionChanged: this._onItemListSelectionChanged.bind(this),\r\n            onFocusedItemChanged: this._onItemListFocusedItemChanged.bind(this)\r\n        })\r\n    }\r\n    _onContextMenu(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (!this._isDesktop()) {\r\n            return\r\n        }\r\n        var items = null;\r\n        var targetItemElement = $(e.target).closest(this._getItemSelector());\r\n        var targetItem = null;\r\n        if (targetItemElement.length > 0) {\r\n            targetItem = this._itemList.getItemByItemElement(targetItemElement);\r\n            this._itemList.selectItem(targetItem);\r\n            items = this._getFileItemsForContextMenu(targetItem)\r\n        }\r\n        var target = {\r\n            itemData: targetItem,\r\n            itemElement: targetItemElement.length ? targetItemElement : void 0\r\n        };\r\n        this._showContextMenu(items, e.target, e, target)\r\n    }\r\n    _getItemThumbnailCssClass() {\r\n        return FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS\r\n    }\r\n    _getItemSelector() {\r\n        return \".\".concat(FILE_MANAGER_THUMBNAILS_ITEM_CLASS)\r\n    }\r\n    _getTooltipText(fileItemInfo) {\r\n        var item = fileItemInfo.fileItem;\r\n        if (item.tooltipText) {\r\n            return item.tooltipText\r\n        }\r\n        var text = \"\".concat(item.name, \"\\r\\n\");\r\n        if (!item.isDirectory) {\r\n            text += \"\".concat(messageLocalization.format(\"dxFileManager-listThumbnailsTooltipTextSize\"), \": \").concat(getDisplayFileSize(item.size), \"\\r\\n\")\r\n        }\r\n        text += \"\".concat(messageLocalization.format(\"dxFileManager-listThumbnailsTooltipTextDateModified\"), \": \").concat(item.dateModified);\r\n        return text\r\n    }\r\n    _onItemDblClick(e) {\r\n        var $item = $(e.currentTarget);\r\n        var item = this._itemList.getItemByItemElement($item);\r\n        this._tryOpen(item)\r\n    }\r\n    _tryOpen(item) {\r\n        if (item) {\r\n            this._raiseSelectedItemOpened(item)\r\n        }\r\n    }\r\n    _getItemsInternal() {\r\n        return super._getItemsInternal().then(items => {\r\n            var deferred = new Deferred;\r\n            setTimeout(() => deferred.resolve(items));\r\n            return deferred.promise()\r\n        })\r\n    }\r\n    _disableDragging() {\r\n        return false\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            focusStateEnabled: true\r\n        })\r\n    }\r\n    _onItemListSelectionChanged(_ref) {\r\n        var {\r\n            addedItemKeys: addedItemKeys,\r\n            removedItemKeys: removedItemKeys\r\n        } = _ref;\r\n        var selectedItemInfos = this.getSelectedItems();\r\n        var selectedItems = selectedItemInfos.map(itemInfo => itemInfo.fileItem);\r\n        var selectedItemKeys = selectedItems.map(item => item.key);\r\n        this._tryRaiseSelectionChanged({\r\n            selectedItemInfos: selectedItemInfos,\r\n            selectedItems: selectedItems,\r\n            selectedItemKeys: selectedItemKeys,\r\n            currentSelectedItemKeys: addedItemKeys,\r\n            currentDeselectedItemKeys: removedItemKeys\r\n        })\r\n    }\r\n    _onItemListFocusedItemChanged(_ref2) {\r\n        var {\r\n            item: item,\r\n            itemElement: itemElement\r\n        } = _ref2;\r\n        if (!this._isMultipleSelectionMode()) {\r\n            this._selectItemSingleSelection(item)\r\n        }\r\n        var fileSystemItem = (null === item || void 0 === item ? void 0 : item.fileItem) || null;\r\n        this._onFocusedItemChanged({\r\n            item: fileSystemItem,\r\n            itemKey: null === fileSystemItem || void 0 === fileSystemItem ? void 0 : fileSystemItem.key,\r\n            itemElement: itemElement || void 0\r\n        })\r\n    }\r\n    _setSelectedItemKeys(itemKeys) {\r\n        this._itemList.option(\"selectedItemKeys\", itemKeys)\r\n    }\r\n    _setFocusedItemKey(itemKey) {\r\n        this._itemList.option(\"focusedItemKey\", itemKey)\r\n    }\r\n    refresh(options) {\r\n        var actualOptions = {\r\n            dataSource: this._createDataSource()\r\n        };\r\n        if (options && Object.prototype.hasOwnProperty.call(options, \"focusedItemKey\")) {\r\n            actualOptions.focusedItemKey = options.focusedItemKey\r\n        }\r\n        if (options && Object.prototype.hasOwnProperty.call(options, \"selectedItemKeys\")) {\r\n            actualOptions.selectedItemKeys = options.selectedItemKeys\r\n        }\r\n        this._itemList.option(actualOptions);\r\n        this._refreshDeferred = new Deferred;\r\n        return this._refreshDeferred.promise()\r\n    }\r\n    _deselectItem(item) {\r\n        var itemElement = this._itemList.getItemElementByItem(item);\r\n        this._itemList.unselectItem(itemElement)\r\n    }\r\n    _selectItemSingleSelection(item) {\r\n        if (item) {\r\n            this._itemList.selectItem(item)\r\n        } else {\r\n            this._itemList.clearSelection()\r\n        }\r\n    }\r\n    clearSelection() {\r\n        this._itemList.clearSelection()\r\n    }\r\n    getSelectedItems() {\r\n        return this._itemList.getSelectedItems()\r\n    }\r\n}\r\nexport default FileManagerThumbnailsItemList;\r\n"]},"metadata":{},"sourceType":"module"}