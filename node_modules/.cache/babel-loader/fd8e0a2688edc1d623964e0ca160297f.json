{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/ui.scheduler.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport registerComponent from \"../../core/component_registrator\";\nimport config from \"../../core/config\";\nimport devices from \"../../core/devices\";\nimport $ from \"../../core/renderer\";\nimport { BindableTemplate } from \"../../core/templates/bindable_template\";\nimport { EmptyTemplate } from \"../../core/templates/empty_template\";\nimport Callbacks from \"../../core/utils/callbacks\";\nimport { noop } from \"../../core/utils/common\";\nimport { compileGetter } from \"../../core/utils/data\";\nimport { getBoundingRect } from \"../../core/utils/position\";\nimport dateUtils from \"../../core/utils/date\";\nimport dateSerialization from \"../../core/utils/date_serialization\";\nimport { Deferred, when, fromPromise } from \"../../core/utils/deferred\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { isDefined, isString, isObject, isFunction, isEmptyObject, isDeferred, isPromise } from \"../../core/utils/type\";\nimport { hasWindow } from \"../../core/utils/window\";\nimport DataHelperMixin from \"../../data_helper\";\nimport { triggerResizeEvent } from \"../../events/visibility_change\";\nimport dateLocalization from \"../../localization/date\";\nimport messageLocalization from \"../../localization/message\";\nimport { custom as customDialog } from \"../dialog\";\nimport { isMaterial } from \"../themes\";\nimport errors from \"../widget/ui.errors\";\nimport Widget from \"../widget/ui.widget\";\nimport { AppointmentPopup, ACTION_TO_APPOINTMENT } from \"./appointmentPopup/popup\";\nimport { AppointmentForm } from \"./appointmentPopup/form\";\nimport { CompactAppointmentsHelper } from \"./compactAppointmentsHelper\";\nimport { DesktopTooltipStrategy } from \"./tooltip_strategies/desktopTooltipStrategy\";\nimport { MobileTooltipStrategy } from \"./tooltip_strategies/mobileTooltipStrategy\";\nimport { hide as hideLoading, show as showLoading } from \"./loading\";\nimport AppointmentCollection from \"./appointments/appointmentCollection\";\nimport AppointmentLayoutManager from \"./appointments.layout_manager\";\nimport { SchedulerHeader } from \"./header/header\";\nimport subscribes from \"./subscribes\";\nimport { getRecurrenceProcessor } from \"./recurrence\";\nimport timeZoneUtils from \"./utils.timeZone\";\nimport SchedulerAgenda from \"./workspaces/ui.scheduler.agenda\";\nimport SchedulerTimelineDay from \"./workspaces/ui.scheduler.timeline_day\";\nimport SchedulerTimelineMonth from \"./workspaces/ui.scheduler.timeline_month\";\nimport SchedulerTimelineWeek from \"./workspaces/ui.scheduler.timeline_week\";\nimport SchedulerTimelineWorkWeek from \"./workspaces/ui.scheduler.timeline_work_week\";\nimport SchedulerWorkSpaceDay from \"./workspaces/ui.scheduler.work_space_day\";\nimport SchedulerWorkSpaceMonth from \"./workspaces/ui.scheduler.work_space_month\";\nimport SchedulerWorkSpaceWeek from \"./workspaces/ui.scheduler.work_space_week\";\nimport SchedulerWorkSpaceWorkWeek from \"./workspaces/ui.scheduler.work_space_work_week\";\nimport { createAppointmentAdapter } from \"./appointmentAdapter\";\nimport { AppointmentTooltipInfo } from \"./dataStructures\";\nimport { utils } from \"./utils\";\nimport { createExpressions, createResourceEditorModel as _createResourceEditorModel, getAppointmentColor, getCellGroups, loadResources, setResourceToAppointment } from \"./resources/utils\";\nimport { ExpressionUtils } from \"./expressionUtils\";\nimport { validateDayHours, isDateAndTimeView as _isDateAndTimeView } from \"../../renovation/ui/scheduler/view_model/to_test/views/utils/base\";\nimport { renderAppointments } from \"./appointments/render\";\nimport { AgendaResourceProcessor } from \"./resources/agendaResourceProcessor\";\nimport { AppointmentDataProvider } from \"./appointments/dataProvider/appointmentDataProvider\";\nimport { getAppointmentTakesAllDay } from \"../../renovation/ui/scheduler/appointment/utils/getAppointmentTakesAllDay\";\nimport { getPreparedDataItems } from \"../../renovation/ui/scheduler/utils/data\";\nimport { getCurrentView } from \"../../renovation/ui/scheduler/model/views\";\nimport { createTimeZoneCalculator } from \"../../renovation/ui/scheduler/timeZoneCalculator/createTimeZoneCalculator\";\nimport { excludeFromRecurrence } from \"../../renovation/ui/scheduler/utils/recurrence/excludeFromRecurrence\";\nvar MINUTES_IN_HOUR = 60;\nvar DEFAULT_AGENDA_DURATION = 7;\nvar WIDGET_CLASS = \"dx-scheduler\";\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\nvar WIDGET_SMALL_WIDTH = 400;\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\nvar DEFAULT_APPOINTMENT_TEMPLATE_NAME = \"item\";\nvar DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME = \"appointmentCollector\";\nvar DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME = \"dropDownAppointment\";\nvar VIEWS_CONFIG = {\n  day: {\n    workSpace: SchedulerWorkSpaceDay,\n    renderingStrategy: \"vertical\"\n  },\n  week: {\n    workSpace: SchedulerWorkSpaceWeek,\n    renderingStrategy: \"vertical\"\n  },\n  workWeek: {\n    workSpace: SchedulerWorkSpaceWorkWeek,\n    renderingStrategy: \"vertical\"\n  },\n  month: {\n    workSpace: SchedulerWorkSpaceMonth,\n    renderingStrategy: \"horizontalMonth\"\n  },\n  timelineDay: {\n    workSpace: SchedulerTimelineDay,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWeek: {\n    workSpace: SchedulerTimelineWeek,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWorkWeek: {\n    workSpace: SchedulerTimelineWorkWeek,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineMonth: {\n    workSpace: SchedulerTimelineMonth,\n    renderingStrategy: \"horizontalMonthLine\"\n  },\n  agenda: {\n    workSpace: SchedulerAgenda,\n    renderingStrategy: \"agenda\"\n  }\n};\nvar StoreEventNames = {\n  ADDING: \"onAppointmentAdding\",\n  ADDED: \"onAppointmentAdded\",\n  DELETING: \"onAppointmentDeleting\",\n  DELETED: \"onAppointmentDeleted\",\n  UPDATING: \"onAppointmentUpdating\",\n  UPDATED: \"onAppointmentUpdated\"\n};\nvar RECURRENCE_EDITING_MODE = {\n  SERIES: \"editSeries\",\n  OCCURENCE: \"editOccurence\",\n  CANCEL: \"cancel\"\n};\n\nclass Scheduler extends Widget {\n  _getDefaultOptions() {\n    var defaultOptions = extend(super._getDefaultOptions(), {\n      views: [\"day\", \"week\"],\n      currentView: \"day\",\n      currentDate: dateUtils.trimTime(new Date()),\n      min: void 0,\n      max: void 0,\n      dateSerializationFormat: void 0,\n      firstDayOfWeek: void 0,\n      groups: [],\n      resources: [],\n      loadedResources: [],\n      resourceLoaderMap: new Map(),\n      dataSource: null,\n      customizeDateNavigatorText: void 0,\n      appointmentTemplate: DEFAULT_APPOINTMENT_TEMPLATE_NAME,\n      dropDownAppointmentTemplate: DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME,\n      appointmentCollectorTemplate: DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME,\n      dataCellTemplate: null,\n      timeCellTemplate: null,\n      resourceCellTemplate: null,\n      dateCellTemplate: null,\n      startDayHour: 0,\n      endDayHour: 24,\n      editing: {\n        allowAdding: true,\n        allowDeleting: true,\n        allowDragging: true,\n        allowResizing: true,\n        allowUpdating: true,\n        allowTimeZoneEditing: false\n      },\n      showAllDayPanel: true,\n      showCurrentTimeIndicator: true,\n      shadeUntilCurrentTime: false,\n      indicatorUpdateInterval: 3e5,\n      indicatorTime: void 0,\n      recurrenceEditMode: \"dialog\",\n      cellDuration: 30,\n      maxAppointmentsPerCell: \"auto\",\n      selectedCellData: [],\n      groupByDate: false,\n      onAppointmentRendered: null,\n      onAppointmentClick: null,\n      onAppointmentDblClick: null,\n      onAppointmentContextMenu: null,\n      onCellClick: null,\n      onCellContextMenu: null,\n      onAppointmentAdding: null,\n      onAppointmentAdded: null,\n      onAppointmentUpdating: null,\n      onAppointmentUpdated: null,\n      onAppointmentDeleting: null,\n      onAppointmentDeleted: null,\n      onAppointmentFormOpening: null,\n      onAppointmentTooltipShowing: null,\n      appointmentTooltipTemplate: \"appointmentTooltip\",\n      appointmentPopupTemplate: \"appointmentPopup\",\n      crossScrollingEnabled: false,\n      useDropDownViewSwitcher: false,\n      startDateExpr: \"startDate\",\n      endDateExpr: \"endDate\",\n      textExpr: \"text\",\n      descriptionExpr: \"description\",\n      allDayExpr: \"allDay\",\n      recurrenceRuleExpr: \"recurrenceRule\",\n      recurrenceExceptionExpr: \"recurrenceException\",\n      disabledExpr: \"disabled\",\n      remoteFiltering: false,\n      timeZone: \"\",\n      startDateTimeZoneExpr: \"startDateTimeZone\",\n      endDateTimeZoneExpr: \"endDateTimeZone\",\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      adaptivityEnabled: false,\n      allowMultipleCellSelection: true,\n      scrolling: {\n        mode: \"standard\"\n      },\n      allDayPanelMode: \"all\",\n      renovateRender: true,\n      _draggingMode: \"outlook\",\n      _appointmentTooltipOffset: {\n        x: 0,\n        y: 0\n      },\n      _appointmentTooltipButtonsPosition: \"bottom\",\n      _appointmentTooltipOpenButtonText: messageLocalization.format(\"dxScheduler-openAppointment\"),\n      _dropDownButtonIcon: \"overflow\",\n      _appointmentCountPerCell: 2,\n      _collectorOffset: 0,\n      _appointmentOffset: 26,\n      toolbar: [{\n        location: \"before\",\n        defaultElement: \"dateNavigator\"\n      }, {\n        location: \"after\",\n        defaultElement: \"viewSwitcher\"\n      }]\n    });\n    return extend(true, defaultOptions, {\n      integrationOptions: {\n        useDeferUpdateForTemplates: false\n      }\n    });\n  }\n\n  get filteredItems() {\n    if (!this._filteredItems) {\n      this._filteredItems = [];\n    }\n\n    return this._filteredItems;\n  }\n\n  set filteredItems(value) {\n    this._filteredItems = value;\n  }\n\n  get preparedItems() {\n    if (!this._preparedItems) {\n      this._preparedItems = [];\n    }\n\n    return this._preparedItems;\n  }\n\n  set preparedItems(value) {\n    this._preparedItems = value;\n  }\n\n  get currentView() {\n    return getCurrentView(this.option(\"currentView\"), this.option(\"views\"));\n  }\n\n  get currentViewType() {\n    return isObject(this.currentView) ? this.currentView.type : this.currentView;\n  }\n\n  get timeZoneCalculator() {\n    if (!this._timeZoneCalculator) {\n      this._timeZoneCalculator = createTimeZoneCalculator(this.option(\"timeZone\"));\n    }\n\n    return this._timeZoneCalculator;\n  }\n\n  _setDeprecatedOptions() {\n    super._setDeprecatedOptions();\n\n    extend(this._deprecatedOptions, {\n      dropDownAppointmentTemplate: {\n        since: \"19.2\",\n        message: \"appointmentTooltipTemplate\"\n      }\n    });\n  }\n\n  _defaultOptionsRules() {\n    return super._defaultOptionsRules().concat([{\n      device: function () {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function () {\n        return !devices.current().generic;\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        editing: {\n          allowDragging: false,\n          allowResizing: false\n        }\n      }\n    }, {\n      device: function () {\n        return isMaterial();\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        dateCellTemplate: function (data, index, element) {\n          var text = data.text;\n          text.split(\" \").forEach(function (text, index) {\n            var span = $(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\n            $(element).append(span);\n\n            if (!index) {\n              $(element).append(\" \");\n            }\n          });\n        },\n        _appointmentTooltipOffset: {\n          x: 0,\n          y: 11\n        },\n        _appointmentTooltipButtonsPosition: \"top\",\n        _appointmentTooltipOpenButtonText: null,\n        _dropDownButtonIcon: \"chevrondown\",\n        _appointmentCountPerCell: 1,\n        _collectorOffset: 20,\n        _appointmentOffset: 30\n      }\n    }]);\n  }\n\n  _postponeDataSourceLoading(promise) {\n    this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise);\n  }\n\n  _postponeResourceLoading() {\n    var whenLoaded = this.postponedOperations.add(\"loadResources\", () => {\n      var groups = this._getCurrentViewOption(\"groups\");\n\n      return loadResources(groups, this.option(\"resources\"), this.option(\"resourceLoaderMap\"));\n    });\n    var resolveCallbacks = new Deferred();\n    whenLoaded.done(resources => {\n      this.option(\"loadedResources\", resources);\n      resolveCallbacks.resolve(resources);\n    });\n\n    this._postponeDataSourceLoading(whenLoaded);\n\n    return resolveCallbacks.promise();\n  }\n\n  _optionChanged(args) {\n    var _this$_header, _this$_header2, _this$_header4;\n\n    var value = args.value;\n    var name = args.name;\n\n    switch (args.name) {\n      case \"customizeDateNavigatorText\":\n        this._updateOption(\"header\", name, value);\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this._updateOption(\"header\", name, value);\n\n        break;\n\n      case \"currentDate\":\n        value = this._dateOption(name);\n        value = dateUtils.trimTime(new Date(value));\n        this.option(\"selectedCellData\", []);\n\n        this._workSpace.option(name, new Date(value));\n\n        null === (_this$_header = this._header) || void 0 === _this$_header ? void 0 : _this$_header.option(name, new Date(value));\n        null === (_this$_header2 = this._header) || void 0 === _this$_header2 ? void 0 : _this$_header2.option(\"startViewDate\", this.getStartViewDate());\n\n        this._appointments.option(\"items\", []);\n\n        this._filterAppointmentsByDate();\n\n        this._postponeDataSourceLoading();\n\n        break;\n\n      case \"dataSource\":\n        this._initDataSource();\n\n        this.appointmentDataProvider.setDataSource(this._dataSource);\n\n        this._postponeResourceLoading().done(resources => {\n          this._filterAppointmentsByDate();\n\n          this._updateOption(\"workSpace\", \"showAllDayPanel\", this.option(\"showAllDayPanel\"));\n        });\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        value = this._dateOption(name);\n\n        this._updateOption(\"header\", name, new Date(value));\n\n        this._updateOption(\"workSpace\", name, new Date(value));\n\n        break;\n\n      case \"views\":\n        if (this._getCurrentViewOptions()) {\n          this.repaint();\n        } else {\n          var _this$_header3;\n\n          null === (_this$_header3 = this._header) || void 0 === _this$_header3 ? void 0 : _this$_header3.option(name, value);\n        }\n\n        break;\n\n      case \"useDropDownViewSwitcher\":\n        null === (_this$_header4 = this._header) || void 0 === _this$_header4 ? void 0 : _this$_header4.option(name, value);\n        break;\n\n      case \"currentView\":\n        this._validateDayHours();\n\n        this._validateCellDuration();\n\n        this._appointments.option({\n          items: [],\n          allowDrag: this._allowDragging(),\n          allowResize: this._allowResizing(),\n          itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\n        });\n\n        this._postponeResourceLoading().done(resources => {\n          var _this$_header5;\n\n          this._refreshWorkSpace(resources);\n\n          null === (_this$_header5 = this._header) || void 0 === _this$_header5 ? void 0 : _this$_header5.option(this._headerConfig());\n\n          this._filterAppointmentsByDate();\n\n          this._appointments.option(\"allowAllDayResize\", \"day\" !== value);\n        });\n\n        break;\n\n      case \"appointmentTemplate\":\n        this._appointments.option(\"itemTemplate\", value);\n\n        break;\n\n      case \"dateCellTemplate\":\n      case \"resourceCellTemplate\":\n      case \"dataCellTemplate\":\n      case \"timeCellTemplate\":\n        this.repaint();\n        break;\n\n      case \"groups\":\n        this._postponeResourceLoading().done(resources => {\n          this._refreshWorkSpace(resources);\n\n          this._filterAppointmentsByDate();\n        });\n\n        break;\n\n      case \"resources\":\n        this._dataAccessors.resources = createExpressions(this.option(\"resources\"));\n        this.agendaResourceProcessor.initializeState(value);\n        this.updateInstances();\n\n        this._postponeResourceLoading().done(resources => {\n          this._appointments.option(\"items\", []);\n\n          this._refreshWorkSpace(resources);\n\n          this._filterAppointmentsByDate();\n\n          this._createAppointmentPopupForm();\n        });\n\n        break;\n\n      case \"startDayHour\":\n      case \"endDayHour\":\n        this._validateDayHours();\n\n        this.updateInstances();\n\n        this._appointments.option(\"items\", []);\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.repaint();\n\n        this._filterAppointmentsByDate();\n\n        this._postponeDataSourceLoading();\n\n        break;\n\n      case StoreEventNames.ADDING:\n      case StoreEventNames.ADDED:\n      case StoreEventNames.UPDATING:\n      case StoreEventNames.UPDATED:\n      case StoreEventNames.DELETING:\n      case StoreEventNames.DELETED:\n      case \"onAppointmentFormOpening\":\n      case \"onAppointmentTooltipShowing\":\n        this._actions[name] = this._createActionByOption(name);\n        break;\n\n      case \"onAppointmentRendered\":\n        this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\n\n        break;\n\n      case \"onAppointmentClick\":\n        this._appointments.option(\"onItemClick\", this._createActionByOption(name));\n\n        break;\n\n      case \"onAppointmentDblClick\":\n        this._appointments.option(name, this._createActionByOption(name));\n\n        break;\n\n      case \"onAppointmentContextMenu\":\n        this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\n\n        break;\n\n      case \"noDataText\":\n      case \"allowMultipleCellSelection\":\n      case \"selectedCellData\":\n      case \"accessKey\":\n      case \"onCellClick\":\n      case \"onCellContextMenu\":\n        this._workSpace.option(name, value);\n\n        break;\n\n      case \"crossScrollingEnabled\":\n        this._postponeResourceLoading().done(resources => {\n          this._appointments.option(\"items\", []);\n\n          this._refreshWorkSpace(resources);\n\n          if (this._readyToRenderAppointments) {\n            this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n          }\n        });\n\n        break;\n\n      case \"cellDuration\":\n        this._validateCellDuration();\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.option(\"items\", []);\n\n        if (this._readyToRenderAppointments) {\n          this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\n\n          this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n        }\n\n        break;\n\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._updateOption(\"header\", name, value);\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.option(name, value);\n\n        super._optionChanged(args);\n\n        break;\n\n      case \"width\":\n        this._updateOption(\"header\", name, value);\n\n        if (this.option(\"crossScrollingEnabled\")) {\n          this._updateOption(\"workSpace\", \"width\", value);\n        }\n\n        this._updateOption(\"workSpace\", \"schedulerWidth\", value);\n\n        super._optionChanged(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"height\":\n        super._optionChanged(args);\n\n        this._dimensionChanged();\n\n        this._updateOption(\"workSpace\", \"schedulerHeight\", value);\n\n        break;\n\n      case \"editing\":\n        this._initEditing();\n\n        var editing = this._editing;\n\n        this._bringEditingModeToAppointments(editing);\n\n        this.hideAppointmentTooltip();\n\n        this._cleanPopup();\n\n        break;\n\n      case \"showAllDayPanel\":\n        this.updateInstances();\n        this.repaint();\n        break;\n\n      case \"showCurrentTimeIndicator\":\n      case \"indicatorTime\":\n      case \"indicatorUpdateInterval\":\n      case \"shadeUntilCurrentTime\":\n      case \"groupByDate\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this.repaint();\n        break;\n\n      case \"appointmentDragging\":\n      case \"appointmentTooltipTemplate\":\n      case \"appointmentPopupTemplate\":\n      case \"recurrenceEditMode\":\n      case \"remoteFiltering\":\n      case \"timeZone\":\n        this.updateInstances();\n        this.repaint();\n        break;\n\n      case \"dropDownAppointmentTemplate\":\n      case \"appointmentCollectorTemplate\":\n      case \"_appointmentTooltipOffset\":\n      case \"_appointmentTooltipButtonsPosition\":\n      case \"_appointmentTooltipOpenButtonText\":\n      case \"_dropDownButtonIcon\":\n      case \"_appointmentCountPerCell\":\n      case \"_collectorOffset\":\n      case \"_appointmentOffset\":\n        this.repaint();\n        break;\n\n      case \"dateSerializationFormat\":\n      case \"maxAppointmentsPerCell\":\n        break;\n\n      case \"startDateExpr\":\n      case \"endDateExpr\":\n      case \"startDateTimeZoneExpr\":\n      case \"endDateTimeZoneExpr\":\n      case \"textExpr\":\n      case \"descriptionExpr\":\n      case \"allDayExpr\":\n      case \"recurrenceRuleExpr\":\n      case \"recurrenceExceptionExpr\":\n      case \"disabledExpr\":\n        this._updateExpression(name, value);\n\n        this.appointmentDataProvider.updateDataAccessors(this._dataAccessors);\n\n        this._initAppointmentTemplate();\n\n        this.repaint();\n        break;\n\n      case \"adaptivityEnabled\":\n        this._toggleAdaptiveClass();\n\n        this.repaint();\n        break;\n\n      case \"scrolling\":\n        this.option(\"crossScrollingEnabled\", this._isHorizontalVirtualScrolling() || this.option(\"crossScrollingEnabled\"));\n\n        this._updateOption(\"workSpace\", args.fullName, value);\n\n        break;\n\n      case \"allDayPanelMode\":\n        this._updateOption(\"workSpace\", args.fullName, value);\n\n        break;\n\n      case \"renovateRender\":\n        this._updateOption(\"workSpace\", name, value);\n\n        break;\n\n      case \"_draggingMode\":\n        this._workSpace.option(\"draggingMode\", value);\n\n        break;\n\n      case \"toolbar\":\n        this._header ? this._header.option(\"items\", value) : this.repaint();\n        break;\n\n      case \"loadedResources\":\n      case \"resourceLoaderMap\":\n        break;\n\n      default:\n        super._optionChanged(args);\n\n    }\n  }\n\n  _dateOption(optionName) {\n    var optionValue = this._getCurrentViewOption(optionName);\n\n    return dateSerialization.deserializeDate(optionValue);\n  }\n\n  _getSerializationFormat(optionName) {\n    var value = this._getCurrentViewOption(optionName);\n\n    if (\"number\" === typeof value) {\n      return \"number\";\n    }\n\n    if (!isString(value)) {\n      return;\n    }\n\n    return dateSerialization.getDateSerializationFormat(value);\n  }\n\n  _bringEditingModeToAppointments(editing) {\n    var editingConfig = {\n      allowDelete: editing.allowUpdating && editing.allowDeleting\n    };\n\n    if (!this._isAgenda()) {\n      editingConfig.allowDrag = editing.allowDragging;\n      editingConfig.allowResize = editing.allowResizing;\n      editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing();\n    }\n\n    this._appointments.option(editingConfig);\n\n    this.repaint();\n  }\n\n  _isAgenda() {\n    return \"agenda\" === this.getLayoutManager().appointmentRenderingStrategyName;\n  }\n\n  _allowDragging() {\n    return this._editing.allowDragging && !this._isAgenda();\n  }\n\n  _allowResizing() {\n    return this._editing.allowResizing && !this._isAgenda();\n  }\n\n  _allowAllDayResizing() {\n    return this._editing.allowResizing && this._supportAllDayResizing();\n  }\n\n  _supportAllDayResizing() {\n    return \"day\" !== this.currentViewType || this.currentView.intervalCount > 1;\n  }\n\n  _isAllDayExpanded() {\n    return this.option(\"showAllDayPanel\") && this.appointmentDataProvider.hasAllDayAppointments(this.filteredItems, this.preparedItems);\n  }\n\n  _getTimezoneOffsetByOption(date) {\n    return timeZoneUtils.calculateTimezoneByValue(this.option(\"timeZone\"), date);\n  }\n\n  _filterAppointmentsByDate() {\n    var dateRange = this._workSpace.getDateRange();\n\n    var startDate = this.timeZoneCalculator.createDate(dateRange[0], {\n      path: \"fromGrid\"\n    });\n    var endDate = this.timeZoneCalculator.createDate(dateRange[1], {\n      path: \"fromGrid\"\n    });\n    this.appointmentDataProvider.filterByDate(startDate, endDate, this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"));\n  }\n\n  _reloadDataSource() {\n    var result = new Deferred();\n\n    if (this._dataSource) {\n      this._dataSource.load().done(function () {\n        hideLoading();\n\n        this._fireContentReadyAction(result);\n      }.bind(this)).fail(function () {\n        hideLoading();\n        result.reject();\n      });\n\n      this._dataSource.isLoading() && showLoading({\n        container: this.$element(),\n        position: {\n          of: this.$element()\n        }\n      });\n    } else {\n      this._fireContentReadyAction(result);\n    }\n\n    return result.promise();\n  }\n\n  _fireContentReadyAction(result) {\n    var contentReadyBase = super._fireContentReadyAction.bind(this);\n\n    var fireContentReady = () => {\n      contentReadyBase();\n      null === result || void 0 === result ? void 0 : result.resolve();\n    };\n\n    if (this._workSpaceRecalculation) {\n      var _this$_workSpaceRecal;\n\n      null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(() => {\n        fireContentReady();\n      });\n    } else {\n      fireContentReady();\n    }\n  }\n\n  _dimensionChanged() {\n    if (!this._isVisible()) {\n      return;\n    }\n\n    this._toggleSmallClass();\n\n    var workspace = this.getWorkSpace();\n\n    if (!this._isAgenda() && this.filteredItems && workspace) {\n      workspace.option(\"allDayExpanded\", this._isAllDayExpanded());\n\n      workspace._dimensionChanged();\n\n      var appointments = this.getLayoutManager().createAppointmentsMap(this.filteredItems);\n\n      this._appointments.option(\"items\", appointments);\n    }\n\n    this.hideAppointmentTooltip();\n\n    this._appointmentPopup.triggerResize();\n\n    this._appointmentPopup.updatePopupFullScreenMode();\n  }\n\n  _clean() {\n    this._cleanPopup();\n\n    super._clean();\n  }\n\n  _toggleSmallClass() {\n    var width = getBoundingRect(this.$element().get(0)).width;\n    this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH);\n  }\n\n  _toggleAdaptiveClass() {\n    this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"));\n  }\n\n  _visibilityChanged(visible) {\n    visible && this._dimensionChanged();\n  }\n\n  _dataSourceOptions() {\n    return {\n      paginate: false\n    };\n  }\n\n  _init() {\n    this._initExpressions({\n      startDate: this.option(\"startDateExpr\"),\n      endDate: this.option(\"endDateExpr\"),\n      startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\n      endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\n      allDay: this.option(\"allDayExpr\"),\n      text: this.option(\"textExpr\"),\n      description: this.option(\"descriptionExpr\"),\n      recurrenceRule: this.option(\"recurrenceRuleExpr\"),\n      recurrenceException: this.option(\"recurrenceExceptionExpr\"),\n      disabled: this.option(\"disabledExpr\")\n    });\n\n    super._init();\n\n    this._initDataSource();\n\n    this.$element().addClass(WIDGET_CLASS);\n\n    this._initEditing();\n\n    this.updateInstances();\n\n    this._initActions();\n\n    this._compactAppointmentsHelper = new CompactAppointmentsHelper(this);\n    this._asyncTemplatesTimers = [];\n    this._dataSourceLoadedCallback = Callbacks();\n    this._subscribes = subscribes;\n    this.agendaResourceProcessor = new AgendaResourceProcessor(this.option(\"resources\"));\n  }\n\n  createAppointmentDataProvider() {\n    this.appointmentDataProvider = new AppointmentDataProvider({\n      dataSource: this._dataSource,\n      dataAccessors: this._dataAccessors,\n      timeZoneCalculator: this.timeZoneCalculator,\n      dateSerializationFormat: this.option(\"dateSerializationFormat\"),\n      resources: this.option(\"resources\"),\n      startDayHour: this._getCurrentViewOption(\"startDayHour\"),\n      endDayHour: this._getCurrentViewOption(\"endDayHour\"),\n      appointmentDuration: this._getCurrentViewOption(\"cellDuration\"),\n      allDayPanelMode: this._getCurrentViewOption(\"allDayPanelMode\"),\n      showAllDayPanel: this.option(\"showAllDayPanel\"),\n      getLoadedResources: () => this.option(\"loadedResources\"),\n      getIsVirtualScrolling: () => this.isVirtualScrolling(),\n      getSupportAllDayRow: () => this._workSpace.supportAllDayRow(),\n      getViewType: () => this._workSpace.type,\n      getViewDirection: () => this._workSpace.viewDirection,\n      getDateRange: () => this._workSpace.getDateRange(),\n      getGroupCount: () => this._workSpace._getGroupCount(),\n      getViewDataProvider: () => this._workSpace.viewDataProvider\n    });\n  }\n\n  updateInstances() {\n    this._timeZoneCalculator = null;\n\n    if (this.getWorkSpace()) {\n      this.createAppointmentDataProvider();\n    }\n  }\n\n  _initTemplates() {\n    this._initAppointmentTemplate();\n\n    this._templateManager.addDefaultTemplates({\n      appointmentTooltip: new EmptyTemplate(),\n      dropDownAppointment: new EmptyTemplate()\n    });\n\n    super._initTemplates();\n  }\n\n  _initAppointmentTemplate() {\n    var {\n      expr: expr\n    } = this._dataAccessors;\n\n    var createGetter = property => compileGetter(\"appointmentData.\".concat(property));\n\n    var getDate = getter => data => {\n      var value = getter(data);\n\n      if (value instanceof Date) {\n        return value.valueOf();\n      }\n\n      return value;\n    };\n\n    this._templateManager.addDefaultTemplates({\n      item: new BindableTemplate(($container, data, model) => this.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model), [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\n        text: createGetter(expr.textExpr),\n        startDate: getDate(createGetter(expr.startDateExpr)),\n        endDate: getDate(createGetter(expr.endDateExpr)),\n        startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\n        endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\n        allDay: createGetter(expr.allDayExpr),\n        recurrenceRule: createGetter(expr.recurrenceRuleExpr)\n      })\n    });\n  }\n\n  _renderContent() {\n    this._renderContentImpl();\n  }\n\n  _updatePreparedItems(items) {\n    this.preparedItems = getPreparedDataItems(items, this._dataAccessors, this._getCurrentViewOption(\"cellDuration\"), this.timeZoneCalculator);\n  }\n\n  _dataSourceChangedHandler(result) {\n    if (this._readyToRenderAppointments) {\n      this._workSpaceRecalculation.done(function () {\n        this._updatePreparedItems(result);\n\n        this._renderAppointments();\n\n        this.getWorkSpace().onDataSourceChanged(this.filteredItems);\n      }.bind(this));\n    }\n  }\n\n  isVirtualScrolling() {\n    var _currentViewOptions$s;\n\n    var workspace = this.getWorkSpace();\n\n    if (workspace) {\n      return workspace.isVirtualScrolling();\n    }\n\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var scrolling = this.option(\"scrolling\");\n    return \"virtual\" === (null === scrolling || void 0 === scrolling ? void 0 : scrolling.mode) || \"virtual\" === (null === currentViewOptions || void 0 === currentViewOptions ? void 0 : null === (_currentViewOptions$s = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s ? void 0 : _currentViewOptions$s.mode);\n  }\n\n  _filterAppointments() {\n    this.filteredItems = this.appointmentDataProvider.filter(this.preparedItems);\n  }\n\n  _renderAppointments() {\n    var workspace = this.getWorkSpace();\n\n    this._filterAppointments();\n\n    workspace.option(\"allDayExpanded\", this._isAllDayExpanded());\n    var viewModel = [];\n\n    if (this._isVisible()) {\n      viewModel = this._getAppointmentsToRepaint();\n    }\n\n    if (this.option(\"isRenovatedAppointments\")) {\n      renderAppointments({\n        instance: this,\n        $dateTable: this.getWorkSpace()._getDateTable(),\n        viewModel: viewModel\n      });\n    } else {\n      this._appointments.option(\"items\", viewModel);\n    }\n\n    this.appointmentDataProvider.cleanState();\n  }\n\n  _getAppointmentsToRepaint() {\n    var layoutManager = this.getLayoutManager();\n    var appointmentsMap = layoutManager.createAppointmentsMap(this.filteredItems);\n\n    if (this.option(\"isRenovatedAppointments\")) {\n      var appointmentTemplate = this.option(\"appointmentTemplate\") !== DEFAULT_APPOINTMENT_TEMPLATE_NAME ? this.option(\"appointmentTemplate\") : void 0;\n      return {\n        appointments: appointmentsMap,\n        appointmentTemplate: appointmentTemplate\n      };\n    }\n\n    return layoutManager.getRepaintedAppointments(appointmentsMap, this.getAppointmentsInstance().option(\"items\"));\n  }\n\n  _initExpressions(fields) {\n    this._dataAccessors = utils.dataAccessors.create(fields, this._dataAccessors, config().forceIsoDateParsing, this.option(\"dateSerializationFormat\"));\n    this._dataAccessors.resources = createExpressions(this.option(\"resources\"));\n  }\n\n  _updateExpression(name, value) {\n    var exprObj = {};\n    exprObj[name.replace(\"Expr\", \"\")] = value;\n\n    this._initExpressions(exprObj);\n  }\n\n  getResourceDataAccessors() {\n    return this._dataAccessors.resources;\n  }\n\n  _initEditing() {\n    var editing = this.option(\"editing\");\n    this._editing = {\n      allowAdding: !!editing,\n      allowUpdating: !!editing,\n      allowDeleting: !!editing,\n      allowResizing: !!editing,\n      allowDragging: !!editing\n    };\n\n    if (isObject(editing)) {\n      this._editing = extend(this._editing, editing);\n    }\n\n    this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\n    this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\n    this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly());\n  }\n\n  _isReadOnly() {\n    var result = true;\n    var editing = this._editing;\n\n    for (var prop in editing) {\n      if (Object.prototype.hasOwnProperty.call(editing, prop)) {\n        result = result && !editing[prop];\n      }\n    }\n\n    return result;\n  }\n\n  _dispose() {\n    var _this$_recurrenceDial;\n\n    this._appointmentTooltip && this._appointmentTooltip.dispose();\n    null === (_this$_recurrenceDial = this._recurrenceDialog) || void 0 === _this$_recurrenceDial ? void 0 : _this$_recurrenceDial.hide(RECURRENCE_EDITING_MODE.CANCEL);\n    this.hideAppointmentPopup();\n    this.hideAppointmentTooltip();\n\n    this._asyncTemplatesTimers.forEach(clearTimeout);\n\n    this._asyncTemplatesTimers = [];\n\n    super._dispose();\n  }\n\n  _initActions() {\n    this._actions = {\n      onAppointmentAdding: this._createActionByOption(StoreEventNames.ADDING),\n      onAppointmentAdded: this._createActionByOption(StoreEventNames.ADDED),\n      onAppointmentUpdating: this._createActionByOption(StoreEventNames.UPDATING),\n      onAppointmentUpdated: this._createActionByOption(StoreEventNames.UPDATED),\n      onAppointmentDeleting: this._createActionByOption(StoreEventNames.DELETING),\n      onAppointmentDeleted: this._createActionByOption(StoreEventNames.DELETED),\n      onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\"),\n      onAppointmentTooltipShowing: this._createActionByOption(\"onAppointmentTooltipShowing\")\n    };\n  }\n\n  _getAppointmentRenderedAction() {\n    return this._createActionByOption(\"onAppointmentRendered\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  }\n\n  _renderFocusTarget() {\n    return noop();\n  }\n\n  _initMarkup() {\n    super._initMarkup();\n\n    this._validateDayHours();\n\n    this._validateCellDuration();\n\n    this._renderMainContainer();\n\n    this._renderHeader();\n\n    this._layoutManager = new AppointmentLayoutManager(this);\n    this._appointments = this._createComponent(\"<div>\", AppointmentCollection, this._appointmentsConfig());\n\n    this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\n\n    this._appointmentTooltip = new (this.option(\"adaptivityEnabled\") ? MobileTooltipStrategy : DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\n\n    this._createAppointmentPopupForm();\n\n    if (this._isDataSourceLoaded() || this._isDataSourceLoading()) {\n      this._initMarkupCore(this.option(\"loadedResources\"));\n\n      this._dataSourceChangedHandler(this._dataSource.items());\n\n      this._fireContentReadyAction();\n    } else {\n      var groups = this._getCurrentViewOption(\"groups\");\n\n      loadResources(groups, this.option(\"resources\"), this.option(\"resourceLoaderMap\")).done(resources => {\n        this.option(\"loadedResources\", resources);\n\n        this._initMarkupCore(resources);\n\n        this._reloadDataSource();\n      });\n    }\n  }\n\n  _createAppointmentPopupForm() {\n    var _this$_appointmentPop;\n\n    if (this._appointmentForm) {\n      var _this$_appointmentFor;\n\n      null === (_this$_appointmentFor = this._appointmentForm.form) || void 0 === _this$_appointmentFor ? void 0 : _this$_appointmentFor.dispose();\n    }\n\n    this._appointmentForm = this.createAppointmentForm();\n    null === (_this$_appointmentPop = this._appointmentPopup) || void 0 === _this$_appointmentPop ? void 0 : _this$_appointmentPop.dispose();\n    this._appointmentPopup = this.createAppointmentPopup(this._appointmentForm);\n  }\n\n  _renderMainContainer() {\n    this._mainContainer = $(\"<div>\").addClass(\"dx-scheduler-container\");\n    this.$element().append(this._mainContainer);\n  }\n\n  createAppointmentForm() {\n    var scheduler = {\n      createResourceEditorModel: () => _createResourceEditorModel(this.option(\"resources\"), this.option(\"loadedResources\")),\n      getDataAccessors: () => this._dataAccessors,\n      createComponent: (element, component, options) => this._createComponent(element, component, options),\n      getEditingConfig: () => this._editing,\n      getFirstDayOfWeek: () => this.option(\"firstDayOfWeek\"),\n      getStartDayHour: () => this.option(\"startDayHour\"),\n      getCalculatedEndDate: startDateWithStartHour => this._workSpace.calculateEndDate(startDateWithStartHour)\n    };\n    return new AppointmentForm(scheduler);\n  }\n\n  createAppointmentPopup(form) {\n    var scheduler = {\n      getElement: () => this.$element(),\n      createComponent: (element, component, options) => this._createComponent(element, component, options),\n      focus: () => this.focus(),\n      getResources: () => this.option(\"resources\"),\n      getEditingConfig: () => this._editing,\n      getTimeZoneCalculator: () => this.timeZoneCalculator,\n      getDataAccessors: () => this._dataAccessors,\n      getAppointmentFormOpening: () => this._actions.onAppointmentFormOpening,\n      processActionResult: (arg, canceled) => this._processActionResult(arg, canceled),\n      addAppointment: appointment => this.addAppointment(appointment),\n      updateAppointment: (sourceAppointment, updatedAppointment) => this.updateAppointment(sourceAppointment, updatedAppointment),\n      updateScrollPosition: (startDate, resourceItem, inAllDayRow) => {\n        this._workSpace.updateScrollPosition(startDate, resourceItem, inAllDayRow);\n      }\n    };\n    return new AppointmentPopup(scheduler, form);\n  }\n\n  _getAppointmentTooltipOptions() {\n    return {\n      createComponent: this._createComponent.bind(this),\n      container: this.$element(),\n      getScrollableContainer: this.getWorkSpaceScrollableContainer.bind(this),\n      addDefaultTemplates: this._templateManager.addDefaultTemplates.bind(this._templateManager),\n      getAppointmentTemplate: this._getAppointmentTemplate.bind(this),\n      showAppointmentPopup: this.showAppointmentPopup.bind(this),\n      checkAndDeleteAppointment: this.checkAndDeleteAppointment.bind(this),\n      isAppointmentInAllDayPanel: this.isAppointmentInAllDayPanel.bind(this),\n      createFormattedDateText: (appointment, targetedAppointment, format) => this.fire(\"getTextAndFormatDate\", appointment, targetedAppointment, format),\n      getAppointmentDisabled: appointment => createAppointmentAdapter(appointment, this._dataAccessors, this.timeZoneCalculator).disabled\n    };\n  }\n\n  checkAndDeleteAppointment(appointment, targetedAppointment) {\n    var targetedAdapter = createAppointmentAdapter(targetedAppointment, this._dataAccessors, this.timeZoneCalculator);\n    var deletingOptions = this.fireOnAppointmentDeleting(appointment, targetedAdapter);\n\n    if (!deletingOptions.cancel) {\n      this._checkRecurringAppointment(appointment, targetedAppointment, targetedAdapter.startDate, () => {\n        this.processDeleteAppointment(appointment, deletingOptions);\n      }, true);\n    }\n  }\n\n  _getExtraAppointmentTooltipOptions() {\n    return {\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      editing: this.option(\"editing\"),\n      offset: this.option(\"_appointmentTooltipOffset\")\n    };\n  }\n\n  isAppointmentInAllDayPanel(appointmentData) {\n    var workSpace = this._workSpace;\n    var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\n    return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\");\n  }\n\n  _initMarkupCore(resources) {\n    this._readyToRenderAppointments = hasWindow();\n    this._workSpace && this._cleanWorkspace();\n\n    this._renderWorkSpace(resources);\n\n    this._appointments.option({\n      fixedContainer: this._workSpace.getFixedContainer(),\n      allDayContainer: this._workSpace.getAllDayContainer()\n    });\n\n    this._waitAsyncTemplate(() => {\n      var _this$_workSpaceRecal2;\n\n      return null === (_this$_workSpaceRecal2 = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal2 ? void 0 : _this$_workSpaceRecal2.resolve();\n    });\n\n    this.createAppointmentDataProvider();\n\n    this._filterAppointmentsByDate();\n  }\n\n  _isDataSourceLoaded() {\n    return this._dataSource && this._dataSource.isLoaded();\n  }\n\n  _render() {\n    var _this$getWorkSpace;\n\n    this._toggleSmallClass();\n\n    this._toggleAdaptiveClass();\n\n    null === (_this$getWorkSpace = this.getWorkSpace()) || void 0 === _this$getWorkSpace ? void 0 : _this$getWorkSpace.updateHeaderEmptyCellWidth();\n\n    super._render();\n  }\n\n  _renderHeader() {\n    if (0 !== this.option(\"toolbar\").length) {\n      var $header = $(\"<div>\").appendTo(this._mainContainer);\n      this._header = this._createComponent($header, SchedulerHeader, this._headerConfig());\n    }\n  }\n\n  _headerConfig() {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var countConfig = this._getViewCountConfig();\n\n    var result = extend({\n      firstDayOfWeek: this.getFirstDayOfWeek(),\n      currentView: this.option(\"currentView\"),\n      isAdaptive: this.option(\"adaptivityEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\n      customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\"),\n      agendaDuration: currentViewOptions.agendaDuration || DEFAULT_AGENDA_DURATION\n    }, currentViewOptions);\n    result.intervalCount = countConfig.intervalCount;\n    result.views = this.option(\"views\");\n    result.min = new Date(this._dateOption(\"min\"));\n    result.max = new Date(this._dateOption(\"max\"));\n    result.currentDate = dateUtils.trimTime(new Date(this._dateOption(\"currentDate\")));\n    result.onCurrentViewChange = name => {\n      this.option(\"currentView\", name);\n    }, result.onCurrentDateChange = date => {\n      this.option(\"currentDate\", date);\n    };\n    result.items = this.option(\"toolbar\");\n    result.startViewDate = this.getStartViewDate();\n\n    result.todayDate = () => {\n      var result = this.timeZoneCalculator.createDate(new Date(), {\n        path: \"toGrid\"\n      });\n      return result;\n    };\n\n    return result;\n  }\n\n  _appointmentsConfig() {\n    var config = {\n      getResources: () => this.option(\"resources\"),\n      getResourceDataAccessors: this.getResourceDataAccessors.bind(this),\n      getAgendaResourceProcessor: () => this.agendaResourceProcessor,\n      getAppointmentColor: this.createGetAppointmentColor(),\n      getAppointmentDataProvider: () => this.appointmentDataProvider,\n      dataAccessors: this._dataAccessors,\n      observer: this,\n      onItemRendered: this._getAppointmentRenderedAction(),\n      onItemClick: this._createActionByOption(\"onAppointmentClick\"),\n      onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\n      onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      allowDrag: this._allowDragging(),\n      allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\n      allowResize: this._allowResizing(),\n      allowAllDayResize: this._allowAllDayResizing(),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      currentView: this.currentView,\n      groups: this._getCurrentViewOption(\"groups\"),\n      isRenovatedAppointments: this.option(\"isRenovatedAppointments\"),\n      timeZoneCalculator: this.timeZoneCalculator,\n      getResizableStep: () => this._workSpace ? this._workSpace.positionHelper.getResizableStep() : 0,\n      getDOMElementsMetaData: () => {\n        var _this$_workSpace;\n\n        return null === (_this$_workSpace = this._workSpace) || void 0 === _this$_workSpace ? void 0 : _this$_workSpace.getDOMElementsMetaData();\n      },\n      getViewDataProvider: () => {\n        var _this$_workSpace2;\n\n        return null === (_this$_workSpace2 = this._workSpace) || void 0 === _this$_workSpace2 ? void 0 : _this$_workSpace2.viewDataProvider;\n      },\n      isVerticalViewDirection: () => \"vertical\" === this.getRenderingStrategyInstance().getDirection(),\n      isVerticalGroupedWorkSpace: () => this._workSpace._isVerticalGroupedWorkSpace(),\n      isDateAndTimeView: () => _isDateAndTimeView(this._workSpace.type),\n      onContentReady: () => {\n        var _this$_workSpace3;\n\n        null === (_this$_workSpace3 = this._workSpace) || void 0 === _this$_workSpace3 ? void 0 : _this$_workSpace3.option(\"allDayExpanded\", this._isAllDayExpanded());\n      }\n    };\n    return config;\n  }\n\n  getCollectorOffset() {\n    if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\n      return this.option(\"_collectorOffset\");\n    } else {\n      return 0;\n    }\n  }\n\n  getAppointmentDurationInMinutes() {\n    return this._getCurrentViewOption(\"cellDuration\");\n  }\n\n  _validateCellDuration() {\n    var endDayHour = this._getCurrentViewOption(\"endDayHour\");\n\n    var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n\n    var cellDuration = this._getCurrentViewOption(\"cellDuration\");\n\n    if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\n      errors.log(\"W1015\");\n    }\n  }\n\n  _getCurrentViewType() {\n    return this.currentViewType;\n  }\n\n  _renderWorkSpace(groups) {\n    var _this$_header6;\n\n    this._readyToRenderAppointments && this._toggleSmallClass();\n    var $workSpace = $(\"<div>\").appendTo(this._mainContainer);\n\n    var countConfig = this._getViewCountConfig();\n\n    var workSpaceComponent = VIEWS_CONFIG[this._getCurrentViewType()].workSpace;\n\n    var workSpaceConfig = this._workSpaceConfig(groups, countConfig);\n\n    this._workSpace = this._createComponent($workSpace, workSpaceComponent, workSpaceConfig);\n    this._allowDragging() && this._workSpace.initDragBehavior(this, this._all);\n\n    this._workSpace._attachTablesEvents();\n\n    this._workSpace.getWorkArea().append(this._appointments.$element());\n\n    this._recalculateWorkspace();\n\n    countConfig.startDate && (null === (_this$_header6 = this._header) || void 0 === _this$_header6 ? void 0 : _this$_header6.option(\"currentDate\", this._workSpace._getHeaderDate()));\n\n    this._appointments.option(\"_collectorOffset\", this.getCollectorOffset());\n  }\n\n  _getViewCountConfig() {\n    var currentView = this.option(\"currentView\");\n\n    var view = this._getViewByName(currentView);\n\n    var viewCount = view && view.intervalCount || 1;\n    var startDate = view && view.startDate || null;\n    return {\n      intervalCount: viewCount,\n      startDate: startDate\n    };\n  }\n\n  _getViewByName(name) {\n    var views = this.option(\"views\");\n\n    for (var i = 0; i < views.length; i++) {\n      if (views[i].name === name || views[i].type === name || views[i] === name) {\n        return views[i];\n      }\n    }\n  }\n\n  _recalculateWorkspace() {\n    this._workSpaceRecalculation = new Deferred();\n\n    this._waitAsyncTemplate(() => {\n      triggerResizeEvent(this._workSpace.$element());\n\n      this._workSpace._refreshDateTimeIndication();\n    });\n  }\n\n  _workSpaceConfig(groups, countConfig) {\n    var _currentViewOptions$s2;\n\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var scrolling = this.option(\"scrolling\");\n    var isVirtualScrolling = \"virtual\" === scrolling.mode || \"virtual\" === (null === (_currentViewOptions$s2 = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s2 ? void 0 : _currentViewOptions$s2.mode);\n    var horizontalVirtualScrollingAllowed = isVirtualScrolling && (!isDefined(scrolling.orientation) || [\"horizontal\", \"both\"].filter(item => {\n      var _currentViewOptions$s3;\n\n      return scrolling.orientation === item || (null === (_currentViewOptions$s3 = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s3 ? void 0 : _currentViewOptions$s3.orientation) === item;\n    }).length > 0);\n    var crossScrollingEnabled = this.option(\"crossScrollingEnabled\") || horizontalVirtualScrollingAllowed;\n    var result = extend({\n      resources: this.option(\"resources\"),\n      loadedResources: this.option(\"loadedResources\"),\n      getFilteredItems: () => this.filteredItems,\n      getResourceDataAccessors: this.getResourceDataAccessors.bind(this),\n      noDataText: this.option(\"noDataText\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\"),\n      tabIndex: this.option(\"tabIndex\"),\n      accessKey: this.option(\"accessKey\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      cellDuration: this.option(\"cellDuration\"),\n      showAllDayPanel: this.option(\"showAllDayPanel\"),\n      showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\n      indicatorTime: this.option(\"indicatorTime\"),\n      indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\n      shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\n      allDayExpanded: this._appointments.option(\"items\"),\n      crossScrollingEnabled: crossScrollingEnabled,\n      dataCellTemplate: this.option(\"dataCellTemplate\"),\n      timeCellTemplate: this.option(\"timeCellTemplate\"),\n      resourceCellTemplate: this.option(\"resourceCellTemplate\"),\n      dateCellTemplate: this.option(\"dateCellTemplate\"),\n      allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\n      selectedCellData: this.option(\"selectedCellData\"),\n      onSelectionChanged: args => {\n        this.option(\"selectedCellData\", args.selectedCellData);\n      },\n      groupByDate: this._getCurrentViewOption(\"groupByDate\"),\n      scrolling: scrolling,\n      draggingMode: this.option(\"_draggingMode\"),\n      timeZoneCalculator: this.timeZoneCalculator,\n      schedulerHeight: this.option(\"height\"),\n      schedulerWidth: this.option(\"width\"),\n      allDayPanelMode: this.option(\"allDayPanelMode\"),\n      onSelectedCellsClick: this.showAddAppointmentPopup.bind(this),\n      onRenderAppointments: this._renderAppointments.bind(this),\n      onShowAllDayPanel: value => this.option(\"showAllDayPanel\", value),\n      getHeaderHeight: () => utils.DOM.getHeaderHeight(this._header),\n      onScrollEnd: () => this._appointments.updateResizableArea(),\n      renovateRender: this._isRenovatedRender(isVirtualScrolling),\n      isRenovatedAppointments: this.option(\"isRenovatedAppointments\")\n    }, currentViewOptions);\n    result.observer = this;\n    result.intervalCount = countConfig.intervalCount;\n    result.startDate = countConfig.startDate;\n    result.groups = groups;\n    result.onCellClick = this._createActionByOption(\"onCellClick\");\n    result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\n    result.currentDate = dateUtils.trimTime(new Date(this._dateOption(\"currentDate\")));\n    result.hoursInterval = result.cellDuration / 60;\n    result.allDayExpanded = false;\n    result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\n    result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\n    result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\n    result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\n\n    result.getAppointmentDataProvider = () => this.appointmentDataProvider;\n\n    return result;\n  }\n\n  _isRenovatedRender(isVirtualScrolling) {\n    return this.option(\"renovateRender\") && hasWindow() || isVirtualScrolling;\n  }\n\n  _waitAsyncTemplate(callback) {\n    if (this._options.silent(\"templatesRenderAsynchronously\")) {\n      var timer = setTimeout(() => {\n        callback();\n        clearTimeout(timer);\n      });\n\n      this._asyncTemplatesTimers.push(timer);\n    } else {\n      callback();\n    }\n  }\n\n  _getCurrentViewOptions() {\n    return this.currentView;\n  }\n\n  _getCurrentViewOption(optionName) {\n    if (this.currentView && void 0 !== this.currentView[optionName]) {\n      return this.currentView[optionName];\n    }\n\n    return this.option(optionName);\n  }\n\n  _getAppointmentTemplate(optionName) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (currentViewOptions && currentViewOptions[optionName]) {\n      return this._getTemplate(currentViewOptions[optionName]);\n    }\n\n    return this._getTemplateByOption(optionName);\n  }\n\n  _updateOption(viewName, optionName, value) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (!currentViewOptions || !isDefined(currentViewOptions[optionName])) {\n      this[\"_\" + viewName].option(optionName, value);\n    }\n  }\n\n  _refreshWorkSpace(groups) {\n    this._cleanWorkspace();\n\n    delete this._workSpace;\n\n    this._renderWorkSpace(groups);\n\n    if (this._readyToRenderAppointments) {\n      this._appointments.option({\n        fixedContainer: this._workSpace.getFixedContainer(),\n        allDayContainer: this._workSpace.getAllDayContainer()\n      });\n\n      this._waitAsyncTemplate(() => this._workSpaceRecalculation.resolve());\n    }\n  }\n\n  _cleanWorkspace() {\n    this._appointments.$element().detach();\n\n    this._workSpace._dispose();\n\n    this._workSpace.$element().remove();\n\n    this.option(\"selectedCellData\", []);\n  }\n\n  getWorkSpaceScrollable() {\n    return this._workSpace.getScrollable();\n  }\n\n  getWorkSpaceScrollableContainer() {\n    return this._workSpace.getScrollableContainer();\n  }\n\n  getWorkSpace() {\n    return this._workSpace;\n  }\n\n  getHeader() {\n    return this._header;\n  }\n\n  _cleanPopup() {\n    var _this$_appointmentPop2;\n\n    null === (_this$_appointmentPop2 = this._appointmentPopup) || void 0 === _this$_appointmentPop2 ? void 0 : _this$_appointmentPop2.dispose();\n  }\n\n  _checkRecurringAppointment(rawAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent, recurrenceEditMode) {\n    var recurrenceRule = ExpressionUtils.getField(this._dataAccessors, \"recurrenceRule\", rawAppointment);\n\n    if (!getRecurrenceProcessor().evalRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\n      callback();\n      return;\n    }\n\n    var editMode = recurrenceEditMode || this.option(\"recurrenceEditMode\");\n\n    switch (editMode) {\n      case \"series\":\n        callback();\n        break;\n\n      case \"occurrence\":\n        this._excludeAppointmentFromSeries(rawAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n\n        break;\n\n      default:\n        if (dragEvent) {\n          dragEvent.cancel = new Deferred();\n        }\n\n        this._showRecurrenceChangeConfirm(isDeleted).done(editingMode => {\n          editingMode === RECURRENCE_EDITING_MODE.SERIES && callback();\n          editingMode === RECURRENCE_EDITING_MODE.OCCURENCE && this._excludeAppointmentFromSeries(rawAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n        }).fail(() => this._appointments.moveAppointmentBack(dragEvent));\n\n    }\n  }\n\n  _excludeAppointmentFromSeries(rawAppointment, newRawAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\n    var appointment = excludeFromRecurrence(rawAppointment, exceptionDate, this._dataAccessors, this._timeZoneCalculator);\n\n    var singleRawAppointment = _extends({}, newRawAppointment);\n\n    delete singleRawAppointment[this._dataAccessors.expr.recurrenceExceptionExpr];\n    delete singleRawAppointment[this._dataAccessors.expr.recurrenceRuleExpr];\n    var keyPropertyName = this.appointmentDataProvider.keyName;\n    delete singleRawAppointment[keyPropertyName];\n    var canCreateNewAppointment = !isDeleted && !isPopupEditing;\n\n    if (canCreateNewAppointment) {\n      this.addAppointment(singleRawAppointment);\n    }\n\n    if (isPopupEditing) {\n      this._appointmentPopup.show(singleRawAppointment, {\n        isToolbarVisible: true,\n        action: ACTION_TO_APPOINTMENT.EXCLUDE_FROM_SERIES,\n        excludeInfo: {\n          sourceAppointment: rawAppointment,\n          updatedAppointment: appointment.source()\n        }\n      });\n\n      this._editAppointmentData = rawAppointment;\n    } else {\n      this._updateAppointment(rawAppointment, appointment.source(), () => {\n        this._appointments.moveAppointmentBack(dragEvent);\n      }, dragEvent);\n    }\n  }\n\n  _createRecurrenceException(appointment, exceptionDate) {\n    var result = [];\n\n    if (appointment.recurrenceException) {\n      result.push(appointment.recurrenceException);\n    }\n\n    result.push(this._getSerializedDate(exceptionDate, appointment.startDate, appointment.allDay));\n    return result.join();\n  }\n\n  _getSerializedDate(date, startDate, isAllDay) {\n    isAllDay && date.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds(), startDate.getMilliseconds());\n    return dateSerialization.serializeDate(date, UTC_FULL_DATE_FORMAT);\n  }\n\n  _showRecurrenceChangeConfirm(isDeleted) {\n    var message = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\n    var seriesText = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\n    var occurrenceText = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\n    this._recurrenceDialog = customDialog({\n      messageHtml: message,\n      showCloseButton: true,\n      showTitle: true,\n      buttons: [{\n        text: seriesText,\n        onClick: function () {\n          return RECURRENCE_EDITING_MODE.SERIES;\n        }\n      }, {\n        text: occurrenceText,\n        onClick: function () {\n          return RECURRENCE_EDITING_MODE.OCCURENCE;\n        }\n      }],\n      popupOptions: {\n        onHidden: e => {\n          e.component.$element().remove();\n        },\n        copyRootClassesToWrapper: true,\n        _ignoreCopyRootClassesToWrapperDeprecation: true\n      }\n    });\n    return this._recurrenceDialog.show();\n  }\n\n  _getUpdatedData(rawAppointment) {\n    var getConvertedFromGrid = date => date ? this.timeZoneCalculator.createDate(date, {\n      path: \"fromGrid\"\n    }) : void 0;\n\n    var isValidDate = date => !isNaN(new Date(date).getTime());\n\n    var targetCell = this.getTargetCellData();\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    var cellStartDate = getConvertedFromGrid(targetCell.startDate);\n    var cellEndDate = getConvertedFromGrid(targetCell.endDate);\n    var appointmentStartDate = new Date(appointment.startDate);\n    var appointmentEndDate = new Date(appointment.endDate);\n    var resultedStartDate = cellStartDate || appointmentStartDate;\n\n    if (!isValidDate(appointmentStartDate)) {\n      appointmentStartDate = resultedStartDate;\n    }\n\n    if (!isValidDate(appointmentEndDate)) {\n      appointmentEndDate = cellEndDate;\n    }\n\n    var duration = appointmentEndDate.getTime() - appointmentStartDate.getTime();\n    var isKeepAppointmentHours = this._workSpace.keepOriginalHours() && isValidDate(appointment.startDate) && isValidDate(cellStartDate);\n\n    if (isKeepAppointmentHours) {\n      var {\n        trimTime: trimTime\n      } = dateUtils;\n      var startDate = this.timeZoneCalculator.createDate(appointment.startDate, {\n        path: \"toGrid\"\n      });\n      var timeInMs = startDate.getTime() - trimTime(startDate).getTime();\n      resultedStartDate = new Date(trimTime(targetCell.startDate).getTime() + timeInMs);\n      resultedStartDate = this.timeZoneCalculator.createDate(resultedStartDate, {\n        path: \"fromGrid\"\n      });\n    }\n\n    var result = createAppointmentAdapter({}, this._dataAccessors, this.timeZoneCalculator);\n\n    if (void 0 !== targetCell.allDay) {\n      result.allDay = targetCell.allDay;\n    }\n\n    result.startDate = resultedStartDate;\n    var resultedEndDate = new Date(resultedStartDate.getTime() + duration);\n\n    if (this.appointmentTakesAllDay(rawAppointment) && !result.allDay && this._workSpace.supportAllDayRow()) {\n      resultedEndDate = this._workSpace.calculateEndDate(resultedStartDate);\n    }\n\n    if (appointment.allDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\n      var dateCopy = new Date(resultedStartDate);\n      dateCopy.setHours(0);\n      resultedEndDate = new Date(dateCopy.getTime() + duration);\n\n      if (0 !== resultedEndDate.getHours()) {\n        resultedEndDate.setHours(this._getCurrentViewOption(\"endDayHour\"));\n      }\n    }\n\n    var timeZoneOffset = timeZoneUtils.getTimezoneOffsetChangeInMs(appointmentStartDate, appointmentEndDate, resultedStartDate, resultedEndDate);\n    result.endDate = new Date(resultedEndDate.getTime() - timeZoneOffset);\n    var rawResult = result.source();\n    setResourceToAppointment(this.option(\"resources\"), this.getResourceDataAccessors(), rawResult, targetCell.groups);\n    return rawResult;\n  }\n\n  getTargetedAppointment(appointment, element) {\n    var settings = utils.dataAccessors.getAppointmentSettings(element);\n    var info = utils.dataAccessors.getAppointmentInfo(element);\n    var appointmentIndex = $(element).data(this._appointments._itemIndexKey());\n    var adapter = createAppointmentAdapter(appointment, this._dataAccessors, this.timeZoneCalculator);\n    var targetedAdapter = adapter.clone();\n\n    if (this._isAgenda() && adapter.isRecurrent) {\n      var agendaSettings = settings.agendaSettings;\n      targetedAdapter.startDate = ExpressionUtils.getField(this._dataAccessors, \"startDate\", agendaSettings);\n      targetedAdapter.endDate = ExpressionUtils.getField(this._dataAccessors, \"endDate\", agendaSettings);\n    } else if (settings) {\n      targetedAdapter.startDate = info ? info.sourceAppointment.startDate : adapter.startDate;\n      targetedAdapter.endDate = info ? info.sourceAppointment.endDate : adapter.endDate;\n    }\n\n    var rawTargetedAppointment = targetedAdapter.source();\n\n    if (element) {\n      this.setTargetedAppointmentResources(rawTargetedAppointment, element, appointmentIndex);\n    }\n\n    if (info) {\n      rawTargetedAppointment.displayStartDate = new Date(info.appointment.startDate);\n      rawTargetedAppointment.displayEndDate = new Date(info.appointment.endDate);\n    }\n\n    return rawTargetedAppointment;\n  }\n\n  subscribe(subject, action) {\n    this._subscribes[subject] = subscribes[subject] = action;\n  }\n\n  fire(subject) {\n    var callback = this._subscribes[subject];\n    var args = Array.prototype.slice.call(arguments);\n\n    if (!isFunction(callback)) {\n      throw errors.Error(\"E1031\", subject);\n    }\n\n    return callback.apply(this, args.slice(1));\n  }\n\n  getTargetCellData() {\n    return this._workSpace.getDataByDroppableCell();\n  }\n\n  _updateAppointment(target, rawAppointment, onUpdatePrevented, dragEvent) {\n    var updatingOptions = {\n      newData: rawAppointment,\n      oldData: extend({}, target),\n      cancel: false\n    };\n\n    var performFailAction = function (err) {\n      if (onUpdatePrevented) {\n        onUpdatePrevented.call(this);\n      }\n\n      if (err && \"Error\" === err.name) {\n        throw err;\n      }\n    }.bind(this);\n\n    this._actions[StoreEventNames.UPDATING](updatingOptions);\n\n    if (dragEvent && !isDeferred(dragEvent.cancel)) {\n      dragEvent.cancel = new Deferred();\n    }\n\n    return this._processActionResult(updatingOptions, function (canceled) {\n      var deferred = new Deferred();\n\n      if (!canceled) {\n        this._expandAllDayPanel(rawAppointment);\n\n        try {\n          deferred = this.appointmentDataProvider.update(target, rawAppointment).done(() => {\n            dragEvent && dragEvent.cancel.resolve(false);\n          }).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.UPDATED, storeAppointment)).fail(() => performFailAction());\n        } catch (err) {\n          performFailAction(err);\n          deferred.resolve();\n        }\n      } else {\n        performFailAction();\n        deferred.resolve();\n      }\n\n      return deferred.promise();\n    });\n  }\n\n  _processActionResult(actionOptions, callback) {\n    var deferred = new Deferred();\n\n    var resolveCallback = callbackResult => {\n      when(fromPromise(callbackResult)).always(deferred.resolve);\n    };\n\n    if (isPromise(actionOptions.cancel)) {\n      when(fromPromise(actionOptions.cancel)).always(cancel => {\n        if (!isDefined(cancel)) {\n          cancel = \"rejected\" === actionOptions.cancel.state();\n        }\n\n        resolveCallback(callback.call(this, cancel));\n      });\n    } else {\n      resolveCallback(callback.call(this, actionOptions.cancel));\n    }\n\n    return deferred.promise();\n  }\n\n  _expandAllDayPanel(appointment) {\n    if (!this._isAllDayExpanded() && this.appointmentTakesAllDay(appointment)) {\n      this._workSpace.option(\"allDayExpanded\", true);\n    }\n  }\n\n  _onDataPromiseCompleted(handlerName, storeAppointment, appointment) {\n    var args = {\n      appointmentData: appointment || storeAppointment\n    };\n\n    if (storeAppointment instanceof Error) {\n      args.error = storeAppointment;\n    } else {\n      this._appointmentPopup.visible && this._appointmentPopup.hide();\n    }\n\n    this._actions[handlerName](args);\n\n    this._fireContentReadyAction();\n  }\n\n  getAppointmentsInstance() {\n    return this._appointments;\n  }\n\n  getLayoutManager() {\n    return this._layoutManager;\n  }\n\n  getRenderingStrategyInstance() {\n    return this.getLayoutManager().getRenderingStrategyInstance();\n  }\n\n  getActions() {\n    return this._actions;\n  }\n\n  appointmentTakesAllDay(rawAppointment) {\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    return getAppointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"), this._getCurrentViewOption(\"allDayPanelMode\"));\n  }\n\n  dayHasAppointment(day, rawAppointment, trimTime) {\n    var getConvertedToTimeZone = date => this.timeZoneCalculator.createDate(date, {\n      path: \"toGrid\"\n    });\n\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    var startDate = new Date(appointment.startDate);\n    var endDate = new Date(appointment.endDate);\n    startDate = getConvertedToTimeZone(startDate);\n    endDate = getConvertedToTimeZone(endDate);\n\n    if (day.getTime() === endDate.getTime()) {\n      return startDate.getTime() === endDate.getTime();\n    }\n\n    if (trimTime) {\n      day = dateUtils.trimTime(day);\n      startDate = dateUtils.trimTime(startDate);\n      endDate = dateUtils.trimTime(endDate);\n    }\n\n    var dayTimeStamp = day.getTime();\n    var startDateTimeStamp = startDate.getTime();\n    var endDateTimeStamp = endDate.getTime();\n    return startDateTimeStamp <= dayTimeStamp && dayTimeStamp <= endDateTimeStamp;\n  }\n\n  setTargetedAppointmentResources(rawAppointment, element, appointmentIndex) {\n    var groups = this._getCurrentViewOption(\"groups\");\n\n    if (null !== groups && void 0 !== groups && groups.length) {\n      var resourcesSetter = this.getResourceDataAccessors().setter;\n      var workSpace = this._workSpace;\n      var getGroups;\n      var setResourceCallback;\n\n      if (this._isAgenda()) {\n        getGroups = function () {\n          var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\n\n          return getCellGroups(apptSettings[0].groupIndex, this.getWorkSpace().option(\"groups\"));\n        };\n\n        setResourceCallback = function (_, group) {\n          resourcesSetter[group.name](rawAppointment, group.id);\n        };\n      } else {\n        getGroups = function () {\n          var setting = utils.dataAccessors.getAppointmentSettings(element) || {};\n          return workSpace.getCellDataByCoordinates({\n            left: setting.left,\n            top: setting.top\n          }).groups;\n        };\n\n        setResourceCallback = function (field, value) {\n          resourcesSetter[field](rawAppointment, value);\n        };\n      }\n\n      each(getGroups.call(this), setResourceCallback);\n    }\n  }\n\n  getStartViewDate() {\n    var _this$_workSpace4;\n\n    return null === (_this$_workSpace4 = this._workSpace) || void 0 === _this$_workSpace4 ? void 0 : _this$_workSpace4.getStartViewDate();\n  }\n\n  getEndViewDate() {\n    return this._workSpace.getEndViewDate();\n  }\n\n  showAddAppointmentPopup(cellData, cellGroups) {\n    var appointmentAdapter = createAppointmentAdapter({}, this._dataAccessors, this.timeZoneCalculator);\n    appointmentAdapter.allDay = cellData.allDay;\n    appointmentAdapter.startDate = this.timeZoneCalculator.createDate(cellData.startDate, {\n      path: \"fromGrid\"\n    });\n    appointmentAdapter.endDate = this.timeZoneCalculator.createDate(cellData.endDate, {\n      path: \"fromGrid\"\n    });\n    var resultAppointment = extend(appointmentAdapter.source(), cellGroups);\n    this.showAppointmentPopup(resultAppointment, true);\n  }\n\n  showAppointmentPopup(rawAppointment, createNewAppointment, rawTargetedAppointment) {\n    var newRawTargetedAppointment = _extends({}, rawTargetedAppointment);\n\n    if (newRawTargetedAppointment) {\n      delete newRawTargetedAppointment.displayStartDate;\n      delete newRawTargetedAppointment.displayEndDate;\n    }\n\n    var appointment = createAppointmentAdapter(newRawTargetedAppointment || rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    var newTargetedAppointment = extend({}, rawAppointment, newRawTargetedAppointment);\n    var isCreateAppointment = null !== createNewAppointment && void 0 !== createNewAppointment ? createNewAppointment : isEmptyObject(rawAppointment);\n\n    if (isEmptyObject(rawAppointment)) {\n      rawAppointment = this.createPopupAppointment();\n    }\n\n    if (isCreateAppointment) {\n      delete this._editAppointmentData;\n      this._editing.allowAdding && this._appointmentPopup.show(rawAppointment, {\n        isToolbarVisible: true,\n        action: ACTION_TO_APPOINTMENT.CREATE\n      });\n    } else {\n      this._checkRecurringAppointment(rawAppointment, newTargetedAppointment, appointment.startDate, () => {\n        this._editAppointmentData = rawAppointment;\n\n        this._appointmentPopup.show(rawAppointment, {\n          isToolbarVisible: this._editing.allowUpdating,\n          action: ACTION_TO_APPOINTMENT.UPDATE\n        });\n      }, false, true);\n    }\n  }\n\n  createPopupAppointment() {\n    var result = {};\n    var toMs = dateUtils.dateToMilliseconds;\n    var startDate = new Date(this.option(\"currentDate\"));\n    var endDate = new Date(startDate.getTime() + this.option(\"cellDuration\") * toMs(\"minute\"));\n    ExpressionUtils.setField(this._dataAccessors, \"startDate\", result, startDate);\n    ExpressionUtils.setField(this._dataAccessors, \"endDate\", result, endDate);\n    return result;\n  }\n\n  hideAppointmentPopup(saveChanges) {\n    var _this$_appointmentPop3;\n\n    if (null !== (_this$_appointmentPop3 = this._appointmentPopup) && void 0 !== _this$_appointmentPop3 && _this$_appointmentPop3.visible) {\n      saveChanges && this._appointmentPopup.saveChangesAsync();\n\n      this._appointmentPopup.hide();\n    }\n  }\n\n  showAppointmentTooltip(appointment, element, targetedAppointment) {\n    if (appointment) {\n      var settings = utils.dataAccessors.getAppointmentSettings(element);\n      var appointmentConfig = {\n        itemData: targetedAppointment || appointment,\n        groupIndex: null === settings || void 0 === settings ? void 0 : settings.groupIndex,\n        groups: this.option(\"groups\")\n      };\n\n      var _getAppointmentColor = this.createGetAppointmentColor();\n\n      var deferredColor = _getAppointmentColor(appointmentConfig);\n\n      var info = new AppointmentTooltipInfo(appointment, targetedAppointment, deferredColor);\n      this.showAppointmentTooltipCore(element, [info]);\n    }\n  }\n\n  createGetAppointmentColor() {\n    return appointmentConfig => {\n      var resourceConfig = {\n        resources: this.option(\"resources\"),\n        dataAccessors: this.getResourceDataAccessors(),\n        loadedResources: this.option(\"loadedResources\"),\n        resourceLoaderMap: this.option(\"resourceLoaderMap\")\n      };\n      return getAppointmentColor(resourceConfig, appointmentConfig);\n    };\n  }\n\n  showAppointmentTooltipCore(target, data, options) {\n    var arg = {\n      cancel: false,\n      appointments: data.map(item => {\n        var result = {\n          appointmentData: item.appointment,\n          currentAppointmentData: _extends({}, item.targetedAppointment),\n          color: item.color\n        };\n\n        if (item.settings.info) {\n          var {\n            startDate: startDate,\n            endDate: endDate\n          } = item.settings.info.appointment;\n          result.currentAppointmentData.displayStartDate = startDate;\n          result.currentAppointmentData.displayEndDate = endDate;\n        }\n\n        return result;\n      }),\n      targetElement: target\n    };\n\n    this._createActionByOption(\"onAppointmentTooltipShowing\")(arg);\n\n    if (this._appointmentTooltip.isAlreadyShown(target)) {\n      this.hideAppointmentTooltip();\n    } else {\n      this._processActionResult(arg, canceled => {\n        !canceled && this._appointmentTooltip.show(target, data, _extends({}, this._getExtraAppointmentTooltipOptions(), options));\n      });\n    }\n  }\n\n  hideAppointmentTooltip() {\n    this._appointmentTooltip && this._appointmentTooltip.hide();\n  }\n\n  scrollToTime(hours, minutes, date) {\n    errors.log(\"W0002\", \"dxScheduler\", \"scrollToTime\", \"21.1\", 'Use the \"scrollTo\" method instead');\n\n    this._workSpace.scrollToTime(hours, minutes, date);\n  }\n\n  scrollTo(date, groups, allDay) {\n    this._workSpace.scrollTo(date, groups, allDay);\n  }\n\n  _isHorizontalVirtualScrolling() {\n    var scrolling = this.option(\"scrolling\");\n    var {\n      orientation: orientation,\n      mode: mode\n    } = scrolling;\n    var isVirtualScrolling = \"virtual\" === mode;\n    return isVirtualScrolling && (\"horizontal\" === orientation || \"both\" === orientation);\n  }\n\n  addAppointment(rawAppointment) {\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    appointment.text = appointment.text || \"\";\n    var serializedAppointment = appointment.source(true);\n    var addingOptions = {\n      appointmentData: serializedAppointment,\n      cancel: false\n    };\n\n    this._actions[StoreEventNames.ADDING](addingOptions);\n\n    return this._processActionResult(addingOptions, canceled => {\n      if (canceled) {\n        return new Deferred().resolve();\n      }\n\n      this._expandAllDayPanel(serializedAppointment);\n\n      return this.appointmentDataProvider.add(serializedAppointment).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.ADDED, storeAppointment));\n    });\n  }\n\n  updateAppointment(target, appointment) {\n    return this._updateAppointment(target, appointment);\n  }\n\n  deleteAppointment(rawAppointment) {\n    var deletingOptions = this.fireOnAppointmentDeleting(rawAppointment);\n    this.processDeleteAppointment(rawAppointment, deletingOptions);\n  }\n\n  fireOnAppointmentDeleting(rawAppointment, targetedAppointmentData) {\n    var deletingOptions = {\n      appointmentData: rawAppointment,\n      targetedAppointmentData: targetedAppointmentData,\n      cancel: false\n    };\n\n    this._actions[StoreEventNames.DELETING](deletingOptions);\n\n    return deletingOptions;\n  }\n\n  processDeleteAppointment(rawAppointment, deletingOptions) {\n    this._processActionResult(deletingOptions, function (canceled) {\n      if (!canceled) {\n        this.appointmentDataProvider.remove(rawAppointment).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.DELETED, storeAppointment, rawAppointment));\n      }\n    });\n  }\n\n  deleteRecurrence(appointment, date, recurrenceEditMode) {\n    this._checkRecurringAppointment(appointment, {}, date, () => {\n      this.processDeleteAppointment(appointment, {\n        cancel: false\n      });\n    }, true, false, null, recurrenceEditMode);\n  }\n\n  focus() {\n    if (this._editAppointmentData) {\n      this._appointments.focus();\n    } else {\n      this._workSpace.focus();\n    }\n  }\n\n  getFirstDayOfWeek() {\n    return isDefined(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : dateLocalization.firstDayOfWeekIndex();\n  }\n\n  _validateDayHours() {\n    var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n\n    var endDayHour = this._getCurrentViewOption(\"endDayHour\");\n\n    validateDayHours(startDayHour, endDayHour);\n  }\n\n}\n\nScheduler.include(DataHelperMixin);\nregisterComponent(\"dxScheduler\", Scheduler);\nexport default Scheduler;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devextreme/esm/ui/scheduler/ui.scheduler.js"],"names":["_extends","registerComponent","config","devices","$","BindableTemplate","EmptyTemplate","Callbacks","noop","compileGetter","getBoundingRect","dateUtils","dateSerialization","Deferred","when","fromPromise","extend","each","isDefined","isString","isObject","isFunction","isEmptyObject","isDeferred","isPromise","hasWindow","DataHelperMixin","triggerResizeEvent","dateLocalization","messageLocalization","custom","customDialog","isMaterial","errors","Widget","AppointmentPopup","ACTION_TO_APPOINTMENT","AppointmentForm","CompactAppointmentsHelper","DesktopTooltipStrategy","MobileTooltipStrategy","hide","hideLoading","show","showLoading","AppointmentCollection","AppointmentLayoutManager","SchedulerHeader","subscribes","getRecurrenceProcessor","timeZoneUtils","SchedulerAgenda","SchedulerTimelineDay","SchedulerTimelineMonth","SchedulerTimelineWeek","SchedulerTimelineWorkWeek","SchedulerWorkSpaceDay","SchedulerWorkSpaceMonth","SchedulerWorkSpaceWeek","SchedulerWorkSpaceWorkWeek","createAppointmentAdapter","AppointmentTooltipInfo","utils","createExpressions","createResourceEditorModel","_createResourceEditorModel","getAppointmentColor","getCellGroups","loadResources","setResourceToAppointment","ExpressionUtils","validateDayHours","isDateAndTimeView","_isDateAndTimeView","renderAppointments","AgendaResourceProcessor","AppointmentDataProvider","getAppointmentTakesAllDay","getPreparedDataItems","getCurrentView","createTimeZoneCalculator","excludeFromRecurrence","MINUTES_IN_HOUR","DEFAULT_AGENDA_DURATION","WIDGET_CLASS","WIDGET_SMALL_CLASS","concat","WIDGET_ADAPTIVE_CLASS","WIDGET_READONLY_CLASS","WIDGET_SMALL_WIDTH","FULL_DATE_FORMAT","UTC_FULL_DATE_FORMAT","DEFAULT_APPOINTMENT_TEMPLATE_NAME","DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME","DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME","VIEWS_CONFIG","day","workSpace","renderingStrategy","week","workWeek","month","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","agenda","StoreEventNames","ADDING","ADDED","DELETING","DELETED","UPDATING","UPDATED","RECURRENCE_EDITING_MODE","SERIES","OCCURENCE","CANCEL","Scheduler","_getDefaultOptions","defaultOptions","views","currentView","currentDate","trimTime","Date","min","max","dateSerializationFormat","firstDayOfWeek","groups","resources","loadedResources","resourceLoaderMap","Map","dataSource","customizeDateNavigatorText","appointmentTemplate","dropDownAppointmentTemplate","appointmentCollectorTemplate","dataCellTemplate","timeCellTemplate","resourceCellTemplate","dateCellTemplate","startDayHour","endDayHour","editing","allowAdding","allowDeleting","allowDragging","allowResizing","allowUpdating","allowTimeZoneEditing","showAllDayPanel","showCurrentTimeIndicator","shadeUntilCurrentTime","indicatorUpdateInterval","indicatorTime","recurrenceEditMode","cellDuration","maxAppointmentsPerCell","selectedCellData","groupByDate","onAppointmentRendered","onAppointmentClick","onAppointmentDblClick","onAppointmentContextMenu","onCellClick","onCellContextMenu","onAppointmentAdding","onAppointmentAdded","onAppointmentUpdating","onAppointmentUpdated","onAppointmentDeleting","onAppointmentDeleted","onAppointmentFormOpening","onAppointmentTooltipShowing","appointmentTooltipTemplate","appointmentPopupTemplate","crossScrollingEnabled","useDropDownViewSwitcher","startDateExpr","endDateExpr","textExpr","descriptionExpr","allDayExpr","recurrenceRuleExpr","recurrenceExceptionExpr","disabledExpr","remoteFiltering","timeZone","startDateTimeZoneExpr","endDateTimeZoneExpr","noDataText","format","adaptivityEnabled","allowMultipleCellSelection","scrolling","mode","allDayPanelMode","renovateRender","_draggingMode","_appointmentTooltipOffset","x","y","_appointmentTooltipButtonsPosition","_appointmentTooltipOpenButtonText","_dropDownButtonIcon","_appointmentCountPerCell","_collectorOffset","_appointmentOffset","toolbar","location","defaultElement","integrationOptions","useDeferUpdateForTemplates","filteredItems","_filteredItems","value","preparedItems","_preparedItems","option","currentViewType","type","timeZoneCalculator","_timeZoneCalculator","_setDeprecatedOptions","_deprecatedOptions","since","message","_defaultOptionsRules","device","real","deviceType","isSimulator","options","focusStateEnabled","current","generic","data","index","element","text","split","forEach","span","addClass","append","_postponeDataSourceLoading","promise","postponedOperations","add","_reloadDataSource","bind","_postponeResourceLoading","whenLoaded","_getCurrentViewOption","resolveCallbacks","done","resolve","_optionChanged","args","_this$_header","_this$_header2","_this$_header4","name","_updateOption","_dateOption","_workSpace","_header","getStartViewDate","_appointments","_filterAppointmentsByDate","_initDataSource","appointmentDataProvider","setDataSource","_dataSource","_getCurrentViewOptions","repaint","_this$_header3","_validateDayHours","_validateCellDuration","items","allowDrag","_allowDragging","allowResize","_allowResizing","itemTemplate","_getAppointmentTemplate","_this$_header5","_refreshWorkSpace","_headerConfig","_dataAccessors","agendaResourceProcessor","initializeState","updateInstances","_createAppointmentPopupForm","_actions","_createActionByOption","_getAppointmentRenderedAction","_readyToRenderAppointments","_getAppointmentsToRepaint","_dimensionChanged","_initEditing","_editing","_bringEditingModeToAppointments","hideAppointmentTooltip","_cleanPopup","_updateExpression","updateDataAccessors","_initAppointmentTemplate","_toggleAdaptiveClass","_isHorizontalVirtualScrolling","fullName","optionName","optionValue","deserializeDate","_getSerializationFormat","getDateSerializationFormat","editingConfig","allowDelete","_isAgenda","allowAllDayResize","_supportAllDayResizing","getLayoutManager","appointmentRenderingStrategyName","_allowAllDayResizing","intervalCount","_isAllDayExpanded","hasAllDayAppointments","_getTimezoneOffsetByOption","date","calculateTimezoneByValue","dateRange","getDateRange","startDate","createDate","path","endDate","filterByDate","result","load","_fireContentReadyAction","fail","reject","isLoading","container","$element","position","of","contentReadyBase","fireContentReady","_workSpaceRecalculation","_this$_workSpaceRecal","_isVisible","_toggleSmallClass","workspace","getWorkSpace","appointments","createAppointmentsMap","_appointmentPopup","triggerResize","updatePopupFullScreenMode","_clean","width","get","toggleClass","_visibilityChanged","visible","_dataSourceOptions","paginate","_init","_initExpressions","startDateTimeZone","endDateTimeZone","allDay","description","recurrenceRule","recurrenceException","disabled","_initActions","_compactAppointmentsHelper","_asyncTemplatesTimers","_dataSourceLoadedCallback","_subscribes","createAppointmentDataProvider","dataAccessors","appointmentDuration","getLoadedResources","getIsVirtualScrolling","isVirtualScrolling","getSupportAllDayRow","supportAllDayRow","getViewType","getViewDirection","viewDirection","getGroupCount","_getGroupCount","getViewDataProvider","viewDataProvider","_initTemplates","_templateManager","addDefaultTemplates","appointmentTooltip","dropDownAppointment","expr","createGetter","property","getDate","getter","valueOf","item","$container","model","getAppointmentsInstance","_renderAppointmentTemplate","_renderContent","_renderContentImpl","_updatePreparedItems","_dataSourceChangedHandler","_renderAppointments","onDataSourceChanged","_currentViewOptions$s","currentViewOptions","_filterAppointments","filter","viewModel","instance","$dateTable","_getDateTable","cleanState","layoutManager","appointmentsMap","getRepaintedAppointments","fields","create","forceIsoDateParsing","exprObj","replace","getResourceDataAccessors","_isReadOnly","prop","Object","prototype","hasOwnProperty","call","_dispose","_this$_recurrenceDial","_appointmentTooltip","dispose","_recurrenceDialog","hideAppointmentPopup","clearTimeout","excludeValidators","_renderFocusTarget","_initMarkup","_renderMainContainer","_renderHeader","_layoutManager","_createComponent","_appointmentsConfig","_getAppointmentTooltipOptions","_isDataSourceLoaded","_isDataSourceLoading","_initMarkupCore","_this$_appointmentPop","_appointmentForm","_this$_appointmentFor","form","createAppointmentForm","createAppointmentPopup","_mainContainer","scheduler","getDataAccessors","createComponent","component","getEditingConfig","getFirstDayOfWeek","getStartDayHour","getCalculatedEndDate","startDateWithStartHour","calculateEndDate","getElement","focus","getResources","getTimeZoneCalculator","getAppointmentFormOpening","processActionResult","arg","canceled","_processActionResult","addAppointment","appointment","updateAppointment","sourceAppointment","updatedAppointment","updateScrollPosition","resourceItem","inAllDayRow","getScrollableContainer","getWorkSpaceScrollableContainer","getAppointmentTemplate","showAppointmentPopup","checkAndDeleteAppointment","isAppointmentInAllDayPanel","createFormattedDateText","targetedAppointment","fire","getAppointmentDisabled","targetedAdapter","deletingOptions","fireOnAppointmentDeleting","cancel","_checkRecurringAppointment","processDeleteAppointment","_getExtraAppointmentTooltipOptions","rtlEnabled","offset","appointmentData","itTakesAllDay","appointmentTakesAllDay","_cleanWorkspace","_renderWorkSpace","fixedContainer","getFixedContainer","allDayContainer","getAllDayContainer","_waitAsyncTemplate","_this$_workSpaceRecal2","isLoaded","_render","_this$getWorkSpace","updateHeaderEmptyCellWidth","length","$header","appendTo","countConfig","_getViewCountConfig","isAdaptive","tabIndex","agendaDuration","onCurrentViewChange","onCurrentDateChange","startViewDate","todayDate","getAgendaResourceProcessor","createGetAppointmentColor","getAppointmentDataProvider","observer","onItemRendered","onItemClick","onItemContextMenu","isRenovatedAppointments","getResizableStep","positionHelper","getDOMElementsMetaData","_this$_workSpace","_this$_workSpace2","isVerticalViewDirection","getRenderingStrategyInstance","getDirection","isVerticalGroupedWorkSpace","_isVerticalGroupedWorkSpace","onContentReady","_this$_workSpace3","getCollectorOffset","needApplyCollectorOffset","getAppointmentDurationInMinutes","log","_getCurrentViewType","_this$_header6","$workSpace","workSpaceComponent","workSpaceConfig","_workSpaceConfig","initDragBehavior","_all","_attachTablesEvents","getWorkArea","_recalculateWorkspace","_getHeaderDate","view","_getViewByName","viewCount","i","_refreshDateTimeIndication","_currentViewOptions$s2","horizontalVirtualScrollingAllowed","orientation","_currentViewOptions$s3","getFilteredItems","accessKey","allDayExpanded","onSelectionChanged","draggingMode","schedulerHeight","schedulerWidth","onSelectedCellsClick","showAddAppointmentPopup","onRenderAppointments","onShowAllDayPanel","getHeaderHeight","DOM","onScrollEnd","updateResizableArea","_isRenovatedRender","hoursInterval","_getTemplate","callback","_options","silent","timer","setTimeout","push","_getTemplateByOption","viewName","detach","remove","getWorkSpaceScrollable","getScrollable","getHeader","_this$_appointmentPop2","rawAppointment","singleAppointment","exceptionDate","isDeleted","isPopupEditing","dragEvent","getField","evalRecurrenceRule","isValid","editMode","_excludeAppointmentFromSeries","_showRecurrenceChangeConfirm","editingMode","moveAppointmentBack","newRawAppointment","singleRawAppointment","keyPropertyName","keyName","canCreateNewAppointment","isToolbarVisible","action","EXCLUDE_FROM_SERIES","excludeInfo","source","_editAppointmentData","_updateAppointment","_createRecurrenceException","_getSerializedDate","join","isAllDay","setHours","getHours","getMinutes","getSeconds","getMilliseconds","serializeDate","seriesText","occurrenceText","messageHtml","showCloseButton","showTitle","buttons","onClick","popupOptions","onHidden","e","copyRootClassesToWrapper","_ignoreCopyRootClassesToWrapperDeprecation","_getUpdatedData","getConvertedFromGrid","isValidDate","isNaN","getTime","targetCell","getTargetCellData","cellStartDate","cellEndDate","appointmentStartDate","appointmentEndDate","resultedStartDate","duration","isKeepAppointmentHours","keepOriginalHours","timeInMs","resultedEndDate","dateCopy","timeZoneOffset","getTimezoneOffsetChangeInMs","rawResult","getTargetedAppointment","settings","getAppointmentSettings","info","getAppointmentInfo","appointmentIndex","_itemIndexKey","adapter","clone","isRecurrent","agendaSettings","rawTargetedAppointment","setTargetedAppointmentResources","displayStartDate","displayEndDate","subscribe","subject","Array","slice","arguments","Error","apply","getDataByDroppableCell","target","onUpdatePrevented","updatingOptions","newData","oldData","performFailAction","err","deferred","_expandAllDayPanel","update","always","storeAppointment","_onDataPromiseCompleted","actionOptions","resolveCallback","callbackResult","state","handlerName","error","getActions","dayHasAppointment","getConvertedToTimeZone","dayTimeStamp","startDateTimeStamp","endDateTimeStamp","resourcesSetter","setter","getGroups","setResourceCallback","apptSettings","_positionMap","groupIndex","_","group","id","setting","getCellDataByCoordinates","left","top","field","_this$_workSpace4","getEndViewDate","cellData","cellGroups","appointmentAdapter","resultAppointment","createNewAppointment","newRawTargetedAppointment","newTargetedAppointment","isCreateAppointment","createPopupAppointment","CREATE","UPDATE","toMs","dateToMilliseconds","setField","saveChanges","_this$_appointmentPop3","saveChangesAsync","showAppointmentTooltip","appointmentConfig","itemData","_getAppointmentColor","deferredColor","showAppointmentTooltipCore","resourceConfig","map","currentAppointmentData","color","targetElement","isAlreadyShown","scrollToTime","hours","minutes","scrollTo","serializedAppointment","addingOptions","deleteAppointment","targetedAppointmentData","deleteRecurrence","firstDayOfWeekIndex","include"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/ui.scheduler.js)\r\n * Version: 22.1.3\r\n * Build date: Mon Jun 13 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport config from \"../../core/config\";\r\nimport devices from \"../../core/devices\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    BindableTemplate\r\n} from \"../../core/templates/bindable_template\";\r\nimport {\r\n    EmptyTemplate\r\n} from \"../../core/templates/empty_template\";\r\nimport Callbacks from \"../../core/utils/callbacks\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    compileGetter\r\n} from \"../../core/utils/data\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../core/utils/position\";\r\nimport dateUtils from \"../../core/utils/date\";\r\nimport dateSerialization from \"../../core/utils/date_serialization\";\r\nimport {\r\n    Deferred,\r\n    when,\r\n    fromPromise\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isDefined,\r\n    isString,\r\n    isObject,\r\n    isFunction,\r\n    isEmptyObject,\r\n    isDeferred,\r\n    isPromise\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport DataHelperMixin from \"../../data_helper\";\r\nimport {\r\n    triggerResizeEvent\r\n} from \"../../events/visibility_change\";\r\nimport dateLocalization from \"../../localization/date\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport {\r\n    custom as customDialog\r\n} from \"../dialog\";\r\nimport {\r\n    isMaterial\r\n} from \"../themes\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport {\r\n    AppointmentPopup,\r\n    ACTION_TO_APPOINTMENT\r\n} from \"./appointmentPopup/popup\";\r\nimport {\r\n    AppointmentForm\r\n} from \"./appointmentPopup/form\";\r\nimport {\r\n    CompactAppointmentsHelper\r\n} from \"./compactAppointmentsHelper\";\r\nimport {\r\n    DesktopTooltipStrategy\r\n} from \"./tooltip_strategies/desktopTooltipStrategy\";\r\nimport {\r\n    MobileTooltipStrategy\r\n} from \"./tooltip_strategies/mobileTooltipStrategy\";\r\nimport {\r\n    hide as hideLoading,\r\n    show as showLoading\r\n} from \"./loading\";\r\nimport AppointmentCollection from \"./appointments/appointmentCollection\";\r\nimport AppointmentLayoutManager from \"./appointments.layout_manager\";\r\nimport {\r\n    SchedulerHeader\r\n} from \"./header/header\";\r\nimport subscribes from \"./subscribes\";\r\nimport {\r\n    getRecurrenceProcessor\r\n} from \"./recurrence\";\r\nimport timeZoneUtils from \"./utils.timeZone\";\r\nimport SchedulerAgenda from \"./workspaces/ui.scheduler.agenda\";\r\nimport SchedulerTimelineDay from \"./workspaces/ui.scheduler.timeline_day\";\r\nimport SchedulerTimelineMonth from \"./workspaces/ui.scheduler.timeline_month\";\r\nimport SchedulerTimelineWeek from \"./workspaces/ui.scheduler.timeline_week\";\r\nimport SchedulerTimelineWorkWeek from \"./workspaces/ui.scheduler.timeline_work_week\";\r\nimport SchedulerWorkSpaceDay from \"./workspaces/ui.scheduler.work_space_day\";\r\nimport SchedulerWorkSpaceMonth from \"./workspaces/ui.scheduler.work_space_month\";\r\nimport SchedulerWorkSpaceWeek from \"./workspaces/ui.scheduler.work_space_week\";\r\nimport SchedulerWorkSpaceWorkWeek from \"./workspaces/ui.scheduler.work_space_work_week\";\r\nimport {\r\n    createAppointmentAdapter\r\n} from \"./appointmentAdapter\";\r\nimport {\r\n    AppointmentTooltipInfo\r\n} from \"./dataStructures\";\r\nimport {\r\n    utils\r\n} from \"./utils\";\r\nimport {\r\n    createExpressions,\r\n    createResourceEditorModel as _createResourceEditorModel,\r\n    getAppointmentColor,\r\n    getCellGroups,\r\n    loadResources,\r\n    setResourceToAppointment\r\n} from \"./resources/utils\";\r\nimport {\r\n    ExpressionUtils\r\n} from \"./expressionUtils\";\r\nimport {\r\n    validateDayHours,\r\n    isDateAndTimeView as _isDateAndTimeView\r\n} from \"../../renovation/ui/scheduler/view_model/to_test/views/utils/base\";\r\nimport {\r\n    renderAppointments\r\n} from \"./appointments/render\";\r\nimport {\r\n    AgendaResourceProcessor\r\n} from \"./resources/agendaResourceProcessor\";\r\nimport {\r\n    AppointmentDataProvider\r\n} from \"./appointments/dataProvider/appointmentDataProvider\";\r\nimport {\r\n    getAppointmentTakesAllDay\r\n} from \"../../renovation/ui/scheduler/appointment/utils/getAppointmentTakesAllDay\";\r\nimport {\r\n    getPreparedDataItems\r\n} from \"../../renovation/ui/scheduler/utils/data\";\r\nimport {\r\n    getCurrentView\r\n} from \"../../renovation/ui/scheduler/model/views\";\r\nimport {\r\n    createTimeZoneCalculator\r\n} from \"../../renovation/ui/scheduler/timeZoneCalculator/createTimeZoneCalculator\";\r\nimport {\r\n    excludeFromRecurrence\r\n} from \"../../renovation/ui/scheduler/utils/recurrence/excludeFromRecurrence\";\r\nvar MINUTES_IN_HOUR = 60;\r\nvar DEFAULT_AGENDA_DURATION = 7;\r\nvar WIDGET_CLASS = \"dx-scheduler\";\r\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\r\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\r\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\r\nvar WIDGET_SMALL_WIDTH = 400;\r\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\r\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\r\nvar DEFAULT_APPOINTMENT_TEMPLATE_NAME = \"item\";\r\nvar DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME = \"appointmentCollector\";\r\nvar DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME = \"dropDownAppointment\";\r\nvar VIEWS_CONFIG = {\r\n    day: {\r\n        workSpace: SchedulerWorkSpaceDay,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    week: {\r\n        workSpace: SchedulerWorkSpaceWeek,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    workWeek: {\r\n        workSpace: SchedulerWorkSpaceWorkWeek,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    month: {\r\n        workSpace: SchedulerWorkSpaceMonth,\r\n        renderingStrategy: \"horizontalMonth\"\r\n    },\r\n    timelineDay: {\r\n        workSpace: SchedulerTimelineDay,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWeek: {\r\n        workSpace: SchedulerTimelineWeek,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWorkWeek: {\r\n        workSpace: SchedulerTimelineWorkWeek,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineMonth: {\r\n        workSpace: SchedulerTimelineMonth,\r\n        renderingStrategy: \"horizontalMonthLine\"\r\n    },\r\n    agenda: {\r\n        workSpace: SchedulerAgenda,\r\n        renderingStrategy: \"agenda\"\r\n    }\r\n};\r\nvar StoreEventNames = {\r\n    ADDING: \"onAppointmentAdding\",\r\n    ADDED: \"onAppointmentAdded\",\r\n    DELETING: \"onAppointmentDeleting\",\r\n    DELETED: \"onAppointmentDeleted\",\r\n    UPDATING: \"onAppointmentUpdating\",\r\n    UPDATED: \"onAppointmentUpdated\"\r\n};\r\nvar RECURRENCE_EDITING_MODE = {\r\n    SERIES: \"editSeries\",\r\n    OCCURENCE: \"editOccurence\",\r\n    CANCEL: \"cancel\"\r\n};\r\nclass Scheduler extends Widget {\r\n    _getDefaultOptions() {\r\n        var defaultOptions = extend(super._getDefaultOptions(), {\r\n            views: [\"day\", \"week\"],\r\n            currentView: \"day\",\r\n            currentDate: dateUtils.trimTime(new Date),\r\n            min: void 0,\r\n            max: void 0,\r\n            dateSerializationFormat: void 0,\r\n            firstDayOfWeek: void 0,\r\n            groups: [],\r\n            resources: [],\r\n            loadedResources: [],\r\n            resourceLoaderMap: new Map,\r\n            dataSource: null,\r\n            customizeDateNavigatorText: void 0,\r\n            appointmentTemplate: DEFAULT_APPOINTMENT_TEMPLATE_NAME,\r\n            dropDownAppointmentTemplate: DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME,\r\n            appointmentCollectorTemplate: DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME,\r\n            dataCellTemplate: null,\r\n            timeCellTemplate: null,\r\n            resourceCellTemplate: null,\r\n            dateCellTemplate: null,\r\n            startDayHour: 0,\r\n            endDayHour: 24,\r\n            editing: {\r\n                allowAdding: true,\r\n                allowDeleting: true,\r\n                allowDragging: true,\r\n                allowResizing: true,\r\n                allowUpdating: true,\r\n                allowTimeZoneEditing: false\r\n            },\r\n            showAllDayPanel: true,\r\n            showCurrentTimeIndicator: true,\r\n            shadeUntilCurrentTime: false,\r\n            indicatorUpdateInterval: 3e5,\r\n            indicatorTime: void 0,\r\n            recurrenceEditMode: \"dialog\",\r\n            cellDuration: 30,\r\n            maxAppointmentsPerCell: \"auto\",\r\n            selectedCellData: [],\r\n            groupByDate: false,\r\n            onAppointmentRendered: null,\r\n            onAppointmentClick: null,\r\n            onAppointmentDblClick: null,\r\n            onAppointmentContextMenu: null,\r\n            onCellClick: null,\r\n            onCellContextMenu: null,\r\n            onAppointmentAdding: null,\r\n            onAppointmentAdded: null,\r\n            onAppointmentUpdating: null,\r\n            onAppointmentUpdated: null,\r\n            onAppointmentDeleting: null,\r\n            onAppointmentDeleted: null,\r\n            onAppointmentFormOpening: null,\r\n            onAppointmentTooltipShowing: null,\r\n            appointmentTooltipTemplate: \"appointmentTooltip\",\r\n            appointmentPopupTemplate: \"appointmentPopup\",\r\n            crossScrollingEnabled: false,\r\n            useDropDownViewSwitcher: false,\r\n            startDateExpr: \"startDate\",\r\n            endDateExpr: \"endDate\",\r\n            textExpr: \"text\",\r\n            descriptionExpr: \"description\",\r\n            allDayExpr: \"allDay\",\r\n            recurrenceRuleExpr: \"recurrenceRule\",\r\n            recurrenceExceptionExpr: \"recurrenceException\",\r\n            disabledExpr: \"disabled\",\r\n            remoteFiltering: false,\r\n            timeZone: \"\",\r\n            startDateTimeZoneExpr: \"startDateTimeZone\",\r\n            endDateTimeZoneExpr: \"endDateTimeZone\",\r\n            noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\r\n            adaptivityEnabled: false,\r\n            allowMultipleCellSelection: true,\r\n            scrolling: {\r\n                mode: \"standard\"\r\n            },\r\n            allDayPanelMode: \"all\",\r\n            renovateRender: true,\r\n            _draggingMode: \"outlook\",\r\n            _appointmentTooltipOffset: {\r\n                x: 0,\r\n                y: 0\r\n            },\r\n            _appointmentTooltipButtonsPosition: \"bottom\",\r\n            _appointmentTooltipOpenButtonText: messageLocalization.format(\"dxScheduler-openAppointment\"),\r\n            _dropDownButtonIcon: \"overflow\",\r\n            _appointmentCountPerCell: 2,\r\n            _collectorOffset: 0,\r\n            _appointmentOffset: 26,\r\n            toolbar: [{\r\n                location: \"before\",\r\n                defaultElement: \"dateNavigator\"\r\n            }, {\r\n                location: \"after\",\r\n                defaultElement: \"viewSwitcher\"\r\n            }]\r\n        });\r\n        return extend(true, defaultOptions, {\r\n            integrationOptions: {\r\n                useDeferUpdateForTemplates: false\r\n            }\r\n        })\r\n    }\r\n    get filteredItems() {\r\n        if (!this._filteredItems) {\r\n            this._filteredItems = []\r\n        }\r\n        return this._filteredItems\r\n    }\r\n    set filteredItems(value) {\r\n        this._filteredItems = value\r\n    }\r\n    get preparedItems() {\r\n        if (!this._preparedItems) {\r\n            this._preparedItems = []\r\n        }\r\n        return this._preparedItems\r\n    }\r\n    set preparedItems(value) {\r\n        this._preparedItems = value\r\n    }\r\n    get currentView() {\r\n        return getCurrentView(this.option(\"currentView\"), this.option(\"views\"))\r\n    }\r\n    get currentViewType() {\r\n        return isObject(this.currentView) ? this.currentView.type : this.currentView\r\n    }\r\n    get timeZoneCalculator() {\r\n        if (!this._timeZoneCalculator) {\r\n            this._timeZoneCalculator = createTimeZoneCalculator(this.option(\"timeZone\"))\r\n        }\r\n        return this._timeZoneCalculator\r\n    }\r\n    _setDeprecatedOptions() {\r\n        super._setDeprecatedOptions();\r\n        extend(this._deprecatedOptions, {\r\n            dropDownAppointmentTemplate: {\r\n                since: \"19.2\",\r\n                message: \"appointmentTooltipTemplate\"\r\n            }\r\n        })\r\n    }\r\n    _defaultOptionsRules() {\r\n        return super._defaultOptionsRules().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return !devices.current().generic\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                editing: {\r\n                    allowDragging: false,\r\n                    allowResizing: false\r\n                }\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return isMaterial()\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                dateCellTemplate: function(data, index, element) {\r\n                    var text = data.text;\r\n                    text.split(\" \").forEach((function(text, index) {\r\n                        var span = $(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\r\n                        $(element).append(span);\r\n                        if (!index) {\r\n                            $(element).append(\" \")\r\n                        }\r\n                    }))\r\n                },\r\n                _appointmentTooltipOffset: {\r\n                    x: 0,\r\n                    y: 11\r\n                },\r\n                _appointmentTooltipButtonsPosition: \"top\",\r\n                _appointmentTooltipOpenButtonText: null,\r\n                _dropDownButtonIcon: \"chevrondown\",\r\n                _appointmentCountPerCell: 1,\r\n                _collectorOffset: 20,\r\n                _appointmentOffset: 30\r\n            }\r\n        }])\r\n    }\r\n    _postponeDataSourceLoading(promise) {\r\n        this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise)\r\n    }\r\n    _postponeResourceLoading() {\r\n        var whenLoaded = this.postponedOperations.add(\"loadResources\", () => {\r\n            var groups = this._getCurrentViewOption(\"groups\");\r\n            return loadResources(groups, this.option(\"resources\"), this.option(\"resourceLoaderMap\"))\r\n        });\r\n        var resolveCallbacks = new Deferred;\r\n        whenLoaded.done(resources => {\r\n            this.option(\"loadedResources\", resources);\r\n            resolveCallbacks.resolve(resources)\r\n        });\r\n        this._postponeDataSourceLoading(whenLoaded);\r\n        return resolveCallbacks.promise()\r\n    }\r\n    _optionChanged(args) {\r\n        var _this$_header, _this$_header2, _this$_header4;\r\n        var value = args.value;\r\n        var name = args.name;\r\n        switch (args.name) {\r\n            case \"customizeDateNavigatorText\":\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"currentDate\":\r\n                value = this._dateOption(name);\r\n                value = dateUtils.trimTime(new Date(value));\r\n                this.option(\"selectedCellData\", []);\r\n                this._workSpace.option(name, new Date(value));\r\n                null === (_this$_header = this._header) || void 0 === _this$_header ? void 0 : _this$_header.option(name, new Date(value));\r\n                null === (_this$_header2 = this._header) || void 0 === _this$_header2 ? void 0 : _this$_header2.option(\"startViewDate\", this.getStartViewDate());\r\n                this._appointments.option(\"items\", []);\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case \"dataSource\":\r\n                this._initDataSource();\r\n                this.appointmentDataProvider.setDataSource(this._dataSource);\r\n                this._postponeResourceLoading().done(resources => {\r\n                    this._filterAppointmentsByDate();\r\n                    this._updateOption(\"workSpace\", \"showAllDayPanel\", this.option(\"showAllDayPanel\"))\r\n                });\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                value = this._dateOption(name);\r\n                this._updateOption(\"header\", name, new Date(value));\r\n                this._updateOption(\"workSpace\", name, new Date(value));\r\n                break;\r\n            case \"views\":\r\n                if (this._getCurrentViewOptions()) {\r\n                    this.repaint()\r\n                } else {\r\n                    var _this$_header3;\r\n                    null === (_this$_header3 = this._header) || void 0 === _this$_header3 ? void 0 : _this$_header3.option(name, value)\r\n                }\r\n                break;\r\n            case \"useDropDownViewSwitcher\":\r\n                null === (_this$_header4 = this._header) || void 0 === _this$_header4 ? void 0 : _this$_header4.option(name, value);\r\n                break;\r\n            case \"currentView\":\r\n                this._validateDayHours();\r\n                this._validateCellDuration();\r\n                this._appointments.option({\r\n                    items: [],\r\n                    allowDrag: this._allowDragging(),\r\n                    allowResize: this._allowResizing(),\r\n                    itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\r\n                });\r\n                this._postponeResourceLoading().done(resources => {\r\n                    var _this$_header5;\r\n                    this._refreshWorkSpace(resources);\r\n                    null === (_this$_header5 = this._header) || void 0 === _this$_header5 ? void 0 : _this$_header5.option(this._headerConfig());\r\n                    this._filterAppointmentsByDate();\r\n                    this._appointments.option(\"allowAllDayResize\", \"day\" !== value)\r\n                });\r\n                break;\r\n            case \"appointmentTemplate\":\r\n                this._appointments.option(\"itemTemplate\", value);\r\n                break;\r\n            case \"dateCellTemplate\":\r\n            case \"resourceCellTemplate\":\r\n            case \"dataCellTemplate\":\r\n            case \"timeCellTemplate\":\r\n                this.repaint();\r\n                break;\r\n            case \"groups\":\r\n                this._postponeResourceLoading().done(resources => {\r\n                    this._refreshWorkSpace(resources);\r\n                    this._filterAppointmentsByDate()\r\n                });\r\n                break;\r\n            case \"resources\":\r\n                this._dataAccessors.resources = createExpressions(this.option(\"resources\"));\r\n                this.agendaResourceProcessor.initializeState(value);\r\n                this.updateInstances();\r\n                this._postponeResourceLoading().done(resources => {\r\n                    this._appointments.option(\"items\", []);\r\n                    this._refreshWorkSpace(resources);\r\n                    this._filterAppointmentsByDate();\r\n                    this._createAppointmentPopupForm()\r\n                });\r\n                break;\r\n            case \"startDayHour\":\r\n            case \"endDayHour\":\r\n                this._validateDayHours();\r\n                this.updateInstances();\r\n                this._appointments.option(\"items\", []);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.repaint();\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case StoreEventNames.ADDING:\r\n            case StoreEventNames.ADDED:\r\n            case StoreEventNames.UPDATING:\r\n            case StoreEventNames.UPDATED:\r\n            case StoreEventNames.DELETING:\r\n            case StoreEventNames.DELETED:\r\n            case \"onAppointmentFormOpening\":\r\n            case \"onAppointmentTooltipShowing\":\r\n                this._actions[name] = this._createActionByOption(name);\r\n                break;\r\n            case \"onAppointmentRendered\":\r\n                this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\r\n                break;\r\n            case \"onAppointmentClick\":\r\n                this._appointments.option(\"onItemClick\", this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentDblClick\":\r\n                this._appointments.option(name, this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentContextMenu\":\r\n                this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\r\n                break;\r\n            case \"noDataText\":\r\n            case \"allowMultipleCellSelection\":\r\n            case \"selectedCellData\":\r\n            case \"accessKey\":\r\n            case \"onCellClick\":\r\n            case \"onCellContextMenu\":\r\n                this._workSpace.option(name, value);\r\n                break;\r\n            case \"crossScrollingEnabled\":\r\n                this._postponeResourceLoading().done(resources => {\r\n                    this._appointments.option(\"items\", []);\r\n                    this._refreshWorkSpace(resources);\r\n                    if (this._readyToRenderAppointments) {\r\n                        this._appointments.option(\"items\", this._getAppointmentsToRepaint())\r\n                    }\r\n                });\r\n                break;\r\n            case \"cellDuration\":\r\n                this._validateCellDuration();\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.option(\"items\", []);\r\n                if (this._readyToRenderAppointments) {\r\n                    this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\r\n                    this._appointments.option(\"items\", this._getAppointmentsToRepaint())\r\n                }\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._updateOption(\"header\", name, value);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.option(name, value);\r\n                super._optionChanged(args);\r\n                break;\r\n            case \"width\":\r\n                this._updateOption(\"header\", name, value);\r\n                if (this.option(\"crossScrollingEnabled\")) {\r\n                    this._updateOption(\"workSpace\", \"width\", value)\r\n                }\r\n                this._updateOption(\"workSpace\", \"schedulerWidth\", value);\r\n                super._optionChanged(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"height\":\r\n                super._optionChanged(args);\r\n                this._dimensionChanged();\r\n                this._updateOption(\"workSpace\", \"schedulerHeight\", value);\r\n                break;\r\n            case \"editing\":\r\n                this._initEditing();\r\n                var editing = this._editing;\r\n                this._bringEditingModeToAppointments(editing);\r\n                this.hideAppointmentTooltip();\r\n                this._cleanPopup();\r\n                break;\r\n            case \"showAllDayPanel\":\r\n                this.updateInstances();\r\n                this.repaint();\r\n                break;\r\n            case \"showCurrentTimeIndicator\":\r\n            case \"indicatorTime\":\r\n            case \"indicatorUpdateInterval\":\r\n            case \"shadeUntilCurrentTime\":\r\n            case \"groupByDate\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this.repaint();\r\n                break;\r\n            case \"appointmentDragging\":\r\n            case \"appointmentTooltipTemplate\":\r\n            case \"appointmentPopupTemplate\":\r\n            case \"recurrenceEditMode\":\r\n            case \"remoteFiltering\":\r\n            case \"timeZone\":\r\n                this.updateInstances();\r\n                this.repaint();\r\n                break;\r\n            case \"dropDownAppointmentTemplate\":\r\n            case \"appointmentCollectorTemplate\":\r\n            case \"_appointmentTooltipOffset\":\r\n            case \"_appointmentTooltipButtonsPosition\":\r\n            case \"_appointmentTooltipOpenButtonText\":\r\n            case \"_dropDownButtonIcon\":\r\n            case \"_appointmentCountPerCell\":\r\n            case \"_collectorOffset\":\r\n            case \"_appointmentOffset\":\r\n                this.repaint();\r\n                break;\r\n            case \"dateSerializationFormat\":\r\n            case \"maxAppointmentsPerCell\":\r\n                break;\r\n            case \"startDateExpr\":\r\n            case \"endDateExpr\":\r\n            case \"startDateTimeZoneExpr\":\r\n            case \"endDateTimeZoneExpr\":\r\n            case \"textExpr\":\r\n            case \"descriptionExpr\":\r\n            case \"allDayExpr\":\r\n            case \"recurrenceRuleExpr\":\r\n            case \"recurrenceExceptionExpr\":\r\n            case \"disabledExpr\":\r\n                this._updateExpression(name, value);\r\n                this.appointmentDataProvider.updateDataAccessors(this._dataAccessors);\r\n                this._initAppointmentTemplate();\r\n                this.repaint();\r\n                break;\r\n            case \"adaptivityEnabled\":\r\n                this._toggleAdaptiveClass();\r\n                this.repaint();\r\n                break;\r\n            case \"scrolling\":\r\n                this.option(\"crossScrollingEnabled\", this._isHorizontalVirtualScrolling() || this.option(\"crossScrollingEnabled\"));\r\n                this._updateOption(\"workSpace\", args.fullName, value);\r\n                break;\r\n            case \"allDayPanelMode\":\r\n                this._updateOption(\"workSpace\", args.fullName, value);\r\n                break;\r\n            case \"renovateRender\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                break;\r\n            case \"_draggingMode\":\r\n                this._workSpace.option(\"draggingMode\", value);\r\n                break;\r\n            case \"toolbar\":\r\n                this._header ? this._header.option(\"items\", value) : this.repaint();\r\n                break;\r\n            case \"loadedResources\":\r\n            case \"resourceLoaderMap\":\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _dateOption(optionName) {\r\n        var optionValue = this._getCurrentViewOption(optionName);\r\n        return dateSerialization.deserializeDate(optionValue)\r\n    }\r\n    _getSerializationFormat(optionName) {\r\n        var value = this._getCurrentViewOption(optionName);\r\n        if (\"number\" === typeof value) {\r\n            return \"number\"\r\n        }\r\n        if (!isString(value)) {\r\n            return\r\n        }\r\n        return dateSerialization.getDateSerializationFormat(value)\r\n    }\r\n    _bringEditingModeToAppointments(editing) {\r\n        var editingConfig = {\r\n            allowDelete: editing.allowUpdating && editing.allowDeleting\r\n        };\r\n        if (!this._isAgenda()) {\r\n            editingConfig.allowDrag = editing.allowDragging;\r\n            editingConfig.allowResize = editing.allowResizing;\r\n            editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing()\r\n        }\r\n        this._appointments.option(editingConfig);\r\n        this.repaint()\r\n    }\r\n    _isAgenda() {\r\n        return \"agenda\" === this.getLayoutManager().appointmentRenderingStrategyName\r\n    }\r\n    _allowDragging() {\r\n        return this._editing.allowDragging && !this._isAgenda()\r\n    }\r\n    _allowResizing() {\r\n        return this._editing.allowResizing && !this._isAgenda()\r\n    }\r\n    _allowAllDayResizing() {\r\n        return this._editing.allowResizing && this._supportAllDayResizing()\r\n    }\r\n    _supportAllDayResizing() {\r\n        return \"day\" !== this.currentViewType || this.currentView.intervalCount > 1\r\n    }\r\n    _isAllDayExpanded() {\r\n        return this.option(\"showAllDayPanel\") && this.appointmentDataProvider.hasAllDayAppointments(this.filteredItems, this.preparedItems)\r\n    }\r\n    _getTimezoneOffsetByOption(date) {\r\n        return timeZoneUtils.calculateTimezoneByValue(this.option(\"timeZone\"), date)\r\n    }\r\n    _filterAppointmentsByDate() {\r\n        var dateRange = this._workSpace.getDateRange();\r\n        var startDate = this.timeZoneCalculator.createDate(dateRange[0], {\r\n            path: \"fromGrid\"\r\n        });\r\n        var endDate = this.timeZoneCalculator.createDate(dateRange[1], {\r\n            path: \"fromGrid\"\r\n        });\r\n        this.appointmentDataProvider.filterByDate(startDate, endDate, this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"))\r\n    }\r\n    _reloadDataSource() {\r\n        var result = new Deferred;\r\n        if (this._dataSource) {\r\n            this._dataSource.load().done(function() {\r\n                hideLoading();\r\n                this._fireContentReadyAction(result)\r\n            }.bind(this)).fail((function() {\r\n                hideLoading();\r\n                result.reject()\r\n            }));\r\n            this._dataSource.isLoading() && showLoading({\r\n                container: this.$element(),\r\n                position: {\r\n                    of: this.$element()\r\n                }\r\n            })\r\n        } else {\r\n            this._fireContentReadyAction(result)\r\n        }\r\n        return result.promise()\r\n    }\r\n    _fireContentReadyAction(result) {\r\n        var contentReadyBase = super._fireContentReadyAction.bind(this);\r\n        var fireContentReady = () => {\r\n            contentReadyBase();\r\n            null === result || void 0 === result ? void 0 : result.resolve()\r\n        };\r\n        if (this._workSpaceRecalculation) {\r\n            var _this$_workSpaceRecal;\r\n            null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(() => {\r\n                fireContentReady()\r\n            })\r\n        } else {\r\n            fireContentReady()\r\n        }\r\n    }\r\n    _dimensionChanged() {\r\n        if (!this._isVisible()) {\r\n            return\r\n        }\r\n        this._toggleSmallClass();\r\n        var workspace = this.getWorkSpace();\r\n        if (!this._isAgenda() && this.filteredItems && workspace) {\r\n            workspace.option(\"allDayExpanded\", this._isAllDayExpanded());\r\n            workspace._dimensionChanged();\r\n            var appointments = this.getLayoutManager().createAppointmentsMap(this.filteredItems);\r\n            this._appointments.option(\"items\", appointments)\r\n        }\r\n        this.hideAppointmentTooltip();\r\n        this._appointmentPopup.triggerResize();\r\n        this._appointmentPopup.updatePopupFullScreenMode()\r\n    }\r\n    _clean() {\r\n        this._cleanPopup();\r\n        super._clean()\r\n    }\r\n    _toggleSmallClass() {\r\n        var width = getBoundingRect(this.$element().get(0)).width;\r\n        this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH)\r\n    }\r\n    _toggleAdaptiveClass() {\r\n        this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"))\r\n    }\r\n    _visibilityChanged(visible) {\r\n        visible && this._dimensionChanged()\r\n    }\r\n    _dataSourceOptions() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    }\r\n    _init() {\r\n        this._initExpressions({\r\n            startDate: this.option(\"startDateExpr\"),\r\n            endDate: this.option(\"endDateExpr\"),\r\n            startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\r\n            endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\r\n            allDay: this.option(\"allDayExpr\"),\r\n            text: this.option(\"textExpr\"),\r\n            description: this.option(\"descriptionExpr\"),\r\n            recurrenceRule: this.option(\"recurrenceRuleExpr\"),\r\n            recurrenceException: this.option(\"recurrenceExceptionExpr\"),\r\n            disabled: this.option(\"disabledExpr\")\r\n        });\r\n        super._init();\r\n        this._initDataSource();\r\n        this.$element().addClass(WIDGET_CLASS);\r\n        this._initEditing();\r\n        this.updateInstances();\r\n        this._initActions();\r\n        this._compactAppointmentsHelper = new CompactAppointmentsHelper(this);\r\n        this._asyncTemplatesTimers = [];\r\n        this._dataSourceLoadedCallback = Callbacks();\r\n        this._subscribes = subscribes;\r\n        this.agendaResourceProcessor = new AgendaResourceProcessor(this.option(\"resources\"))\r\n    }\r\n    createAppointmentDataProvider() {\r\n        this.appointmentDataProvider = new AppointmentDataProvider({\r\n            dataSource: this._dataSource,\r\n            dataAccessors: this._dataAccessors,\r\n            timeZoneCalculator: this.timeZoneCalculator,\r\n            dateSerializationFormat: this.option(\"dateSerializationFormat\"),\r\n            resources: this.option(\"resources\"),\r\n            startDayHour: this._getCurrentViewOption(\"startDayHour\"),\r\n            endDayHour: this._getCurrentViewOption(\"endDayHour\"),\r\n            appointmentDuration: this._getCurrentViewOption(\"cellDuration\"),\r\n            allDayPanelMode: this._getCurrentViewOption(\"allDayPanelMode\"),\r\n            showAllDayPanel: this.option(\"showAllDayPanel\"),\r\n            getLoadedResources: () => this.option(\"loadedResources\"),\r\n            getIsVirtualScrolling: () => this.isVirtualScrolling(),\r\n            getSupportAllDayRow: () => this._workSpace.supportAllDayRow(),\r\n            getViewType: () => this._workSpace.type,\r\n            getViewDirection: () => this._workSpace.viewDirection,\r\n            getDateRange: () => this._workSpace.getDateRange(),\r\n            getGroupCount: () => this._workSpace._getGroupCount(),\r\n            getViewDataProvider: () => this._workSpace.viewDataProvider\r\n        })\r\n    }\r\n    updateInstances() {\r\n        this._timeZoneCalculator = null;\r\n        if (this.getWorkSpace()) {\r\n            this.createAppointmentDataProvider()\r\n        }\r\n    }\r\n    _initTemplates() {\r\n        this._initAppointmentTemplate();\r\n        this._templateManager.addDefaultTemplates({\r\n            appointmentTooltip: new EmptyTemplate,\r\n            dropDownAppointment: new EmptyTemplate\r\n        });\r\n        super._initTemplates()\r\n    }\r\n    _initAppointmentTemplate() {\r\n        var {\r\n            expr: expr\r\n        } = this._dataAccessors;\r\n        var createGetter = property => compileGetter(\"appointmentData.\".concat(property));\r\n        var getDate = getter => data => {\r\n            var value = getter(data);\r\n            if (value instanceof Date) {\r\n                return value.valueOf()\r\n            }\r\n            return value\r\n        };\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new BindableTemplate(($container, data, model) => this.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model), [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\r\n                text: createGetter(expr.textExpr),\r\n                startDate: getDate(createGetter(expr.startDateExpr)),\r\n                endDate: getDate(createGetter(expr.endDateExpr)),\r\n                startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\r\n                endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\r\n                allDay: createGetter(expr.allDayExpr),\r\n                recurrenceRule: createGetter(expr.recurrenceRuleExpr)\r\n            })\r\n        })\r\n    }\r\n    _renderContent() {\r\n        this._renderContentImpl()\r\n    }\r\n    _updatePreparedItems(items) {\r\n        this.preparedItems = getPreparedDataItems(items, this._dataAccessors, this._getCurrentViewOption(\"cellDuration\"), this.timeZoneCalculator)\r\n    }\r\n    _dataSourceChangedHandler(result) {\r\n        if (this._readyToRenderAppointments) {\r\n            this._workSpaceRecalculation.done(function() {\r\n                this._updatePreparedItems(result);\r\n                this._renderAppointments();\r\n                this.getWorkSpace().onDataSourceChanged(this.filteredItems)\r\n            }.bind(this))\r\n        }\r\n    }\r\n    isVirtualScrolling() {\r\n        var _currentViewOptions$s;\r\n        var workspace = this.getWorkSpace();\r\n        if (workspace) {\r\n            return workspace.isVirtualScrolling()\r\n        }\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var scrolling = this.option(\"scrolling\");\r\n        return \"virtual\" === (null === scrolling || void 0 === scrolling ? void 0 : scrolling.mode) || \"virtual\" === (null === currentViewOptions || void 0 === currentViewOptions ? void 0 : null === (_currentViewOptions$s = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s ? void 0 : _currentViewOptions$s.mode)\r\n    }\r\n    _filterAppointments() {\r\n        this.filteredItems = this.appointmentDataProvider.filter(this.preparedItems)\r\n    }\r\n    _renderAppointments() {\r\n        var workspace = this.getWorkSpace();\r\n        this._filterAppointments();\r\n        workspace.option(\"allDayExpanded\", this._isAllDayExpanded());\r\n        var viewModel = [];\r\n        if (this._isVisible()) {\r\n            viewModel = this._getAppointmentsToRepaint()\r\n        }\r\n        if (this.option(\"isRenovatedAppointments\")) {\r\n            renderAppointments({\r\n                instance: this,\r\n                $dateTable: this.getWorkSpace()._getDateTable(),\r\n                viewModel: viewModel\r\n            })\r\n        } else {\r\n            this._appointments.option(\"items\", viewModel)\r\n        }\r\n        this.appointmentDataProvider.cleanState()\r\n    }\r\n    _getAppointmentsToRepaint() {\r\n        var layoutManager = this.getLayoutManager();\r\n        var appointmentsMap = layoutManager.createAppointmentsMap(this.filteredItems);\r\n        if (this.option(\"isRenovatedAppointments\")) {\r\n            var appointmentTemplate = this.option(\"appointmentTemplate\") !== DEFAULT_APPOINTMENT_TEMPLATE_NAME ? this.option(\"appointmentTemplate\") : void 0;\r\n            return {\r\n                appointments: appointmentsMap,\r\n                appointmentTemplate: appointmentTemplate\r\n            }\r\n        }\r\n        return layoutManager.getRepaintedAppointments(appointmentsMap, this.getAppointmentsInstance().option(\"items\"))\r\n    }\r\n    _initExpressions(fields) {\r\n        this._dataAccessors = utils.dataAccessors.create(fields, this._dataAccessors, config().forceIsoDateParsing, this.option(\"dateSerializationFormat\"));\r\n        this._dataAccessors.resources = createExpressions(this.option(\"resources\"))\r\n    }\r\n    _updateExpression(name, value) {\r\n        var exprObj = {};\r\n        exprObj[name.replace(\"Expr\", \"\")] = value;\r\n        this._initExpressions(exprObj)\r\n    }\r\n    getResourceDataAccessors() {\r\n        return this._dataAccessors.resources\r\n    }\r\n    _initEditing() {\r\n        var editing = this.option(\"editing\");\r\n        this._editing = {\r\n            allowAdding: !!editing,\r\n            allowUpdating: !!editing,\r\n            allowDeleting: !!editing,\r\n            allowResizing: !!editing,\r\n            allowDragging: !!editing\r\n        };\r\n        if (isObject(editing)) {\r\n            this._editing = extend(this._editing, editing)\r\n        }\r\n        this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\r\n        this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\r\n        this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly())\r\n    }\r\n    _isReadOnly() {\r\n        var result = true;\r\n        var editing = this._editing;\r\n        for (var prop in editing) {\r\n            if (Object.prototype.hasOwnProperty.call(editing, prop)) {\r\n                result = result && !editing[prop]\r\n            }\r\n        }\r\n        return result\r\n    }\r\n    _dispose() {\r\n        var _this$_recurrenceDial;\r\n        this._appointmentTooltip && this._appointmentTooltip.dispose();\r\n        null === (_this$_recurrenceDial = this._recurrenceDialog) || void 0 === _this$_recurrenceDial ? void 0 : _this$_recurrenceDial.hide(RECURRENCE_EDITING_MODE.CANCEL);\r\n        this.hideAppointmentPopup();\r\n        this.hideAppointmentTooltip();\r\n        this._asyncTemplatesTimers.forEach(clearTimeout);\r\n        this._asyncTemplatesTimers = [];\r\n        super._dispose()\r\n    }\r\n    _initActions() {\r\n        this._actions = {\r\n            onAppointmentAdding: this._createActionByOption(StoreEventNames.ADDING),\r\n            onAppointmentAdded: this._createActionByOption(StoreEventNames.ADDED),\r\n            onAppointmentUpdating: this._createActionByOption(StoreEventNames.UPDATING),\r\n            onAppointmentUpdated: this._createActionByOption(StoreEventNames.UPDATED),\r\n            onAppointmentDeleting: this._createActionByOption(StoreEventNames.DELETING),\r\n            onAppointmentDeleted: this._createActionByOption(StoreEventNames.DELETED),\r\n            onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\"),\r\n            onAppointmentTooltipShowing: this._createActionByOption(\"onAppointmentTooltipShowing\")\r\n        }\r\n    }\r\n    _getAppointmentRenderedAction() {\r\n        return this._createActionByOption(\"onAppointmentRendered\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    }\r\n    _renderFocusTarget() {\r\n        return noop()\r\n    }\r\n    _initMarkup() {\r\n        super._initMarkup();\r\n        this._validateDayHours();\r\n        this._validateCellDuration();\r\n        this._renderMainContainer();\r\n        this._renderHeader();\r\n        this._layoutManager = new AppointmentLayoutManager(this);\r\n        this._appointments = this._createComponent(\"<div>\", AppointmentCollection, this._appointmentsConfig());\r\n        this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\r\n        this._appointmentTooltip = new(this.option(\"adaptivityEnabled\") ? MobileTooltipStrategy : DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\r\n        this._createAppointmentPopupForm();\r\n        if (this._isDataSourceLoaded() || this._isDataSourceLoading()) {\r\n            this._initMarkupCore(this.option(\"loadedResources\"));\r\n            this._dataSourceChangedHandler(this._dataSource.items());\r\n            this._fireContentReadyAction()\r\n        } else {\r\n            var groups = this._getCurrentViewOption(\"groups\");\r\n            loadResources(groups, this.option(\"resources\"), this.option(\"resourceLoaderMap\")).done(resources => {\r\n                this.option(\"loadedResources\", resources);\r\n                this._initMarkupCore(resources);\r\n                this._reloadDataSource()\r\n            })\r\n        }\r\n    }\r\n    _createAppointmentPopupForm() {\r\n        var _this$_appointmentPop;\r\n        if (this._appointmentForm) {\r\n            var _this$_appointmentFor;\r\n            null === (_this$_appointmentFor = this._appointmentForm.form) || void 0 === _this$_appointmentFor ? void 0 : _this$_appointmentFor.dispose()\r\n        }\r\n        this._appointmentForm = this.createAppointmentForm();\r\n        null === (_this$_appointmentPop = this._appointmentPopup) || void 0 === _this$_appointmentPop ? void 0 : _this$_appointmentPop.dispose();\r\n        this._appointmentPopup = this.createAppointmentPopup(this._appointmentForm)\r\n    }\r\n    _renderMainContainer() {\r\n        this._mainContainer = $(\"<div>\").addClass(\"dx-scheduler-container\");\r\n        this.$element().append(this._mainContainer)\r\n    }\r\n    createAppointmentForm() {\r\n        var scheduler = {\r\n            createResourceEditorModel: () => _createResourceEditorModel(this.option(\"resources\"), this.option(\"loadedResources\")),\r\n            getDataAccessors: () => this._dataAccessors,\r\n            createComponent: (element, component, options) => this._createComponent(element, component, options),\r\n            getEditingConfig: () => this._editing,\r\n            getFirstDayOfWeek: () => this.option(\"firstDayOfWeek\"),\r\n            getStartDayHour: () => this.option(\"startDayHour\"),\r\n            getCalculatedEndDate: startDateWithStartHour => this._workSpace.calculateEndDate(startDateWithStartHour)\r\n        };\r\n        return new AppointmentForm(scheduler)\r\n    }\r\n    createAppointmentPopup(form) {\r\n        var scheduler = {\r\n            getElement: () => this.$element(),\r\n            createComponent: (element, component, options) => this._createComponent(element, component, options),\r\n            focus: () => this.focus(),\r\n            getResources: () => this.option(\"resources\"),\r\n            getEditingConfig: () => this._editing,\r\n            getTimeZoneCalculator: () => this.timeZoneCalculator,\r\n            getDataAccessors: () => this._dataAccessors,\r\n            getAppointmentFormOpening: () => this._actions.onAppointmentFormOpening,\r\n            processActionResult: (arg, canceled) => this._processActionResult(arg, canceled),\r\n            addAppointment: appointment => this.addAppointment(appointment),\r\n            updateAppointment: (sourceAppointment, updatedAppointment) => this.updateAppointment(sourceAppointment, updatedAppointment),\r\n            updateScrollPosition: (startDate, resourceItem, inAllDayRow) => {\r\n                this._workSpace.updateScrollPosition(startDate, resourceItem, inAllDayRow)\r\n            }\r\n        };\r\n        return new AppointmentPopup(scheduler, form)\r\n    }\r\n    _getAppointmentTooltipOptions() {\r\n        return {\r\n            createComponent: this._createComponent.bind(this),\r\n            container: this.$element(),\r\n            getScrollableContainer: this.getWorkSpaceScrollableContainer.bind(this),\r\n            addDefaultTemplates: this._templateManager.addDefaultTemplates.bind(this._templateManager),\r\n            getAppointmentTemplate: this._getAppointmentTemplate.bind(this),\r\n            showAppointmentPopup: this.showAppointmentPopup.bind(this),\r\n            checkAndDeleteAppointment: this.checkAndDeleteAppointment.bind(this),\r\n            isAppointmentInAllDayPanel: this.isAppointmentInAllDayPanel.bind(this),\r\n            createFormattedDateText: (appointment, targetedAppointment, format) => this.fire(\"getTextAndFormatDate\", appointment, targetedAppointment, format),\r\n            getAppointmentDisabled: appointment => createAppointmentAdapter(appointment, this._dataAccessors, this.timeZoneCalculator).disabled\r\n        }\r\n    }\r\n    checkAndDeleteAppointment(appointment, targetedAppointment) {\r\n        var targetedAdapter = createAppointmentAdapter(targetedAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var deletingOptions = this.fireOnAppointmentDeleting(appointment, targetedAdapter);\r\n        if (!deletingOptions.cancel) {\r\n            this._checkRecurringAppointment(appointment, targetedAppointment, targetedAdapter.startDate, () => {\r\n                this.processDeleteAppointment(appointment, deletingOptions)\r\n            }, true)\r\n        }\r\n    }\r\n    _getExtraAppointmentTooltipOptions() {\r\n        return {\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            editing: this.option(\"editing\"),\r\n            offset: this.option(\"_appointmentTooltipOffset\")\r\n        }\r\n    }\r\n    isAppointmentInAllDayPanel(appointmentData) {\r\n        var workSpace = this._workSpace;\r\n        var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\r\n        return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\")\r\n    }\r\n    _initMarkupCore(resources) {\r\n        this._readyToRenderAppointments = hasWindow();\r\n        this._workSpace && this._cleanWorkspace();\r\n        this._renderWorkSpace(resources);\r\n        this._appointments.option({\r\n            fixedContainer: this._workSpace.getFixedContainer(),\r\n            allDayContainer: this._workSpace.getAllDayContainer()\r\n        });\r\n        this._waitAsyncTemplate(() => {\r\n            var _this$_workSpaceRecal2;\r\n            return null === (_this$_workSpaceRecal2 = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal2 ? void 0 : _this$_workSpaceRecal2.resolve()\r\n        });\r\n        this.createAppointmentDataProvider();\r\n        this._filterAppointmentsByDate()\r\n    }\r\n    _isDataSourceLoaded() {\r\n        return this._dataSource && this._dataSource.isLoaded()\r\n    }\r\n    _render() {\r\n        var _this$getWorkSpace;\r\n        this._toggleSmallClass();\r\n        this._toggleAdaptiveClass();\r\n        null === (_this$getWorkSpace = this.getWorkSpace()) || void 0 === _this$getWorkSpace ? void 0 : _this$getWorkSpace.updateHeaderEmptyCellWidth();\r\n        super._render()\r\n    }\r\n    _renderHeader() {\r\n        if (0 !== this.option(\"toolbar\").length) {\r\n            var $header = $(\"<div>\").appendTo(this._mainContainer);\r\n            this._header = this._createComponent($header, SchedulerHeader, this._headerConfig())\r\n        }\r\n    }\r\n    _headerConfig() {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var countConfig = this._getViewCountConfig();\r\n        var result = extend({\r\n            firstDayOfWeek: this.getFirstDayOfWeek(),\r\n            currentView: this.option(\"currentView\"),\r\n            isAdaptive: this.option(\"adaptivityEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\r\n            customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\"),\r\n            agendaDuration: currentViewOptions.agendaDuration || DEFAULT_AGENDA_DURATION\r\n        }, currentViewOptions);\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.views = this.option(\"views\");\r\n        result.min = new Date(this._dateOption(\"min\"));\r\n        result.max = new Date(this._dateOption(\"max\"));\r\n        result.currentDate = dateUtils.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        result.onCurrentViewChange = name => {\r\n            this.option(\"currentView\", name)\r\n        }, result.onCurrentDateChange = date => {\r\n            this.option(\"currentDate\", date)\r\n        };\r\n        result.items = this.option(\"toolbar\");\r\n        result.startViewDate = this.getStartViewDate();\r\n        result.todayDate = () => {\r\n            var result = this.timeZoneCalculator.createDate(new Date, {\r\n                path: \"toGrid\"\r\n            });\r\n            return result\r\n        };\r\n        return result\r\n    }\r\n    _appointmentsConfig() {\r\n        var config = {\r\n            getResources: () => this.option(\"resources\"),\r\n            getResourceDataAccessors: this.getResourceDataAccessors.bind(this),\r\n            getAgendaResourceProcessor: () => this.agendaResourceProcessor,\r\n            getAppointmentColor: this.createGetAppointmentColor(),\r\n            getAppointmentDataProvider: () => this.appointmentDataProvider,\r\n            dataAccessors: this._dataAccessors,\r\n            observer: this,\r\n            onItemRendered: this._getAppointmentRenderedAction(),\r\n            onItemClick: this._createActionByOption(\"onAppointmentClick\"),\r\n            onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\r\n            onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            allowDrag: this._allowDragging(),\r\n            allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\r\n            allowResize: this._allowResizing(),\r\n            allowAllDayResize: this._allowAllDayResizing(),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            currentView: this.currentView,\r\n            groups: this._getCurrentViewOption(\"groups\"),\r\n            isRenovatedAppointments: this.option(\"isRenovatedAppointments\"),\r\n            timeZoneCalculator: this.timeZoneCalculator,\r\n            getResizableStep: () => this._workSpace ? this._workSpace.positionHelper.getResizableStep() : 0,\r\n            getDOMElementsMetaData: () => {\r\n                var _this$_workSpace;\r\n                return null === (_this$_workSpace = this._workSpace) || void 0 === _this$_workSpace ? void 0 : _this$_workSpace.getDOMElementsMetaData()\r\n            },\r\n            getViewDataProvider: () => {\r\n                var _this$_workSpace2;\r\n                return null === (_this$_workSpace2 = this._workSpace) || void 0 === _this$_workSpace2 ? void 0 : _this$_workSpace2.viewDataProvider\r\n            },\r\n            isVerticalViewDirection: () => \"vertical\" === this.getRenderingStrategyInstance().getDirection(),\r\n            isVerticalGroupedWorkSpace: () => this._workSpace._isVerticalGroupedWorkSpace(),\r\n            isDateAndTimeView: () => _isDateAndTimeView(this._workSpace.type),\r\n            onContentReady: () => {\r\n                var _this$_workSpace3;\r\n                null === (_this$_workSpace3 = this._workSpace) || void 0 === _this$_workSpace3 ? void 0 : _this$_workSpace3.option(\"allDayExpanded\", this._isAllDayExpanded())\r\n            }\r\n        };\r\n        return config\r\n    }\r\n    getCollectorOffset() {\r\n        if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\r\n            return this.option(\"_collectorOffset\")\r\n        } else {\r\n            return 0\r\n        }\r\n    }\r\n    getAppointmentDurationInMinutes() {\r\n        return this._getCurrentViewOption(\"cellDuration\")\r\n    }\r\n    _validateCellDuration() {\r\n        var endDayHour = this._getCurrentViewOption(\"endDayHour\");\r\n        var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n        var cellDuration = this._getCurrentViewOption(\"cellDuration\");\r\n        if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\r\n            errors.log(\"W1015\")\r\n        }\r\n    }\r\n    _getCurrentViewType() {\r\n        return this.currentViewType\r\n    }\r\n    _renderWorkSpace(groups) {\r\n        var _this$_header6;\r\n        this._readyToRenderAppointments && this._toggleSmallClass();\r\n        var $workSpace = $(\"<div>\").appendTo(this._mainContainer);\r\n        var countConfig = this._getViewCountConfig();\r\n        var workSpaceComponent = VIEWS_CONFIG[this._getCurrentViewType()].workSpace;\r\n        var workSpaceConfig = this._workSpaceConfig(groups, countConfig);\r\n        this._workSpace = this._createComponent($workSpace, workSpaceComponent, workSpaceConfig);\r\n        this._allowDragging() && this._workSpace.initDragBehavior(this, this._all);\r\n        this._workSpace._attachTablesEvents();\r\n        this._workSpace.getWorkArea().append(this._appointments.$element());\r\n        this._recalculateWorkspace();\r\n        countConfig.startDate && (null === (_this$_header6 = this._header) || void 0 === _this$_header6 ? void 0 : _this$_header6.option(\"currentDate\", this._workSpace._getHeaderDate()));\r\n        this._appointments.option(\"_collectorOffset\", this.getCollectorOffset())\r\n    }\r\n    _getViewCountConfig() {\r\n        var currentView = this.option(\"currentView\");\r\n        var view = this._getViewByName(currentView);\r\n        var viewCount = view && view.intervalCount || 1;\r\n        var startDate = view && view.startDate || null;\r\n        return {\r\n            intervalCount: viewCount,\r\n            startDate: startDate\r\n        }\r\n    }\r\n    _getViewByName(name) {\r\n        var views = this.option(\"views\");\r\n        for (var i = 0; i < views.length; i++) {\r\n            if (views[i].name === name || views[i].type === name || views[i] === name) {\r\n                return views[i]\r\n            }\r\n        }\r\n    }\r\n    _recalculateWorkspace() {\r\n        this._workSpaceRecalculation = new Deferred;\r\n        this._waitAsyncTemplate(() => {\r\n            triggerResizeEvent(this._workSpace.$element());\r\n            this._workSpace._refreshDateTimeIndication()\r\n        })\r\n    }\r\n    _workSpaceConfig(groups, countConfig) {\r\n        var _currentViewOptions$s2;\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var scrolling = this.option(\"scrolling\");\r\n        var isVirtualScrolling = \"virtual\" === scrolling.mode || \"virtual\" === (null === (_currentViewOptions$s2 = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s2 ? void 0 : _currentViewOptions$s2.mode);\r\n        var horizontalVirtualScrollingAllowed = isVirtualScrolling && (!isDefined(scrolling.orientation) || [\"horizontal\", \"both\"].filter(item => {\r\n            var _currentViewOptions$s3;\r\n            return scrolling.orientation === item || (null === (_currentViewOptions$s3 = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s3 ? void 0 : _currentViewOptions$s3.orientation) === item\r\n        }).length > 0);\r\n        var crossScrollingEnabled = this.option(\"crossScrollingEnabled\") || horizontalVirtualScrollingAllowed;\r\n        var result = extend({\r\n            resources: this.option(\"resources\"),\r\n            loadedResources: this.option(\"loadedResources\"),\r\n            getFilteredItems: () => this.filteredItems,\r\n            getResourceDataAccessors: this.getResourceDataAccessors.bind(this),\r\n            noDataText: this.option(\"noDataText\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            accessKey: this.option(\"accessKey\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            cellDuration: this.option(\"cellDuration\"),\r\n            showAllDayPanel: this.option(\"showAllDayPanel\"),\r\n            showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\r\n            indicatorTime: this.option(\"indicatorTime\"),\r\n            indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\r\n            shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\r\n            allDayExpanded: this._appointments.option(\"items\"),\r\n            crossScrollingEnabled: crossScrollingEnabled,\r\n            dataCellTemplate: this.option(\"dataCellTemplate\"),\r\n            timeCellTemplate: this.option(\"timeCellTemplate\"),\r\n            resourceCellTemplate: this.option(\"resourceCellTemplate\"),\r\n            dateCellTemplate: this.option(\"dateCellTemplate\"),\r\n            allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\r\n            selectedCellData: this.option(\"selectedCellData\"),\r\n            onSelectionChanged: args => {\r\n                this.option(\"selectedCellData\", args.selectedCellData)\r\n            },\r\n            groupByDate: this._getCurrentViewOption(\"groupByDate\"),\r\n            scrolling: scrolling,\r\n            draggingMode: this.option(\"_draggingMode\"),\r\n            timeZoneCalculator: this.timeZoneCalculator,\r\n            schedulerHeight: this.option(\"height\"),\r\n            schedulerWidth: this.option(\"width\"),\r\n            allDayPanelMode: this.option(\"allDayPanelMode\"),\r\n            onSelectedCellsClick: this.showAddAppointmentPopup.bind(this),\r\n            onRenderAppointments: this._renderAppointments.bind(this),\r\n            onShowAllDayPanel: value => this.option(\"showAllDayPanel\", value),\r\n            getHeaderHeight: () => utils.DOM.getHeaderHeight(this._header),\r\n            onScrollEnd: () => this._appointments.updateResizableArea(),\r\n            renovateRender: this._isRenovatedRender(isVirtualScrolling),\r\n            isRenovatedAppointments: this.option(\"isRenovatedAppointments\")\r\n        }, currentViewOptions);\r\n        result.observer = this;\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.startDate = countConfig.startDate;\r\n        result.groups = groups;\r\n        result.onCellClick = this._createActionByOption(\"onCellClick\");\r\n        result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\r\n        result.currentDate = dateUtils.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        result.hoursInterval = result.cellDuration / 60;\r\n        result.allDayExpanded = false;\r\n        result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\r\n        result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\r\n        result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\r\n        result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\r\n        result.getAppointmentDataProvider = () => this.appointmentDataProvider;\r\n        return result\r\n    }\r\n    _isRenovatedRender(isVirtualScrolling) {\r\n        return this.option(\"renovateRender\") && hasWindow() || isVirtualScrolling\r\n    }\r\n    _waitAsyncTemplate(callback) {\r\n        if (this._options.silent(\"templatesRenderAsynchronously\")) {\r\n            var timer = setTimeout(() => {\r\n                callback();\r\n                clearTimeout(timer)\r\n            });\r\n            this._asyncTemplatesTimers.push(timer)\r\n        } else {\r\n            callback()\r\n        }\r\n    }\r\n    _getCurrentViewOptions() {\r\n        return this.currentView\r\n    }\r\n    _getCurrentViewOption(optionName) {\r\n        if (this.currentView && void 0 !== this.currentView[optionName]) {\r\n            return this.currentView[optionName]\r\n        }\r\n        return this.option(optionName)\r\n    }\r\n    _getAppointmentTemplate(optionName) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (currentViewOptions && currentViewOptions[optionName]) {\r\n            return this._getTemplate(currentViewOptions[optionName])\r\n        }\r\n        return this._getTemplateByOption(optionName)\r\n    }\r\n    _updateOption(viewName, optionName, value) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (!currentViewOptions || !isDefined(currentViewOptions[optionName])) {\r\n            this[\"_\" + viewName].option(optionName, value)\r\n        }\r\n    }\r\n    _refreshWorkSpace(groups) {\r\n        this._cleanWorkspace();\r\n        delete this._workSpace;\r\n        this._renderWorkSpace(groups);\r\n        if (this._readyToRenderAppointments) {\r\n            this._appointments.option({\r\n                fixedContainer: this._workSpace.getFixedContainer(),\r\n                allDayContainer: this._workSpace.getAllDayContainer()\r\n            });\r\n            this._waitAsyncTemplate(() => this._workSpaceRecalculation.resolve())\r\n        }\r\n    }\r\n    _cleanWorkspace() {\r\n        this._appointments.$element().detach();\r\n        this._workSpace._dispose();\r\n        this._workSpace.$element().remove();\r\n        this.option(\"selectedCellData\", [])\r\n    }\r\n    getWorkSpaceScrollable() {\r\n        return this._workSpace.getScrollable()\r\n    }\r\n    getWorkSpaceScrollableContainer() {\r\n        return this._workSpace.getScrollableContainer()\r\n    }\r\n    getWorkSpace() {\r\n        return this._workSpace\r\n    }\r\n    getHeader() {\r\n        return this._header\r\n    }\r\n    _cleanPopup() {\r\n        var _this$_appointmentPop2;\r\n        null === (_this$_appointmentPop2 = this._appointmentPopup) || void 0 === _this$_appointmentPop2 ? void 0 : _this$_appointmentPop2.dispose()\r\n    }\r\n    _checkRecurringAppointment(rawAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent, recurrenceEditMode) {\r\n        var recurrenceRule = ExpressionUtils.getField(this._dataAccessors, \"recurrenceRule\", rawAppointment);\r\n        if (!getRecurrenceProcessor().evalRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\r\n            callback();\r\n            return\r\n        }\r\n        var editMode = recurrenceEditMode || this.option(\"recurrenceEditMode\");\r\n        switch (editMode) {\r\n            case \"series\":\r\n                callback();\r\n                break;\r\n            case \"occurrence\":\r\n                this._excludeAppointmentFromSeries(rawAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\r\n                break;\r\n            default:\r\n                if (dragEvent) {\r\n                    dragEvent.cancel = new Deferred\r\n                }\r\n                this._showRecurrenceChangeConfirm(isDeleted).done(editingMode => {\r\n                    editingMode === RECURRENCE_EDITING_MODE.SERIES && callback();\r\n                    editingMode === RECURRENCE_EDITING_MODE.OCCURENCE && this._excludeAppointmentFromSeries(rawAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent)\r\n                }).fail(() => this._appointments.moveAppointmentBack(dragEvent))\r\n        }\r\n    }\r\n    _excludeAppointmentFromSeries(rawAppointment, newRawAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\r\n        var appointment = excludeFromRecurrence(rawAppointment, exceptionDate, this._dataAccessors, this._timeZoneCalculator);\r\n        var singleRawAppointment = _extends({}, newRawAppointment);\r\n        delete singleRawAppointment[this._dataAccessors.expr.recurrenceExceptionExpr];\r\n        delete singleRawAppointment[this._dataAccessors.expr.recurrenceRuleExpr];\r\n        var keyPropertyName = this.appointmentDataProvider.keyName;\r\n        delete singleRawAppointment[keyPropertyName];\r\n        var canCreateNewAppointment = !isDeleted && !isPopupEditing;\r\n        if (canCreateNewAppointment) {\r\n            this.addAppointment(singleRawAppointment)\r\n        }\r\n        if (isPopupEditing) {\r\n            this._appointmentPopup.show(singleRawAppointment, {\r\n                isToolbarVisible: true,\r\n                action: ACTION_TO_APPOINTMENT.EXCLUDE_FROM_SERIES,\r\n                excludeInfo: {\r\n                    sourceAppointment: rawAppointment,\r\n                    updatedAppointment: appointment.source()\r\n                }\r\n            });\r\n            this._editAppointmentData = rawAppointment\r\n        } else {\r\n            this._updateAppointment(rawAppointment, appointment.source(), () => {\r\n                this._appointments.moveAppointmentBack(dragEvent)\r\n            }, dragEvent)\r\n        }\r\n    }\r\n    _createRecurrenceException(appointment, exceptionDate) {\r\n        var result = [];\r\n        if (appointment.recurrenceException) {\r\n            result.push(appointment.recurrenceException)\r\n        }\r\n        result.push(this._getSerializedDate(exceptionDate, appointment.startDate, appointment.allDay));\r\n        return result.join()\r\n    }\r\n    _getSerializedDate(date, startDate, isAllDay) {\r\n        isAllDay && date.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds(), startDate.getMilliseconds());\r\n        return dateSerialization.serializeDate(date, UTC_FULL_DATE_FORMAT)\r\n    }\r\n    _showRecurrenceChangeConfirm(isDeleted) {\r\n        var message = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\r\n        var seriesText = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\r\n        var occurrenceText = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\r\n        this._recurrenceDialog = customDialog({\r\n            messageHtml: message,\r\n            showCloseButton: true,\r\n            showTitle: true,\r\n            buttons: [{\r\n                text: seriesText,\r\n                onClick: function() {\r\n                    return RECURRENCE_EDITING_MODE.SERIES\r\n                }\r\n            }, {\r\n                text: occurrenceText,\r\n                onClick: function() {\r\n                    return RECURRENCE_EDITING_MODE.OCCURENCE\r\n                }\r\n            }],\r\n            popupOptions: {\r\n                onHidden: e => {\r\n                    e.component.$element().remove()\r\n                },\r\n                copyRootClassesToWrapper: true,\r\n                _ignoreCopyRootClassesToWrapperDeprecation: true\r\n            }\r\n        });\r\n        return this._recurrenceDialog.show()\r\n    }\r\n    _getUpdatedData(rawAppointment) {\r\n        var getConvertedFromGrid = date => date ? this.timeZoneCalculator.createDate(date, {\r\n            path: \"fromGrid\"\r\n        }) : void 0;\r\n        var isValidDate = date => !isNaN(new Date(date).getTime());\r\n        var targetCell = this.getTargetCellData();\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var cellStartDate = getConvertedFromGrid(targetCell.startDate);\r\n        var cellEndDate = getConvertedFromGrid(targetCell.endDate);\r\n        var appointmentStartDate = new Date(appointment.startDate);\r\n        var appointmentEndDate = new Date(appointment.endDate);\r\n        var resultedStartDate = cellStartDate || appointmentStartDate;\r\n        if (!isValidDate(appointmentStartDate)) {\r\n            appointmentStartDate = resultedStartDate\r\n        }\r\n        if (!isValidDate(appointmentEndDate)) {\r\n            appointmentEndDate = cellEndDate\r\n        }\r\n        var duration = appointmentEndDate.getTime() - appointmentStartDate.getTime();\r\n        var isKeepAppointmentHours = this._workSpace.keepOriginalHours() && isValidDate(appointment.startDate) && isValidDate(cellStartDate);\r\n        if (isKeepAppointmentHours) {\r\n            var {\r\n                trimTime: trimTime\r\n            } = dateUtils;\r\n            var startDate = this.timeZoneCalculator.createDate(appointment.startDate, {\r\n                path: \"toGrid\"\r\n            });\r\n            var timeInMs = startDate.getTime() - trimTime(startDate).getTime();\r\n            resultedStartDate = new Date(trimTime(targetCell.startDate).getTime() + timeInMs);\r\n            resultedStartDate = this.timeZoneCalculator.createDate(resultedStartDate, {\r\n                path: \"fromGrid\"\r\n            })\r\n        }\r\n        var result = createAppointmentAdapter({}, this._dataAccessors, this.timeZoneCalculator);\r\n        if (void 0 !== targetCell.allDay) {\r\n            result.allDay = targetCell.allDay\r\n        }\r\n        result.startDate = resultedStartDate;\r\n        var resultedEndDate = new Date(resultedStartDate.getTime() + duration);\r\n        if (this.appointmentTakesAllDay(rawAppointment) && !result.allDay && this._workSpace.supportAllDayRow()) {\r\n            resultedEndDate = this._workSpace.calculateEndDate(resultedStartDate)\r\n        }\r\n        if (appointment.allDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\r\n            var dateCopy = new Date(resultedStartDate);\r\n            dateCopy.setHours(0);\r\n            resultedEndDate = new Date(dateCopy.getTime() + duration);\r\n            if (0 !== resultedEndDate.getHours()) {\r\n                resultedEndDate.setHours(this._getCurrentViewOption(\"endDayHour\"))\r\n            }\r\n        }\r\n        var timeZoneOffset = timeZoneUtils.getTimezoneOffsetChangeInMs(appointmentStartDate, appointmentEndDate, resultedStartDate, resultedEndDate);\r\n        result.endDate = new Date(resultedEndDate.getTime() - timeZoneOffset);\r\n        var rawResult = result.source();\r\n        setResourceToAppointment(this.option(\"resources\"), this.getResourceDataAccessors(), rawResult, targetCell.groups);\r\n        return rawResult\r\n    }\r\n    getTargetedAppointment(appointment, element) {\r\n        var settings = utils.dataAccessors.getAppointmentSettings(element);\r\n        var info = utils.dataAccessors.getAppointmentInfo(element);\r\n        var appointmentIndex = $(element).data(this._appointments._itemIndexKey());\r\n        var adapter = createAppointmentAdapter(appointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var targetedAdapter = adapter.clone();\r\n        if (this._isAgenda() && adapter.isRecurrent) {\r\n            var agendaSettings = settings.agendaSettings;\r\n            targetedAdapter.startDate = ExpressionUtils.getField(this._dataAccessors, \"startDate\", agendaSettings);\r\n            targetedAdapter.endDate = ExpressionUtils.getField(this._dataAccessors, \"endDate\", agendaSettings)\r\n        } else if (settings) {\r\n            targetedAdapter.startDate = info ? info.sourceAppointment.startDate : adapter.startDate;\r\n            targetedAdapter.endDate = info ? info.sourceAppointment.endDate : adapter.endDate\r\n        }\r\n        var rawTargetedAppointment = targetedAdapter.source();\r\n        if (element) {\r\n            this.setTargetedAppointmentResources(rawTargetedAppointment, element, appointmentIndex)\r\n        }\r\n        if (info) {\r\n            rawTargetedAppointment.displayStartDate = new Date(info.appointment.startDate);\r\n            rawTargetedAppointment.displayEndDate = new Date(info.appointment.endDate)\r\n        }\r\n        return rawTargetedAppointment\r\n    }\r\n    subscribe(subject, action) {\r\n        this._subscribes[subject] = subscribes[subject] = action\r\n    }\r\n    fire(subject) {\r\n        var callback = this._subscribes[subject];\r\n        var args = Array.prototype.slice.call(arguments);\r\n        if (!isFunction(callback)) {\r\n            throw errors.Error(\"E1031\", subject)\r\n        }\r\n        return callback.apply(this, args.slice(1))\r\n    }\r\n    getTargetCellData() {\r\n        return this._workSpace.getDataByDroppableCell()\r\n    }\r\n    _updateAppointment(target, rawAppointment, onUpdatePrevented, dragEvent) {\r\n        var updatingOptions = {\r\n            newData: rawAppointment,\r\n            oldData: extend({}, target),\r\n            cancel: false\r\n        };\r\n        var performFailAction = function(err) {\r\n            if (onUpdatePrevented) {\r\n                onUpdatePrevented.call(this)\r\n            }\r\n            if (err && \"Error\" === err.name) {\r\n                throw err\r\n            }\r\n        }.bind(this);\r\n        this._actions[StoreEventNames.UPDATING](updatingOptions);\r\n        if (dragEvent && !isDeferred(dragEvent.cancel)) {\r\n            dragEvent.cancel = new Deferred\r\n        }\r\n        return this._processActionResult(updatingOptions, (function(canceled) {\r\n            var deferred = new Deferred;\r\n            if (!canceled) {\r\n                this._expandAllDayPanel(rawAppointment);\r\n                try {\r\n                    deferred = this.appointmentDataProvider.update(target, rawAppointment).done(() => {\r\n                        dragEvent && dragEvent.cancel.resolve(false)\r\n                    }).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.UPDATED, storeAppointment)).fail(() => performFailAction())\r\n                } catch (err) {\r\n                    performFailAction(err);\r\n                    deferred.resolve()\r\n                }\r\n            } else {\r\n                performFailAction();\r\n                deferred.resolve()\r\n            }\r\n            return deferred.promise()\r\n        }))\r\n    }\r\n    _processActionResult(actionOptions, callback) {\r\n        var deferred = new Deferred;\r\n        var resolveCallback = callbackResult => {\r\n            when(fromPromise(callbackResult)).always(deferred.resolve)\r\n        };\r\n        if (isPromise(actionOptions.cancel)) {\r\n            when(fromPromise(actionOptions.cancel)).always(cancel => {\r\n                if (!isDefined(cancel)) {\r\n                    cancel = \"rejected\" === actionOptions.cancel.state()\r\n                }\r\n                resolveCallback(callback.call(this, cancel))\r\n            })\r\n        } else {\r\n            resolveCallback(callback.call(this, actionOptions.cancel))\r\n        }\r\n        return deferred.promise()\r\n    }\r\n    _expandAllDayPanel(appointment) {\r\n        if (!this._isAllDayExpanded() && this.appointmentTakesAllDay(appointment)) {\r\n            this._workSpace.option(\"allDayExpanded\", true)\r\n        }\r\n    }\r\n    _onDataPromiseCompleted(handlerName, storeAppointment, appointment) {\r\n        var args = {\r\n            appointmentData: appointment || storeAppointment\r\n        };\r\n        if (storeAppointment instanceof Error) {\r\n            args.error = storeAppointment\r\n        } else {\r\n            this._appointmentPopup.visible && this._appointmentPopup.hide()\r\n        }\r\n        this._actions[handlerName](args);\r\n        this._fireContentReadyAction()\r\n    }\r\n    getAppointmentsInstance() {\r\n        return this._appointments\r\n    }\r\n    getLayoutManager() {\r\n        return this._layoutManager\r\n    }\r\n    getRenderingStrategyInstance() {\r\n        return this.getLayoutManager().getRenderingStrategyInstance()\r\n    }\r\n    getActions() {\r\n        return this._actions\r\n    }\r\n    appointmentTakesAllDay(rawAppointment) {\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        return getAppointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"), this._getCurrentViewOption(\"allDayPanelMode\"))\r\n    }\r\n    dayHasAppointment(day, rawAppointment, trimTime) {\r\n        var getConvertedToTimeZone = date => this.timeZoneCalculator.createDate(date, {\r\n            path: \"toGrid\"\r\n        });\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var startDate = new Date(appointment.startDate);\r\n        var endDate = new Date(appointment.endDate);\r\n        startDate = getConvertedToTimeZone(startDate);\r\n        endDate = getConvertedToTimeZone(endDate);\r\n        if (day.getTime() === endDate.getTime()) {\r\n            return startDate.getTime() === endDate.getTime()\r\n        }\r\n        if (trimTime) {\r\n            day = dateUtils.trimTime(day);\r\n            startDate = dateUtils.trimTime(startDate);\r\n            endDate = dateUtils.trimTime(endDate)\r\n        }\r\n        var dayTimeStamp = day.getTime();\r\n        var startDateTimeStamp = startDate.getTime();\r\n        var endDateTimeStamp = endDate.getTime();\r\n        return startDateTimeStamp <= dayTimeStamp && dayTimeStamp <= endDateTimeStamp\r\n    }\r\n    setTargetedAppointmentResources(rawAppointment, element, appointmentIndex) {\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        if (null !== groups && void 0 !== groups && groups.length) {\r\n            var resourcesSetter = this.getResourceDataAccessors().setter;\r\n            var workSpace = this._workSpace;\r\n            var getGroups;\r\n            var setResourceCallback;\r\n            if (this._isAgenda()) {\r\n                getGroups = function() {\r\n                    var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\r\n                    return getCellGroups(apptSettings[0].groupIndex, this.getWorkSpace().option(\"groups\"))\r\n                };\r\n                setResourceCallback = function(_, group) {\r\n                    resourcesSetter[group.name](rawAppointment, group.id)\r\n                }\r\n            } else {\r\n                getGroups = function() {\r\n                    var setting = utils.dataAccessors.getAppointmentSettings(element) || {};\r\n                    return workSpace.getCellDataByCoordinates({\r\n                        left: setting.left,\r\n                        top: setting.top\r\n                    }).groups\r\n                };\r\n                setResourceCallback = function(field, value) {\r\n                    resourcesSetter[field](rawAppointment, value)\r\n                }\r\n            }\r\n            each(getGroups.call(this), setResourceCallback)\r\n        }\r\n    }\r\n    getStartViewDate() {\r\n        var _this$_workSpace4;\r\n        return null === (_this$_workSpace4 = this._workSpace) || void 0 === _this$_workSpace4 ? void 0 : _this$_workSpace4.getStartViewDate()\r\n    }\r\n    getEndViewDate() {\r\n        return this._workSpace.getEndViewDate()\r\n    }\r\n    showAddAppointmentPopup(cellData, cellGroups) {\r\n        var appointmentAdapter = createAppointmentAdapter({}, this._dataAccessors, this.timeZoneCalculator);\r\n        appointmentAdapter.allDay = cellData.allDay;\r\n        appointmentAdapter.startDate = this.timeZoneCalculator.createDate(cellData.startDate, {\r\n            path: \"fromGrid\"\r\n        });\r\n        appointmentAdapter.endDate = this.timeZoneCalculator.createDate(cellData.endDate, {\r\n            path: \"fromGrid\"\r\n        });\r\n        var resultAppointment = extend(appointmentAdapter.source(), cellGroups);\r\n        this.showAppointmentPopup(resultAppointment, true)\r\n    }\r\n    showAppointmentPopup(rawAppointment, createNewAppointment, rawTargetedAppointment) {\r\n        var newRawTargetedAppointment = _extends({}, rawTargetedAppointment);\r\n        if (newRawTargetedAppointment) {\r\n            delete newRawTargetedAppointment.displayStartDate;\r\n            delete newRawTargetedAppointment.displayEndDate\r\n        }\r\n        var appointment = createAppointmentAdapter(newRawTargetedAppointment || rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var newTargetedAppointment = extend({}, rawAppointment, newRawTargetedAppointment);\r\n        var isCreateAppointment = null !== createNewAppointment && void 0 !== createNewAppointment ? createNewAppointment : isEmptyObject(rawAppointment);\r\n        if (isEmptyObject(rawAppointment)) {\r\n            rawAppointment = this.createPopupAppointment()\r\n        }\r\n        if (isCreateAppointment) {\r\n            delete this._editAppointmentData;\r\n            this._editing.allowAdding && this._appointmentPopup.show(rawAppointment, {\r\n                isToolbarVisible: true,\r\n                action: ACTION_TO_APPOINTMENT.CREATE\r\n            })\r\n        } else {\r\n            this._checkRecurringAppointment(rawAppointment, newTargetedAppointment, appointment.startDate, () => {\r\n                this._editAppointmentData = rawAppointment;\r\n                this._appointmentPopup.show(rawAppointment, {\r\n                    isToolbarVisible: this._editing.allowUpdating,\r\n                    action: ACTION_TO_APPOINTMENT.UPDATE\r\n                })\r\n            }, false, true)\r\n        }\r\n    }\r\n    createPopupAppointment() {\r\n        var result = {};\r\n        var toMs = dateUtils.dateToMilliseconds;\r\n        var startDate = new Date(this.option(\"currentDate\"));\r\n        var endDate = new Date(startDate.getTime() + this.option(\"cellDuration\") * toMs(\"minute\"));\r\n        ExpressionUtils.setField(this._dataAccessors, \"startDate\", result, startDate);\r\n        ExpressionUtils.setField(this._dataAccessors, \"endDate\", result, endDate);\r\n        return result\r\n    }\r\n    hideAppointmentPopup(saveChanges) {\r\n        var _this$_appointmentPop3;\r\n        if (null !== (_this$_appointmentPop3 = this._appointmentPopup) && void 0 !== _this$_appointmentPop3 && _this$_appointmentPop3.visible) {\r\n            saveChanges && this._appointmentPopup.saveChangesAsync();\r\n            this._appointmentPopup.hide()\r\n        }\r\n    }\r\n    showAppointmentTooltip(appointment, element, targetedAppointment) {\r\n        if (appointment) {\r\n            var settings = utils.dataAccessors.getAppointmentSettings(element);\r\n            var appointmentConfig = {\r\n                itemData: targetedAppointment || appointment,\r\n                groupIndex: null === settings || void 0 === settings ? void 0 : settings.groupIndex,\r\n                groups: this.option(\"groups\")\r\n            };\r\n            var _getAppointmentColor = this.createGetAppointmentColor();\r\n            var deferredColor = _getAppointmentColor(appointmentConfig);\r\n            var info = new AppointmentTooltipInfo(appointment, targetedAppointment, deferredColor);\r\n            this.showAppointmentTooltipCore(element, [info])\r\n        }\r\n    }\r\n    createGetAppointmentColor() {\r\n        return appointmentConfig => {\r\n            var resourceConfig = {\r\n                resources: this.option(\"resources\"),\r\n                dataAccessors: this.getResourceDataAccessors(),\r\n                loadedResources: this.option(\"loadedResources\"),\r\n                resourceLoaderMap: this.option(\"resourceLoaderMap\")\r\n            };\r\n            return getAppointmentColor(resourceConfig, appointmentConfig)\r\n        }\r\n    }\r\n    showAppointmentTooltipCore(target, data, options) {\r\n        var arg = {\r\n            cancel: false,\r\n            appointments: data.map(item => {\r\n                var result = {\r\n                    appointmentData: item.appointment,\r\n                    currentAppointmentData: _extends({}, item.targetedAppointment),\r\n                    color: item.color\r\n                };\r\n                if (item.settings.info) {\r\n                    var {\r\n                        startDate: startDate,\r\n                        endDate: endDate\r\n                    } = item.settings.info.appointment;\r\n                    result.currentAppointmentData.displayStartDate = startDate;\r\n                    result.currentAppointmentData.displayEndDate = endDate\r\n                }\r\n                return result\r\n            }),\r\n            targetElement: target\r\n        };\r\n        this._createActionByOption(\"onAppointmentTooltipShowing\")(arg);\r\n        if (this._appointmentTooltip.isAlreadyShown(target)) {\r\n            this.hideAppointmentTooltip()\r\n        } else {\r\n            this._processActionResult(arg, canceled => {\r\n                !canceled && this._appointmentTooltip.show(target, data, _extends({}, this._getExtraAppointmentTooltipOptions(), options))\r\n            })\r\n        }\r\n    }\r\n    hideAppointmentTooltip() {\r\n        this._appointmentTooltip && this._appointmentTooltip.hide()\r\n    }\r\n    scrollToTime(hours, minutes, date) {\r\n        errors.log(\"W0002\", \"dxScheduler\", \"scrollToTime\", \"21.1\", 'Use the \"scrollTo\" method instead');\r\n        this._workSpace.scrollToTime(hours, minutes, date)\r\n    }\r\n    scrollTo(date, groups, allDay) {\r\n        this._workSpace.scrollTo(date, groups, allDay)\r\n    }\r\n    _isHorizontalVirtualScrolling() {\r\n        var scrolling = this.option(\"scrolling\");\r\n        var {\r\n            orientation: orientation,\r\n            mode: mode\r\n        } = scrolling;\r\n        var isVirtualScrolling = \"virtual\" === mode;\r\n        return isVirtualScrolling && (\"horizontal\" === orientation || \"both\" === orientation)\r\n    }\r\n    addAppointment(rawAppointment) {\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        appointment.text = appointment.text || \"\";\r\n        var serializedAppointment = appointment.source(true);\r\n        var addingOptions = {\r\n            appointmentData: serializedAppointment,\r\n            cancel: false\r\n        };\r\n        this._actions[StoreEventNames.ADDING](addingOptions);\r\n        return this._processActionResult(addingOptions, canceled => {\r\n            if (canceled) {\r\n                return (new Deferred).resolve()\r\n            }\r\n            this._expandAllDayPanel(serializedAppointment);\r\n            return this.appointmentDataProvider.add(serializedAppointment).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.ADDED, storeAppointment))\r\n        })\r\n    }\r\n    updateAppointment(target, appointment) {\r\n        return this._updateAppointment(target, appointment)\r\n    }\r\n    deleteAppointment(rawAppointment) {\r\n        var deletingOptions = this.fireOnAppointmentDeleting(rawAppointment);\r\n        this.processDeleteAppointment(rawAppointment, deletingOptions)\r\n    }\r\n    fireOnAppointmentDeleting(rawAppointment, targetedAppointmentData) {\r\n        var deletingOptions = {\r\n            appointmentData: rawAppointment,\r\n            targetedAppointmentData: targetedAppointmentData,\r\n            cancel: false\r\n        };\r\n        this._actions[StoreEventNames.DELETING](deletingOptions);\r\n        return deletingOptions\r\n    }\r\n    processDeleteAppointment(rawAppointment, deletingOptions) {\r\n        this._processActionResult(deletingOptions, (function(canceled) {\r\n            if (!canceled) {\r\n                this.appointmentDataProvider.remove(rawAppointment).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.DELETED, storeAppointment, rawAppointment))\r\n            }\r\n        }))\r\n    }\r\n    deleteRecurrence(appointment, date, recurrenceEditMode) {\r\n        this._checkRecurringAppointment(appointment, {}, date, () => {\r\n            this.processDeleteAppointment(appointment, {\r\n                cancel: false\r\n            })\r\n        }, true, false, null, recurrenceEditMode)\r\n    }\r\n    focus() {\r\n        if (this._editAppointmentData) {\r\n            this._appointments.focus()\r\n        } else {\r\n            this._workSpace.focus()\r\n        }\r\n    }\r\n    getFirstDayOfWeek() {\r\n        return isDefined(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : dateLocalization.firstDayOfWeekIndex()\r\n    }\r\n    _validateDayHours() {\r\n        var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n        var endDayHour = this._getCurrentViewOption(\"endDayHour\");\r\n        validateDayHours(startDayHour, endDayHour)\r\n    }\r\n}\r\nScheduler.include(DataHelperMixin);\r\nregisterComponent(\"dxScheduler\", Scheduler);\r\nexport default Scheduler;\r\n"]},"metadata":{},"sourceType":"module"}