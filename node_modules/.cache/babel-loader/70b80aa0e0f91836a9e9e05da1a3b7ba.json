{"ast":null,"code":"/**\n* DevExpress Analytics (core\\internal\\_controlsHelper.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DesignControlsHelper = void 0;\n\nvar ko = require(\"knockout\");\n\nvar utils_1 = require(\"../../serializer/utils\");\n\nvar _getNameHelpers_1 = require(\"./_getNameHelpers\");\n\nvar _visitors_1 = require(\"../utils/_visitors\");\n\nvar DesignControlsHelper = function (_super) {\n  __extends(DesignControlsHelper, _super);\n\n  function DesignControlsHelper(target, handlers, collectionNames) {\n    var _this = _super.call(this) || this;\n\n    _this.target = target;\n    _this.collectionNames = collectionNames;\n    _this._handlers = [];\n    _this._setText = false;\n    _this._visitedCollections = [];\n    _this._subscriptions = [];\n\n    _this.added = function (value) {\n      _this._setText = true;\n\n      _this._collectControls(value);\n\n      _this._setText = false;\n    };\n\n    _this.deleted = function (value) {\n      var allControls = _this.allControls();\n\n      var index = allControls.indexOf(value);\n      allControls.splice(index, 1);\n\n      _visitors_1.collectionsVisitor(value, function (collection) {\n        collection().forEach(function (item) {\n          allControls.splice(allControls.indexOf(item), 1);\n        });\n      });\n\n      _this.allControls.valueHasMutated();\n    };\n\n    _this.allControls = ko.observableArray();\n    var unwrappedTarget = target;\n\n    if (ko.isSubscribable(target)) {\n      _this._disposables.push(target.subscribe(function (newTarget) {\n        _this._visitedCollections = [];\n\n        for (var i = 0, len = _this._subscriptions.length; i < len; i++) {\n          _this._subscriptions[i].dispose();\n        }\n\n        _this._subscriptions = [];\n\n        _this.allControls([]);\n\n        if (newTarget) {\n          _this._collectControls(newTarget);\n        }\n      }));\n\n      unwrappedTarget = target.peek();\n    }\n\n    _this._disposables.push(_this.allControls.subscribe(function (args) {\n      var addedItems = args.filter(function (x) {\n        return x.status === 'added';\n      });\n\n      for (var i = 0; i < addedItems.length; i++) {\n        _this._setName(addedItems[i].value);\n      }\n    }, null, 'arrayChange'));\n\n    unwrappedTarget && _this._collectControls(unwrappedTarget);\n\n    _this._handlers.push.apply(_this._handlers, handlers);\n\n    return _this;\n  }\n\n  DesignControlsHelper.prototype.getNameProperty = function (model) {\n    return model.name;\n  };\n\n  DesignControlsHelper.prototype.getControlByName = function (name) {\n    var control = null;\n    this.allControls().some(function (x) {\n      if (ko.unwrap(x.name) == name) {\n        control = x;\n        return true;\n      }\n\n      return false;\n    });\n    return control;\n  };\n\n  DesignControlsHelper.prototype._setName = function (value) {\n    var _this = this;\n\n    var names = this.allControls().map(function (item) {\n      return ko.unwrap(_this.getNameProperty(item));\n    });\n\n    if (!this.getNameProperty(value)() || names.filter(function (x) {\n      return x === _this.getNameProperty(value)();\n    }).length > 1) {\n      var newName = _getNameHelpers_1.getUniqueNameForNamedObjectsArray(this.allControls(), this._getNamePrefix(value), names);\n\n      this.getNameProperty(value)(newName);\n      this._setText && this._setDefaultText(value);\n    }\n  };\n\n  DesignControlsHelper.prototype._setDefaultText = function (value) {\n    var initialText = value.getControlInfo && value.getControlInfo().defaultVal && value.getControlInfo().defaultVal['@Text'];\n\n    if (this._setText && value['text'] && !value['text']() && (initialText === null || initialText === undefined)) {\n      value['text'](this.getNameProperty(value)());\n    }\n  };\n\n  DesignControlsHelper.prototype._getNamePrefix = function (value) {\n    var controlType = value.controlType || 'Unknown';\n    return controlType.split('.').pop();\n  };\n\n  DesignControlsHelper.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._subscriptions.forEach(function (subscription) {\n      return subscription.dispose();\n    });\n\n    this._subscriptions.splice(0);\n\n    this._visitedCollections.splice(0);\n\n    this._handlers.splice(0);\n\n    this.target = null;\n    this.allControls([]);\n  };\n\n  DesignControlsHelper.prototype.processCollection = function (collection) {};\n\n  DesignControlsHelper.prototype._collectControls = function (target) {\n    var _this = this;\n\n    var array = [target];\n\n    _visitors_1.collectionsVisitor(target, function (collection, owner) {\n      if (_this._visitedCollections.indexOf(collection) === -1) {\n        _this._visitedCollections.push(collection);\n\n        var subscriptionsArray = _this._subscriptions;\n\n        if (owner instanceof utils_1.Disposable) {\n          subscriptionsArray = owner._disposables;\n        }\n\n        var subscription = collection.subscribe(function (args) {\n          args.forEach(function (changeSet) {\n            if (changeSet.moved != undefined) return;\n            _this[changeSet.status] && _this[changeSet.status](changeSet.value);\n\n            _this._handlers.forEach(function (handler) {\n              handler[changeSet.status] && handler[changeSet.status](changeSet.value);\n            });\n          });\n        }, null, 'arrayChange');\n        subscriptionsArray.push({\n          dispose: function () {\n            subscription.dispose();\n            subscription = null;\n\n            _this._visitedCollections.splice(_this._visitedCollections.indexOf(collection), 1);\n          }\n        });\n      }\n\n      _this.processCollection(collection());\n\n      array.push.apply(array, collection());\n    }, this.collectionNames);\n\n    this.allControls.push.apply(this.allControls, array);\n  };\n\n  DesignControlsHelper.prototype.getControls = function (target) {\n    var controls = ko.observableArray();\n\n    _visitors_1.collectionsVisitor(target, function (collection) {\n      controls.push.apply(controls, collection());\n    });\n\n    return controls;\n  };\n\n  return DesignControlsHelper;\n}(utils_1.Disposable);\n\nexports.DesignControlsHelper = DesignControlsHelper;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/@devexpress/analytics-core/core/internal/_controlsHelper.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","DesignControlsHelper","ko","require","utils_1","_getNameHelpers_1","_visitors_1","_super","target","handlers","collectionNames","_this","_handlers","_setText","_visitedCollections","_subscriptions","added","_collectControls","deleted","allControls","index","indexOf","splice","collectionsVisitor","collection","forEach","item","valueHasMutated","observableArray","unwrappedTarget","isSubscribable","_disposables","push","subscribe","newTarget","i","len","length","dispose","peek","args","addedItems","filter","x","status","_setName","apply","getNameProperty","model","name","getControlByName","control","some","unwrap","names","map","newName","getUniqueNameForNamedObjectsArray","_getNamePrefix","_setDefaultText","initialText","getControlInfo","defaultVal","undefined","controlType","split","pop","subscription","processCollection","array","owner","subscriptionsArray","Disposable","changeSet","moved","handler","getControls","controls"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (core\\internal\\_controlsHelper.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DesignControlsHelper = void 0;\nvar ko = require(\"knockout\");\nvar utils_1 = require(\"../../serializer/utils\");\nvar _getNameHelpers_1 = require(\"./_getNameHelpers\");\nvar _visitors_1 = require(\"../utils/_visitors\");\nvar DesignControlsHelper = (function (_super) {\n    __extends(DesignControlsHelper, _super);\n    function DesignControlsHelper(target, handlers, collectionNames) {\n        var _this = _super.call(this) || this;\n        _this.target = target;\n        _this.collectionNames = collectionNames;\n        _this._handlers = [];\n        _this._setText = false;\n        _this._visitedCollections = [];\n        _this._subscriptions = [];\n        _this.added = function (value) {\n            _this._setText = true;\n            _this._collectControls(value);\n            _this._setText = false;\n        };\n        _this.deleted = function (value) {\n            var allControls = _this.allControls();\n            var index = allControls.indexOf(value);\n            allControls.splice(index, 1);\n            _visitors_1.collectionsVisitor(value, function (collection) {\n                collection().forEach(function (item) {\n                    allControls.splice(allControls.indexOf(item), 1);\n                });\n            });\n            _this.allControls.valueHasMutated();\n        };\n        _this.allControls = ko.observableArray();\n        var unwrappedTarget = target;\n        if (ko.isSubscribable(target)) {\n            _this._disposables.push(target.subscribe(function (newTarget) {\n                _this._visitedCollections = [];\n                for (var i = 0, len = _this._subscriptions.length; i < len; i++) {\n                    _this._subscriptions[i].dispose();\n                }\n                _this._subscriptions = [];\n                _this.allControls([]);\n                if (newTarget) {\n                    _this._collectControls(newTarget);\n                }\n            }));\n            unwrappedTarget = target.peek();\n        }\n        _this._disposables.push(_this.allControls.subscribe(function (args) {\n            var addedItems = args.filter(function (x) { return x.status === 'added'; });\n            for (var i = 0; i < addedItems.length; i++) {\n                _this._setName(addedItems[i].value);\n            }\n        }, null, 'arrayChange'));\n        unwrappedTarget && _this._collectControls(unwrappedTarget);\n        _this._handlers.push.apply(_this._handlers, handlers);\n        return _this;\n    }\n    DesignControlsHelper.prototype.getNameProperty = function (model) {\n        return model.name;\n    };\n    DesignControlsHelper.prototype.getControlByName = function (name) {\n        var control = null;\n        this.allControls().some(function (x) {\n            if (ko.unwrap(x.name) == name) {\n                control = x;\n                return true;\n            }\n            return false;\n        });\n        return control;\n    };\n    DesignControlsHelper.prototype._setName = function (value) {\n        var _this = this;\n        var names = this.allControls().map(function (item) { return ko.unwrap(_this.getNameProperty(item)); });\n        if (!this.getNameProperty(value)() || names.filter(function (x) { return x === _this.getNameProperty(value)(); }).length > 1) {\n            var newName = _getNameHelpers_1.getUniqueNameForNamedObjectsArray(this.allControls(), this._getNamePrefix(value), names);\n            this.getNameProperty(value)(newName);\n            this._setText && this._setDefaultText(value);\n        }\n    };\n    DesignControlsHelper.prototype._setDefaultText = function (value) {\n        var initialText = value.getControlInfo && value.getControlInfo().defaultVal && value.getControlInfo().defaultVal['@Text'];\n        if (this._setText && value['text'] && !value['text']() && (initialText === null || initialText === undefined)) {\n            value['text'](this.getNameProperty(value)());\n        }\n    };\n    DesignControlsHelper.prototype._getNamePrefix = function (value) {\n        var controlType = value.controlType || 'Unknown';\n        return controlType.split('.').pop();\n    };\n    DesignControlsHelper.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._subscriptions.forEach(function (subscription) { return subscription.dispose(); });\n        this._subscriptions.splice(0);\n        this._visitedCollections.splice(0);\n        this._handlers.splice(0);\n        this.target = null;\n        this.allControls([]);\n    };\n    DesignControlsHelper.prototype.processCollection = function (collection) { };\n    DesignControlsHelper.prototype._collectControls = function (target) {\n        var _this = this;\n        var array = [target];\n        _visitors_1.collectionsVisitor(target, function (collection, owner) {\n            if (_this._visitedCollections.indexOf(collection) === -1) {\n                _this._visitedCollections.push(collection);\n                var subscriptionsArray = _this._subscriptions;\n                if (owner instanceof utils_1.Disposable) {\n                    subscriptionsArray = owner._disposables;\n                }\n                var subscription = collection.subscribe(function (args) {\n                    args.forEach(function (changeSet) {\n                        if (changeSet.moved != undefined)\n                            return;\n                        _this[changeSet.status] && _this[changeSet.status](changeSet.value);\n                        _this._handlers.forEach(function (handler) {\n                            handler[changeSet.status] && handler[changeSet.status](changeSet.value);\n                        });\n                    });\n                }, null, 'arrayChange');\n                subscriptionsArray.push({\n                    dispose: function () {\n                        subscription.dispose();\n                        subscription = null;\n                        _this._visitedCollections.splice(_this._visitedCollections.indexOf(collection), 1);\n                    }\n                });\n            }\n            _this.processCollection(collection());\n            array.push.apply(array, collection());\n        }, this.collectionNames);\n        this.allControls.push.apply(this.allControls, array);\n    };\n    DesignControlsHelper.prototype.getControls = function (target) {\n        var controls = ko.observableArray();\n        _visitors_1.collectionsVisitor(target, function (collection) {\n            controls.push.apply(controls, collection());\n        });\n        return controls;\n    };\n    return DesignControlsHelper;\n}(utils_1.Disposable));\nexports.DesignControlsHelper = DesignControlsHelper;\n"]},"metadata":{},"sourceType":"script"}