{"ast":null,"code":"/**\r\n* DevExpress Dashboard (dashboard-panel-extension.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DashboardPanelExtension = void 0;\n\nvar devices_1 = require(\"devextreme/core/devices\");\n\nvar string_1 = require(\"devextreme/core/utils/string\");\n\nvar themes_1 = require(\"devextreme/ui/themes\");\n\nvar $ = require(\"jquery\");\n\nvar ko = require(\"knockout\");\n\nvar _default_1 = require(\"../../../data/localization/_default\");\n\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\n\nvar caption_toolbar_options_1 = require(\"../../../viewer-parts/widgets/caption-toolbar/caption-toolbar-options\");\n\nvar _helpers_1 = require(\"../../_helpers\");\n\nvar DashboardPanelExtension = function () {\n  function DashboardPanelExtension(dashboardControl, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.dashboardControl = dashboardControl;\n    this.options = options;\n    this.name = 'dashboard-panel';\n    this._iconBack = 'dx-dashboard-back';\n    this._flexParent = 'dx-dashboard-flex-parent';\n    this._dashboardsButton = 'dx-dashboard-back-button';\n    this._dashboardTruncated = 'dx-dashboard-truncated';\n    this._ellipsisText = 'dx-dashboard-ellipsis';\n    this._itemTemplate = ko.observable();\n    this._isMobile = ko.observable(false);\n    this._disposables = [];\n    this.panelWidth = 250;\n    this.visible = ko.observable(false);\n    this.allowSwitchToDesigner = ko.observable();\n    this.selectedItemKeys = ko.observableArray();\n    this.availableDashboards = ko.observableArray();\n    this._actualPanelWidth = ko.observable();\n\n    this.showPanelAsync = function (options) {\n      return _this._showPanelAsync(options, _helpers_1.CancellationToken.None);\n    };\n\n    this._showPanelAsync = function (options, cancellationToken) {\n      var def = _jquery_helpers_1.createJQueryDeferred();\n\n      if (cancellationToken.canceled) def.reject();else {\n        _this.visible(true);\n\n        _this.updateDashboardsList();\n\n        setTimeout(function () {\n          if (!cancellationToken.canceled) {\n            options.surfaceLeft = _this.panelWidth;\n            def.resolve(options);\n          } else {\n            def.reject();\n          }\n        }, 500);\n      }\n      return def.promise();\n    };\n\n    this.hidePanelAsync = function (options) {\n      return _this._hidePanelAsync(options, _helpers_1.CancellationToken.None);\n    };\n\n    this._hidePanelAsync = function (options, cancellationToken) {\n      var def = _jquery_helpers_1.createJQueryDeferred();\n\n      if (cancellationToken.canceled) def.reject();else {\n        _this.visible(false);\n\n        setTimeout(function () {\n          if (!cancellationToken.canceled) {\n            options.surfaceLeft = 0;\n            def.resolve(options);\n          } else {\n            def.reject();\n          }\n        }, 500);\n      }\n      return def.promise();\n    };\n\n    this.switchToViewer = function () {\n      _this.dashboardControl.switchToViewer();\n    };\n\n    this.switchToDesigner = function () {\n      _this.dashboardControl.switchToDesigner();\n    };\n\n    var cancelableDesignerToViewerAction = {\n      orderNo: 60,\n      action: this.showPanelAsync,\n      cancelableAction: this._showPanelAsync\n    };\n    this.designerToViewerAction = cancelableDesignerToViewerAction;\n    var cancelableViewerToDesignerAction = {\n      orderNo: 20,\n      action: this.hidePanelAsync,\n      cancelableAction: this._hidePanelAsync\n    };\n    this.viewerToDesignerAction = cancelableViewerToDesignerAction;\n  }\n\n  Object.defineProperty(DashboardPanelExtension.prototype, \"_templateName\", {\n    get: function () {\n      if (this._isMobile()) {\n        return this.options.dashboardThumbnail ? 'dashboard-preview' : 'dashboard-card-view';\n      }\n\n      return 'dashboard-list-item';\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  DashboardPanelExtension.prototype.start = function () {\n    var _this = this;\n\n    var mobileExtension = this.dashboardControl.findExtension('mobile-layout');\n\n    this._isMobile(mobileExtension && mobileExtension.mobileLayoutEnabled());\n\n    mobileExtension && mobileExtension.mobileLayoutEnabled.subscribe(function () {\n      _this.stop();\n\n      _this.start();\n    });\n    if (this._isMobile()) this.allowSwitchToDesigner(false);else if (this.allowSwitchToDesigner() === undefined) {\n      this.allowSwitchToDesigner(this.dashboardControl.allowSwitchToDesigner);\n    }\n    this.visible(this._isMobile() ? false : !this.dashboardControl.isDesignMode());\n\n    this._itemTemplate(this._templateName);\n\n    if (this._isMobile()) {\n      this._actualPanelWidth($(window).width());\n\n      devices_1.default.on('orientationChanged', function (e) {\n        _this._actualPanelWidth($(window).width());\n      });\n    } else {\n      this._actualPanelWidth(this.panelWidth);\n    }\n\n    this._customTemplate = this._getCustomTemplate();\n    this.dashboardControl.customTemplates.push(this._customTemplate);\n\n    this._disposables.push(this.dashboardControl.dashboardContainer.subscribe(function (dashboardContainer) {\n      if (dashboardContainer) {\n        _this._validateSelection(dashboardContainer, _this.availableDashboards());\n      }\n    }));\n\n    if (this._isMobile()) {\n      var api = this.dashboardControl.findExtension('viewer-api');\n      api.on('dashboardTitleToolbarUpdated', function (args) {\n        args.options.navigationItems.push({\n          name: caption_toolbar_options_1.dashboardToolbarItemNames.dashboardList,\n          type: 'button',\n          template: function () {\n            return $('<div/>').addClass([_this._flexParent, _this._ellipsisText].join(' ')).append($('<svg><use xlink:href=\"#' + _this._iconBack + '\" /></svg>')).append($('<div/>').text(_default_1.getLocalizationById('DashboardWebStringId.Dashboards')).addClass([_this._dashboardsButton, _this._dashboardTruncated].join(' ')));\n          },\n          click: function () {\n            _this.showPanelAsync({\n              surfaceLeft: _this._actualPanelWidth()\n            });\n          }\n        });\n      });\n    }\n\n    if (!this.dashboardControl.isDesignMode()) {\n      this.dashboardControl.surfaceLeft(this._isMobile() ? 0 : this.panelWidth);\n    }\n\n    this.updateDashboardsList();\n  };\n\n  DashboardPanelExtension.prototype.stop = function () {\n    this._disposables.forEach(function (d) {\n      return d.dispose();\n    });\n\n    this._disposables = [];\n    this.dashboardControl.customTemplates.remove(this._customTemplate);\n  };\n\n  DashboardPanelExtension.prototype.updateDashboardsList = function () {\n    var _this = this;\n\n    var dashboardContainer = this.dashboardControl.dashboardContainer();\n    var options = this.options;\n    this.dashboardControl.requestDashboardList().done(function (availableDashboards) {\n      _this.availableDashboards(availableDashboards.map(function (dashboard) {\n        return new PanelExtensionDashboardInfo(dashboard.id, dashboard.name, options.dashboardThumbnail ? string_1.format(options.dashboardThumbnail, dashboard.id) : undefined);\n      }));\n\n      _this._validateSelection(_this.dashboardControl.dashboardContainer(), _this.availableDashboards());\n    });\n  };\n\n  DashboardPanelExtension.prototype._validateSelection = function (dashboardContainer, avaliableDashboards) {\n    if (dashboardContainer) {\n      var dashboardInfo = avaliableDashboards.filter(function (info) {\n        return info.id === dashboardContainer.id;\n      })[0];\n\n      if (dashboardInfo) {\n        this.selectedItemKeys([dashboardInfo.id]);\n      }\n    }\n  };\n\n  DashboardPanelExtension.prototype._hidePanel = function () {\n    if (this._isMobile()) {\n      this.hidePanelAsync({\n        surfaceLeft: 0\n      });\n    }\n  };\n\n  DashboardPanelExtension.prototype._getCustomTemplate = function () {\n    var _this = this;\n\n    var enableAnimation = ko.observable(!this.visible());\n    var listOptions = {\n      noDataText: '',\n      keyExpr: 'id',\n      selectionMode: 'single',\n      itemTemplate: this._itemTemplate,\n      activeStateEnabled: themes_1.default.isMaterial(themes_1.default.current()),\n      selectedItemKeys: this.selectedItemKeys,\n      onItemClick: function () {\n        _this._hidePanel();\n      },\n      searchEnabled: ko.computed(function () {\n        return _this._isMobile();\n      }),\n      searchExpr: ['id', 'name'],\n      hoverStateEnabled: ko.computed(function () {\n        return !_this._isMobile();\n      }),\n      focusStateEnabled: false,\n      searchEditorOptions: {\n        placeholder: _default_1.getLocalizationById('DashboardWebStringId.Search')\n      },\n      onOptionChanged: function (e) {\n        if (e.name === 'selectedItemKeys' && _this.selectedItemKeys().length > 0) {\n          var selectedItem = _this.availableDashboards().filter(function (item) {\n            return item.id === _this.selectedItemKeys()[0];\n          })[0];\n\n          e.component.scrollToItem(_this.availableDashboards().indexOf(selectedItem));\n        }\n      },\n      onSelectionChanged: function (e) {\n        if (e.addedItems.length) {\n          var newDashboardId = e.addedItems[0].id;\n\n          if (!_this.dashboardControl.dashboardContainer() || _this.dashboardControl.dashboardContainer().id !== newDashboardId) {\n            _this.dashboardControl.loadDashboard(newDashboardId);\n          }\n        }\n      }\n    };\n\n    if (this._isMobile()) {\n      listOptions.dataSource = this.availableDashboards;\n    } else {\n      listOptions.items = this.availableDashboards;\n    }\n\n    var resizeTimer;\n    var prevContainerHeight;\n\n    var getContainerHeight = function (component) {\n      return _jquery_helpers_1.$unwrap(component.option('container')).clientHeight;\n    };\n\n    return {\n      name: 'dx-dashboard-working-mode-extension',\n      data: {\n        panelWidth: this._actualPanelWidth,\n        allowSwitchToDesigner: this.allowSwitchToDesigner,\n        visible: this.visible,\n        isMobile: this._isMobile,\n        hidePanel: function () {\n          _this._hidePanel();\n        },\n        switchToDesigner: this.switchToDesigner,\n        switchToViewer: this.switchToViewer,\n        listOptions: listOptions,\n        enableAnimation: enableAnimation,\n        onPopupInitialized: function (e) {\n          prevContainerHeight = getContainerHeight(e.component);\n          resizeTimer = setInterval(function () {\n            if (e.component.option('visible')) {\n              var currentContainerHeight = getContainerHeight(e.component);\n\n              if (currentContainerHeight !== prevContainerHeight) {\n                prevContainerHeight = currentContainerHeight;\n                e.component.repaint();\n              }\n            }\n          }, 300);\n        },\n        onPopupDisposing: function (e) {\n          clearTimeout(resizeTimer);\n        }\n      }\n    };\n  };\n\n  return DashboardPanelExtension;\n}();\n\nexports.DashboardPanelExtension = DashboardPanelExtension;\n\nvar PanelExtensionDashboardInfo = function () {\n  function PanelExtensionDashboardInfo(id, name, imageUrl) {\n    this.id = id;\n    this.name = name;\n    this.imageUrl = imageUrl;\n    this.hidden = ko.observable(false);\n  }\n\n  PanelExtensionDashboardInfo.prototype.hide = function () {\n    this.hidden(true);\n  };\n\n  return PanelExtensionDashboardInfo;\n}();","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/common/extensions/dashboard-panel-extension/dashboard-panel-extension.js"],"names":["Object","defineProperty","exports","value","DashboardPanelExtension","devices_1","require","string_1","themes_1","$","ko","_default_1","_jquery_helpers_1","caption_toolbar_options_1","_helpers_1","dashboardControl","options","_this","name","_iconBack","_flexParent","_dashboardsButton","_dashboardTruncated","_ellipsisText","_itemTemplate","observable","_isMobile","_disposables","panelWidth","visible","allowSwitchToDesigner","selectedItemKeys","observableArray","availableDashboards","_actualPanelWidth","showPanelAsync","_showPanelAsync","CancellationToken","None","cancellationToken","def","createJQueryDeferred","canceled","reject","updateDashboardsList","setTimeout","surfaceLeft","resolve","promise","hidePanelAsync","_hidePanelAsync","switchToViewer","switchToDesigner","cancelableDesignerToViewerAction","orderNo","action","cancelableAction","designerToViewerAction","cancelableViewerToDesignerAction","viewerToDesignerAction","prototype","get","dashboardThumbnail","enumerable","configurable","start","mobileExtension","findExtension","mobileLayoutEnabled","subscribe","stop","undefined","isDesignMode","_templateName","window","width","default","on","e","_customTemplate","_getCustomTemplate","customTemplates","push","dashboardContainer","_validateSelection","api","args","navigationItems","dashboardToolbarItemNames","dashboardList","type","template","addClass","join","append","text","getLocalizationById","click","forEach","d","dispose","remove","requestDashboardList","done","map","dashboard","PanelExtensionDashboardInfo","id","format","avaliableDashboards","dashboardInfo","filter","info","_hidePanel","enableAnimation","listOptions","noDataText","keyExpr","selectionMode","itemTemplate","activeStateEnabled","isMaterial","current","onItemClick","searchEnabled","computed","searchExpr","hoverStateEnabled","focusStateEnabled","searchEditorOptions","placeholder","onOptionChanged","length","selectedItem","item","component","scrollToItem","indexOf","onSelectionChanged","addedItems","newDashboardId","loadDashboard","dataSource","items","resizeTimer","prevContainerHeight","getContainerHeight","$unwrap","option","clientHeight","data","isMobile","hidePanel","onPopupInitialized","setInterval","currentContainerHeight","repaint","onPopupDisposing","clearTimeout","imageUrl","hidden","hide"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (dashboard-panel-extension.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DashboardPanelExtension = void 0;\nvar devices_1 = require(\"devextreme/core/devices\");\nvar string_1 = require(\"devextreme/core/utils/string\");\nvar themes_1 = require(\"devextreme/ui/themes\");\nvar $ = require(\"jquery\");\nvar ko = require(\"knockout\");\nvar _default_1 = require(\"../../../data/localization/_default\");\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\nvar caption_toolbar_options_1 = require(\"../../../viewer-parts/widgets/caption-toolbar/caption-toolbar-options\");\nvar _helpers_1 = require(\"../../_helpers\");\nvar DashboardPanelExtension = (function () {\n    function DashboardPanelExtension(dashboardControl, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        this.dashboardControl = dashboardControl;\n        this.options = options;\n        this.name = 'dashboard-panel';\n        this._iconBack = 'dx-dashboard-back';\n        this._flexParent = 'dx-dashboard-flex-parent';\n        this._dashboardsButton = 'dx-dashboard-back-button';\n        this._dashboardTruncated = 'dx-dashboard-truncated';\n        this._ellipsisText = 'dx-dashboard-ellipsis';\n        this._itemTemplate = ko.observable();\n        this._isMobile = ko.observable(false);\n        this._disposables = [];\n        this.panelWidth = 250;\n        this.visible = ko.observable(false);\n        this.allowSwitchToDesigner = ko.observable();\n        this.selectedItemKeys = ko.observableArray();\n        this.availableDashboards = ko.observableArray();\n        this._actualPanelWidth = ko.observable();\n        this.showPanelAsync = function (options) {\n            return _this._showPanelAsync(options, _helpers_1.CancellationToken.None);\n        };\n        this._showPanelAsync = function (options, cancellationToken) {\n            var def = _jquery_helpers_1.createJQueryDeferred();\n            if (cancellationToken.canceled)\n                def.reject();\n            else {\n                _this.visible(true);\n                _this.updateDashboardsList();\n                setTimeout(function () {\n                    if (!cancellationToken.canceled) {\n                        options.surfaceLeft = _this.panelWidth;\n                        def.resolve(options);\n                    }\n                    else {\n                        def.reject();\n                    }\n                }, 500);\n            }\n            return def.promise();\n        };\n        this.hidePanelAsync = function (options) {\n            return _this._hidePanelAsync(options, _helpers_1.CancellationToken.None);\n        };\n        this._hidePanelAsync = function (options, cancellationToken) {\n            var def = _jquery_helpers_1.createJQueryDeferred();\n            if (cancellationToken.canceled)\n                def.reject();\n            else {\n                _this.visible(false);\n                setTimeout(function () {\n                    if (!cancellationToken.canceled) {\n                        options.surfaceLeft = 0;\n                        def.resolve(options);\n                    }\n                    else {\n                        def.reject();\n                    }\n                }, 500);\n            }\n            return def.promise();\n        };\n        this.switchToViewer = function () {\n            _this.dashboardControl.switchToViewer();\n        };\n        this.switchToDesigner = function () {\n            _this.dashboardControl.switchToDesigner();\n        };\n        var cancelableDesignerToViewerAction = {\n            orderNo: 60,\n            action: this.showPanelAsync,\n            cancelableAction: this._showPanelAsync\n        };\n        this.designerToViewerAction = cancelableDesignerToViewerAction;\n        var cancelableViewerToDesignerAction = {\n            orderNo: 20,\n            action: this.hidePanelAsync,\n            cancelableAction: this._hidePanelAsync\n        };\n        this.viewerToDesignerAction = cancelableViewerToDesignerAction;\n    }\n    Object.defineProperty(DashboardPanelExtension.prototype, \"_templateName\", {\n        get: function () {\n            if (this._isMobile()) {\n                return this.options.dashboardThumbnail ? 'dashboard-preview' : 'dashboard-card-view';\n            }\n            return 'dashboard-list-item';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DashboardPanelExtension.prototype.start = function () {\n        var _this = this;\n        var mobileExtension = this.dashboardControl.findExtension('mobile-layout');\n        this._isMobile(mobileExtension && mobileExtension.mobileLayoutEnabled());\n        mobileExtension && mobileExtension.mobileLayoutEnabled.subscribe(function () {\n            _this.stop();\n            _this.start();\n        });\n        if (this._isMobile())\n            this.allowSwitchToDesigner(false);\n        else if (this.allowSwitchToDesigner() === undefined) {\n            this.allowSwitchToDesigner(this.dashboardControl.allowSwitchToDesigner);\n        }\n        this.visible(this._isMobile() ? false : !this.dashboardControl.isDesignMode());\n        this._itemTemplate(this._templateName);\n        if (this._isMobile()) {\n            this._actualPanelWidth($(window).width());\n            devices_1.default.on('orientationChanged', function (e) {\n                _this._actualPanelWidth($(window).width());\n            });\n        }\n        else {\n            this._actualPanelWidth(this.panelWidth);\n        }\n        this._customTemplate = this._getCustomTemplate();\n        this.dashboardControl.customTemplates.push(this._customTemplate);\n        this._disposables.push(this.dashboardControl.dashboardContainer.subscribe(function (dashboardContainer) {\n            if (dashboardContainer) {\n                _this._validateSelection(dashboardContainer, _this.availableDashboards());\n            }\n        }));\n        if (this._isMobile()) {\n            var api = this.dashboardControl.findExtension('viewer-api');\n            api.on('dashboardTitleToolbarUpdated', function (args) {\n                args.options.navigationItems.push({\n                    name: caption_toolbar_options_1.dashboardToolbarItemNames.dashboardList,\n                    type: 'button',\n                    template: function () {\n                        return $('<div/>')\n                            .addClass([_this._flexParent, _this._ellipsisText].join(' '))\n                            .append($('<svg><use xlink:href=\"#' + _this._iconBack + '\" /></svg>'))\n                            .append($('<div/>').text(_default_1.getLocalizationById('DashboardWebStringId.Dashboards')).addClass([_this._dashboardsButton, _this._dashboardTruncated].join(' ')));\n                    },\n                    click: function () {\n                        _this.showPanelAsync({ surfaceLeft: _this._actualPanelWidth() });\n                    }\n                });\n            });\n        }\n        if (!this.dashboardControl.isDesignMode()) {\n            this.dashboardControl.surfaceLeft(this._isMobile() ? 0 : this.panelWidth);\n        }\n        this.updateDashboardsList();\n    };\n    DashboardPanelExtension.prototype.stop = function () {\n        this._disposables.forEach(function (d) { return d.dispose(); });\n        this._disposables = [];\n        this.dashboardControl.customTemplates.remove(this._customTemplate);\n    };\n    DashboardPanelExtension.prototype.updateDashboardsList = function () {\n        var _this = this;\n        var dashboardContainer = this.dashboardControl.dashboardContainer();\n        var options = this.options;\n        this.dashboardControl.requestDashboardList().done(function (availableDashboards) {\n            _this.availableDashboards(availableDashboards.map(function (dashboard) { return new PanelExtensionDashboardInfo(dashboard.id, dashboard.name, options.dashboardThumbnail ? string_1.format(options.dashboardThumbnail, dashboard.id) : undefined); }));\n            _this._validateSelection(_this.dashboardControl.dashboardContainer(), _this.availableDashboards());\n        });\n    };\n    DashboardPanelExtension.prototype._validateSelection = function (dashboardContainer, avaliableDashboards) {\n        if (dashboardContainer) {\n            var dashboardInfo = avaliableDashboards.filter(function (info) { return info.id === dashboardContainer.id; })[0];\n            if (dashboardInfo) {\n                this.selectedItemKeys([dashboardInfo.id]);\n            }\n        }\n    };\n    DashboardPanelExtension.prototype._hidePanel = function () {\n        if (this._isMobile()) {\n            this.hidePanelAsync({ surfaceLeft: 0 });\n        }\n    };\n    DashboardPanelExtension.prototype._getCustomTemplate = function () {\n        var _this = this;\n        var enableAnimation = ko.observable(!this.visible());\n        var listOptions = {\n            noDataText: '',\n            keyExpr: 'id',\n            selectionMode: 'single',\n            itemTemplate: this._itemTemplate,\n            activeStateEnabled: themes_1.default.isMaterial(themes_1.default.current()),\n            selectedItemKeys: this.selectedItemKeys,\n            onItemClick: function () { _this._hidePanel(); },\n            searchEnabled: ko.computed(function () { return _this._isMobile(); }),\n            searchExpr: ['id', 'name'],\n            hoverStateEnabled: ko.computed(function () { return !_this._isMobile(); }),\n            focusStateEnabled: false,\n            searchEditorOptions: {\n                placeholder: _default_1.getLocalizationById('DashboardWebStringId.Search')\n            },\n            onOptionChanged: function (e) {\n                if (e.name === 'selectedItemKeys' && _this.selectedItemKeys().length > 0) {\n                    var selectedItem = _this.availableDashboards().filter(function (item) { return item.id === _this.selectedItemKeys()[0]; })[0];\n                    e.component.scrollToItem(_this.availableDashboards().indexOf(selectedItem));\n                }\n            },\n            onSelectionChanged: function (e) {\n                if (e.addedItems.length) {\n                    var newDashboardId = e.addedItems[0].id;\n                    if (!_this.dashboardControl.dashboardContainer() || _this.dashboardControl.dashboardContainer().id !== newDashboardId) {\n                        _this.dashboardControl.loadDashboard(newDashboardId);\n                    }\n                }\n            },\n        };\n        if (this._isMobile()) {\n            listOptions.dataSource = (this.availableDashboards);\n        }\n        else {\n            listOptions.items = this.availableDashboards;\n        }\n        var resizeTimer;\n        var prevContainerHeight;\n        var getContainerHeight = function (component) { return _jquery_helpers_1.$unwrap(component.option('container')).clientHeight; };\n        return {\n            name: 'dx-dashboard-working-mode-extension',\n            data: {\n                panelWidth: this._actualPanelWidth,\n                allowSwitchToDesigner: this.allowSwitchToDesigner,\n                visible: this.visible,\n                isMobile: this._isMobile,\n                hidePanel: function () { _this._hidePanel(); },\n                switchToDesigner: this.switchToDesigner,\n                switchToViewer: this.switchToViewer,\n                listOptions: listOptions,\n                enableAnimation: enableAnimation,\n                onPopupInitialized: function (e) {\n                    prevContainerHeight = getContainerHeight(e.component);\n                    resizeTimer = setInterval(function () {\n                        if (e.component.option('visible')) {\n                            var currentContainerHeight = getContainerHeight(e.component);\n                            if (currentContainerHeight !== prevContainerHeight) {\n                                prevContainerHeight = currentContainerHeight;\n                                e.component.repaint();\n                            }\n                        }\n                    }, 300);\n                },\n                onPopupDisposing: function (e) {\n                    clearTimeout(resizeTimer);\n                }\n            }\n        };\n    };\n    return DashboardPanelExtension;\n}());\nexports.DashboardPanelExtension = DashboardPanelExtension;\nvar PanelExtensionDashboardInfo = (function () {\n    function PanelExtensionDashboardInfo(id, name, imageUrl) {\n        this.id = id;\n        this.name = name;\n        this.imageUrl = imageUrl;\n        this.hidden = ko.observable(false);\n    }\n    PanelExtensionDashboardInfo.prototype.hide = function () {\n        this.hidden(true);\n    };\n    return PanelExtensionDashboardInfo;\n}());\n"]},"metadata":{},"sourceType":"script"}