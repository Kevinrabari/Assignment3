{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_docking-layout-controller.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DockingLayoutController = void 0;\n\nvar events_1 = require(\"devextreme/events\");\n\nvar ko = require(\"knockout\");\n\nvar _default_1 = require(\"../../data/localization/_default\");\n\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\n\nvar _utils_1 = require(\"../../data/_utils\");\n\nvar disposable_object_1 = require(\"../../model/disposable-object\");\n\nvar _dashboard_item_helper_1 = require(\"../../model/internal/_dashboard-item_helper\");\n\nvar combo_box_item_1 = require(\"../../model/items/filter-items/combo-box-item\");\n\nvar date_filter_item_1 = require(\"../../model/items/filter-items/date-filter-item\");\n\nvar group_item_1 = require(\"../../model/items/group/group-item\");\n\nvar dashboard_tab_page_1 = require(\"../../model/items/tab-container-item/dashboard-tab-page\");\n\nvar tab_container_item_1 = require(\"../../model/items/tab-container-item/tab-container-item\");\n\nvar _dashboard_title_view_constants_1 = require(\"../../viewer-parts/title/_dashboard-title-view-constants\");\n\nvar caption_toolbar_options_1 = require(\"../../viewer-parts/widgets/caption-toolbar/caption-toolbar-options\");\n\nvar _title_component_1 = require(\"../viewer/title/_title-component\");\n\nvar _viewer_interfaces_1 = require(\"../viewer/_viewer-interfaces\");\n\nvar _layout_item_1 = require(\"./core/_layout-item\");\n\nvar _drag_controller_1 = require(\"./drag-and-drop/_drag-controller\");\n\nvar _docking_layout_fullscreen_item_1 = require(\"./_docking-layout-fullscreen-item\");\n\nvar DockingLayoutController = function (_super) {\n  __extends(DockingLayoutController, _super);\n\n  function DockingLayoutController(dashboardModel, dataSourceBrowser, context, _findExtension, allowMaximizeItems, resizeByTimer, repaintRequest, encodeHtml, viewerApi) {\n    if (encodeHtml === void 0) {\n      encodeHtml = true;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.dashboardModel = dashboardModel;\n    _this.dataSourceBrowser = dataSourceBrowser;\n    _this.context = context;\n    _this._findExtension = _findExtension;\n    _this.allowMaximizeItems = allowMaximizeItems;\n    _this.resizeByTimer = resizeByTimer;\n    _this.repaintRequest = repaintRequest;\n    _this.encodeHtml = encodeHtml;\n    _this.selectedLayoutItem = ko.pureComputed(function () {\n      return _this._selectedLayoutItem().sizeController;\n    });\n    _this.dragController = new _drag_controller_1.LayoutDragController();\n    _this._scrollSubscriptions = [];\n    _this.scrollViewEvents = {\n      onInitialized: function (e) {\n        _this.dragController.initScrollAnimator({\n          getBoundingClientRect: function () {\n            return _jquery_helpers_1.$unwrap(e.component.element()).getBoundingClientRect();\n          },\n          getScrollOffset: function () {\n            return e.component.scrollOffset();\n          },\n          setScrollOffset: function (offset) {\n            return e.component.scrollTo(offset);\n          }\n        });\n      },\n      onScroll: function () {\n        _this._scrollSubscriptions.forEach(function (action) {\n          return action();\n        });\n      },\n      onDisposing: function (e) {\n        _this.dragController.cleanScrollAnimator();\n      }\n    };\n    _this.layoutMainElementEvents = {\n      onInitialize: function (args) {\n        _this.dragController.initLayoutMainElement(args.element);\n      },\n      onDisposing: function (args) {\n        _this.dragController.cleanLayoutMainElement(args.element);\n      }\n    };\n    _this.itemInteractionInProgress = ko.observable(false);\n    _this._selectedLayoutItem = ko.observable();\n    _this.selectedDashboardItem = ko.computed(function () {\n      return _this._selectedLayoutItem() && _this._selectedLayoutItem().viewModel.item() || null;\n    });\n    _this.emptyItemTemplates = ko.observableArray();\n\n    _this.emptyItemTemplatesService = function (layoutItem) {\n      return {\n        data: _this.emptyItemTemplates,\n        name: 'dx-dashboard-empty-item-templates'\n      };\n    };\n\n    _this.addDashboardItem = function (data) {\n      var item = _layout_item_1.LayoutItem.findLargestItem(_this.rootItem).item;\n\n      if (!item) {\n        item = _this.rootItem;\n      }\n\n      var itemJson = _dashboard_item_helper_1.getItemJson(data.type);\n\n      var location = item._parent() && item._parent().viewModel && item._parent().viewModel.orientation() === 'Horizontal' ? 'bottom' : 'right';\n      item.create(itemJson, location);\n    };\n\n    _this.width = ko.observable(0);\n    _this.height = ko.observable(0);\n    _this.headerHeight = ko.observable(_dashboard_title_view_constants_1.titleHeight);\n    _this.visibleItemsProvider = undefined;\n    _this.rootItem = new _layout_item_1.LayoutItem(dashboardModel.layout()._createViewModel(), null);\n    var fullScreenItemLocalContext = new _viewer_interfaces_1.DashboardItemContext({\n      ignoreDesignMode: true,\n      beforeApplyViewerItemOptions: function (item, options) {\n        options.ParentContainer = undefined;\n      },\n      addContextToolbarItems: function (options) {\n        options.actionItems.push({\n          hint: _default_1.getLocalizationById('DashboardStringId.ActionRestoreDashboardItem'),\n          name: caption_toolbar_options_1.dashboardToolbarItemNames.restoreItem,\n          icon: 'dx-dashboard-restore-item',\n          type: 'button',\n          click: function () {\n            _this.fullscreenItemModel.restoreDownItem();\n          }\n        });\n      },\n      itemCreatingType: 'secondary'\n    });\n\n    var exportExtension = _this._findExtension('dashboard-export');\n\n    if (exportExtension) {\n      exportExtension._initializeSecondaryExportItem(fullScreenItemLocalContext);\n    }\n\n    _this.fullscreenItemModel = new _docking_layout_fullscreen_item_1.FullscreenItemModel(context, fullScreenItemLocalContext);\n\n    var getVisibleItems = function (layoutItemViewModel) {\n      var res = [];\n      if (layoutItemViewModel.item()) res.push(layoutItemViewModel.item());\n\n      if (layoutItemViewModel.item() instanceof tab_container_item_1.TabContainerItem) {\n        res.push.apply(res, layoutItemViewModel.childItems().map(function (ci) {\n          return ci._createViewModel().item();\n        }));\n      }\n\n      layoutItemViewModel.visibleItems().forEach(function (childItem) {\n        res.push.apply(res, getVisibleItems(childItem._createViewModel()));\n      });\n      return res;\n    };\n\n    _this.visibleItemsProvider = {\n      visibleItems: ko.pureComputed(function () {\n        return getVisibleItems(_this.rootItem.viewModel);\n      })\n    };\n\n    _this.rootItem.onEvent = function (layoutItem, event) {\n      if (event === 'click') {\n        _this.select(layoutItem);\n      } else if (event === 'unselect') {\n        _this.select(null);\n      } else if (event === 'resize-started') {\n        setTimeout(function () {\n          return _this.itemInteractionInProgress(true);\n        }, 1);\n      } else if (event === 'resize-completed') {\n        setTimeout(function () {\n          return _this.itemInteractionInProgress(false);\n        }, 1);\n      } else if (event === 'get-context') {\n        return context;\n      } else if (event === 'get-local-context') {\n        var itemModel = layoutItem.viewModel.item;\n        var localContext = new _viewer_interfaces_1.DashboardItemContext({\n          disabled: ko.computed(function () {\n            return itemModel() && _this.fullscreenItemModel.maximizedItemName === itemModel().componentName();\n          }),\n          addContextToolbarItems: function (options, item) {\n            if (_this.allowMaximizeItems && !(item instanceof combo_box_item_1.ComboBoxItem) && !(item instanceof date_filter_item_1.DateFilterItem) && !(item instanceof group_item_1.GroupItem) && !(item instanceof tab_container_item_1.TabContainerItem) && !(item instanceof dashboard_tab_page_1.DashboardTabPage)) {\n              options.actionItems.push({\n                hint: _default_1.getLocalizationById('DashboardStringId.ActionMaximizeDashboardItem'),\n                icon: 'dx-dashboard-maximize-item',\n                name: caption_toolbar_options_1.dashboardToolbarItemNames.maximizeItem,\n                type: 'button',\n                click: function () {\n                  _this.select(null);\n\n                  _this.fullscreenItemModel.maximizeItem(item);\n                }\n              });\n            }\n          },\n          visualMode: ko.computed(function () {\n            if (itemModel()) {\n              if (itemModel() instanceof tab_container_item_1.TabContainerItem) {\n                return 'caption';\n              }\n\n              var parent_1 = dashboardModel.findItem(itemModel().parentContainer());\n\n              if (parent_1 instanceof dashboard_tab_page_1.DashboardTabPage && dashboardModel._getDisplayDashboardItem(parent_1) !== parent_1) {\n                return 'content';\n              }\n            }\n\n            return 'full';\n          }),\n          itemCreatingType: 'primary'\n        });\n\n        var exportExtension = _this._findExtension('dashboard-export');\n\n        if (exportExtension) {\n          exportExtension._initializePrimaryExportItem(localContext);\n        }\n\n        return localContext;\n      } else if (event === 'get-context-menu-service') {\n        return _this.contextMenu;\n      } else if (event === 'get-empty-item-templates-service') {\n        return _this.emptyItemTemplatesService;\n      } else if (event === 'get-layout-item-placeholder-service') {\n        return _this.layoutItemPlaceholderService;\n      }\n    };\n\n    events_1.on(document, 'pointerdown.dxlayout', function (e) {\n      if (!_this._selectedLayoutItem()) {\n        return;\n      }\n\n      var target = _jquery_helpers_1.$unwrap(e.target),\n          validParents = ['.dx-layout-root', '.dx-accordion-item', '.dx-treeview-node', '.dx-dashboard-context-menu-panel', 'dx-field-chooser', '.dx-dashboard-toolbar', '.dx-overlay-content', '.dx-overlay-shader', '.ace_editor', '.dx-scrollable-scrollbar'];\n\n      var found = false;\n\n      if (_utils_1.type.isDefined(target.classList) && target.classList.contains('dx-calendar-cell')) {\n        found = true;\n      } else if (!target.parentNode) {\n        found = true;\n      } else {\n        found = found || validParents.some(function (validParent) {\n          return !!_jquery_helpers_1.closest(target, validParent);\n        });\n      }\n\n      if (found) return;\n      if (target.tagName && target.tagName.toLowerCase() === 'body') return;\n\n      if (document.activeElement && document.activeElement.blur) {\n        document.activeElement.blur();\n      }\n\n      _this.select(null);\n    });\n    _this.titleContext = new _title_component_1.DashboardTitleContext(_this.encodeHtml, _this._findExtension, true, viewerApi);\n\n    _this.toDispose(_this.titleContext);\n\n    _this.toDispose(ko.computed(function () {\n      if (_this.width() > 0) {\n        _this.rootItem.width(_this.width());\n      }\n\n      if (_this.height() > 0) {\n        _this.rootItem.height(_this.height() - _this.headerHeight());\n      }\n    }));\n\n    return _this;\n  }\n\n  Object.defineProperty(DockingLayoutController.prototype, \"fullscreenItemProvider\", {\n    get: function () {\n      return this.fullscreenItemModel;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  DockingLayoutController.prototype.select = function (item) {\n    var oldSelectedItem = this._selectedLayoutItem.peek();\n\n    if (oldSelectedItem) {\n      oldSelectedItem.isSelected(false);\n    }\n\n    this._selectedLayoutItem(item);\n\n    if (!!item) {\n      item.isSelected(true);\n    }\n  };\n\n  DockingLayoutController.prototype.subscribeOnScroll = function (handler) {\n    this._scrollSubscriptions.push(handler);\n  };\n\n  DockingLayoutController.prototype.unsubscribeOnScroll = function (handler) {\n    this._scrollSubscriptions.splice(this._scrollSubscriptions.indexOf(handler), 1);\n  };\n\n  DockingLayoutController.prototype.dispose = function () {\n    this.dragController.dispose();\n    this._scrollSubscriptions = [];\n    events_1.off(document, '.dxlayout');\n\n    _super.prototype.dispose.call(this);\n  };\n\n  return DockingLayoutController;\n}(disposable_object_1.DisposableObject);\n\nexports.DockingLayoutController = DockingLayoutController;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/common/docking-layout/_docking-layout-controller.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","DockingLayoutController","events_1","require","ko","_default_1","_jquery_helpers_1","_utils_1","disposable_object_1","_dashboard_item_helper_1","combo_box_item_1","date_filter_item_1","group_item_1","dashboard_tab_page_1","tab_container_item_1","_dashboard_title_view_constants_1","caption_toolbar_options_1","_title_component_1","_viewer_interfaces_1","_layout_item_1","_drag_controller_1","_docking_layout_fullscreen_item_1","_super","dashboardModel","dataSourceBrowser","context","_findExtension","allowMaximizeItems","resizeByTimer","repaintRequest","encodeHtml","viewerApi","_this","selectedLayoutItem","pureComputed","_selectedLayoutItem","sizeController","dragController","LayoutDragController","_scrollSubscriptions","scrollViewEvents","onInitialized","e","initScrollAnimator","getBoundingClientRect","$unwrap","component","element","getScrollOffset","scrollOffset","setScrollOffset","offset","scrollTo","onScroll","forEach","action","onDisposing","cleanScrollAnimator","layoutMainElementEvents","onInitialize","args","initLayoutMainElement","cleanLayoutMainElement","itemInteractionInProgress","observable","selectedDashboardItem","computed","viewModel","item","emptyItemTemplates","observableArray","emptyItemTemplatesService","layoutItem","data","name","addDashboardItem","LayoutItem","findLargestItem","rootItem","itemJson","getItemJson","type","location","_parent","orientation","width","height","headerHeight","titleHeight","visibleItemsProvider","undefined","layout","_createViewModel","fullScreenItemLocalContext","DashboardItemContext","ignoreDesignMode","beforeApplyViewerItemOptions","options","ParentContainer","addContextToolbarItems","actionItems","push","hint","getLocalizationById","dashboardToolbarItemNames","restoreItem","icon","click","fullscreenItemModel","restoreDownItem","itemCreatingType","exportExtension","_initializeSecondaryExportItem","FullscreenItemModel","getVisibleItems","layoutItemViewModel","res","TabContainerItem","apply","childItems","map","ci","visibleItems","childItem","onEvent","event","select","setTimeout","itemModel","localContext","disabled","maximizedItemName","componentName","ComboBoxItem","DateFilterItem","GroupItem","DashboardTabPage","maximizeItem","visualMode","parent_1","findItem","parentContainer","_getDisplayDashboardItem","_initializePrimaryExportItem","contextMenu","layoutItemPlaceholderService","on","document","target","validParents","found","isDefined","classList","contains","parentNode","some","validParent","closest","tagName","toLowerCase","activeElement","blur","titleContext","DashboardTitleContext","toDispose","get","enumerable","configurable","oldSelectedItem","peek","isSelected","subscribeOnScroll","handler","unsubscribeOnScroll","splice","indexOf","dispose","off","DisposableObject"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_docking-layout-controller.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DockingLayoutController = void 0;\nvar events_1 = require(\"devextreme/events\");\nvar ko = require(\"knockout\");\nvar _default_1 = require(\"../../data/localization/_default\");\nvar _jquery_helpers_1 = require(\"../../data/_jquery-helpers\");\nvar _utils_1 = require(\"../../data/_utils\");\nvar disposable_object_1 = require(\"../../model/disposable-object\");\nvar _dashboard_item_helper_1 = require(\"../../model/internal/_dashboard-item_helper\");\nvar combo_box_item_1 = require(\"../../model/items/filter-items/combo-box-item\");\nvar date_filter_item_1 = require(\"../../model/items/filter-items/date-filter-item\");\nvar group_item_1 = require(\"../../model/items/group/group-item\");\nvar dashboard_tab_page_1 = require(\"../../model/items/tab-container-item/dashboard-tab-page\");\nvar tab_container_item_1 = require(\"../../model/items/tab-container-item/tab-container-item\");\nvar _dashboard_title_view_constants_1 = require(\"../../viewer-parts/title/_dashboard-title-view-constants\");\nvar caption_toolbar_options_1 = require(\"../../viewer-parts/widgets/caption-toolbar/caption-toolbar-options\");\nvar _title_component_1 = require(\"../viewer/title/_title-component\");\nvar _viewer_interfaces_1 = require(\"../viewer/_viewer-interfaces\");\nvar _layout_item_1 = require(\"./core/_layout-item\");\nvar _drag_controller_1 = require(\"./drag-and-drop/_drag-controller\");\nvar _docking_layout_fullscreen_item_1 = require(\"./_docking-layout-fullscreen-item\");\nvar DockingLayoutController = (function (_super) {\n    __extends(DockingLayoutController, _super);\n    function DockingLayoutController(dashboardModel, dataSourceBrowser, context, _findExtension, allowMaximizeItems, resizeByTimer, repaintRequest, encodeHtml, viewerApi) {\n        if (encodeHtml === void 0) { encodeHtml = true; }\n        var _this = _super.call(this) || this;\n        _this.dashboardModel = dashboardModel;\n        _this.dataSourceBrowser = dataSourceBrowser;\n        _this.context = context;\n        _this._findExtension = _findExtension;\n        _this.allowMaximizeItems = allowMaximizeItems;\n        _this.resizeByTimer = resizeByTimer;\n        _this.repaintRequest = repaintRequest;\n        _this.encodeHtml = encodeHtml;\n        _this.selectedLayoutItem = ko.pureComputed(function () { return _this._selectedLayoutItem().sizeController; });\n        _this.dragController = new _drag_controller_1.LayoutDragController();\n        _this._scrollSubscriptions = [];\n        _this.scrollViewEvents = {\n            onInitialized: function (e) {\n                _this.dragController.initScrollAnimator({\n                    getBoundingClientRect: function () { return _jquery_helpers_1.$unwrap(e.component.element()).getBoundingClientRect(); },\n                    getScrollOffset: function () { return e.component.scrollOffset(); },\n                    setScrollOffset: function (offset) { return e.component.scrollTo(offset); }\n                });\n            },\n            onScroll: function () {\n                _this._scrollSubscriptions.forEach(function (action) { return action(); });\n            },\n            onDisposing: function (e) {\n                _this.dragController.cleanScrollAnimator();\n            }\n        };\n        _this.layoutMainElementEvents = {\n            onInitialize: function (args) {\n                _this.dragController.initLayoutMainElement(args.element);\n            },\n            onDisposing: function (args) {\n                _this.dragController.cleanLayoutMainElement(args.element);\n            }\n        };\n        _this.itemInteractionInProgress = ko.observable(false);\n        _this._selectedLayoutItem = ko.observable();\n        _this.selectedDashboardItem = ko.computed(function () {\n            return _this._selectedLayoutItem() && _this._selectedLayoutItem().viewModel.item() || null;\n        });\n        _this.emptyItemTemplates = ko.observableArray();\n        _this.emptyItemTemplatesService = function (layoutItem) {\n            return {\n                data: _this.emptyItemTemplates,\n                name: 'dx-dashboard-empty-item-templates'\n            };\n        };\n        _this.addDashboardItem = function (data) {\n            var item = _layout_item_1.LayoutItem.findLargestItem(_this.rootItem).item;\n            if (!item) {\n                item = _this.rootItem;\n            }\n            var itemJson = _dashboard_item_helper_1.getItemJson(data.type);\n            var location = item._parent() && item._parent().viewModel && item._parent().viewModel.orientation() === 'Horizontal' ? 'bottom' : 'right';\n            item.create(itemJson, location);\n        };\n        _this.width = ko.observable(0);\n        _this.height = ko.observable(0);\n        _this.headerHeight = ko.observable(_dashboard_title_view_constants_1.titleHeight);\n        _this.visibleItemsProvider = undefined;\n        _this.rootItem = new _layout_item_1.LayoutItem(dashboardModel.layout()._createViewModel(), null);\n        var fullScreenItemLocalContext = new _viewer_interfaces_1.DashboardItemContext({\n            ignoreDesignMode: true,\n            beforeApplyViewerItemOptions: function (item, options) {\n                options.ParentContainer = undefined;\n            },\n            addContextToolbarItems: function (options) {\n                options.actionItems.push({\n                    hint: _default_1.getLocalizationById('DashboardStringId.ActionRestoreDashboardItem'),\n                    name: caption_toolbar_options_1.dashboardToolbarItemNames.restoreItem,\n                    icon: 'dx-dashboard-restore-item',\n                    type: 'button',\n                    click: function () {\n                        _this.fullscreenItemModel.restoreDownItem();\n                    }\n                });\n            },\n            itemCreatingType: 'secondary'\n        });\n        var exportExtension = _this._findExtension('dashboard-export');\n        if (exportExtension) {\n            exportExtension._initializeSecondaryExportItem(fullScreenItemLocalContext);\n        }\n        _this.fullscreenItemModel = new _docking_layout_fullscreen_item_1.FullscreenItemModel(context, fullScreenItemLocalContext);\n        var getVisibleItems = function (layoutItemViewModel) {\n            var res = [];\n            if (layoutItemViewModel.item())\n                res.push(layoutItemViewModel.item());\n            if (layoutItemViewModel.item() instanceof tab_container_item_1.TabContainerItem) {\n                res.push.apply(res, layoutItemViewModel.childItems().map(function (ci) { return ci._createViewModel().item(); }));\n            }\n            layoutItemViewModel.visibleItems().forEach(function (childItem) {\n                res.push.apply(res, getVisibleItems(childItem._createViewModel()));\n            });\n            return res;\n        };\n        _this.visibleItemsProvider = {\n            visibleItems: ko.pureComputed(function () {\n                return getVisibleItems(_this.rootItem.viewModel);\n            })\n        };\n        _this.rootItem.onEvent = function (layoutItem, event) {\n            if (event === 'click') {\n                _this.select(layoutItem);\n            }\n            else if (event === 'unselect') {\n                _this.select(null);\n            }\n            else if (event === 'resize-started') {\n                setTimeout(function () { return _this.itemInteractionInProgress(true); }, 1);\n            }\n            else if (event === 'resize-completed') {\n                setTimeout(function () { return _this.itemInteractionInProgress(false); }, 1);\n            }\n            else if (event === 'get-context') {\n                return context;\n            }\n            else if (event === 'get-local-context') {\n                var itemModel = layoutItem.viewModel.item;\n                var localContext = new _viewer_interfaces_1.DashboardItemContext({\n                    disabled: ko.computed(function () { return itemModel() && _this.fullscreenItemModel.maximizedItemName === itemModel().componentName(); }),\n                    addContextToolbarItems: function (options, item) {\n                        if (_this.allowMaximizeItems\n                            && !(item instanceof combo_box_item_1.ComboBoxItem)\n                            && !(item instanceof date_filter_item_1.DateFilterItem)\n                            && !(item instanceof group_item_1.GroupItem)\n                            && !(item instanceof tab_container_item_1.TabContainerItem)\n                            && !(item instanceof dashboard_tab_page_1.DashboardTabPage)) {\n                            options.actionItems.push({\n                                hint: _default_1.getLocalizationById('DashboardStringId.ActionMaximizeDashboardItem'),\n                                icon: 'dx-dashboard-maximize-item',\n                                name: caption_toolbar_options_1.dashboardToolbarItemNames.maximizeItem,\n                                type: 'button',\n                                click: function () {\n                                    _this.select(null);\n                                    _this.fullscreenItemModel.maximizeItem(item);\n                                }\n                            });\n                        }\n                    },\n                    visualMode: ko.computed(function () {\n                        if (itemModel()) {\n                            if (itemModel() instanceof tab_container_item_1.TabContainerItem) {\n                                return 'caption';\n                            }\n                            var parent_1 = dashboardModel.findItem(itemModel().parentContainer());\n                            if (parent_1 instanceof dashboard_tab_page_1.DashboardTabPage\n                                && dashboardModel._getDisplayDashboardItem(parent_1) !== parent_1) {\n                                return 'content';\n                            }\n                        }\n                        return 'full';\n                    }),\n                    itemCreatingType: 'primary'\n                });\n                var exportExtension = _this._findExtension('dashboard-export');\n                if (exportExtension) {\n                    exportExtension._initializePrimaryExportItem(localContext);\n                }\n                return localContext;\n            }\n            else if (event === 'get-context-menu-service') {\n                return _this.contextMenu;\n            }\n            else if (event === 'get-empty-item-templates-service') {\n                return _this.emptyItemTemplatesService;\n            }\n            else if (event === 'get-layout-item-placeholder-service') {\n                return _this.layoutItemPlaceholderService;\n            }\n        };\n        events_1.on(document, 'pointerdown.dxlayout', function (e) {\n            if (!_this._selectedLayoutItem()) {\n                return;\n            }\n            var target = _jquery_helpers_1.$unwrap(e.target), validParents = ['.dx-layout-root',\n                '.dx-accordion-item',\n                '.dx-treeview-node',\n                '.dx-dashboard-context-menu-panel',\n                'dx-field-chooser',\n                '.dx-dashboard-toolbar',\n                '.dx-overlay-content',\n                '.dx-overlay-shader',\n                '.ace_editor',\n                '.dx-scrollable-scrollbar'\n            ];\n            var found = false;\n            if (_utils_1.type.isDefined(target.classList) && target.classList.contains('dx-calendar-cell')) {\n                found = true;\n            }\n            else if (!target.parentNode) {\n                found = true;\n            }\n            else {\n                found = found || validParents.some(function (validParent) { return !!_jquery_helpers_1.closest(target, validParent); });\n            }\n            if (found)\n                return;\n            if (target.tagName && target.tagName.toLowerCase() === 'body')\n                return;\n            if (document.activeElement && document.activeElement.blur) {\n                document.activeElement.blur();\n            }\n            _this.select(null);\n        });\n        _this.titleContext = new _title_component_1.DashboardTitleContext(_this.encodeHtml, _this._findExtension, true, viewerApi);\n        _this.toDispose(_this.titleContext);\n        _this.toDispose(ko.computed(function () {\n            if (_this.width() > 0) {\n                _this.rootItem.width(_this.width());\n            }\n            if (_this.height() > 0) {\n                _this.rootItem.height(_this.height() - _this.headerHeight());\n            }\n        }));\n        return _this;\n    }\n    Object.defineProperty(DockingLayoutController.prototype, \"fullscreenItemProvider\", {\n        get: function () {\n            return this.fullscreenItemModel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DockingLayoutController.prototype.select = function (item) {\n        var oldSelectedItem = this._selectedLayoutItem.peek();\n        if (oldSelectedItem) {\n            oldSelectedItem.isSelected(false);\n        }\n        this._selectedLayoutItem(item);\n        if (!!item) {\n            item.isSelected(true);\n        }\n    };\n    DockingLayoutController.prototype.subscribeOnScroll = function (handler) {\n        this._scrollSubscriptions.push(handler);\n    };\n    DockingLayoutController.prototype.unsubscribeOnScroll = function (handler) {\n        this._scrollSubscriptions.splice(this._scrollSubscriptions.indexOf(handler), 1);\n    };\n    DockingLayoutController.prototype.dispose = function () {\n        this.dragController.dispose();\n        this._scrollSubscriptions = [];\n        events_1.off(document, '.dxlayout');\n        _super.prototype.dispose.call(this);\n    };\n    return DockingLayoutController;\n}(disposable_object_1.DisposableObject));\nexports.DockingLayoutController = DockingLayoutController;\n"]},"metadata":{},"sourceType":"script"}