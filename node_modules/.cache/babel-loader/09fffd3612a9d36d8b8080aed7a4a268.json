{"ast":null,"code":"/**\r\n* DevExpress Dashboard (_widgets-viewer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dxWidgetsViewer = void 0;\n\nvar $ = require(\"jquery\");\n\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\n\nvar _utils_1 = require(\"../../../data/_utils\");\n\nvar _dashboard_viewer_constants_1 = require(\"../../viewer/_dashboard-viewer-constants\");\n\nvar _render_helper_1 = require(\"../_render-helper\");\n\nvar _card_item_1 = require(\"./cards/_card-item\");\n\nvar _arrangement_info_1 = require(\"./_arrangement-info\");\n\nvar _css_class_names_1 = require(\"./_css-class-names\");\n\nvar _widget_item_1 = require(\"./_widget-item\");\n\nvar _widgets_viewer_base_1 = require(\"./_widgets-viewer-base\");\n\nvar viewerCount = 0;\n\nvar dxWidgetsViewer = function (_super) {\n  __extends(dxWidgetsViewer, _super);\n\n  function dxWidgetsViewer(element, options) {\n    return _super.call(this, element, options) || this;\n  }\n\n  dxWidgetsViewer.prototype._getDefaultOptions = function () {\n    return {\n      dataSource: [],\n      viewer: {\n        hoverEnabled: false,\n        overflow: 'auto',\n        method: 'auto',\n        count: 1,\n        widgetType: 'card',\n        redrawOnResize: false,\n        onclick: null,\n        onRenderComplete: null,\n        onAllItemsRenderComplete: null,\n        bulkTimesRenderingTimeInterval: 200,\n        useNativeScrolling: 'auto',\n        ignorePadding: false,\n        supportAnimation: false\n      },\n      itemOptions: {\n        encodeHtml: true,\n        minWidth: undefined,\n        proportions: undefined,\n        ignoreProportions: false,\n        itemMargin: {\n          width: 5,\n          height: 5\n        },\n        borderWidth: 1,\n        hasSparkline: false\n      }\n    };\n  };\n\n  dxWidgetsViewer.prototype._init = function () {\n    var viewer = this._option.viewer;\n    this._viewerID = viewerCount++;\n    this.initContainer();\n    this._content = _render_helper_1.RenderHelper.wrapScrollable(this.container, viewer.overflow, 'both');\n    this._scrollBarWidth = this._getScrollBarWidth();\n\n    this._updateByOptions();\n\n    this._createItems();\n\n    this.totalMarginsAndBorders = this._calcTotalMarginsAndBorders();\n\n    this._render();\n  };\n\n  dxWidgetsViewer.prototype._update = function () {\n    this._updateByOptions();\n\n    this._createItems();\n\n    this._render();\n  };\n\n  dxWidgetsViewer.prototype.initContainer = function () {\n    this.container = document.createElement('div');\n\n    _jquery_helpers_1.$unwrap(this.element()).appendChild(this.container);\n\n    this.container.classList.add(_css_class_names_1.cssClassNames.widgetsViewerScrollableHolder);\n  };\n\n  dxWidgetsViewer.prototype.clear = function () {\n    this.container.parentElement.removeChild(this.container);\n  };\n\n  dxWidgetsViewer.prototype.dispose = function () {\n    var that = this;\n    clearTimeout(that._drawTimer);\n    that._drawTimer = null;\n    (that.itemsList || []).forEach(function (item) {\n      return item.dispose();\n    });\n    that._content = null;\n    that._scrollBarWidth = null;\n    that._widgetType = null;\n    that.itemsList = null;\n    that.totalMarginsAndBorders = null;\n    that._resizeHandler = null;\n\n    if (that._styleTag) {\n      that._styleTag.parentElement.removeChild(that._styleTag);\n\n      that._styleTag = null;\n    }\n\n    _super.prototype.dispose.call(this);\n  };\n\n  dxWidgetsViewer.prototype._getScrollable = function () {\n    return _render_helper_1.RenderHelper.getScrollable(this.container);\n  };\n\n  dxWidgetsViewer.prototype._updateScrollable = function () {\n    _render_helper_1.RenderHelper.updateScrollable(this.container);\n  };\n\n  dxWidgetsViewer.prototype._scrollTo = function (left, top) {\n    var that = this,\n        scrollable = this._getScrollable();\n\n    if (scrollable) {\n      scrollable.scrollTo({\n        x: left,\n        y: top\n      });\n    } else {\n      $(that._rootContent()).scrollLeft(left);\n      $(that._rootContent()).scrollTop(top);\n    }\n  };\n\n  dxWidgetsViewer.prototype._scrollOffset = function () {\n    var that = this,\n        scrollable = this._getScrollable();\n\n    if (scrollable) {\n      return scrollable.scrollOffset();\n    } else {\n      return {\n        left: $(that._rootContent()).scrollLeft(),\n        top: $(that._rootContent()).scrollTop()\n      };\n    }\n  };\n\n  dxWidgetsViewer.prototype._rootContent = function () {\n    return this._content;\n  };\n\n  dxWidgetsViewer.prototype._parentHeight = function () {\n    var offset = 0;\n    return $(this.container).height() - offset;\n  };\n\n  dxWidgetsViewer.prototype._parentWidth = function () {\n    var offset = 0;\n    return $(this.container).width() - offset;\n  };\n\n  dxWidgetsViewer.prototype._parentWidthWithoutScroll = function () {\n    var that = this;\n    return that._parentWidth() - that._scrollBarWidth * that._hasVerticalScroll;\n  };\n\n  dxWidgetsViewer.prototype._parentHeightWithoutScroll = function () {\n    var that = this;\n    return that._parentHeight() - that._scrollBarWidth * that._hasHorizontalScroll;\n  };\n\n  dxWidgetsViewer.prototype._getResizeHandler = function () {\n    var that = this;\n    return function () {\n      that.redraw();\n    };\n  };\n\n  dxWidgetsViewer.prototype._updateByOptions = function () {\n    var viewerOptions = this._option.viewer,\n        itemOptions = this._option.itemOptions,\n        proportions = itemOptions.proportions,\n        width = itemOptions.minWidth;\n    this._widgetType = viewerOptions.widgetType.toLowerCase();\n    this.align = viewerOptions.align;\n\n    if (this._widgetType === 'card') {\n      this.align = this.align || 'left';\n      this.minItemWidth = this.curItemWidth = width || 180;\n      this._itemProportions = proportions || (itemOptions.hasSparkline ? 0.625 : 0.5);\n    } else {\n      this.align = this.align || 'center';\n      this.minItemWidth = this.curItemWidth = width || 200;\n      this._itemProportions = proportions || 1;\n      this._needVerticalCentering = true;\n    }\n\n    this.minItemHeight = this.curItemHeight = this._itemProportions * this.minItemWidth;\n  };\n\n  dxWidgetsViewer.prototype.getSizeParams = function () {\n    var scrollOffset = this._scrollOffset();\n\n    var scrollableContent = this.container.querySelector('.' + _css_class_names_1.cssClassNames.widgetViewerTable);\n    var itemMargin = this._option.itemOptions.itemMargin;\n    return {\n      virtualSize: {\n        width: $(scrollableContent).outerWidth(),\n        height: $(scrollableContent).outerHeight()\n      },\n      scroll: {\n        top: scrollOffset.top,\n        left: scrollOffset.left,\n        size: this._scrollBarWidth,\n        horizontal: this._hasHorizontalScroll === 1,\n        vertical: this._hasVerticalScroll === 1\n      },\n      itemMargin: {\n        width: itemMargin.width,\n        height: itemMargin.height\n      }\n    };\n  };\n\n  dxWidgetsViewer.prototype.getSelectedItems = function () {\n    return this.itemsList.filter(function (item) {\n      return item._isSelected;\n    });\n  };\n\n  dxWidgetsViewer.prototype.clearSelections = function () {\n    this.itemsList.forEach(function (item) {\n      return item.clearSelection();\n    });\n  };\n\n  dxWidgetsViewer.prototype._createItems = function () {\n    var _this = this;\n\n    var data = this._option.dataSource;\n    var itemOptions = this._option.itemOptions;\n\n    var rootElement = this._rootContent();\n\n    (this.itemsList || []).forEach(function (item) {\n      return item.dispose();\n    });\n    this.itemsList = [];\n    data.forEach(function (dataItem) {\n      itemOptions.widgetType = _this._widgetType;\n      itemOptions.hoverEnabled = dataItem.hoverEnabled;\n      itemOptions.isSelected = dataItem.isSelected;\n      itemOptions.cursor = dataItem.cursor;\n      itemOptions.tag = dataItem.tag;\n      itemOptions.parentRootElement = rootElement;\n\n      _this.itemsList.push(_this._widgetType == 'card' ? new _card_item_1.CardItem(dataItem, itemOptions) : new _widget_item_1.WidgetItem(dataItem, itemOptions));\n    });\n    this._firstDraw = true;\n    delete this._viewerParams;\n  };\n\n  dxWidgetsViewer.prototype._refresh = function () {\n    this.curItemWidth = this.minItemWidth;\n    this.curItemHeight = this.minItemHeight;\n\n    this._createItems();\n  };\n\n  dxWidgetsViewer.prototype._calcTotalMarginsAndBorders = function () {\n    var itemOptions = this._option.itemOptions,\n        borderWidth = itemOptions.borderWidth || 0;\n    return {\n      width: 2 * (itemOptions.itemMargin.width + borderWidth),\n      height: 2 * (itemOptions.itemMargin.height + borderWidth)\n    };\n  };\n\n  dxWidgetsViewer.prototype._render = function (drawOptions) {\n    var viewer = this._option.viewer;\n    var onRenderComplete = viewer.onRenderComplete;\n    var method = viewer.method.toLowerCase();\n    var itemCount = viewer.count;\n    var clickHandler = viewer.onclick;\n    var hoverHandler = viewer.onhover;\n    var supportAnimation = viewer.supportAnimation;\n    var table;\n\n    var contentElement = this._rootContent();\n\n    var overflowX = contentElement.style.overflowX;\n    var overflowY = contentElement.style.overflowY;\n    var parentRoot = contentElement.parentElement;\n    var overflowXParentRoot = parentRoot.style.overflowX;\n    var overflowYParentRoot = parentRoot.style.overflowY;\n\n    var scrollOffset = this._scrollOffset();\n\n    var animationEnabled = supportAnimation && !contentElement.innerHTML && this.itemsList.length <= _dashboard_viewer_constants_1.ELEMENTS_COUNT_ANIMATION_THRESHOLD;\n    clearTimeout(this._drawTimer);\n    table = this._drawItems(method, itemCount, animationEnabled);\n    contentElement.innerHTML = '';\n    contentElement.style.overflow = 'hidden';\n    parentRoot.style.overflow = 'hidden';\n\n    if (table) {\n      this.innerContainer = document.createElement('div');\n      this.innerContainer.classList.add(_css_class_names_1.cssClassNames.widgetViewerContainer);\n      this.innerContainer.style.textAlign = this.align;\n      this.innerContainer.style.padding = '0';\n      this.innerContainer.style.margin = '0';\n      contentElement.appendChild(this.innerContainer);\n      this.innerContainer.appendChild(table);\n      this.itemsList.forEach(function (item) {\n        item.finishRender({\n          clickHandler: clickHandler,\n          hoverHandler: hoverHandler,\n          drawOptions: drawOptions\n        });\n      });\n\n      if (this._needVerticalCentering && this.innerContainer && this._viewerParams.direction === 'Horizontal') {\n        this._verticalCentering(table);\n      }\n    }\n\n    contentElement.style.overflowX = overflowX;\n    contentElement.style.overflowY = overflowY;\n    parentRoot.style.overflowX = overflowXParentRoot;\n    parentRoot.style.overflowY = overflowYParentRoot;\n\n    this._updateScrollable();\n\n    this._scrollTo(scrollOffset.left, scrollOffset.top);\n\n    if (onRenderComplete) {\n      onRenderComplete.call(null);\n    }\n  };\n\n  dxWidgetsViewer.prototype._verticalCentering = function (table) {\n    var that = this,\n        differenceTop = that._parentHeight() - $(that.container.querySelector('.' + _css_class_names_1.cssClassNames.widgetViewerContainer)).height();\n\n    if (differenceTop > 0) {\n      that.innerContainer.style.paddingTop = ~~(differenceTop / 2) + 'px';\n    } else {\n      that.innerContainer.style.paddingTop = '0px';\n    }\n  };\n\n  dxWidgetsViewer.prototype.redraw = function () {\n    this._render();\n  };\n\n  dxWidgetsViewer.prototype._calcItemIndex = function (i, j, direction, rowCount, columnCount) {\n    return direction == _arrangement_info_1.positioningDirection.Horizontal ? i * columnCount + j : j * rowCount + i;\n  };\n\n  dxWidgetsViewer.prototype._calcVisibleRow = function (cardHeight) {\n    var height = this._parentHeight();\n\n    return Math.ceil(height / cardHeight);\n  };\n\n  dxWidgetsViewer.prototype._calcVisibleColumn = function (cardWidth) {\n    var width = this._parentWidth();\n\n    return Math.ceil(width / cardWidth);\n  };\n\n  dxWidgetsViewer.prototype._getPartArray = function (array, count, indexOfPart) {\n    var result = [],\n        i = 0,\n        beg = count * indexOfPart;\n\n    for (i = beg; i < beg + count; i++) {\n      result.push(array[i]);\n    }\n\n    return result;\n  };\n\n  dxWidgetsViewer.prototype._createTable = function (arrangementInfo, enableAnimation) {\n    var that = this,\n        tableStruct,\n        i,\n        j,\n        indexItem,\n        col,\n        row,\n        item,\n        isHorizontal = arrangementInfo.direction == _arrangement_info_1.positioningDirection.Horizontal,\n        itemMargin = this._option.itemOptions.itemMargin,\n        ignorePadding = this._option.viewer.ignorePadding,\n        columnCount = isHorizontal ? arrangementInfo.itemsOnRowCount : arrangementInfo.itemsOnColumnCount,\n        rowCount = isHorizontal ? arrangementInfo.itemsOnColumnCount : arrangementInfo.itemsOnRowCount,\n        action,\n        itemsListLen = that.itemsList.length,\n        tableWidth,\n        widthMarginsAndBorders = that.totalMarginsAndBorders.width,\n        heightMarginsAndBorders = that.totalMarginsAndBorders.height,\n        parentWidthWithoutScroll = that._parentWidthWithoutScroll(),\n        parentHeightWithoutScroll = that._parentHeightWithoutScroll(),\n        rowHeight,\n        rowWidth,\n        cellHeight,\n        cellWidth,\n        curItemWidth = that.curItemWidth,\n        curItemHeight = that.curItemHeight,\n        curItemWidthWithoutWidthMargins = curItemWidth - 2 * itemMargin.width,\n        curItemHeightWithoutHeightMargins = curItemHeight - 2 * itemMargin.height,\n        curItem;\n\n    if (rowCount <= 0) {\n      return undefined;\n    }\n\n    tableStruct = document.createElement('div');\n    tableStruct.classList.add(_css_class_names_1.cssClassNames.widgetViewerTable);\n    tableStruct.classList.add(_css_class_names_1.cssClassNames.widgetViewerIdPrefix + that._viewerID);\n    tableStruct.style.overflow = 'hidden';\n    tableStruct.style.marginLeft = '0px';\n    tableStruct.style.marginRight = '0px';\n\n    if (that._widgetType !== 'card') {\n      cellWidth = ~~Math.max((parentWidthWithoutScroll - columnCount * widthMarginsAndBorders) / columnCount, curItemWidthWithoutWidthMargins);\n      cellHeight = !isHorizontal ? ~~Math.max((parentHeightWithoutScroll - rowCount * heightMarginsAndBorders) / rowCount, curItemHeightWithoutHeightMargins) : curItemHeightWithoutHeightMargins;\n    } else {\n      cellWidth = curItemWidthWithoutWidthMargins;\n      cellHeight = curItemHeightWithoutHeightMargins;\n    }\n\n    rowWidth = (cellWidth + 2 * itemMargin.width) * columnCount;\n\n    if (ignorePadding) {\n      rowWidth -= 2 * itemMargin.width;\n    }\n\n    tableWidth = rowWidth;\n    tableStruct.style.height = '100%';\n    tableStruct.style.width = tableWidth + 'px';\n\n    for (i = 0; i < rowCount; i++) {\n      rowHeight = curItemHeight;\n\n      if (ignorePadding) {\n        if (i === 0 && rowCount === 1) {\n          rowHeight -= 2 * itemMargin.height;\n        } else if (i === 0 || i === rowCount - 1) {\n          rowHeight -= itemMargin.height;\n        }\n      }\n\n      row = document.createElement('div');\n      row.classList.add(_css_class_names_1.cssClassNames.widgetViewerRow);\n      row.style.clear = 'both';\n      row.style.padding = '0px';\n      row.style.margin = '0px';\n      row.style.height = rowHeight + 'px';\n      row.style.width = rowWidth + 'px';\n\n      for (j = 0; j < columnCount; j++) {\n        item = null;\n        col = document.createElement('div');\n        col.classList.add(_css_class_names_1.cssClassNames.widgetViewerCell);\n        col.style.paddingLeft = ignorePadding && j === 0 ? '0' : itemMargin.width + 'px';\n        col.style.paddingRight = ignorePadding && j === columnCount - 1 ? '0' : itemMargin.width + 'px';\n        col.style.paddingTop = ignorePadding && i === 0 ? '0' : itemMargin.height + 'px';\n        col.style.paddingBottom = ignorePadding && i === rowCount - 1 ? '0' : itemMargin.height + 'px';\n        col.style.margin = '0px';\n        col.style.width = cellWidth + 'px';\n        col.style.height = cellHeight + 'px';\n        col.style.cssFloat = 'left';\n        indexItem = that._calcItemIndex(i, j, arrangementInfo.direction, rowCount, columnCount);\n\n        if (indexItem < itemsListLen) {\n          curItem = that.itemsList[indexItem];\n\n          if (that._firstDraw) {\n            item = curItem.initDraw(curItemWidth - widthMarginsAndBorders, curItemHeight - heightMarginsAndBorders, indexItem);\n            action = 'draw';\n          } else {\n            curItem.detachItem();\n            item = curItem.getItemContainer();\n            action = 'resize';\n          }\n\n          if (item) {\n            col.appendChild(item);\n          }\n        }\n\n        row.appendChild(col);\n      }\n\n      tableStruct.appendChild(row);\n    }\n\n    that._processBatchItems(action, 0, enableAnimation);\n\n    that._firstDraw = false;\n    return tableStruct;\n  };\n\n  dxWidgetsViewer.prototype._getItemProportions = function () {\n    return this._itemProportions;\n  };\n\n  dxWidgetsViewer.prototype._calcViewerParams = function (parentWidth, parentHeight, itemCount, method) {\n    var that = this,\n        calcRes = that._calculateArrangementInfo(parentWidth, parentHeight, itemCount, method),\n        getRowCount = function () {\n      var rowCount = undefined;\n\n      if (calcRes.direction === _arrangement_info_1.positioningDirection.Vertical) {\n        rowCount = calcRes.itemsOnRowCount;\n      }\n\n      if (calcRes.direction === _arrangement_info_1.positioningDirection.Horizontal) {\n        rowCount = calcRes.itemsOnColumnCount;\n      }\n\n      return rowCount;\n    },\n        getColumnCount = function () {\n      var colCount = undefined;\n\n      if (calcRes.direction === _arrangement_info_1.positioningDirection.Vertical) {\n        colCount = calcRes.itemsOnColumnCount;\n      }\n\n      if (calcRes.direction === _arrangement_info_1.positioningDirection.Horizontal) {\n        colCount = calcRes.itemsOnRowCount;\n      }\n\n      return colCount;\n    },\n        getWidthByHeight = function (height) {\n      var newItemWidth = ~~(height / (that._getItemProportions() * getRowCount()));\n      return newWidth = newItemWidth * getColumnCount();\n    },\n        getHeightByWidth = function (width) {\n      var newItemHeight = ~~(width * that._getItemProportions() / getColumnCount());\n      return newItemHeight * getRowCount();\n    };\n\n    that._hasHorizontalScroll = 0;\n    that._hasVerticalScroll = 0;\n\n    if (getColumnCount() * calcRes.getWidth() > parentWidth) {\n      calcRes = that._calculateArrangementInfo(parentWidth, parentHeight - that._scrollBarWidth, itemCount, method);\n\n      if (calcRes.direction === _arrangement_info_1.positioningDirection.Vertical && getColumnCount() * calcRes.getWidth() < parentWidth) {\n        var newHeight = getHeightByWidth(parentWidth);\n        if (newHeight <= parentHeight) return that._calculateArrangementInfo(parentWidth, newHeight, itemCount, method);\n      }\n\n      that._hasHorizontalScroll = 1;\n    }\n\n    if (getRowCount() * calcRes.getHeight() > parentHeight) {\n      calcRes = that._calculateArrangementInfo(parentWidth - that._scrollBarWidth, parentHeight, itemCount, method);\n\n      if (calcRes.direction === _arrangement_info_1.positioningDirection.Horizontal && getRowCount() * calcRes.getHeight() < parentHeight) {\n        var newWidth = getWidthByHeight(parentHeight);\n        if (newWidth <= parentWidth) return that._calculateArrangementInfo(newWidth, parentHeight, itemCount, method);\n      }\n\n      that._hasVerticalScroll = 1;\n    }\n\n    return calcRes;\n  };\n\n  dxWidgetsViewer.prototype._createArrangementInfo = function (width, lineCount, itemMinWidth, proportions, direction) {\n    var that = this,\n        itemWidth,\n        itemHeight,\n        options = {};\n\n    if (lineCount < 1) {\n      lineCount = 1;\n    }\n\n    if (that.itemsList.length < lineCount) {\n      lineCount = that.itemsList.length;\n    }\n\n    itemWidth = width / lineCount;\n    itemHeight = ~~(itemWidth * proportions);\n\n    if (itemWidth < itemMinWidth) {\n      itemWidth = itemMinWidth;\n      itemHeight = ~~(itemWidth * proportions);\n    }\n\n    return new _arrangement_info_1.ArrangementInfo(that.itemsList.length, lineCount, itemWidth, itemHeight, this._option.itemOptions.itemMargin, direction, options);\n  };\n\n  dxWidgetsViewer.prototype._calculateArrangementInfo = function (width, height, itemCount, method) {\n    var that = this,\n        horzInfo,\n        newHorzInfo,\n        nextHorzInfo,\n        vertInfo,\n        itemHeight,\n        itemWidth,\n        countOnWidth,\n        i,\n        itemMargin = this._option.itemOptions.itemMargin,\n        itemProportions = that._getItemProportions(),\n        options = {};\n\n    switch (method) {\n      case 'column':\n        return that._createArrangementInfo(width, itemCount, that.minItemWidth, itemProportions, _arrangement_info_1.positioningDirection.Horizontal);\n\n      case 'row':\n        return that._createArrangementInfo(height, itemCount, that.minItemHeight, 1 / itemProportions, _arrangement_info_1.positioningDirection.Vertical);\n\n      case 'auto':\n        if (height < that.minItemHeight && width / that.minItemWidth >= that.itemsList.length) {\n          return new _arrangement_info_1.ArrangementInfo(that.itemsList.length, that.itemsList.length, that.minItemWidth, that.minItemHeight, itemMargin, _arrangement_info_1.positioningDirection.Horizontal, options);\n        }\n\n        horzInfo = that._createArrangementInfo(width, ~~(width / that.minItemWidth), that.minItemWidth, itemProportions, _arrangement_info_1.positioningDirection.Horizontal);\n\n        for (i = horzInfo.itemsOnRowCount - 1; i >= 1; i--) {\n          newHorzInfo = that._createArrangementInfo(width, i, that.minItemWidth, itemProportions, _arrangement_info_1.positioningDirection.Horizontal);\n          if (height >= newHorzInfo.itemsOnColumnCount * newHorzInfo.getHeight(false)) horzInfo = newHorzInfo;else break;\n        }\n\n        nextHorzInfo = that._createArrangementInfo(width, horzInfo.itemsOnRowCount - 1, that.minItemWidth, itemProportions, _arrangement_info_1.positioningDirection.Horizontal);\n        vertInfo = that._createArrangementInfo(height, nextHorzInfo.itemsOnColumnCount, that.minItemHeight, 1 / itemProportions, _arrangement_info_1.positioningDirection.Vertical);\n        itemHeight = vertInfo.getHeight(false);\n        itemWidth = vertInfo.getWidth(false);\n        countOnWidth = nextHorzInfo.itemsOnRowCount;\n        if (horzInfo.getHeight(false) < itemHeight && width >= countOnWidth * itemWidth) horzInfo = new _arrangement_info_1.ArrangementInfo(that.itemsList.length, countOnWidth, itemWidth, itemHeight, itemMargin, _arrangement_info_1.positioningDirection.Horizontal, options);\n\n        if (height < horzInfo.itemsOnColumnCount * horzInfo.getHeight(false)) {\n          vertInfo = that._createArrangementInfo(height, horzInfo.itemsOnColumnCount, that.minItemHeight, 1 / itemProportions, _arrangement_info_1.positioningDirection.Vertical);\n          itemHeight = vertInfo.getHeight(false);\n          itemWidth = vertInfo.getWidth(false);\n          countOnWidth = vertInfo.itemsOnColumnCount;\n          if (height >= vertInfo.itemsOnRowCount * itemHeight && width >= countOnWidth * itemWidth) horzInfo = new _arrangement_info_1.ArrangementInfo(that.itemsList.length, Math.min(~~(width / itemWidth), that.itemsList.length), itemWidth, itemHeight, itemMargin, _arrangement_info_1.positioningDirection.Horizontal, options);\n        }\n\n        return horzInfo;\n\n      default:\n        return null;\n    }\n  };\n\n  dxWidgetsViewer.prototype._drawItems = function (method, itemCount, enableAnimation) {\n    method = method || 'auto';\n    itemCount = itemCount || 1;\n\n    var that = this,\n        parentWidth = that._parentWidth(),\n        parentHeight = that._parentHeight(),\n        viewerParams = that._viewerParams,\n        itemsList = that.itemsList,\n        ignorePadding = this._option.viewer.ignorePadding,\n        itemMargin = this._option.itemOptions.itemMargin,\n        extendedWidth = ignorePadding ? 2 * itemMargin.width : 0,\n        extendedHeight = ignorePadding ? 2 * itemMargin.height : 0;\n\n    if (!itemsList.length) {\n      return null;\n    }\n\n    viewerParams = that._viewerParams = that._calcViewerParams(parentWidth + extendedWidth, parentHeight + extendedHeight, itemCount, method);\n    that.curItemHeight = ~~viewerParams.getHeight();\n    that.curItemWidth = ~~viewerParams.getWidth();\n    return that._createTable(that._viewerParams, enableAnimation);\n  };\n\n  dxWidgetsViewer.prototype.getItemByIndex = function (index) {\n    var indexForCheck, result;\n\n    if (_utils_1.type.isNumeric(index)) {\n      indexForCheck = Number(index);\n      result = this.itemsList[indexForCheck];\n    }\n\n    return _utils_1.type.isDefined(result) ? result : null;\n  };\n\n  dxWidgetsViewer.prototype._getScrollBarWidth = function () {\n    var that = this,\n        useNativeScrolling = that._option.viewer.useNativeScrolling,\n        scrollBarWidth = 0;\n\n    if (useNativeScrolling == 'auto' || useNativeScrolling === false) {\n      return scrollBarWidth;\n    }\n\n    var container = document.createElement('div');\n    container.style.position = 'absolute';\n    container.style.top = '0';\n    container.style.left = '0';\n    container.style.visibility = 'hidden';\n    container.style.width = '200px';\n    container.style.height = '150px';\n    container.style.overflow = 'hidden';\n    document.body.appendChild(container);\n    var p = document.createElement('p');\n    p.style.width = '100%';\n    p.style.height = '300px';\n    container.appendChild(p);\n    var widthWithoutScrollBar = $(p).width();\n\n    var scrollableContent = _render_helper_1.RenderHelper.wrapScrollable(container, this._option.viewer.overflow, 'both');\n\n    if (scrollableContent == container) {\n      scrollableContent = p;\n    }\n\n    scrollBarWidth = widthWithoutScrollBar - $(scrollableContent).width();\n\n    if (scrollBarWidth > 0) {\n      scrollBarWidth++;\n    }\n\n    container.parentElement.removeChild(container);\n    return scrollBarWidth;\n  };\n\n  dxWidgetsViewer.prototype._processBatchItems = function (functionName, startIndex, enableAnimation) {\n    var that = this,\n        dateStart = Date.now(),\n        itemsList = that.itemsList,\n        itemsListLen = itemsList.length,\n        totalMarginsAndBorders = that.totalMarginsAndBorders,\n        widthMarginsAndBorders = totalMarginsAndBorders.width,\n        heightMarginsAndBorders = totalMarginsAndBorders.height,\n        viewer = this._option.viewer,\n        onAllItemsRenderComplete = viewer.onAllItemsRenderComplete,\n        bulkTimesRenderingTimeInterval = viewer.bulkTimesRenderingTimeInterval,\n        itemWidth = that.curItemWidth - widthMarginsAndBorders,\n        itemHeight = that.curItemHeight - heightMarginsAndBorders,\n        commonItemsOptions,\n        itemsStyle;\n\n    if (!itemsList[startIndex]) {\n      return;\n    }\n\n    commonItemsOptions = itemsList[startIndex].calcCommonItemSpecificOptions(itemWidth, itemHeight);\n    itemsStyle = itemsList[startIndex].getCssStyle(itemWidth, itemHeight, commonItemsOptions, '.' + _css_class_names_1.cssClassNames.widgetViewerIdPrefix + that._viewerID);\n    that._styleTag && that._styleTag.parentElement.removeChild(that._styleTag);\n    that._styleTag = document.createElement('style');\n    that._styleTag.innerText = itemsStyle;\n    that._styleTag.type = 'text/css';\n    document.head.appendChild(that._styleTag);\n\n    var internalProcessBatchItems = function () {\n      if (typeof itemsList[startIndex][functionName] === 'function') {\n        dateStart = Date.now();\n\n        do {\n          if (startIndex < itemsListLen) {\n            itemsList[startIndex][functionName](itemWidth, itemHeight, startIndex, commonItemsOptions);\n            ++startIndex;\n          }\n\n          if (!itemsList[startIndex]) {\n            if (typeof onAllItemsRenderComplete === 'function') {\n              onAllItemsRenderComplete.call(null);\n            }\n\n            return;\n          }\n        } while (Date.now() - dateStart < bulkTimesRenderingTimeInterval);\n\n        that._drawTimer = window.setTimeout(function () {\n          internalProcessBatchItems();\n        }, 0);\n      }\n    };\n\n    if (enableAnimation) that._drawTimer = window.setTimeout(function () {\n      internalProcessBatchItems();\n    }, 0);else internalProcessBatchItems();\n  };\n\n  return dxWidgetsViewer;\n}(_widgets_viewer_base_1.WidgetsViewerBase);\n\nexports.dxWidgetsViewer = dxWidgetsViewer;","map":{"version":3,"sources":["/Users/krunalpatel/Downloads/React-Firebase-Auth-master 3/node_modules/devexpress-dashboard/viewer-parts/widgets/widgets-viewer/_widgets-viewer.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","dxWidgetsViewer","$","require","_jquery_helpers_1","_utils_1","_dashboard_viewer_constants_1","_render_helper_1","_card_item_1","_arrangement_info_1","_css_class_names_1","_widget_item_1","_widgets_viewer_base_1","viewerCount","_super","element","options","_getDefaultOptions","dataSource","viewer","hoverEnabled","overflow","method","count","widgetType","redrawOnResize","onclick","onRenderComplete","onAllItemsRenderComplete","bulkTimesRenderingTimeInterval","useNativeScrolling","ignorePadding","supportAnimation","itemOptions","encodeHtml","minWidth","undefined","proportions","ignoreProportions","itemMargin","width","height","borderWidth","hasSparkline","_init","_option","_viewerID","initContainer","_content","RenderHelper","wrapScrollable","container","_scrollBarWidth","_getScrollBarWidth","_updateByOptions","_createItems","totalMarginsAndBorders","_calcTotalMarginsAndBorders","_render","_update","document","createElement","$unwrap","appendChild","classList","add","cssClassNames","widgetsViewerScrollableHolder","clear","parentElement","removeChild","dispose","that","clearTimeout","_drawTimer","itemsList","forEach","item","_widgetType","_resizeHandler","_styleTag","_getScrollable","getScrollable","_updateScrollable","updateScrollable","_scrollTo","left","top","scrollable","scrollTo","x","y","_rootContent","scrollLeft","scrollTop","_scrollOffset","scrollOffset","_parentHeight","offset","_parentWidth","_parentWidthWithoutScroll","_hasVerticalScroll","_parentHeightWithoutScroll","_hasHorizontalScroll","_getResizeHandler","redraw","viewerOptions","toLowerCase","align","minItemWidth","curItemWidth","_itemProportions","_needVerticalCentering","minItemHeight","curItemHeight","getSizeParams","scrollableContent","querySelector","widgetViewerTable","virtualSize","outerWidth","outerHeight","scroll","size","horizontal","vertical","getSelectedItems","filter","_isSelected","clearSelections","clearSelection","_this","data","rootElement","dataItem","isSelected","cursor","tag","parentRootElement","push","CardItem","WidgetItem","_firstDraw","_viewerParams","_refresh","drawOptions","itemCount","clickHandler","hoverHandler","onhover","table","contentElement","overflowX","style","overflowY","parentRoot","overflowXParentRoot","overflowYParentRoot","animationEnabled","innerHTML","length","ELEMENTS_COUNT_ANIMATION_THRESHOLD","_drawItems","innerContainer","widgetViewerContainer","textAlign","padding","margin","finishRender","direction","_verticalCentering","differenceTop","paddingTop","_calcItemIndex","i","j","rowCount","columnCount","positioningDirection","Horizontal","_calcVisibleRow","cardHeight","Math","ceil","_calcVisibleColumn","cardWidth","_getPartArray","array","indexOfPart","result","beg","_createTable","arrangementInfo","enableAnimation","tableStruct","indexItem","col","row","isHorizontal","itemsOnRowCount","itemsOnColumnCount","action","itemsListLen","tableWidth","widthMarginsAndBorders","heightMarginsAndBorders","parentWidthWithoutScroll","parentHeightWithoutScroll","rowHeight","rowWidth","cellHeight","cellWidth","curItemWidthWithoutWidthMargins","curItemHeightWithoutHeightMargins","curItem","widgetViewerIdPrefix","marginLeft","marginRight","max","widgetViewerRow","widgetViewerCell","paddingLeft","paddingRight","paddingBottom","cssFloat","initDraw","detachItem","getItemContainer","_processBatchItems","_getItemProportions","_calcViewerParams","parentWidth","parentHeight","calcRes","_calculateArrangementInfo","getRowCount","Vertical","getColumnCount","colCount","getWidthByHeight","newItemWidth","newWidth","getHeightByWidth","newItemHeight","getWidth","newHeight","getHeight","_createArrangementInfo","lineCount","itemMinWidth","itemWidth","itemHeight","ArrangementInfo","horzInfo","newHorzInfo","nextHorzInfo","vertInfo","countOnWidth","itemProportions","min","viewerParams","extendedWidth","extendedHeight","getItemByIndex","index","indexForCheck","type","isNumeric","Number","isDefined","scrollBarWidth","position","visibility","body","widthWithoutScrollBar","functionName","startIndex","dateStart","Date","now","commonItemsOptions","itemsStyle","calcCommonItemSpecificOptions","getCssStyle","innerText","head","internalProcessBatchItems","window","setTimeout","WidgetsViewerBase"],"mappings":"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","sourcesContent":["/**\r\n* DevExpress Dashboard (_widgets-viewer.js)\r\n* Version:  22.1.3\r\n* Build date: Jun 13, 2022\r\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\r\n*/\r\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dxWidgetsViewer = void 0;\nvar $ = require(\"jquery\");\nvar _jquery_helpers_1 = require(\"../../../data/_jquery-helpers\");\nvar _utils_1 = require(\"../../../data/_utils\");\nvar _dashboard_viewer_constants_1 = require(\"../../viewer/_dashboard-viewer-constants\");\nvar _render_helper_1 = require(\"../_render-helper\");\nvar _card_item_1 = require(\"./cards/_card-item\");\nvar _arrangement_info_1 = require(\"./_arrangement-info\");\nvar _css_class_names_1 = require(\"./_css-class-names\");\nvar _widget_item_1 = require(\"./_widget-item\");\nvar _widgets_viewer_base_1 = require(\"./_widgets-viewer-base\");\nvar viewerCount = 0;\nvar dxWidgetsViewer = (function (_super) {\n    __extends(dxWidgetsViewer, _super);\n    function dxWidgetsViewer(element, options) {\n        return _super.call(this, element, options) || this;\n    }\n    dxWidgetsViewer.prototype._getDefaultOptions = function () {\n        return {\n            dataSource: [],\n            viewer: {\n                hoverEnabled: false,\n                overflow: 'auto',\n                method: 'auto',\n                count: 1,\n                widgetType: 'card',\n                redrawOnResize: false,\n                onclick: null,\n                onRenderComplete: null,\n                onAllItemsRenderComplete: null,\n                bulkTimesRenderingTimeInterval: 200,\n                useNativeScrolling: 'auto',\n                ignorePadding: false,\n                supportAnimation: false\n            },\n            itemOptions: {\n                encodeHtml: true,\n                minWidth: undefined,\n                proportions: undefined,\n                ignoreProportions: false,\n                itemMargin: {\n                    width: 5,\n                    height: 5\n                },\n                borderWidth: 1,\n                hasSparkline: false\n            }\n        };\n    };\n    dxWidgetsViewer.prototype._init = function () {\n        var viewer = this._option.viewer;\n        this._viewerID = viewerCount++;\n        this.initContainer();\n        this._content = _render_helper_1.RenderHelper.wrapScrollable(this.container, viewer.overflow, 'both');\n        this._scrollBarWidth = this._getScrollBarWidth();\n        this._updateByOptions();\n        this._createItems();\n        this.totalMarginsAndBorders = this._calcTotalMarginsAndBorders();\n        this._render();\n    };\n    dxWidgetsViewer.prototype._update = function () {\n        this._updateByOptions();\n        this._createItems();\n        this._render();\n    };\n    dxWidgetsViewer.prototype.initContainer = function () {\n        this.container = document.createElement('div');\n        _jquery_helpers_1.$unwrap(this.element()).appendChild(this.container);\n        this.container.classList.add(_css_class_names_1.cssClassNames.widgetsViewerScrollableHolder);\n    };\n    dxWidgetsViewer.prototype.clear = function () {\n        this.container.parentElement.removeChild(this.container);\n    };\n    dxWidgetsViewer.prototype.dispose = function () {\n        var that = this;\n        clearTimeout(that._drawTimer);\n        that._drawTimer = null;\n        (that.itemsList || []).forEach(function (item) { return item.dispose(); });\n        that._content = null;\n        that._scrollBarWidth = null;\n        that._widgetType = null;\n        that.itemsList = null;\n        that.totalMarginsAndBorders = null;\n        that._resizeHandler = null;\n        if (that._styleTag) {\n            that._styleTag.parentElement.removeChild(that._styleTag);\n            that._styleTag = null;\n        }\n        _super.prototype.dispose.call(this);\n    };\n    dxWidgetsViewer.prototype._getScrollable = function () {\n        return _render_helper_1.RenderHelper.getScrollable(this.container);\n    };\n    dxWidgetsViewer.prototype._updateScrollable = function () {\n        _render_helper_1.RenderHelper.updateScrollable(this.container);\n    };\n    dxWidgetsViewer.prototype._scrollTo = function (left, top) {\n        var that = this, scrollable = this._getScrollable();\n        if (scrollable) {\n            scrollable.scrollTo({ x: left, y: top });\n        }\n        else {\n            $(that._rootContent()).scrollLeft(left);\n            $(that._rootContent()).scrollTop(top);\n        }\n    };\n    dxWidgetsViewer.prototype._scrollOffset = function () {\n        var that = this, scrollable = this._getScrollable();\n        if (scrollable) {\n            return scrollable.scrollOffset();\n        }\n        else {\n            return {\n                left: $(that._rootContent()).scrollLeft(),\n                top: $(that._rootContent()).scrollTop()\n            };\n        }\n    };\n    dxWidgetsViewer.prototype._rootContent = function () {\n        return this._content;\n    };\n    dxWidgetsViewer.prototype._parentHeight = function () {\n        var offset = 0;\n        return $(this.container).height() - offset;\n    };\n    dxWidgetsViewer.prototype._parentWidth = function () {\n        var offset = 0;\n        return $(this.container).width() - offset;\n    };\n    dxWidgetsViewer.prototype._parentWidthWithoutScroll = function () {\n        var that = this;\n        return that._parentWidth() - that._scrollBarWidth * that._hasVerticalScroll;\n    };\n    dxWidgetsViewer.prototype._parentHeightWithoutScroll = function () {\n        var that = this;\n        return that._parentHeight() - that._scrollBarWidth * that._hasHorizontalScroll;\n    };\n    dxWidgetsViewer.prototype._getResizeHandler = function () {\n        var that = this;\n        return function () {\n            that.redraw();\n        };\n    };\n    dxWidgetsViewer.prototype._updateByOptions = function () {\n        var viewerOptions = this._option.viewer, itemOptions = this._option.itemOptions, proportions = itemOptions.proportions, width = itemOptions.minWidth;\n        this._widgetType = viewerOptions.widgetType.toLowerCase();\n        this.align = viewerOptions.align;\n        if (this._widgetType === 'card') {\n            this.align = this.align || 'left';\n            this.minItemWidth = this.curItemWidth = width || 180;\n            this._itemProportions = proportions || (itemOptions.hasSparkline ? 0.625 : 0.5);\n        }\n        else {\n            this.align = this.align || 'center';\n            this.minItemWidth = this.curItemWidth = width || 200;\n            this._itemProportions = proportions || 1;\n            this._needVerticalCentering = true;\n        }\n        this.minItemHeight = this.curItemHeight = this._itemProportions * this.minItemWidth;\n    };\n    dxWidgetsViewer.prototype.getSizeParams = function () {\n        var scrollOffset = this._scrollOffset();\n        var scrollableContent = this.container.querySelector('.' + _css_class_names_1.cssClassNames.widgetViewerTable);\n        var itemMargin = this._option.itemOptions.itemMargin;\n        return {\n            virtualSize: {\n                width: $(scrollableContent).outerWidth(),\n                height: $(scrollableContent).outerHeight()\n            },\n            scroll: {\n                top: scrollOffset.top,\n                left: scrollOffset.left,\n                size: this._scrollBarWidth,\n                horizontal: this._hasHorizontalScroll === 1,\n                vertical: this._hasVerticalScroll === 1\n            },\n            itemMargin: {\n                width: itemMargin.width,\n                height: itemMargin.height\n            }\n        };\n    };\n    dxWidgetsViewer.prototype.getSelectedItems = function () {\n        return this.itemsList.filter(function (item) { return item._isSelected; });\n    };\n    dxWidgetsViewer.prototype.clearSelections = function () {\n        this.itemsList.forEach(function (item) { return item.clearSelection(); });\n    };\n    dxWidgetsViewer.prototype._createItems = function () {\n        var _this = this;\n        var data = this._option.dataSource;\n        var itemOptions = this._option.itemOptions;\n        var rootElement = this._rootContent();\n        (this.itemsList || []).forEach(function (item) { return item.dispose(); });\n        this.itemsList = [];\n        data.forEach(function (dataItem) {\n            itemOptions.widgetType = _this._widgetType;\n            itemOptions.hoverEnabled = dataItem.hoverEnabled;\n            itemOptions.isSelected = dataItem.isSelected;\n            itemOptions.cursor = dataItem.cursor;\n            itemOptions.tag = dataItem.tag;\n            itemOptions.parentRootElement = rootElement;\n            _this.itemsList.push((_this._widgetType == 'card') ? new _card_item_1.CardItem(dataItem, itemOptions) : new _widget_item_1.WidgetItem(dataItem, itemOptions));\n        });\n        this._firstDraw = true;\n        delete this._viewerParams;\n    };\n    dxWidgetsViewer.prototype._refresh = function () {\n        this.curItemWidth = this.minItemWidth;\n        this.curItemHeight = this.minItemHeight;\n        this._createItems();\n    };\n    dxWidgetsViewer.prototype._calcTotalMarginsAndBorders = function () {\n        var itemOptions = this._option.itemOptions, borderWidth = itemOptions.borderWidth || 0;\n        return {\n            width: 2 * (itemOptions.itemMargin.width + borderWidth),\n            height: 2 * (itemOptions.itemMargin.height + borderWidth)\n        };\n    };\n    dxWidgetsViewer.prototype._render = function (drawOptions) {\n        var viewer = this._option.viewer;\n        var onRenderComplete = viewer.onRenderComplete;\n        var method = viewer.method.toLowerCase();\n        var itemCount = viewer.count;\n        var clickHandler = viewer.onclick;\n        var hoverHandler = viewer.onhover;\n        var supportAnimation = viewer.supportAnimation;\n        var table;\n        var contentElement = this._rootContent();\n        var overflowX = contentElement.style.overflowX;\n        var overflowY = contentElement.style.overflowY;\n        var parentRoot = contentElement.parentElement;\n        var overflowXParentRoot = parentRoot.style.overflowX;\n        var overflowYParentRoot = parentRoot.style.overflowY;\n        var scrollOffset = this._scrollOffset();\n        var animationEnabled = supportAnimation && !contentElement.innerHTML && this.itemsList.length <= _dashboard_viewer_constants_1.ELEMENTS_COUNT_ANIMATION_THRESHOLD;\n        clearTimeout(this._drawTimer);\n        table = this._drawItems(method, itemCount, animationEnabled);\n        contentElement.innerHTML = '';\n        contentElement.style.overflow = 'hidden';\n        parentRoot.style.overflow = 'hidden';\n        if (table) {\n            this.innerContainer = document.createElement('div');\n            this.innerContainer.classList.add(_css_class_names_1.cssClassNames.widgetViewerContainer);\n            this.innerContainer.style.textAlign = this.align;\n            this.innerContainer.style.padding = '0';\n            this.innerContainer.style.margin = '0';\n            contentElement.appendChild(this.innerContainer);\n            this.innerContainer.appendChild(table);\n            this.itemsList.forEach(function (item) {\n                item.finishRender({\n                    clickHandler: clickHandler, hoverHandler: hoverHandler, drawOptions: drawOptions\n                });\n            });\n            if (this._needVerticalCentering && this.innerContainer && this._viewerParams.direction === 'Horizontal') {\n                this._verticalCentering(table);\n            }\n        }\n        contentElement.style.overflowX = overflowX;\n        contentElement.style.overflowY = overflowY;\n        parentRoot.style.overflowX = overflowXParentRoot;\n        parentRoot.style.overflowY = overflowYParentRoot;\n        this._updateScrollable();\n        this._scrollTo(scrollOffset.left, scrollOffset.top);\n        if (onRenderComplete) {\n            onRenderComplete.call(null);\n        }\n    };\n    dxWidgetsViewer.prototype._verticalCentering = function (table) {\n        var that = this, differenceTop = that._parentHeight() - $(that.container.querySelector('.' + _css_class_names_1.cssClassNames.widgetViewerContainer)).height();\n        if (differenceTop > 0) {\n            that.innerContainer.style.paddingTop = ~~((differenceTop) / 2) + 'px';\n        }\n        else {\n            that.innerContainer.style.paddingTop = '0px';\n        }\n    };\n    dxWidgetsViewer.prototype.redraw = function () {\n        this._render();\n    };\n    dxWidgetsViewer.prototype._calcItemIndex = function (i, j, direction, rowCount, columnCount) {\n        return direction == _arrangement_info_1.positioningDirection.Horizontal ?\n            i * columnCount + j : j * rowCount + i;\n    };\n    dxWidgetsViewer.prototype._calcVisibleRow = function (cardHeight) {\n        var height = this._parentHeight();\n        return Math.ceil(height / cardHeight);\n    };\n    dxWidgetsViewer.prototype._calcVisibleColumn = function (cardWidth) {\n        var width = this._parentWidth();\n        return Math.ceil(width / cardWidth);\n    };\n    dxWidgetsViewer.prototype._getPartArray = function (array, count, indexOfPart) {\n        var result = [], i = 0, beg = count * indexOfPart;\n        for (i = beg; i < beg + count; i++) {\n            result.push(array[i]);\n        }\n        return result;\n    };\n    dxWidgetsViewer.prototype._createTable = function (arrangementInfo, enableAnimation) {\n        var that = this, tableStruct, i, j, indexItem, col, row, item, isHorizontal = arrangementInfo.direction == _arrangement_info_1.positioningDirection.Horizontal, itemMargin = this._option.itemOptions.itemMargin, ignorePadding = this._option.viewer.ignorePadding, columnCount = isHorizontal ? arrangementInfo.itemsOnRowCount : arrangementInfo.itemsOnColumnCount, rowCount = isHorizontal ? arrangementInfo.itemsOnColumnCount : arrangementInfo.itemsOnRowCount, action, itemsListLen = that.itemsList.length, tableWidth, widthMarginsAndBorders = that.totalMarginsAndBorders.width, heightMarginsAndBorders = that.totalMarginsAndBorders.height, parentWidthWithoutScroll = that._parentWidthWithoutScroll(), parentHeightWithoutScroll = that._parentHeightWithoutScroll(), rowHeight, rowWidth, cellHeight, cellWidth, curItemWidth = that.curItemWidth, curItemHeight = that.curItemHeight, curItemWidthWithoutWidthMargins = curItemWidth - 2 * itemMargin.width, curItemHeightWithoutHeightMargins = curItemHeight - 2 * itemMargin.height, curItem;\n        if (rowCount <= 0) {\n            return undefined;\n        }\n        tableStruct = document.createElement('div');\n        tableStruct.classList.add(_css_class_names_1.cssClassNames.widgetViewerTable);\n        tableStruct.classList.add(_css_class_names_1.cssClassNames.widgetViewerIdPrefix + that._viewerID);\n        tableStruct.style.overflow = 'hidden';\n        tableStruct.style.marginLeft = '0px';\n        tableStruct.style.marginRight = '0px';\n        if (that._widgetType !== 'card') {\n            cellWidth = ~~(Math.max((parentWidthWithoutScroll - columnCount * widthMarginsAndBorders) / columnCount, curItemWidthWithoutWidthMargins));\n            cellHeight = !isHorizontal ? ~~(Math.max((parentHeightWithoutScroll - rowCount * heightMarginsAndBorders) / rowCount, curItemHeightWithoutHeightMargins)) : curItemHeightWithoutHeightMargins;\n        }\n        else {\n            cellWidth = curItemWidthWithoutWidthMargins;\n            cellHeight = curItemHeightWithoutHeightMargins;\n        }\n        rowWidth = (cellWidth + 2 * itemMargin.width) * columnCount;\n        if (ignorePadding) {\n            rowWidth -= 2 * itemMargin.width;\n        }\n        tableWidth = rowWidth;\n        tableStruct.style.height = '100%';\n        tableStruct.style.width = tableWidth + 'px';\n        for (i = 0; i < rowCount; i++) {\n            rowHeight = curItemHeight;\n            if (ignorePadding) {\n                if (i === 0 && rowCount === 1) {\n                    rowHeight -= 2 * itemMargin.height;\n                }\n                else if (i === 0 || i === rowCount - 1) {\n                    rowHeight -= itemMargin.height;\n                }\n            }\n            row = document.createElement('div');\n            row.classList.add(_css_class_names_1.cssClassNames.widgetViewerRow);\n            row.style.clear = 'both';\n            row.style.padding = '0px';\n            row.style.margin = '0px';\n            row.style.height = rowHeight + 'px';\n            row.style.width = rowWidth + 'px';\n            for (j = 0; j < columnCount; j++) {\n                item = null;\n                col = document.createElement('div');\n                col.classList.add(_css_class_names_1.cssClassNames.widgetViewerCell);\n                col.style.paddingLeft = ignorePadding && (j === 0) ? '0' : itemMargin.width + 'px';\n                col.style.paddingRight = ignorePadding && (j === columnCount - 1) ? '0' : itemMargin.width + 'px';\n                col.style.paddingTop = ignorePadding && (i === 0) ? '0' : itemMargin.height + 'px';\n                col.style.paddingBottom = ignorePadding && (i === rowCount - 1) ? '0' : itemMargin.height + 'px';\n                col.style.margin = '0px';\n                col.style.width = cellWidth + 'px';\n                col.style.height = cellHeight + 'px';\n                col.style.cssFloat = 'left';\n                indexItem = that._calcItemIndex(i, j, arrangementInfo.direction, rowCount, columnCount);\n                if (indexItem < itemsListLen) {\n                    curItem = that.itemsList[indexItem];\n                    if (that._firstDraw) {\n                        item = curItem.initDraw(curItemWidth - widthMarginsAndBorders, curItemHeight - heightMarginsAndBorders, indexItem);\n                        action = 'draw';\n                    }\n                    else {\n                        curItem.detachItem();\n                        item = curItem.getItemContainer();\n                        action = 'resize';\n                    }\n                    if (item) {\n                        col.appendChild(item);\n                    }\n                }\n                row.appendChild(col);\n            }\n            tableStruct.appendChild(row);\n        }\n        that._processBatchItems(action, 0, enableAnimation);\n        that._firstDraw = false;\n        return tableStruct;\n    };\n    dxWidgetsViewer.prototype._getItemProportions = function () {\n        return this._itemProportions;\n    };\n    dxWidgetsViewer.prototype._calcViewerParams = function (parentWidth, parentHeight, itemCount, method) {\n        var that = this, calcRes = that._calculateArrangementInfo(parentWidth, parentHeight, itemCount, method), getRowCount = function () {\n            var rowCount = undefined;\n            if (calcRes.direction === _arrangement_info_1.positioningDirection.Vertical) {\n                rowCount = calcRes.itemsOnRowCount;\n            }\n            if (calcRes.direction === _arrangement_info_1.positioningDirection.Horizontal) {\n                rowCount = calcRes.itemsOnColumnCount;\n            }\n            return rowCount;\n        }, getColumnCount = function () {\n            var colCount = undefined;\n            if (calcRes.direction === _arrangement_info_1.positioningDirection.Vertical) {\n                colCount = calcRes.itemsOnColumnCount;\n            }\n            if (calcRes.direction === _arrangement_info_1.positioningDirection.Horizontal) {\n                colCount = calcRes.itemsOnRowCount;\n            }\n            return colCount;\n        }, getWidthByHeight = function (height) {\n            var newItemWidth = ~~(height / (that._getItemProportions() * getRowCount()));\n            return newWidth = newItemWidth * getColumnCount();\n        }, getHeightByWidth = function (width) {\n            var newItemHeight = ~~(width * that._getItemProportions() / getColumnCount());\n            return newItemHeight * getRowCount();\n        };\n        that._hasHorizontalScroll = 0;\n        that._hasVerticalScroll = 0;\n        if (getColumnCount() * calcRes.getWidth() > parentWidth) {\n            calcRes = that._calculateArrangementInfo(parentWidth, parentHeight - that._scrollBarWidth, itemCount, method);\n            if (calcRes.direction === _arrangement_info_1.positioningDirection.Vertical && (getColumnCount() * calcRes.getWidth() < parentWidth)) {\n                var newHeight = getHeightByWidth(parentWidth);\n                if (newHeight <= parentHeight)\n                    return that._calculateArrangementInfo(parentWidth, newHeight, itemCount, method);\n            }\n            that._hasHorizontalScroll = 1;\n        }\n        if (getRowCount() * calcRes.getHeight() > parentHeight) {\n            calcRes = that._calculateArrangementInfo(parentWidth - that._scrollBarWidth, parentHeight, itemCount, method);\n            if (calcRes.direction === _arrangement_info_1.positioningDirection.Horizontal && (getRowCount() * calcRes.getHeight() < parentHeight)) {\n                var newWidth = getWidthByHeight(parentHeight);\n                if (newWidth <= parentWidth)\n                    return that._calculateArrangementInfo(newWidth, parentHeight, itemCount, method);\n            }\n            that._hasVerticalScroll = 1;\n        }\n        return calcRes;\n    };\n    dxWidgetsViewer.prototype._createArrangementInfo = function (width, lineCount, itemMinWidth, proportions, direction) {\n        var that = this, itemWidth, itemHeight, options = {};\n        if (lineCount < 1) {\n            lineCount = 1;\n        }\n        if (that.itemsList.length < lineCount) {\n            lineCount = that.itemsList.length;\n        }\n        itemWidth = width / lineCount;\n        itemHeight = ~~(itemWidth * proportions);\n        if (itemWidth < itemMinWidth) {\n            itemWidth = itemMinWidth;\n            itemHeight = ~~(itemWidth * proportions);\n        }\n        return new _arrangement_info_1.ArrangementInfo(that.itemsList.length, lineCount, itemWidth, itemHeight, this._option.itemOptions.itemMargin, direction, options);\n    };\n    dxWidgetsViewer.prototype._calculateArrangementInfo = function (width, height, itemCount, method) {\n        var that = this, horzInfo, newHorzInfo, nextHorzInfo, vertInfo, itemHeight, itemWidth, countOnWidth, i, itemMargin = this._option.itemOptions.itemMargin, itemProportions = that._getItemProportions(), options = {};\n        switch (method) {\n            case 'column':\n                return that._createArrangementInfo(width, itemCount, that.minItemWidth, itemProportions, _arrangement_info_1.positioningDirection.Horizontal);\n            case 'row':\n                return that._createArrangementInfo(height, itemCount, that.minItemHeight, 1 / itemProportions, _arrangement_info_1.positioningDirection.Vertical);\n            case 'auto':\n                if (height < that.minItemHeight && width / that.minItemWidth >= that.itemsList.length) {\n                    return new _arrangement_info_1.ArrangementInfo(that.itemsList.length, that.itemsList.length, that.minItemWidth, that.minItemHeight, itemMargin, _arrangement_info_1.positioningDirection.Horizontal, options);\n                }\n                horzInfo = that._createArrangementInfo(width, ~~(width / that.minItemWidth), that.minItemWidth, itemProportions, _arrangement_info_1.positioningDirection.Horizontal);\n                for (i = horzInfo.itemsOnRowCount - 1; i >= 1; i--) {\n                    newHorzInfo = that._createArrangementInfo(width, i, that.minItemWidth, itemProportions, _arrangement_info_1.positioningDirection.Horizontal);\n                    if (height >= newHorzInfo.itemsOnColumnCount * newHorzInfo.getHeight(false))\n                        horzInfo = newHorzInfo;\n                    else\n                        break;\n                }\n                nextHorzInfo = that._createArrangementInfo(width, horzInfo.itemsOnRowCount - 1, that.minItemWidth, itemProportions, _arrangement_info_1.positioningDirection.Horizontal);\n                vertInfo = that._createArrangementInfo(height, nextHorzInfo.itemsOnColumnCount, that.minItemHeight, 1 / itemProportions, _arrangement_info_1.positioningDirection.Vertical);\n                itemHeight = vertInfo.getHeight(false);\n                itemWidth = vertInfo.getWidth(false);\n                countOnWidth = nextHorzInfo.itemsOnRowCount;\n                if (horzInfo.getHeight(false) < itemHeight && width >= countOnWidth * itemWidth)\n                    horzInfo = new _arrangement_info_1.ArrangementInfo(that.itemsList.length, countOnWidth, itemWidth, itemHeight, itemMargin, _arrangement_info_1.positioningDirection.Horizontal, options);\n                if (height < horzInfo.itemsOnColumnCount * horzInfo.getHeight(false)) {\n                    vertInfo = that._createArrangementInfo(height, horzInfo.itemsOnColumnCount, that.minItemHeight, 1 / itemProportions, _arrangement_info_1.positioningDirection.Vertical);\n                    itemHeight = vertInfo.getHeight(false);\n                    itemWidth = vertInfo.getWidth(false);\n                    countOnWidth = vertInfo.itemsOnColumnCount;\n                    if (height >= vertInfo.itemsOnRowCount * itemHeight && width >= countOnWidth * itemWidth)\n                        horzInfo = new _arrangement_info_1.ArrangementInfo(that.itemsList.length, Math.min(~~(width / itemWidth), that.itemsList.length), itemWidth, itemHeight, itemMargin, _arrangement_info_1.positioningDirection.Horizontal, options);\n                }\n                return horzInfo;\n            default:\n                return null;\n        }\n    };\n    dxWidgetsViewer.prototype._drawItems = function (method, itemCount, enableAnimation) {\n        method = method || 'auto';\n        itemCount = itemCount || 1;\n        var that = this, parentWidth = that._parentWidth(), parentHeight = that._parentHeight(), viewerParams = that._viewerParams, itemsList = that.itemsList, ignorePadding = this._option.viewer.ignorePadding, itemMargin = this._option.itemOptions.itemMargin, extendedWidth = ignorePadding ? 2 * itemMargin.width : 0, extendedHeight = ignorePadding ? 2 * itemMargin.height : 0;\n        if (!itemsList.length) {\n            return null;\n        }\n        viewerParams = that._viewerParams = that._calcViewerParams(parentWidth + extendedWidth, parentHeight + extendedHeight, itemCount, method);\n        that.curItemHeight = ~~viewerParams.getHeight();\n        that.curItemWidth = ~~viewerParams.getWidth();\n        return that._createTable(that._viewerParams, enableAnimation);\n    };\n    dxWidgetsViewer.prototype.getItemByIndex = function (index) {\n        var indexForCheck, result;\n        if (_utils_1.type.isNumeric(index)) {\n            indexForCheck = Number(index);\n            result = this.itemsList[indexForCheck];\n        }\n        return _utils_1.type.isDefined(result) ? result : null;\n    };\n    dxWidgetsViewer.prototype._getScrollBarWidth = function () {\n        var that = this, useNativeScrolling = that._option.viewer.useNativeScrolling, scrollBarWidth = 0;\n        if (useNativeScrolling == 'auto' || useNativeScrolling === false) {\n            return scrollBarWidth;\n        }\n        var container = document.createElement('div');\n        container.style.position = 'absolute';\n        container.style.top = '0';\n        container.style.left = '0';\n        container.style.visibility = 'hidden';\n        container.style.width = '200px';\n        container.style.height = '150px';\n        container.style.overflow = 'hidden';\n        document.body.appendChild(container);\n        var p = document.createElement('p');\n        p.style.width = '100%';\n        p.style.height = '300px';\n        container.appendChild(p);\n        var widthWithoutScrollBar = $(p).width();\n        var scrollableContent = _render_helper_1.RenderHelper.wrapScrollable(container, this._option.viewer.overflow, 'both');\n        if (scrollableContent == container) {\n            scrollableContent = p;\n        }\n        scrollBarWidth = widthWithoutScrollBar - $(scrollableContent).width();\n        if (scrollBarWidth > 0) {\n            scrollBarWidth++;\n        }\n        container.parentElement.removeChild(container);\n        return scrollBarWidth;\n    };\n    dxWidgetsViewer.prototype._processBatchItems = function (functionName, startIndex, enableAnimation) {\n        var that = this, dateStart = Date.now(), itemsList = that.itemsList, itemsListLen = itemsList.length, totalMarginsAndBorders = that.totalMarginsAndBorders, widthMarginsAndBorders = totalMarginsAndBorders.width, heightMarginsAndBorders = totalMarginsAndBorders.height, viewer = this._option.viewer, onAllItemsRenderComplete = viewer.onAllItemsRenderComplete, bulkTimesRenderingTimeInterval = viewer.bulkTimesRenderingTimeInterval, itemWidth = that.curItemWidth - widthMarginsAndBorders, itemHeight = that.curItemHeight - heightMarginsAndBorders, commonItemsOptions, itemsStyle;\n        if (!itemsList[startIndex]) {\n            return;\n        }\n        commonItemsOptions = itemsList[startIndex].calcCommonItemSpecificOptions(itemWidth, itemHeight);\n        itemsStyle = itemsList[startIndex].getCssStyle(itemWidth, itemHeight, commonItemsOptions, '.' + _css_class_names_1.cssClassNames.widgetViewerIdPrefix + that._viewerID);\n        that._styleTag && that._styleTag.parentElement.removeChild(that._styleTag);\n        that._styleTag = document.createElement('style');\n        that._styleTag.innerText = itemsStyle;\n        that._styleTag.type = 'text/css';\n        document.head.appendChild(that._styleTag);\n        var internalProcessBatchItems = function () {\n            if (typeof itemsList[startIndex][functionName] === 'function') {\n                dateStart = Date.now();\n                do {\n                    if (startIndex < itemsListLen) {\n                        itemsList[startIndex][functionName](itemWidth, itemHeight, startIndex, commonItemsOptions);\n                        ++startIndex;\n                    }\n                    if (!itemsList[startIndex]) {\n                        if (typeof onAllItemsRenderComplete === 'function') {\n                            onAllItemsRenderComplete.call(null);\n                        }\n                        return;\n                    }\n                } while (Date.now() - dateStart < bulkTimesRenderingTimeInterval);\n                that._drawTimer = window.setTimeout(function () { internalProcessBatchItems(); }, 0);\n            }\n        };\n        if (enableAnimation)\n            that._drawTimer = window.setTimeout(function () { internalProcessBatchItems(); }, 0);\n        else\n            internalProcessBatchItems();\n    };\n    return dxWidgetsViewer;\n}(_widgets_viewer_base_1.WidgetsViewerBase));\nexports.dxWidgetsViewer = dxWidgetsViewer;\n"]},"metadata":{},"sourceType":"script"}