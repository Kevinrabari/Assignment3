{"ast":null,"code":"/**\n* DevExpress Analytics (core\\dragDrop\\_dragDropHandler.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DragDropHandler = void 0;\n\nvar ko = require(\"knockout\");\n\nrequire(\"jquery-ui/ui/widgets/draggable\");\n\nrequire(\"jquery-ui/ui/widgets/resizable\");\n\nrequire(\"jquery-ui/ui/widgets/selectable\");\n\nrequire(\"jquery-ui/ui/widgets/mouse\");\n\nvar utils_1 = require(\"../../serializer/utils\");\n\nvar size_1 = require(\"../elements/size\");\n\nvar _surfaceHelpers_1 = require(\"../internal/_surfaceHelpers\");\n\nvar _units_1 = require(\"../utils/_units\");\n\nvar DragDropHandler = function (_super) {\n  __extends(DragDropHandler, _super);\n\n  function DragDropHandler(surface, selection, undoEngine, snapHelper, dragHelperContent) {\n    var _this = _super.call(this) || this;\n\n    _this._size = new size_1.Size(0, 0);\n    _this.alwaysAlt = false;\n    _this.surface = surface;\n    _this.selection = selection;\n    _this.snapHelper = snapHelper;\n    _this.dragHelperContent = dragHelperContent;\n\n    _this.stopDrag = function (ui, draggable, event) {\n      undoEngine() && undoEngine().start();\n\n      _this.doStopDrag(ui, draggable, event);\n\n      undoEngine() && undoEngine().end();\n      snapHelper && snapHelper.deactivateSnapLines();\n    };\n\n    return _this;\n  }\n\n  DragDropHandler.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this.surface = null;\n    this.selection = null;\n    this.snapHelper = null;\n    this.dragHelperContent = null;\n  };\n\n  DragDropHandler.prototype.getTarget = function (event) {\n    return event['toElement'] || ko.dataFor(event.relatedTarget) && event.relatedTarget || event.originalEvent && event.originalEvent.target || null;\n  };\n\n  DragDropHandler.prototype._getAbsoluteSurfacePosition = function (ui) {\n    return {\n      left: ui.position.left - ui['delta'].left,\n      top: ui.position.top - ui['delta'].top\n    };\n  };\n\n  DragDropHandler.prototype.addControl = function (control, dropTargetSurface, size) {\n    var targetWidth = dropTargetSurface['width'] && dropTargetSurface['width']() || dropTargetSurface['_width'] && dropTargetSurface['_width']();\n    var underCursor = dropTargetSurface.underCursor();\n\n    if (underCursor.x < targetWidth) {\n      dropTargetSurface.getControlModel().addChild(control);\n\n      var controlSurface = _surfaceHelpers_1.findSurface(control);\n\n      if (!controlSurface) return;\n      var width = size.width(),\n          height = size.height();\n      var left = underCursor.x + width > targetWidth ? targetWidth - width - 1 : underCursor.x;\n      controlSurface.rect({\n        left: left,\n        top: Math.max(underCursor.y, 0),\n        width: width,\n        height: height\n      });\n      this.selection.initialize(controlSurface);\n    }\n  };\n\n  DragDropHandler.prototype.recalculateSize = function (size) {\n    var surface = ko.unwrap(this.surface);\n\n    this._size.width(_units_1.unitsToPixel(ko.unwrap(size.width) * surface.dpi() / 100, surface.measureUnit(), surface.zoom()));\n\n    this._size.height(_units_1.unitsToPixel(ko.unwrap(size.height) * surface.dpi() / 100, surface.measureUnit(), surface.zoom()));\n  };\n\n  DragDropHandler.prototype.helper = function (draggable, event) {\n    this.snapHelper && this.snapHelper.updateSnapLines(draggable || null);\n  };\n\n  DragDropHandler.prototype.canDrop = function (dropTarget, controlModel, metaData) {\n    var locked = dropTarget.locked;\n\n    if (metaData && metaData.canDrop) {\n      locked = locked || !metaData.canDrop(dropTarget, controlModel);\n    }\n\n    return !locked;\n  };\n\n  DragDropHandler.prototype.startDrag = function (draggable) {};\n\n  DragDropHandler.prototype.drag = function (event, ui) {\n    var needToActivateSnapLines = event.altKey !== true;\n\n    if (this.selection.dropTarget) {\n      var dropTarget = this.selection.dropTarget.getControlModel().getMetaData().isContainer ? this.selection.dropTarget : this.selection.dropTarget.parent || this.selection.dropTarget,\n          controlModel = ko.dataFor(event.target).getControlModel && ko.dataFor(event.target).getControlModel(),\n          metaData = controlModel && controlModel.getMetaData() || ko.dataFor(event.target).info;\n\n      if (this.canDrop(dropTarget, controlModel, metaData)) {\n        this.dragHelperContent && this.dragHelperContent.isLocked(false);\n      } else {\n        this.snapHelper && this.snapHelper.deactivateSnapLines();\n        needToActivateSnapLines = false;\n        this.dragHelperContent && this.dragHelperContent.isLocked(true);\n      }\n    }\n\n    if (needToActivateSnapLines) {\n      var position = this._getAbsoluteSurfacePosition(ui);\n\n      var snapDelta = this.snapHelper && this.snapHelper.activateSnapLines({\n        left: position.left,\n        top: position.top,\n        right: position.left + this._size.width(),\n        bottom: position.top + this._size.height()\n      });\n      ui.position.left -= snapDelta.left;\n      ui.position.top -= snapDelta.top;\n    }\n  };\n\n  DragDropHandler.prototype.doStopDrag = function (ui, draggable, event) {};\n\n  DragDropHandler.started = ko.observable(false);\n  return DragDropHandler;\n}(utils_1.Disposable);\n\nexports.DragDropHandler = DragDropHandler;","map":{"version":3,"sources":["/Users/kevinrabari/Desktop/Georgian College Work/1005_ Mobile Web Application/Assignment3/node_modules/@devexpress/analytics-core/core/dragDrop/_dragDropHandler.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","DragDropHandler","ko","require","utils_1","size_1","_surfaceHelpers_1","_units_1","_super","surface","selection","undoEngine","snapHelper","dragHelperContent","_this","_size","Size","alwaysAlt","stopDrag","ui","draggable","event","start","doStopDrag","end","deactivateSnapLines","dispose","getTarget","dataFor","relatedTarget","originalEvent","target","_getAbsoluteSurfacePosition","left","position","top","addControl","control","dropTargetSurface","size","targetWidth","underCursor","x","getControlModel","addChild","controlSurface","findSurface","width","height","rect","Math","max","y","initialize","recalculateSize","unwrap","unitsToPixel","dpi","measureUnit","zoom","helper","updateSnapLines","canDrop","dropTarget","controlModel","metaData","locked","startDrag","drag","needToActivateSnapLines","altKey","getMetaData","isContainer","parent","info","isLocked","snapDelta","activateSnapLines","right","bottom","started","observable","Disposable"],"mappings":"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","sourcesContent":["/**\n* DevExpress Analytics (core\\dragDrop\\_dragDropHandler.js)\n* Version:  22.1.3\n* Build date: Jun 14, 2022\n* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n* License: https://www.devexpress.com/Support/EULAs/universal.xml\n*/\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DragDropHandler = void 0;\nvar ko = require(\"knockout\");\nrequire(\"jquery-ui/ui/widgets/draggable\");\nrequire(\"jquery-ui/ui/widgets/resizable\");\nrequire(\"jquery-ui/ui/widgets/selectable\");\nrequire(\"jquery-ui/ui/widgets/mouse\");\nvar utils_1 = require(\"../../serializer/utils\");\nvar size_1 = require(\"../elements/size\");\nvar _surfaceHelpers_1 = require(\"../internal/_surfaceHelpers\");\nvar _units_1 = require(\"../utils/_units\");\nvar DragDropHandler = (function (_super) {\n    __extends(DragDropHandler, _super);\n    function DragDropHandler(surface, selection, undoEngine, snapHelper, dragHelperContent) {\n        var _this = _super.call(this) || this;\n        _this._size = new size_1.Size(0, 0);\n        _this.alwaysAlt = false;\n        _this.surface = surface;\n        _this.selection = selection;\n        _this.snapHelper = snapHelper;\n        _this.dragHelperContent = dragHelperContent;\n        _this.stopDrag = function (ui, draggable, event) {\n            undoEngine() && undoEngine().start();\n            _this.doStopDrag(ui, draggable, event);\n            undoEngine() && undoEngine().end();\n            snapHelper && snapHelper.deactivateSnapLines();\n        };\n        return _this;\n    }\n    DragDropHandler.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.surface = null;\n        this.selection = null;\n        this.snapHelper = null;\n        this.dragHelperContent = null;\n    };\n    DragDropHandler.prototype.getTarget = function (event) {\n        return event['toElement'] || (ko.dataFor(event.relatedTarget) && event.relatedTarget) || (event.originalEvent && event.originalEvent.target) || null;\n    };\n    DragDropHandler.prototype._getAbsoluteSurfacePosition = function (ui) {\n        return { left: ui.position.left - ui['delta'].left, top: ui.position.top - ui['delta'].top };\n    };\n    DragDropHandler.prototype.addControl = function (control, dropTargetSurface, size) {\n        var targetWidth = (dropTargetSurface['width'] && dropTargetSurface['width']()) || (dropTargetSurface['_width'] && dropTargetSurface['_width']());\n        var underCursor = dropTargetSurface.underCursor();\n        if (underCursor.x < targetWidth) {\n            dropTargetSurface.getControlModel().addChild(control);\n            var controlSurface = _surfaceHelpers_1.findSurface(control);\n            if (!controlSurface)\n                return;\n            var width = size.width(), height = size.height();\n            var left = (underCursor.x + width > targetWidth) ? (targetWidth - width - 1) : underCursor.x;\n            controlSurface.rect({ left: left, top: Math.max(underCursor.y, 0), width: width, height: height });\n            this.selection.initialize(controlSurface);\n        }\n    };\n    DragDropHandler.prototype.recalculateSize = function (size) {\n        var surface = ko.unwrap(this.surface);\n        this._size.width(_units_1.unitsToPixel(ko.unwrap(size.width) * surface.dpi() / 100, surface.measureUnit(), surface.zoom()));\n        this._size.height(_units_1.unitsToPixel(ko.unwrap(size.height) * surface.dpi() / 100, surface.measureUnit(), surface.zoom()));\n    };\n    DragDropHandler.prototype.helper = function (draggable, event) {\n        this.snapHelper && this.snapHelper.updateSnapLines(draggable || null);\n    };\n    DragDropHandler.prototype.canDrop = function (dropTarget, controlModel, metaData) {\n        var locked = dropTarget.locked;\n        if (metaData && metaData.canDrop) {\n            locked = locked || !metaData.canDrop(dropTarget, controlModel);\n        }\n        return !locked;\n    };\n    DragDropHandler.prototype.startDrag = function (draggable) { };\n    DragDropHandler.prototype.drag = function (event, ui) {\n        var needToActivateSnapLines = event.altKey !== true;\n        if (this.selection.dropTarget) {\n            var dropTarget = this.selection.dropTarget.getControlModel().getMetaData().isContainer ? this.selection.dropTarget : (this.selection.dropTarget.parent || this.selection.dropTarget), controlModel = ko.dataFor(event.target).getControlModel && ko.dataFor(event.target).getControlModel(), metaData = controlModel && controlModel.getMetaData() || ko.dataFor(event.target).info;\n            if (this.canDrop(dropTarget, controlModel, metaData)) {\n                this.dragHelperContent && this.dragHelperContent.isLocked(false);\n            }\n            else {\n                this.snapHelper && this.snapHelper.deactivateSnapLines();\n                needToActivateSnapLines = false;\n                this.dragHelperContent && this.dragHelperContent.isLocked(true);\n            }\n        }\n        if (needToActivateSnapLines) {\n            var position = this._getAbsoluteSurfacePosition(ui);\n            var snapDelta = this.snapHelper && this.snapHelper.activateSnapLines({\n                left: position.left,\n                top: position.top,\n                right: position.left + this._size.width(),\n                bottom: position.top + this._size.height()\n            });\n            ui.position.left -= snapDelta.left;\n            ui.position.top -= snapDelta.top;\n        }\n    };\n    DragDropHandler.prototype.doStopDrag = function (ui, draggable, event) { };\n    DragDropHandler.started = ko.observable(false);\n    return DragDropHandler;\n}(utils_1.Disposable));\nexports.DragDropHandler = DragDropHandler;\n"]},"metadata":{},"sourceType":"script"}